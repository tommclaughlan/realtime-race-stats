!function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";var r=t("angular");t("@uirouter/angularjs"),t("angularjs-slider"),t("angularjs-gauge"),t("angular-nvd3");var i=r.module("racing",["ui.router","rzModule","angularjs-gauge","nvd3"]);t("./diffusion"),t("./connecting"),t("./track"),t("./race"),t("./teams"),t("./leaderboard"),t("./clock"),t("./stats"),i.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/connecting"),t.state("connecting",{url:"/connecting",templateUrl:"views/connecting.html",controller:"ConnectingController"}),t.state("race",{url:"/race",templateUrl:"views/race.html",controller:"RaceController"})}])},{"./clock":2,"./connecting":3,"./diffusion":4,"./leaderboard":5,"./race":6,"./stats":7,"./teams":8,"./track":9,"@uirouter/angularjs":10,angular:86,"angular-nvd3":84,"angularjs-gauge":87,"angularjs-slider":88}],2:[function(t,e,n){var r=t("angular").module("racing");r.factory("ClockModel",function(){var t={paused:!1,live:!0,playback:!1,replayTick:50};return t.togglePause=function(){t.paused=!t.paused},t.setPaused=function(e){t.paused=e},t.setLive=function(e){t.live=e},t.setPlayback=function(e){t.playback=e},t.isPlayback=function(){return t.playback},t.isPaused=function(){return t.paused},t.isLive=function(){return t.live},t.setStartTime=function(e){t.start=e},t.setViewTime=function(e){t.view=e},t.setLiveTime=function(e){t.latest=e},t.getStartTime=function(){return t.start},t.getViewTime=function(){return t.view},t.getLiveTime=function(){return t.latest},t}),r.controller("ClockController",["$scope","$interval","ClockModel","Diffusion","CarsModel",function(t,e,n,r,i){t.isPaused=n.isPaused,t.backToLive=function(){n.setLive(!0),n.setPaused(!1),n.setPlayback(!1)},t.startPlayback=function(){n.setPlayback(!0),n.setPaused(!1)},t.togglePause=function(){n.togglePause(),n.setPlayback(!n.isPaused()),n.setLive(!1)},t.slider={value:1,options:{floor:0,ceil:1,onStart:function(){n.setLive(!1),n.setPaused(!0)},step:50,translate:function(t){return new Date(t).toLocaleTimeString()}}};var o=function(){r.session().timeseries.rangeQuery().fromStart().next(1).as(r.datatypes.json()).selectFrom("race/updates").then(function(t){n.setStartTime(t.events[0].timestamp)},function(t){console.log(t)}),!n.isPlayback()||n.isPaused()||n.isLive()||(t.slider.value+=n.replayTick)};t.$watch(function(){return n.getStartTime()+" "+n.getLiveTime()},function(){t.slider.options.floor=n.getStartTime(),t.slider.options.ceil=n.getLiveTime(),!n.isLive()&&t.slider.value<n.getStartTime()?t.slider.value=n.getStartTime():n.isLive()&&!n.isPaused()&&(t.slider.value=n.getLiveTime())}),t.$watch(function(){return t.slider.value},function(){n.setViewTime(t.slider.value),n.isLive()||r.session().timeseries.rangeQuery().from(new Date(n.getViewTime())).next(1).as(r.datatypes.json()).selectFrom("race/updates").then(function(t){t.events[0].value.get().forEach(function(t){i.updateCarPosition(t)})},function(t){console.log(t)})}),r.session()&&(e(o,n.replayTick),o())}])},{angular:86}],3:[function(t,e,n){t("angular").module("racing").controller("ConnectingController",["$scope","$state","$timeout","Diffusion","TrackModel","CarsModel",function(t,e,n,r,i,o){r.connect("localhost:8080",function(){r.session().stream("race").asType(r.datatypes.string()).on("value",function(t,n,r){i.init(r),e.go("race")}),r.session().stream("race/teams").asType(r.datatypes.int64()).on("value",function(t,e,n){for(var i=0;i<n;++i)r.session().stream("race/teams/"+i).asType(r.datatypes.string()).on("value",function(t,e,n){var r=t.split("/"),i=parseInt(r[2],10);o.addTeam(i,n)}),r.session().stream("race/teams/"+i+"/cars").asType(r.datatypes.int64()).on("value",function(t,e,n){for(var i=t.split("/"),s=parseInt(i[2],10),a=0;a<n;++a)r.session().stream("race/teams/"+s+"/cars/"+a).asType(r.datatypes.string()).on("value",function(t,e,n){var r=t.split("/"),i=parseInt(r[4],10);o.addCar(i,n,s)})})}),r.session().subscribe("race"),r.session().subscribe("race/teams"),r.session().subscribe("?race/teams/.*//")})}])},{angular:86}],4:[function(t,e,n){var r=t("angular").module("racing"),i=t("diffusion");r.factory("Diffusion",["$state",function(t){var e={_session:null};return e.connect=function(t,n){i.connect(t).then(function(t){e._session=t,n()})},e.session=function(){return this._session&&this._session.isConnected()?this._session:(t.go("connecting"),!1)},e.datatypes=i.datatypes,e}])},{angular:86,diffusion:118}],5:[function(t,e,n){t("angular").module("racing").controller("LeaderboardController",["$scope","CarsModel",function(t,e){t.getOrderedCars=function(){return e.getCars().sort(function(t,e){return t.pos-e.pos})},t.selectCar=function(t,n){var r=e.getSelectedCar();r&&r.id===t&&r.teamid===n?e.unselectCar(t,n):e.selectCar(t,n)},t.selectedCar=function(t,n){var r=e.getSelectedCar();return!!r&&(r.id===t&&r.teamid===n)},t.carSelected=function(){return!!e.getSelectedCar()},t.getTeamName=e.getTeamName,t.getTeamClass=e.getTeamClass}])},{angular:86}],6:[function(t,e,n){var r=t("angular").module("racing");r.directive("raceMap",function(){return{restrict:"E",templateUrl:"views/track.html"}}),r.directive("leaderboard",function(){return{restrict:"E",templateUrl:"views/leaderboard.html",controller:"LeaderboardController"}}),r.directive("scrubber",function(){return{restrict:"E",templateUrl:"views/scrubber.html",controller:"ClockController"}}),r.directive("statisticsPanel",function(){return{restrict:"E",templateUrl:"views/stats.html",controller:"StatsController"}}),r.controller("RaceController",["$scope","$interval","TrackModel","Diffusion","CarsModel","ClockModel",function(t,e,n,r,i,o){t.getTrack=function(){return n.getPath()},t.getDrawables=function(){return{path:n.getPath(),cars:i.getCars(),startingLine:n.getStartingLine()}},r.session()&&(r.session().stream("race/updates").asType(r.datatypes.json()).on("value",function(e,r,s){t.$apply(function(){var t=s.value.get(),e=s.timestamp;!o.isPaused()&&o.isLive()&&n.properties&&t.forEach(function(t){i.updateCarPosition(t)}),o.setLiveTime(e)})}),r.session().subscribe("race/updates"))}])},{angular:86}],7:[function(t,e,n){var r=t("angular").module("racing");r.factory("StatsModel",function(){var t={options:{chart:{type:"lineChart",height:280,margin:{top:20,right:20,bottom:40,left:55},useInteractiveGuideline:!0,dispatch:{},xAxis:{axisLabel:"Lap"},yAxis:{axisLabel:"Lap Time",axisLabelDistance:-10}},legend:{enable:!1},title:{enable:!1},subtitle:{enable:!1},caption:{enable:!1}},data:[{values:[],key:"Lap Times",color:"#f15500",area:!1}]};return t.init=function(e){t.clear(),e.forEach(function(e,n){t.data[0].values.push({x:n+1,y:e.toFixed(3)})})},t.getLaps=function(){return t.data},t.clear=function(){t.data[0].values=[]},t.dummy=function(){return{then:function(t,e){t([34.123,33.109,34.893,31.513,31.301,29.985,29.994,28.964,29.543,29.859])}}},t}),r.controller("StatsController",["$scope","CarsModel","StatsModel","Diffusion",function(t,e,n,r){t.stats=!1,t.data=n.getLaps(),t.carSelected=function(){return!!e.getSelectedCar()},t.getCar=function(){return e.getSelectedCar()},t.options=n.options,t.toggleStats=function(){t.stats=!t.stats,i()};var i=function(){if(t.stats){var i=e.getSelectedCar(),o={id:""+i.id,teamid:""+i.teamid};r.session().messages.sendRequest("race",o).then(function(e){n.init(e.get()),t.data=n.getLaps()},function(t){console.log(t)})}};t.$watch(function(){return e.getSelectedCar()?e.getSelectedCar().laps:0},i),t.$watch(function(){return e.getSelectedCar()?e.getSelectedCar().id+" "+e.getSelectedCar().teamid:"0"},i)}])},{angular:86}],8:[function(t,e,n){t("angular").module("racing").factory("CarsModel",["Diffusion","TrackModel",function(t,e){var n={teams:[],cars:[],toDraw:[],colours:["cc0066","00aaef","00b956","ffc600","f64d3c","3a3335","fdf0d5","eb5e55","710627","2f1847"]};return n.addCar=function(t,e,n){this.teams[n].cars[t]={name:e,colour:this.colours[n]},this.cars=this.cars.filter(function(e){return!(e.id===t&&e.teamid===n)}),this.cars.push({name:e,colour:"#"+this.colours[n],class:"col-"+this.colours[n],team:this.teams[n].name,teamid:n,id:t,loc:{x:0,y:0},pos:this.cars.length,speed:120,selected:!1})},n.addTeam=function(t,e){this.teams[t]={name:e,cars:[]}},n.getCar=function(t,e){return n.cars.find(function(n){return n.id===t&&n.teamid===e})},n.getCars=function(){return n.cars},n.updateCarPosition=function(t){var r=t.id,i=t.team,o=t.loc,s=t.pos,a=t.lap,u=t.speed,c=t.t,l=t.pt,f=t.td,d=n.getCar(r,i),h=e.getPositionAtLength(o);d.loc=h,d.pos=s,d.laps=a,d.speed=u,d.lap=c,d.last_lap=l,d.lap_delta=f},n.getSelectedCar=function(){return n.cars.find(function(t){return t.selected})},n.selectCar=function(t,e){n.getSelectedCar()&&(n.getSelectedCar().selected=!1),n.getCar(t,e).selected=!0},n.unselectCar=function(t,e){n.getCar(t,e).selected=!1},n}])},{angular:86}],9:[function(t,e,n){var r=t("angular").module("racing");r.directive("track",function(){return{restrict:"A",scope:{drawables:"@drawables"},link:function(t,e,n){var r=0;n.$observe("drawables",function(t){var n=(t=JSON.parse(t)).path,i=e[0].getContext("2d");i.clearRect(0,0,i.canvas.width,i.canvas.height);var o=new Path2D(n);i.stroke(o),r<4&&(function(t,e){void 0===e&&(e=15);for(var n=1/0,r=1/0,i=-1/0,o=-1/0,s=t.canvas.width,a=t.canvas.height,u=t.getImageData(0,0,s,a).data,c=0;c<s;++c)for(var l=0;l<a;++l)u[4*(s*l+c)+3]>e&&(c>i&&(i=c),c<n&&(n=c),l>o&&(o=l),l<r&&(r=l));var f=i-n,d=o-r;f>0&&d>0&&(t.canvas.width=1.2*f,t.canvas.height=1.3*d)}(i,15),r++),i.strokeStyle="#aaa",i.lineWidth=40,i.stroke(o);var s=t.startingLine;i.beginPath(),i.strokeStyle="#ffffff",i.moveTo(s.x0,s.y0),i.lineTo(s.x1,s.y1),i.stroke();t.cars.forEach(function(t){i.beginPath(),i.fillStyle=t.colour,i.arc(t.loc.x,t.loc.y,10,0,2*Math.PI),i.fill(),t.selected?(i.strokeStyle="#f1f1f1",i.lineWidth=4):(i.strokeStyle="#444444",i.lineWidth=2),i.stroke()})})}}}),r.factory("TrackModel",["$http",function(e){var n=t("svg-path-properties"),r={path:"m 0,0 0,0",properties:null};return r.init=function(t){e.get(t).then(function(t){r.path=t.data.rawPath,r.properties=n.svgPathProperties(r.path)})},r.getPath=function(){return r.path},r.getPositionAtLength=function(t){var e=t*r.properties.getTotalLength();return r.properties.getPointAtLength(e)},r.getStartingLine=function(){if(r.properties){var t=r.properties.getTangentAtLength(0),e=r.properties.getPointAtLength(0);return{x0:e.x-t.x,y0:e.y-t.y,x1:e.x+t.x,y1:e.y+t.y}}return{x0:0,y0:0,x1:0,y1:0}},r}])},{angular:86,"svg-path-properties":507}],10:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("angular"),t("@uirouter/core")):"function"==typeof define&&define.amd?define(["exports","angular","@uirouter/core"],i):i(r["@uirouter/angularjs"]={},r.angular,r["@uirouter/core"])}(this,function(t,e,n){"use strict";function r(){var t=null;return function(e,r){return t=t||n.services.$injector.get("$templateFactory"),[new E(e,r,t)]}}function i(t){if(!t.parent)return{};var e=["component","bindings","componentProvider"],r=["templateProvider","templateUrl","template","notify","async"].concat(["controller","controllerProvider","controllerAs","resolveAs"]),i=e.concat(r);if(n.isDefined(t.views)&&w(i,t))throw new Error("State '"+t.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+i.filter(function(e){return n.isDefined(t[e])}).join(", "));var o={},s=t.views||{$default:n.pick(t,i)};return n.forEach(s,function(i,s){if(s=s||"$default",n.isString(i)&&(i={component:i}),i=n.extend({},i),w(e,i)&&w(r,i))throw new Error("Cannot combine: "+e.join("|")+" with: "+r.join("|")+" in stateview: '"+s+"@"+t.name+"'");i.resolveAs=i.resolveAs||"$resolve",i.$type="ng1",i.$context=t,i.$name=s;var a=n.ViewService.normalizeUIViewTarget(i.$context,i.$name);i.$uiViewName=a.uiViewName,i.$uiViewContextAnchor=a.uiViewContextAnchor,o[s]=i}),o}function o(t){function e(t,e,n,r,i,s){return o._runtimeServices(r,t,n,e),delete L.router,delete L.$get,L}(L=this.router=new n.UIRouter).stateProvider=new T(L.stateRegistry,L.stateService),L.stateRegistry.decorator("views",i),L.stateRegistry.decorator("onExit",k("onExit")),L.stateRegistry.decorator("onRetain",k("onRetain")),L.stateRegistry.decorator("onEnter",k("onEnter")),L.viewService._pluginapi._viewConfigFactory("ng1",r());var o=L.locationService=L.locationConfig=new C(t);return C.monkeyPatchPathParameterType(L),L.router=L,L.$get=e,e.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],L}function s(t,e,r){n.services.$injector=t,n.services.$q=e,r.stateRegistry.get().map(function(t){return t.$$state().resolvables}).reduce(n.unnestR,[]).filter(function(t){return"deferred"===t.deps}).forEach(function(e){return e.deps=t.annotate(e.resolveFn,t.strictDi)})}function a(t){t.$watch(function(){n.trace.approximateDigests++})}function u(t){var e,n=t.match(/^\s*({[^}]*})\s*$/);if(n&&(t="("+n[1]+")"),!(e=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==e.length)throw new Error("Invalid state ref '"+t+"'");return{state:e[1]||null,paramExpr:e[3]||null}}function c(t){var e=t.parent().inheritedData("$uiView"),r=n.parse("$cfg.path")(e);return r?n.tail(r).state.name:void 0}function l(t,e,r){var i=r.uiState||t.current.name,o=n.extend(function(t,e){return{relative:c(t)||e.$current,inherit:!0,source:"sref"}}(e,t),r.uiStateOpts||{}),s=t.href(i,r.uiStateParams,o);return{uiState:i,uiStateParams:r.uiStateParams,uiStateOpts:o,href:s}}function f(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),n="FORM"===t[0].nodeName;return{attr:n?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!n}}function d(t,e,n,r,i){return function(o){var s=o.which||o.button,a=i();if(!(s>1||o.ctrlKey||o.metaKey||o.shiftKey||t.attr("target"))){var u=n(function(){e.go(a.uiState,a.uiStateParams,a.uiStateOpts)});o.preventDefault();var c=r.isAnchor&&!a.href?1:0;o.preventDefault=function(){c--<=0&&n.cancel(u)}}}}function h(t,e,r,i){var o;i&&(o=i.events),n.isArray(o)||(o=["click"]);for(var s=t.on?"on":"bind",a=0,u=o;a<u.length;a++){var c=u[a];t[s](c,r)}e.$on("$destroy",function(){for(var e=t.off?"off":"unbind",n=0,i=o;n<i.length;n++){var s=i[n];t[e](s,r)}})}function p(t){var e=function(e,n,r){return t.is(e,n,r)};return e.$stateful=!0,e}function v(t){var e=function(e,n,r){return t.includes(e,n,r)};return e.$stateful=!0,e}function g(t,e,r,i,o,s){var a=n.parse("viewDecl.controllerAs"),u=n.parse("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(i){var s=i.html();return i.empty(),function(i,c){var l=c.data("$uiView");if(!l)return c.html(s),void t(c.contents())(i);var f=l.$cfg||{viewDecl:{},getTemplate:n.noop},d=f.path&&new n.ResolveContext(f.path);c.html(f.getTemplate(c,d)||s),n.trace.traceUIViewFill(l.$uiView,c.html());var h=t(c.contents()),p=f.controller,v=a(f),g=u(f),y=d&&V(d);if(i[g]=y,p){var w=e(p,n.extend({},y,{$scope:i,$element:c}));v&&(i[v]=w,i[v][g]=y),c.data("$ngControllerController",w),c.children().data("$ngControllerController",w),m(o,r,w,i,f)}if(n.isString(f.viewDecl.component))var x=f.viewDecl.component,E=n.kebobString(x),_=new RegExp("^(x-|data-)?"+E+"$","i"),S=i.$watch(function(){var t=[].slice.call(c[0].children).filter(function(t){return t&&t.tagName&&_.exec(t.tagName)});return t&&b.element(t).data("$"+x+"Controller")},function(t){t&&(m(o,r,t,i,f),S())});h(i)}}}}function m(t,e,r,i,o){!n.isFunction(r.$onInit)||o.viewDecl.component&&B||r.$onInit();var s=n.tail(o.path).state.self,a={bind:r};if(n.isFunction(r.uiOnParamsChanged)){var u=new n.ResolveContext(o.path).getResolvable("$transition$").data;i.$on("$destroy",e.onSuccess({},function(t){if(t!==u&&-1===t.exiting().indexOf(s)){var e=t.params("to"),i=t.params("from"),o=t.treeChanges().to.map(function(t){return t.paramSchema}).reduce(n.unnestR,[]),a=t.treeChanges().from.map(function(t){return t.paramSchema}).reduce(n.unnestR,[]),c=o.filter(function(t){var n=a.indexOf(t);return-1===n||!a[n].type.equals(e[t.id],i[t.id])});if(c.length){var l=c.map(function(t){return t.id}),f=n.filter(e,function(t,e){return-1!==l.indexOf(e)});r.uiOnParamsChanged(f,t)}}},a))}if(n.isFunction(r.uiCanExit)){var c=j++,l="_uiCanExitIds",f=function(t){return!!t&&(t[l]&&!0===t[l][c]||f(t.redirectedFrom()))},d={exiting:s.name};i.$on("$destroy",e.onBefore(d,function(e){var n,i=e[l]=e[l]||{};return f(e)||(n=t.when(r.uiCanExit(e))).then(function(t){return i[c]=!1!==t}),n},a))}}var y=angular,b=e&&e.module?e:y,w=function(t,e){return t.reduce(function(t,r){return t||n.isDefined(e[r])},!1)},x=0,E=function(){function t(t,e,n){var r=this;this.path=t,this.viewDecl=e,this.factory=n,this.$id=x++,this.loaded=!1,this.getTemplate=function(t,e){return r.component?r.factory.makeComponentTemplate(t,e,r.component,r.viewDecl.bindings):r.template}}return t.prototype.load=function(){var t=this,e=n.services.$q,r=new n.ResolveContext(this.path),i=this.path.reduce(function(t,e){return n.extend(t,e.paramValues)},{}),o={template:e.when(this.factory.fromConfig(this.viewDecl,i,r)),controller:e.when(this.getController(r))};return e.all(o).then(function(e){return n.trace.traceViewServiceEvent("Loaded",t),t.controller=e.controller,n.extend(t,e.template),t})},t.prototype.getController=function(t){var e=this.viewDecl.controllerProvider;if(!n.isInjectable(e))return this.viewDecl.controller;var r=n.services.$injector.annotate(e),i=n.isArray(e)?n.tail(e):e;return new n.Resolvable("",i,r).get(t)},t}(),_=function(){function t(){var t=this;this._useHttp=b.version.minor<3,this.$get=["$http","$templateCache","$injector",function(e,n,r){return t.$templateRequest=r.has&&r.has("$templateRequest")&&r.get("$templateRequest"),t.$http=e,t.$templateCache=n,t}]}return t.prototype.useHttpService=function(t){this._useHttp=t},t.prototype.fromConfig=function(t,e,r){var i=function(t){return n.services.$q.when(t).then(function(t){return{template:t}})},o=function(t){return n.services.$q.when(t).then(function(t){return{component:t}})};return n.isDefined(t.template)?i(this.fromString(t.template,e)):n.isDefined(t.templateUrl)?i(this.fromUrl(t.templateUrl,e)):n.isDefined(t.templateProvider)?i(this.fromProvider(t.templateProvider,e,r)):n.isDefined(t.component)?o(t.component):n.isDefined(t.componentProvider)?o(this.fromComponentProvider(t.componentProvider,e,r)):i("<ui-view></ui-view>")},t.prototype.fromString=function(t,e){return n.isFunction(t)?t(e):t},t.prototype.fromUrl=function(t,e){return n.isFunction(t)&&(t=t(e)),null==t?null:this._useHttp?this.$http.get(t,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(t){return t.data}):this.$templateRequest(t)},t.prototype.fromProvider=function(t,e,r){var i=n.services.$injector.annotate(t),o=n.isArray(t)?n.tail(t):t;return new n.Resolvable("",o,i).get(r)},t.prototype.fromComponentProvider=function(t,e,r){var i=n.services.$injector.annotate(t),o=n.isArray(t)?n.tail(t):t;return new n.Resolvable("",o,i).get(r)},t.prototype.makeComponentTemplate=function(t,e,r,i){i=i||{};var o=b.version.minor>=3?"::":"",s=function(t){var e=n.kebobString(t);return/^(x|data)-/.exec(e)?"x-"+e:e},a=function(t){var e=n.services.$injector.get(t+"Directive");if(!e||!e.length)throw new Error("Unable to find component named '"+t+"'");return e.map(S).reduce(n.unnestR,[])}(r).map(function(r){var a=r.name,u=r.type,c=s(a);if(t.attr(c)&&!i[a])return c+"='"+t.attr(c)+"'";var l=i[a]||a;if("@"===u)return c+"='{{"+o+"$resolve."+l+"}}'";if("&"===u){var f=e.getResolvable(l),d=f&&f.data,h=d&&n.services.$injector.annotate(d)||[];return c+"='$resolve."+l+(n.isArray(d)?"["+(d.length-1)+"]":"")+"("+h.join(",")+")'"}return c+"='"+o+"$resolve."+l+"'"}).join(" "),u=s(r);return"<"+u+" "+a+"></"+u+">"},t}(),S=function(t){return n.isObject(t.bindToController)?$(t.bindToController):$(t.scope)},$=function(t){return Object.keys(t||{}).map(function(e){return[e,/^([=<@&])[?]?(.*)/.exec(t[e])]}).filter(function(t){return n.isDefined(t)&&n.isArray(t[1])}).map(function(t){return{name:t[1][2]||t[0],type:t[1][1]}})},T=function(){function t(e,r){this.stateRegistry=e,this.stateService=r,n.createProxyFunctions(n.val(t.prototype),this,n.val(this))}return t.prototype.decorator=function(t,e){return this.stateRegistry.decorator(t,e)||this},t.prototype.state=function(t,e){return n.isObject(t)?e=t:e.name=t,this.stateRegistry.register(e),this},t.prototype.onInvalid=function(t){return this.stateService.onInvalid(t)},t}(),k=function(t){return function(e,r){var i=e[t],o="onExit"===t?"from":"to";return i?function(t,e){var r=new n.ResolveContext(t.treeChanges(o)),s=n.extend(V(r),{$state$:e,$transition$:t});return n.services.$injector.invoke(i,this,s)}:void 0}},C=function(){function t(t){this._urlListeners=[],this.$locationProvider=t;var e=n.val(t);n.createProxyFunctions(e,this,e,["hashPrefix"])}return t.prototype.dispose=function(){},t.prototype.onChange=function(t){var e=this;return this._urlListeners.push(t),function(){return n.removeFrom(e._urlListeners)(t)}},t.prototype.html5Mode=function(){var t=this.$locationProvider.html5Mode();return(t=n.isObject(t)?t.enabled:t)&&this.$sniffer.history},t.prototype.url=function(t,e,n){return void 0===e&&(e=!1),t&&this.$location.url(t),e&&this.$location.replace(),n&&this.$location.state(n),this.$location.url()},t.prototype._runtimeServices=function(t,e,r,i){var o=this;this.$location=e,this.$sniffer=r,t.$on("$locationChangeSuccess",function(t){return o._urlListeners.forEach(function(e){return e(t)})});var s=n.val(e),a=n.val(i);n.createProxyFunctions(s,this,s,["replace","path","search","hash"]),n.createProxyFunctions(s,this,s,["port","protocol","host"]),n.createProxyFunctions(a,this,a,["baseHref"])},t.monkeyPatchPathParameterType=function(t){var e=t.urlMatcherFactory.type("path");e.encode=function(t){return null!=t?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t},e.decode=function(t){return null!=t?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t}},t}(),A=function(){function t(t){this._router=t,this._urlRouter=t.urlRouter}return t.prototype.$get=function(){var t=this._urlRouter;return t.update(!0),t.interceptDeferred||t.listen(),t},t.prototype.rule=function(t){var e=this;if(!n.isFunction(t))throw new Error("'rule' must be a function");var r=new n.BaseUrlRule(function(){return t(n.services.$injector,e._router.locationService)},n.identity);return this._urlRouter.rule(r),this},t.prototype.otherwise=function(t){var e=this,r=this._urlRouter;if(n.isString(t))r.otherwise(t);else{if(!n.isFunction(t))throw new Error("'rule' must be a string or function");r.otherwise(function(){return t(n.services.$injector,e._router.locationService)})}return this},t.prototype.when=function(e,r){return(n.isArray(r)||n.isFunction(r))&&(r=t.injectableHandler(this._router,r)),this._urlRouter.when(e,r),this},t.injectableHandler=function(t,e){return function(r){return n.services.$injector.invoke(e,null,{$match:r,$stateParams:t.globals.params})}},t.prototype.deferIntercept=function(t){this._urlRouter.deferIntercept(t)},t}();b.module("ui.router.angular1",[]);var R=b.module("ui.router.init",[]),M=b.module("ui.router.util",["ng","ui.router.init"]),I=b.module("ui.router.router",["ui.router.util"]),O=b.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),N=b.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),L=(b.module("ui.router.compat",["ui.router"]),null);o.$inject=["$locationProvider"];var D=function(t){return["$uiRouterProvider",function(e){var n=e.router[t];return n.$get=function(){return n},n}]};s.$inject=["$injector","$q","$uiRouter"];a.$inject=["$rootScope"],R.provider("$uiRouter",o),I.provider("$urlRouter",["$uiRouterProvider",function(t){return t.urlRouterProvider=new A(t)}]),M.provider("$urlService",D("urlService")),M.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return L.urlMatcherFactory}]),M.provider("$templateFactory",function(){return new _}),O.provider("$stateRegistry",D("stateRegistry")),O.provider("$uiRouterGlobals",D("globals")),O.provider("$transitions",D("transitionService")),O.provider("$state",["$uiRouterProvider",function(){return n.extend(L.stateProvider,{$get:function(){return L.stateService}})}]),O.factory("$stateParams",["$uiRouter",function(t){return t.globals.params}]),N.factory("$view",function(){return L.viewService}),N.service("$trace",function(){return n.trace}),N.run(a),M.run(["$urlMatcherFactory",function(t){}]),O.run(["$state",function(t){}]),I.run(["$urlRouter",function(t){}]),R.run(s);var P,V=function(t){return t.getTokens().filter(n.isString).map(function(e){var n=t.getResolvable(e);return[e,"NOWAIT"===t.getPolicy(n).async?n.promise:n.data]}).reduce(n.applyPairs,{})};P=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,s,a){function c(){var t=b();m&&m(),g&&(m=g.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&s.$set(v.attr,t.href)}var p,v=f(o),g=a[1]||a[0],m=null,y={},b=function(){return l(r,o,y)},w=u(s.uiSref);y.uiState=w.state,y.uiStateOpts=s.uiSrefOpts?i.$eval(s.uiSrefOpts):{},w.paramExpr&&(i.$watch(w.paramExpr,function(t){y.uiStateParams=n.extend({},t),c()},!0),y.uiStateParams=n.extend({},i.$eval(w.paramExpr))),c(),i.$on("$destroy",t.stateRegistry.onStatesChanged(c)),i.$on("$destroy",t.transitionService.onSuccess({},c)),v.clickable&&(p=d(o,r,e,v,b),h(o,i,p,y.uiStateOpts))}}}];var q;q=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,s,a){function u(){var t=y();g&&g(),v&&(g=v.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&s.$set(p.attr,t.href)}var c,p=f(o),v=a[1]||a[0],g=null,m={},y=function(){return l(r,o,m)},b=["uiState","uiStateParams","uiStateOpts"],w=b.reduce(function(t,e){return t[e]=n.noop,t},{});b.forEach(function(t){m[t]=s[t]?i.$eval(s[t]):null,s.$observe(t,function(e){w[t](),w[t]=i.$watch(e,function(e){m[t]=e,u()},!0)})}),u(),i.$on("$destroy",t.stateRegistry.onStatesChanged(u)),i.$on("$destroy",t.transitionService.onSuccess({},u)),p.clickable&&(c=d(o,r,e,p,y),h(o,i,c,m.uiStateOpts))}}}];var F;F=["$state","$stateParams","$interpolate","$uiRouter",function(t,e,r,i){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,o,s){function a(t){t.promise.then(f,n.noop)}function l(e,r,i){var s={state:t.get(e,c(o))||{name:e},params:r,activeClass:i};return p.push(s),function(){n.removeFrom(p)(s)}}function f(){var r=function(t){return t.split(/\s/).filter(n.identity)},i=function(t){return t.map(function(t){return t.activeClass}).map(r).reduce(n.unnestR,[])},s=i(p).concat(r(d)).reduce(n.uniqR,[]),a=i(p.filter(function(e){return t.includes(e.state.name,e.params)})),u=!!p.filter(function(e){return t.is(e.state.name,e.params)}).length?r(d):[],c=a.concat(u).reduce(n.uniqR,[]),l=s.filter(function(t){return!n.inArray(c,t)});e.$evalAsync(function(){c.forEach(function(t){return o.addClass(t)}),l.forEach(function(t){return o.removeClass(t)})})}var d,h,p=[];d=r(s.uiSrefActiveEq||"",!1)(e);try{h=e.$eval(s.uiSrefActive)}catch(t){}h=h||r(s.uiSrefActive||"",!1)(e),n.isObject(h)&&n.forEach(h,function(t,r){if(n.isString(t)){var i=u(t);l(i.state,e.$eval(i.paramExpr),r)}}),this.$$addStateInfo=function(t,e){if(!(n.isObject(h)&&p.length>0)){var r=l(t,e,h);return f(),r}},e.$on("$stateChangeSuccess",f),e.$on("$destroy",i.transitionService.onStart({},a)),i.globals.transition&&a(i.globals.transition),f()}]}}],b.module("ui.router.state").directive("uiSref",P).directive("uiSrefActive",F).directive("uiSrefActiveEq",F).directive("uiState",q),p.$inject=["$state"],v.$inject=["$state"],b.module("ui.router.state").filter("isState",p).filter("includedByState",v);var U;U=["$view","$animate","$uiViewScroll","$interpolate","$q",function(t,e,r,i,o){var s={$cfg:{viewDecl:{$context:t._pluginapi._rootViewContext()}},$uiView:{}},a={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(u,c,l){return function(u,c,f){function d(t){var e=u.$new(),i=o.defer(),s=o.defer(),a={$cfg:t,$uiView:$},f={$animEnter:i.promise,$animLeave:s.promise,$$animLeave:s};e.$emit("$viewContentLoading",S);var d=l(e,function(t){t.data("$uiViewAnim",f),t.data("$uiView",a),w.enter(t,c,function(){i.resolve(),v&&v.$emit("$viewContentAnimationEnded"),(n.isDefined(y)&&!y||u.$eval(y))&&r(t)}),function(){if(h&&(n.trace.traceUIViewEvent("Removing (previous) el",h.data("$uiView")),h.remove(),h=null),v&&(n.trace.traceUIViewEvent("Destroying scope",$),v.$destroy(),v=null),p){var t=p.data("$uiViewAnim");n.trace.traceUIViewEvent("Animate out",t),w.leave(p,function(){t.$$animLeave.resolve(),h=null}),h=p,p=null}}()});p=d,(v=e).$emit("$viewContentLoaded",t||x),v.$eval(m)}var h,p,v,g,m=f.onload||"",y=f.autoscroll,w={enter:function(t,n,r){b.version.minor>2?e.enter(t,null,n).then(r):e.enter(t,null,n,r)},leave:function(t,n){b.version.minor>2?e.leave(t).then(n):e.leave(t,n)}},x=void 0,_=c.inheritedData("$uiView")||s,S=i(f.uiView||f.name||"")(u)||"$default",$={$type:"ng1",id:a.count++,name:S,fqn:_.$uiView.fqn?_.$uiView.fqn+"."+S:S,config:null,configUpdated:function(t){(!t||t instanceof E)&&(function(t,e){return t===e}(x,t)||(n.trace.traceUIViewConfigUpdated($,t&&t.viewDecl&&t.viewDecl.$context),x=t,d(t)))},get creationContext(){var t=n.parse("$cfg.viewDecl.$context")(_),e=n.parse("$uiView.creationContext")(_);return t||e}};n.trace.traceUIViewEvent("Linking",$),c.data("$uiView",{$uiView:$}),d(),g=t.registerUIView($),u.$on("$destroy",function(){n.trace.traceUIViewEvent("Destroying/Unregistering",$),g()})}}};return a}],g.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var B="function"==typeof b.module("ui.router").component,j=0;b.module("ui.router.state").directive("uiView",U),b.module("ui.router.state").directive("uiView",g),b.module("ui.router.state").provider("$uiViewScroll",function(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){return n(function(){t[0].scrollIntoView()},0,!1)}}]});t.default="ui.router",t.core=n,t.watchDigests=a,t.getLocals=V,t.getNg1ViewConfigFactory=r,t.ng1ViewsBuilder=i,t.Ng1ViewConfig=E,t.StateProvider=T,t.UrlRouterProvider=A,Object.keys(n).forEach(function(e){t[e]=n[e]}),Object.defineProperty(t,"__esModule",{value:!0})})},{"@uirouter/core":31,angular:86}],11:[function(t,e,n){(function(e){"use strict";function r(t,e){return-1!==t.indexOf(e)}function i(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),t}function o(t,e){return t.push(e),e}function s(t,e){var n={};for(var r in t)-1!==e.indexOf(r)&&(n[r]=t[r]);return n}function a(t,e){var r=h.isArray(t)?[]:{};return n.forEach(t,function(t,n){return r[n]=e(t,n)}),r}function u(t,e){return t.push(e),t}function c(t,e){return void 0===e&&(e="assert failure"),function(n){var r=t(n);if(!r)throw new Error(h.isFunction(e)?e(n):e);return r}}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return[];var n,r=t.reduce(function(t,e){return Math.min(e.length,t)},9007199254740991),i=[];for(n=0;n<r;n++)switch(t.length){case 1:i.push([t[0][n]]);break;case 2:i.push([t[0][n],t[1][n]]);break;case 3:i.push([t[0][n],t[1][n],t[2][n]]);break;case 4:i.push([t[0][n],t[1][n],t[2][n],t[3][n]]);break;default:i.push(t.map(function(t){return t[n]}))}return i}function f(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r=Object.keys(n),i=0;i<r.length;i++)t[r[i]]=n[r[i]]}return t}function d(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n=typeof t;if(n!==typeof e||"object"!==n)return!1;var r=[t,e];if(p.all(h.isArray)(r))return function(t,e){return t.length===e.length&&l(t,e).reduce(function(t,e){return t&&d(e[0],e[1])},!0)}(t,e);if(p.all(h.isDate)(r))return t.getTime()===e.getTime();if(p.all(h.isRegExp)(r))return t.toString()===e.toString();if(p.all(h.isFunction)(r))return!0;if([h.isFunction,h.isArray,h.isDate,h.isRegExp].map(p.any).reduce(function(t,e){return t||!!e(r)},!1))return!1;var i,o={};for(i in t){if(!d(t[i],e[i]))return!1;o[i]=!0}for(i in e)if(!o[i])return!1;return!0}Object.defineProperty(n,"__esModule",{value:!0});var h=t("./predicates"),p=t("./hof"),v=t("./coreservices");n.root="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this;var g=n.root.angular||{};n.fromJson=g.fromJson||JSON.parse.bind(JSON),n.toJson=g.toJson||JSON.stringify.bind(JSON),n.forEach=g.forEach||function(t,e,n){if(h.isArray(t))return t.forEach(e,n);Object.keys(t).forEach(function(n){return e(t[n],n)})},n.extend=Object.assign||f,n.equals=g.equals||d,n.identity=function(t){return t},n.noop=function(){},n.createProxyFunctions=function(t,e,n,r,i){void 0===i&&(i=!1);var o=function(e){return t()[e].bind(n())};return(r=r||Object.keys(t())).reduce(function(t,n){return t[n]=i?function(t){return function(){return e[t]=o(t),e[t].apply(null,arguments)}}(n):o(n),t},e)},n.inherit=function(t,e){return n.extend(Object.create(t),e)},n.inArray=p.curry(r),n._inArray=r,n.removeFrom=p.curry(i),n._removeFrom=i,n.pushTo=p.curry(o),n._pushTo=o,n.deregAll=function(t){return t.slice().forEach(function(e){"function"==typeof e&&e(),n.removeFrom(t,e)})},n.defaults=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=e.concat({}).reverse(),o=n.extend.apply(null,i);return n.extend({},o,s(t||{},Object.keys(o)))},n.mergeR=function(t,e){return n.extend(t,e)},n.ancestors=function(t,e){var n=[];for(var r in t.path){if(t.path[r]!==e.path[r])break;n.push(t.path[r])}return n},n.pick=s,n.omit=function(t,e){return Object.keys(t).filter(p.not(n.inArray(e))).reduce(function(e,n){return e[n]=t[n],e},{})},n.pluck=function(t,e){return a(t,p.prop(e))},n.filter=function(t,e){var r=h.isArray(t),i=r?[]:{},o=r?function(t){return i.push(t)}:function(t,e){return i[e]=t};return n.forEach(t,function(t,n){e(t,n)&&o(t,n)}),i},n.find=function(t,e){var r;return n.forEach(t,function(t,n){r||e(t,n)&&(r=t)}),r},n.mapObj=a,n.map=a,n.values=function(t){return Object.keys(t).map(function(e){return t[e]})},n.allTrueR=function(t,e){return t&&e},n.anyTrueR=function(t,e){return t||e},n.unnestR=function(t,e){return t.concat(e)},n.flattenR=function(t,e){return h.isArray(e)?t.concat(e.reduce(n.flattenR,[])):u(t,e)},n.pushR=u,n.uniqR=function(t,e){return n.inArray(t,e)?t:u(t,e)},n.unnest=function(t){return t.reduce(n.unnestR,[])},n.flatten=function(t){return t.reduce(n.flattenR,[])},n.assertPredicate=c,n.assertMap=c,n.assertFn=c,n.pairs=function(t){return Object.keys(t).map(function(e){return[e,t[e]]})},n.arrayTuples=l,n.applyPairs=function(t,e){var n,r;if(h.isArray(e)&&(n=e[0],r=e[1]),!h.isString(n))throw new Error("invalid parameters to applyPairs");return t[n]=r,t},n.tail=function(t){return t.length&&t[t.length-1]||void 0},n.copy=function(t,e){return e&&Object.keys(e).forEach(function(t){return delete e[t]}),e||(e={}),n.extend(e,t)},n._extend=f,n.silenceUncaughtInPromise=function(t){return t.catch(function(t){return 0})&&t},n.silentRejection=function(t){return n.silenceUncaughtInPromise(v.services.$q.reject(t))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./coreservices":12,"./hof":14,"./predicates":16}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.notImplemented=function(t){return function(){throw new Error(t+"(): No coreservices implementation for UI-Router is loaded.")}};var r={$q:void 0,$injector:void 0};n.services=r},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t){this.text=t,this.glob=t.split(".");var e=this.text.split(".").map(function(t){return"**"===t?"(?:|(?:\\.[^.]*)*)":"*"===t?"\\.[^.]*":"\\."+t}).join("");this.regexp=new RegExp("^"+e+"$")}return t.prototype.matches=function(t){return this.regexp.test("."+t)},t.is=function(t){return!!/[!,*]+/.exec(t)},t.fromString=function(e){return t.is(e)?new t(e):null},t}();n.Glob=r},{}],14:[function(t,e,n){"use strict";function r(t){function e(n){return n.length>=r?t.apply(null,n):function(){return e(n.concat([].slice.apply(arguments)))}}var n=[].slice.apply(arguments,[1]),r=t.length;return e(n)}function i(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(null,[].slice.call(arguments).reverse())}Object.defineProperty(n,"__esModule",{value:!0}),n.curry=r,n.compose=i,n.pipe=o,n.prop=function(t){return function(e){return e&&e[t]}},n.propEq=r(function(t,e,n){return n&&n[t]===e}),n.parse=function(t){return o.apply(null,t.split(".").map(n.prop))},n.not=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}},n.and=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(null,n)&&e.apply(null,n)}},n.or=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(null,n)||e.apply(null,n)}},n.all=function(t){return function(e){return e.reduce(function(e,n){return e&&!!t(n)},!0)}},n.any=function(t){return function(e){return e.reduce(function(e,n){return e||!!t(n)},!1)}},n.is=function(t){return function(e){return null!=e&&e.constructor===t||e instanceof t}},n.eq=function(t){return function(e){return t===e}},n.val=function(t){return function(){return t}},n.invoke=function(t,e){return function(n){return n[t].apply(n,e)}},n.pattern=function(t){return function(e){for(var n=0;n<t.length;n++)if(t[n][0](e))return t[n][1](e)}}},{}],15:[function(t,e,n){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(t("./common")),r(t("./coreservices")),r(t("./glob")),r(t("./hof")),r(t("./predicates")),r(t("./queue")),r(t("./strings")),r(t("./trace"))},{"./common":11,"./coreservices":12,"./glob":13,"./hof":14,"./predicates":16,"./queue":17,"./strings":18,"./trace":19}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./hof"),i=t("../state/stateObject"),o=Object.prototype.toString,s=function(t){return function(e){return typeof e===t}};n.isUndefined=s("undefined"),n.isDefined=r.not(n.isUndefined),n.isNull=function(t){return null===t},n.isNullOrUndefined=r.or(n.isNull,n.isUndefined),n.isFunction=s("function"),n.isNumber=s("number"),n.isString=s("string"),n.isObject=function(t){return null!==t&&"object"==typeof t},n.isArray=Array.isArray,n.isDate=function(t){return"[object Date]"===o.call(t)},n.isRegExp=function(t){return"[object RegExp]"===o.call(t)},n.isState=i.StateObject.isState,n.isInjectable=function(t){if(n.isArray(t)&&t.length){var e=t.slice(0,-1),i=t.slice(-1);return!(e.filter(r.not(n.isString)).length||i.filter(r.not(n.isFunction)).length)}return n.isFunction(t)},n.isPromise=r.and(n.isObject,r.pipe(r.prop("then"),n.isFunction))},{"../state/stateObject":49,"./hof":14}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=null),this._items=t,this._limit=e}return t.prototype.enqueue=function(t){var e=this._items;return e.push(t),this._limit&&e.length>this._limit&&e.shift(),t},t.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},t.prototype.clear=function(){var t=this._items;return this._items=[],t},t.prototype.size=function(){return this._items.length},t.prototype.remove=function(t){var e=this._items.indexOf(t);return e>-1&&this._items.splice(e,1)[0]},t.prototype.peekTail=function(){return this._items[this._items.length-1]},t.prototype.peekHead=function(){if(this.size())return this._items[0]},t}();n.Queue=r},{}],18:[function(t,e,n){"use strict";function r(t){var e=i(t),n=e.match(/^(function [^ ]+\([^)]*\))/),r=n?n[1]:e,o=t.name||"";return o&&r.match(/function \(/)?"function "+o+r.substr(9):r}function i(t){var e=o.isArray(t)?t.slice(-1)[0]:t;return e&&e.toString()||"undefined"}Object.defineProperty(n,"__esModule",{value:!0});var o=t("./predicates"),s=t("../transition/rejectFactory"),a=t("./common"),u=t("./hof"),c=t("../transition/transition"),l=t("../resolve/resolvable");n.maxLength=function(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."},n.padString=function(t,e){for(;e.length<t;)e+=" ";return e},n.kebobString=function(t){return t.replace(/^([A-Z])/,function(t){return t.toLowerCase()}).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},n.functionToString=r,n.fnToString=i;var f=null,d=function(t){var e=s.Rejection.isRejectionPromise;return(f=f||u.pattern([[u.not(o.isDefined),u.val("undefined")],[o.isNull,u.val("null")],[o.isPromise,u.val("[Promise]")],[e,function(t){return t._transitionRejection.toString()}],[u.is(s.Rejection),u.invoke("toString")],[u.is(c.Transition),u.invoke("toString")],[u.is(l.Resolvable),u.invoke("toString")],[o.isInjectable,r],[u.val(!0),a.identity]]))(t)};n.stringify=function(t){var e=[];return JSON.stringify(t,function(t,n){return function(t){if(o.isObject(t)){if(-1!==e.indexOf(t))return"[circular ref]";e.push(t)}return d(t)}(n)}).replace(/\\"/g,'"')},n.beforeAfterSubstr=function(t){return function(e){if(!e)return["",""];var n=e.indexOf(t);return-1===n?[e,""]:[e.substr(0,n),e.substr(n+1)]}},n.hostRegex=new RegExp("^(?:[a-z]+:)?//[^/]+/"),n.stripFile=function(t){return t.replace(/\/[^/]*$/,"")},n.splitHash=n.beforeAfterSubstr("#"),n.splitQuery=n.beforeAfterSubstr("?"),n.splitEqual=n.beforeAfterSubstr("="),n.trimHashVal=function(t){return t?t.replace(/^#/,""):""},n.splitOnDelim=function(t){var e=new RegExp("("+t+")","g");return function(t){return t.split(e).filter(a.identity)}},n.joinNeighborsR=function(t,e){return o.isString(a.tail(t))&&o.isString(e)?t.slice(0,-1).concat(a.tail(t)+e):a.pushR(t,e)}},{"../resolve/resolvable":43,"../transition/rejectFactory":58,"../transition/transition":59,"./common":11,"./hof":14,"./predicates":16}],19:[function(t,e,n){"use strict";function r(t){if(!t)return"ui-view (defunct)";var e=t.creationContext?t.creationContext.name||"(root)":"(none)";return"[ui-view#"+t.id+" "+t.$type+":"+t.fqn+" ("+t.name+"@"+e+")]"}function i(t){return a.isNumber(t)?o[t]:o[o[t]]}Object.defineProperty(n,"__esModule",{value:!0});var o,s=t("../common/hof"),a=t("../common/predicates"),u=t("./strings"),c=Function.prototype.bind.call(console.log,console),l=a.isFunction(console.table)?console.table.bind(console):c.bind(console);!function(t){t[t.RESOLVE=0]="RESOLVE",t[t.TRANSITION=1]="TRANSITION",t[t.HOOK=2]="HOOK",t[t.UIVIEW=3]="UIVIEW",t[t.VIEWCONFIG=4]="VIEWCONFIG"}(o=n.Category||(n.Category={}));var f=s.parse("$id"),d=s.parse("router.$id"),h=function(t){return"Transition #"+f(t)+"-"+d(t)},p=function(){function t(){this._enabled={},this.approximateDigests=0}return t.prototype._set=function(t,e){var n=this;e.length||(e=Object.keys(o).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)}).map(function(t){return o[t]})),e.map(i).forEach(function(e){return n._enabled[e]=t})},t.prototype.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!0,t)},t.prototype.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!1,t)},t.prototype.enabled=function(t){return!!this._enabled[i(t)]},t.prototype.traceTransitionStart=function(t){this.enabled(o.TRANSITION)&&console.log(h(t)+": Started  -> "+u.stringify(t))},t.prototype.traceTransitionIgnored=function(t){this.enabled(o.TRANSITION)&&console.log(h(t)+": Ignored  <> "+u.stringify(t))},t.prototype.traceHookInvocation=function(t,e,n){if(this.enabled(o.HOOK)){var r=s.parse("traceData.hookType")(n)||"internal",i=s.parse("traceData.context.state.name")(n)||s.parse("traceData.context")(n)||"unknown",a=u.functionToString(t.registeredHook.callback);console.log(h(e)+":   Hook -> "+r+" context: "+i+", "+u.maxLength(200,a))}},t.prototype.traceHookResult=function(t,e,n){this.enabled(o.HOOK)&&console.log(h(e)+":   <- Hook returned: "+u.maxLength(200,u.stringify(t)))},t.prototype.traceResolvePath=function(t,e,n){this.enabled(o.RESOLVE)&&console.log(h(n)+":         Resolving "+t+" ("+e+")")},t.prototype.traceResolvableResolved=function(t,e){this.enabled(o.RESOLVE)&&console.log(h(e)+":               <- Resolved  "+t+" to: "+u.maxLength(200,u.stringify(t.data)))},t.prototype.traceError=function(t,e){this.enabled(o.TRANSITION)&&console.log(h(e)+": <- Rejected "+u.stringify(e)+", reason: "+t)},t.prototype.traceSuccess=function(t,e){this.enabled(o.TRANSITION)&&console.log(h(e)+": <- Success  "+u.stringify(e)+", final state: "+t.name)},t.prototype.traceUIViewEvent=function(t,e,n){void 0===n&&(n=""),this.enabled(o.UIVIEW)&&console.log("ui-view: "+u.padString(30,t)+" "+r(e)+n)},t.prototype.traceUIViewConfigUpdated=function(t,e){this.enabled(o.UIVIEW)&&this.traceUIViewEvent("Updating",t," with ViewConfig from context='"+e+"'")},t.prototype.traceUIViewFill=function(t,e){this.enabled(o.UIVIEW)&&this.traceUIViewEvent("Fill",t," with: "+u.maxLength(200,e))},t.prototype.traceViewSync=function(t){if(this.enabled(o.VIEWCONFIG)){var e=t.map(function(t){var e=t[0],n=t[1];return{"ui-view fqn":e.$type+":"+e.fqn,"state: view name":n&&n.viewDecl.$context.name+": "+n.viewDecl.$name+" ("+n.viewDecl.$type+")"}}).sort(function(t,e){return t["ui-view fqn"].localeCompare(e["ui-view fqn"])});l(e)}},t.prototype.traceViewServiceEvent=function(t,e){this.enabled(o.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+function(t){var e=t.viewDecl,n=e.$context.name||"(root)";return"[View#"+t.$id+" from '"+n+"' state]: target ui-view: '"+e.$uiViewName+"@"+e.$uiViewContextAnchor+"'"}(e))},t.prototype.traceViewServiceUIViewEvent=function(t,e){this.enabled(o.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+r(e))},t}();n.Trace=p;var v=new p;n.trace=v},{"../common/hof":14,"../common/predicates":16,"./strings":18}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./params/stateParams"),i=t("./common/queue"),o=function(){function t(){this.params=new r.StateParams,this.lastStartedTransitionId=-1,this.transitionHistory=new i.Queue([],1),this.successfulTransitions=new i.Queue([],1)}return t.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},t}();n.UIRouterGlobals=o},{"./common/queue":17,"./params/stateParams":37}],21:[function(t,e,n){"use strict";function r(t){t.addResolvable({token:o.UIRouter,deps:[],resolveFn:function(){return t.router},data:t.router},""),t.addResolvable({token:i.Transition,deps:[],resolveFn:function(){return t},data:t},""),t.addResolvable({token:"$transition$",deps:[],resolveFn:function(){return t},data:t},""),t.addResolvable({token:"$stateParams",deps:[],resolveFn:function(){return t.params()},data:t.params()},""),t.entering().forEach(function(e){t.addResolvable({token:"$state$",deps:[],resolveFn:function(){return e},data:e},e)})}Object.defineProperty(n,"__esModule",{value:!0});var i=t("../transition/transition"),o=t("../router");n.registerAddCoreResolvables=function(t){return t.onCreate({},r)}},{"../router":45,"../transition/transition":59}],22:[function(t,e,n){"use strict";function r(t){var e=t._ignoredReason();if(e){i.trace.traceTransitionIgnored(t);var n=t.router.globals.transition;return"SameAsCurrent"===e&&n&&n.abort(),o.Rejection.ignored().toPromise()}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("../common/trace"),o=t("../transition/rejectFactory");n.registerIgnoredTransitionHook=function(t){return t.onBefore({},r,{priority:-9999})}},{"../common/trace":19,"../transition/rejectFactory":58}],23:[function(t,e,n){"use strict";function r(t){if(!t.valid())throw new Error(t.error())}Object.defineProperty(n,"__esModule",{value:!0}),n.registerInvalidTransitionHook=function(t){return t.onBefore({},r,{priority:-1e4})}},{}],24:[function(t,e,n){"use strict";function r(t,e){var n=e.$$state().lazyLoad,r=n._promise;if(!r){r=n._promise=i.services.$q.when(n(t,e)).then(function(e){return e&&Array.isArray(e.states)&&e.states.forEach(function(e){return t.router.stateRegistry.register(e)}),e}).then(function(t){return delete e.lazyLoad,delete e.$$state().lazyLoad,delete n._promise,t},function(t){return delete n._promise,i.services.$q.reject(t)})}return r}Object.defineProperty(n,"__esModule",{value:!0});var i=t("../common/coreservices"),o=function(t){var e=t.router,n=t.entering().filter(function(t){return!!t.$$state().lazyLoad}).map(function(e){return r(t,e)});return i.services.$q.all(n).then(function(){if("url"!==t.originalTransition().options().source){var n=t.targetState();return e.stateService.target(n.identifier(),n.params(),n.options())}var r=e.urlService,i=r.match(r.parts()),o=i&&i.rule;if(o&&"STATE"===o.type){var s=o.state,a=i.match;return e.stateService.target(s,a,t.options())}e.urlService.sync()})};n.registerLazyLoadHook=function(t){return t.onBefore({entering:function(t){return!!t.lazyLoad}},o)},n.lazyLoadState=r},{"../common/coreservices":12}],25:[function(t,e,n){"use strict";function r(t){return function(e,n){return(0,n.$$state()[t])(e,n)}}Object.defineProperty(n,"__esModule",{value:!0});var i=r("onExit");n.registerOnExitHook=function(t){return t.onExit({exiting:function(t){return!!t.onExit}},i)};var o=r("onRetain");n.registerOnRetainHook=function(t){return t.onRetain({retained:function(t){return!!t.onRetain}},o)};var s=r("onEnter");n.registerOnEnterHook=function(t){return t.onEnter({entering:function(t){return!!t.onEnter}},s)}},{}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/predicates"),i=t("../common/coreservices"),o=t("../state/targetState"),s=function(t){function e(e){if(e)return e instanceof o.TargetState?e:r.isString(e)?s.target(e,t.params(),t.options()):e.state||e.params?s.target(e.state||t.to(),e.params||t.params(),t.options()):void 0}var n=t.to().redirectTo;if(n){var s=t.router.stateService;return r.isFunction(n)?i.services.$q.when(n(t)).then(e):e(n)}};n.registerRedirectToHook=function(t){return t.onStart({to:function(t){return!!t.redirectTo}},s)}},{"../common/coreservices":12,"../common/predicates":16,"../state/targetState":53}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../resolve/resolveContext"),o=t("../common/hof"),s=function(t){return new i.ResolveContext(t.treeChanges().to).resolvePath("EAGER",t).then(r.noop)};n.registerEagerResolvePath=function(t){return t.onStart({},s,{priority:1e3})};var a=function(t,e){return new i.ResolveContext(t.treeChanges().to).subContext(e.$$state()).resolvePath("LAZY",t).then(r.noop)};n.registerLazyResolveState=function(t){return t.onEnter({entering:o.val(!0)},a,{priority:1e3})}},{"../common/common":11,"../common/hof":14,"../resolve/resolveContext":44}],28:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=function(t){var e=t.router.globals,n=function(){e.transition===t&&(e.transition=null)};t.onSuccess({},function(){e.successfulTransitions.enqueue(t),e.$current=t.$to(),e.current=e.$current.self,r.copy(t.params(),e.params)},{priority:1e4}),t.promise.then(n,n)};n.registerUpdateGlobalState=function(t){return t.onCreate({},i)}},{"../common/common":11}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){var e=t.options(),n=t.router.stateService,r=t.router.urlRouter;if("url"!==e.source&&e.location&&n.$current.navigable){var i={replace:"replace"===e.location};r.push(n.$current.navigable.url,n.params,i)}r.update(!0)};n.registerUpdateUrl=function(t){return t.onSuccess({},r,{priority:9999})}},{}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/coreservices"),o=function(t){var e=i.services.$q,n=t.views("entering");if(n.length)return e.all(n.map(function(t){return e.when(t.load())})).then(r.noop)};n.registerLoadEnteringViews=function(t){return t.onFinish({},o)};var s=function(t){var e=t.views("entering"),n=t.views("exiting");if(e.length||n.length){var r=t.router.viewService;n.forEach(function(t){return r.deactivateViewConfig(t)}),e.forEach(function(t){return r.activateViewConfig(t)}),r.sync()}};n.registerActivateViews=function(t){return t.onSuccess({},s)}},{"../common/common":11,"../common/coreservices":12}],31:[function(t,e,n){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(t("./common/index")),r(t("./params/index")),r(t("./path/index")),r(t("./resolve/index")),r(t("./state/index")),r(t("./transition/index")),r(t("./url/index")),r(t("./view/index")),r(t("./globals")),r(t("./router")),r(t("./vanilla")),r(t("./interface"))},{"./common/index":15,"./globals":20,"./interface":32,"./params/index":33,"./path/index":38,"./resolve/index":41,"./router":45,"./state/index":46,"./transition/index":56,"./url/index":63,"./vanilla":69,"./view/index":81}],32:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.dispose=function(t){},t}();n.UIRouterPluginBase=r},{}],33:[function(t,e,n){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(t("./param")),r(t("./paramTypes")),r(t("./stateParams")),r(t("./paramType"))},{"./param":34,"./paramType":35,"./paramTypes":36,"./stateParams":37}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=t("../common/common"),o=t("../common/hof"),s=t("../common/predicates"),a=t("../common/coreservices"),u=t("./paramType"),c=Object.prototype.hasOwnProperty,l=function(t){return 0===["value","type","squash","array","dynamic"].filter(c.bind(t||{})).length};!function(t){t[t.PATH=0]="PATH",t[t.SEARCH=1]="SEARCH",t[t.CONFIG=2]="CONFIG"}(r=n.DefType||(n.DefType={}));var f=function(){function t(t,e,n,a,c){e=function(t,e,n,i,o){if(t.type&&e&&"string"!==e.name)throw new Error("Param '"+i+"' has two type configurations.");if(t.type&&e&&"string"===e.name&&o.type(t.type))return o.type(t.type);if(e)return e;if(!t.type){var s=n===r.CONFIG?"any":n===r.PATH?"path":n===r.SEARCH?"query":"string";return o.type(s)}return t.type instanceof u.ParamType?t.type:o.type(t.type)}(n=function(t){function e(){return t.value}return t=l(t)&&{value:t}||t,e.__cacheable=!0,i.extend(t,{$$fn:s.isInjectable(t.value)?t.value:e})}(n),e,a,t,c.paramTypes);var f=function(){var e={array:a===r.SEARCH&&"auto"},o=t.match(/\[\]$/)?{array:!0}:{};return i.extend(e,o,n).array}();e=f?e.$asArray(f,a===r.SEARCH):e;var d=void 0!==n.value||a===r.SEARCH,h=s.isDefined(n.dynamic)?!!n.dynamic:!!e.dynamic,p=s.isDefined(n.raw)?!!n.raw:!!e.raw,v=function(t,e,n){var r=t.squash;if(!e||!1===r)return!1;if(!s.isDefined(r)||null==r)return n;if(!0===r||s.isString(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}(n,d,c.defaultSquashPolicy()),g=function(t,e,n,r){var a,u,c=[{from:"",to:n||e?void 0:""},{from:null,to:n||e?void 0:""}];return a=s.isArray(t.replace)?t.replace:[],s.isString(r)&&a.push({from:r,to:void 0}),u=i.map(a,o.prop("from")),i.filter(c,function(t){return-1===u.indexOf(t.from)}).concat(a)}(n,f,d,v),m=s.isDefined(n.inherit)?!!n.inherit:!!e.inherit;i.extend(this,{id:t,type:e,location:a,isOptional:d,dynamic:h,raw:p,squash:v,replace:g,inherit:m,array:f,config:n})}return t.prototype.isDefaultValue=function(t){return this.isOptional&&this.type.equals(this.value(),t)},t.prototype.value=function(t){var e=this;return t=function(t){for(var n=0,r=e.replace;n<r.length;n++){var i=r[n];if(i.from===t)return i.to}return t}(t),s.isUndefined(t)?function(){if(e._defaultValueCache)return e._defaultValueCache.defaultValue;if(!a.services.$injector)throw new Error("Injectable functions cannot be called at configuration time");var t=a.services.$injector.invoke(e.config.$$fn);if(null!==t&&void 0!==t&&!e.type.is(t))throw new Error("Default value ("+t+") for parameter '"+e.id+"' is not an instance of ParamType ("+e.type.name+")");return e.config.$$fn.__cacheable&&(e._defaultValueCache={defaultValue:t}),t}():this.type.$normalize(t)},t.prototype.isSearch=function(){return this.location===r.SEARCH},t.prototype.validates=function(t){if((s.isUndefined(t)||null===t)&&this.isOptional)return!0;var e=this.type.$normalize(t);if(!this.type.is(e))return!1;var n=this.type.encode(e);return!(s.isString(n)&&!this.type.pattern.exec(n))},t.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},t.values=function(t,e){void 0===e&&(e={});for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];n[o.id]=o.value(e[o.id])}return n},t.changed=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),t.filter(function(t){return!t.type.equals(e[t.id],n[t.id])})},t.equals=function(e,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),0===t.changed(e,n,r).length},t.validates=function(t,e){return void 0===e&&(e={}),t.map(function(t){return t.validates(e[t.id])}).reduce(i.allTrueR,!0)},t}();n.Param=f},{"../common/common":11,"../common/coreservices":12,"../common/hof":14,"../common/predicates":16,"./paramType":35}],35:[function(t,e,n){"use strict";function r(t,e){function n(t){return o.isArray(t)?t:o.isDefined(t)?[t]:[]}function r(t,r){return function(s){if(o.isArray(s)&&0===s.length)return s;var a=n(s),u=i.map(a,t);return!0===r?0===i.filter(u,function(t){return!t}).length:function(t){switch(t.length){case 0:return;case 1:return"auto"===e?t[0]:t;default:return t}}(u)}}function s(t){return function(e,r){var i=n(e),o=n(r);if(i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(!t(i[s],o[s]))return!1;return!0}}var a=this;["encode","decode","equals","$normalize"].forEach(function(e){var n=t[e].bind(t),i="equals"===e?s:r;a[e]=i(n)}),i.extend(this,{dynamic:t.dynamic,name:t.name,pattern:t.pattern,inherit:t.inherit,is:r(t.is.bind(t),!0),$arrayMode:e})}Object.defineProperty(n,"__esModule",{value:!0});var i=t("../common/common"),o=t("../common/predicates"),s=function(){function t(t){this.pattern=/.*/,this.inherit=!0,i.extend(this,t)}return t.prototype.is=function(t,e){return!0},t.prototype.encode=function(t,e){return t},t.prototype.decode=function(t,e){return t},t.prototype.equals=function(t,e){return t==e},t.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},t.prototype.toString=function(){return"{ParamType:"+this.name+"}"},t.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},t.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new r(this,t)},t}();n.ParamType=s},{"../common/common":11,"../common/predicates":16}],36:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/predicates"),o=t("../common/hof"),s=t("../common/coreservices"),a=t("./paramType"),u=function(){function t(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=r.pick(t.prototype,["hash","string","query","path","int","bool","date","json","any"]);this.types=r.inherit(r.map(this.defaultTypes,function(t,e){return new a.ParamType(r.extend({name:e},t))}),{})}return t.prototype.dispose=function(){this.types={}},t.prototype.type=function(t,e,n){if(!i.isDefined(e))return this.types[t];if(this.types.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return this.types[t]=new a.ParamType(r.extend({name:t},e)),n&&(this.typeQueue.push({name:t,def:n}),this.enqueue||this._flushTypeQueue()),this},t.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var t=this.typeQueue.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");r.extend(this.types[t.name],s.services.$injector.invoke(t.def))}},t}();n.ParamTypes=u,function(){var t=function(t){var e=function(t){return null!=t?t.toString():t},n={encode:e,decode:e,is:o.is(String),pattern:/.*/,equals:function(t,e){return t==e}};return r.extend({},n,t)};r.extend(u.prototype,{string:t({}),path:t({pattern:/[^/]*/}),query:t({}),hash:t({inherit:!1}),int:t({decode:function(t){return parseInt(t,10)},is:function(t){return!i.isNullOrUndefined(t)&&this.decode(t.toString())===t},pattern:/-?\d+/}),bool:t({encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:o.is(Boolean),pattern:/0|1/}),date:t({encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):void 0},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):void 0},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return["getFullYear","getMonth","getDate"].reduce(function(n,r){return n&&t[r]()===e[r]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:t({encode:r.toJson,decode:r.fromJson,is:o.is(Object),equals:r.equals,pattern:/[^/]*/}),any:t({encode:r.identity,decode:r.identity,is:function(){return!0},equals:r.equals})})}()},{"../common/common":11,"../common/coreservices":12,"../common/hof":14,"../common/predicates":16,"./paramType":35}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=function(){function t(t){void 0===t&&(t={}),r.extend(this,t)}return t.prototype.$inherit=function(t,e,n){var i,o=r.ancestors(e,n),s={},a=[];for(var u in o)if(o[u]&&o[u].params&&(i=Object.keys(o[u].params)).length)for(var c in i)a.indexOf(i[c])>=0||(a.push(i[c]),s[i[c]]=this[i[c]]);return r.extend({},s,t)},t}();n.StateParams=i},{"../common/common":11}],38:[function(t,e,n){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(t("./pathNode")),r(t("./pathFactory"))},{"./pathFactory":39,"./pathNode":40}],39:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/hof"),o=t("../state/targetState"),s=t("./pathNode"),a=function(){function t(){}return t.makeTargetState=function(t,e){var n=r.tail(e).state;return new o.TargetState(t,n,e.map(i.prop("paramValues")).reduce(r.mergeR,{}),{})},t.buildPath=function(t){var e=t.params();return t.$state().path.map(function(t){return new s.PathNode(t).applyRawParams(e)})},t.buildToPath=function(e,n){var r=t.buildPath(n);return n.options().inherit?t.inheritParams(e,r,Object.keys(n.params())):r},t.applyViewConfigs=function(e,n,i){n.filter(function(t){return r.inArray(i,t.state)}).forEach(function(i){var o=r.values(i.state.views||{}),s=t.subPath(n,function(t){return t===i}),a=o.map(function(t){return e.createViewConfig(s,t)});i.views=a.reduce(r.unnestR,[])})},t.inheritParams=function(t,e,n){void 0===n&&(n=[]);var o=t.map(function(t){return t.paramSchema}).reduce(r.unnestR,[]).filter(function(t){return!t.inherit}).map(i.prop("id"));return e.map(function(e){var a=r.extend({},e&&e.paramValues),u=r.pick(a,n);a=r.omit(a,n);var c=r.omit(function(t,e){var n=r.find(t,i.propEq("state",e));return r.extend({},n&&n.paramValues)}(t,e.state)||{},o),l=r.extend(a,c,u);return new s.PathNode(e.state).applyRawParams(l)})},t.treeChanges=function(e,n,r){for(var i=0,o=Math.min(e.length,n.length),a=function(e,n){return e.equals(n,t.nonDynamicParams)};i<o&&e[i].state!==r&&a(e[i],n[i]);)i++;var u,c,l,f,d;c=(u=e).slice(0,i),l=u.slice(i);var h=c.map(function(t,e){var r=s.PathNode.clone(t);return r.paramValues=n[e].paramValues,r});return f=n.slice(i),d=h.concat(f),{from:u,to:d,retained:c,exiting:l,entering:f}},t.matching=function(t,e,n){var i=!1;return r.arrayTuples(t,e).reduce(function(t,e){var r=e[0],o=e[1];return(i=i||!r.equals(o,n))?t:t.concat(r)},[])},t.equals=function(e,n,r){return e.length===n.length&&t.matching(e,n,r).length===e.length},t.subPath=function(t,e){var n=r.find(t,e),i=t.indexOf(n);return-1===i?void 0:t.slice(0,i+1)},t.nonDynamicParams=function(t){return t.state.parameters({inherit:!1}).filter(function(t){return!t.dynamic})},t.paramValues=function(t){return t.reduce(function(t,e){return r.extend(t,e.paramValues)},{})},t}();n.PathUtils=a},{"../common/common":11,"../common/hof":14,"../state/targetState":53,"./pathNode":40}],40:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/hof"),o=t("../params/param"),s=function(){function t(e){if(e instanceof t){var n=e;this.state=n.state,this.paramSchema=n.paramSchema.slice(),this.paramValues=r.extend({},n.paramValues),this.resolvables=n.resolvables.slice(),this.views=n.views&&n.views.slice()}else{var i=e;this.state=i,this.paramSchema=i.parameters({inherit:!1}),this.paramValues={},this.resolvables=i.resolvables.map(function(t){return t.clone()})}}return t.prototype.applyRawParams=function(t){return this.paramValues=this.paramSchema.reduce(function(e,n){return r.applyPairs(e,function(e){return[e.id,e.value(t[e.id])]}(n))},{}),this},t.prototype.parameter=function(t){return r.find(this.paramSchema,i.propEq("id",t))},t.prototype.equals=function(t,e){var n=this.diff(t,e);return n&&0===n.length},t.prototype.diff=function(t,e){if(this.state!==t.state)return!1;var n=e?e(this):this.paramSchema;return o.Param.changed(n,this.paramValues,t.paramValues)},t.clone=function(e){return new t(e)},t}();n.PathNode=s},{"../common/common":11,"../common/hof":14,"../params/param":34}],41:[function(t,e,n){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(t("./interface")),r(t("./resolvable")),r(t("./resolveContext"))},{"./interface":42,"./resolvable":43,"./resolveContext":44}],42:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.resolvePolicies={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}}},{}],43:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/coreservices"),o=t("../common/trace"),s=t("../common/strings"),a=t("../common/predicates"),u=t("../common");n.defaultResolvePolicy={when:"LAZY",async:"WAIT"};var c=function(){function t(e,n,o,s,c){if(this.resolved=!1,this.promise=void 0,e instanceof t)r.extend(this,e);else if(a.isFunction(n)){if(u.isNullOrUndefined(e))throw new Error("new Resolvable(): token argument is required");if(!a.isFunction(n))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=e,this.policy=s,this.resolveFn=n,this.deps=o||[],this.data=c,this.resolved=void 0!==c,this.promise=this.resolved?i.services.$q.when(this.data):void 0}else if(a.isObject(e)&&e.token&&a.isFunction(e.resolveFn)){var l=e;return new t(l.token,l.resolveFn,l.deps,l.policy,l.data)}}return t.prototype.getPolicy=function(t){var e=this.policy||{},r=t&&t.resolvePolicy||{};return{when:e.when||r.when||n.defaultResolvePolicy.when,async:e.async||r.async||n.defaultResolvePolicy.async}},t.prototype.resolve=function(t,e){var n=this,s=i.services.$q,a=t.findNode(this),u=a&&a.state,c="RXWAIT"===this.getPolicy(u).async?function(t){var e=t.cache(1);return e.take(1).toPromise().then(function(){return e})}:r.identity;return this.promise=s.when().then(function(){return s.all(t.getDependencies(n).map(function(n){return n.get(t,e)}))}).then(function(t){return n.resolveFn.apply(null,t)}).then(c).then(function(t){return n.data=t,n.resolved=!0,o.trace.traceResolvableResolved(n,e),n.data})},t.prototype.get=function(t,e){return this.promise||this.resolve(t,e)},t.prototype.toString=function(){return"Resolvable(token: "+s.stringify(this.token)+", requires: ["+this.deps.map(s.stringify)+"])"},t.prototype.clone=function(){return new t(this)},t.fromData=function(e,n){return new t(e,function(){return n},null,null,n)},t}();n.Resolvable=c},{"../common":15,"../common/common":11,"../common/coreservices":12,"../common/predicates":16,"../common/strings":18,"../common/trace":19}],44:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/hof"),o=t("../common/trace"),s=t("../common/coreservices"),a=t("./interface"),u=t("./resolvable"),c=t("../path/pathFactory"),l=t("../common/strings"),f=t("../common"),d=a.resolvePolicies.when,h=[d.EAGER,d.LAZY],p=[d.EAGER];n.NATIVE_INJECTOR_TOKEN="Native Injector";var v=function(){function t(t){this._path=t}return t.prototype.getTokens=function(){return this._path.reduce(function(t,e){return t.concat(e.resolvables.map(function(t){return t.token}))},[]).reduce(r.uniqR,[])},t.prototype.getResolvable=function(t){var e=this._path.map(function(t){return t.resolvables}).reduce(r.unnestR,[]).filter(function(e){return e.token===t});return r.tail(e)},t.prototype.getPolicy=function(t){var e=this.findNode(t);return t.getPolicy(e.state)},t.prototype.subContext=function(e){return new t(c.PathUtils.subPath(this._path,function(t){return t.state===e}))},t.prototype.addResolvables=function(t,e){var n=r.find(this._path,i.propEq("state",e)),o=t.map(function(t){return t.token});n.resolvables=n.resolvables.filter(function(t){return-1===o.indexOf(t.token)}).concat(t)},t.prototype.resolvePath=function(t,e){var n=this;void 0===t&&(t="LAZY");var u=(r.inArray(h,t)?t:"LAZY")===a.resolvePolicies.when.EAGER?p:h;o.trace.traceResolvePath(this._path,t,e);var c=function(t,e){return function(i){return r.inArray(t,n.getPolicy(i)[e])}},l=this._path.reduce(function(t,r){var o=r.resolvables.filter(c(u,"when")),s=o.filter(c(["NOWAIT"],"async")),a=o.filter(i.not(c(["NOWAIT"],"async"))),l=n.subContext(r.state),f=function(t){return t.get(l,e).then(function(e){return{token:t.token,value:e}})};return s.forEach(f),t.concat(a.map(f))},[]);return s.services.$q.all(l)},t.prototype.injector=function(){return this._injector||(this._injector=new g(this))},t.prototype.findNode=function(t){return r.find(this._path,function(e){return r.inArray(e.resolvables,t)})},t.prototype.getDependencies=function(t){var e=this,n=this.findNode(t),i=(c.PathUtils.subPath(this._path,function(t){return t===n})||this._path).reduce(function(t,e){return t.concat(e.resolvables)},[]).filter(function(e){return e!==t});return t.deps.map(function(t){var n=i.filter(function(e){return e.token===t});if(n.length)return r.tail(n);var o=e.injector().getNative(t);if(f.isUndefined(o))throw new Error("Could not find Dependency Injection token: "+l.stringify(t));return new u.Resolvable(t,function(){return o},[],o)})},t}();n.ResolveContext=v;var g=function(){function t(t){this.context=t,this.native=this.get(n.NATIVE_INJECTOR_TOKEN)||s.services.$injector}return t.prototype.get=function(t){var e=this.context.getResolvable(t);if(e){if("NOWAIT"===this.context.getPolicy(e).async)return e.get(this.context);if(!e.resolved)throw new Error("Resolvable async .get() not complete:"+l.stringify(e.token));return e.data}return this.getNative(t)},t.prototype.getAsync=function(t){var e=this.context.getResolvable(t);return e?e.get(this.context):s.services.$q.when(this.native.get(t))},t.prototype.getNative=function(t){return this.native&&this.native.get(t)},t}()},{"../common":15,"../common/common":11,"../common/coreservices":12,"../common/hof":14,"../common/strings":18,"../common/trace":19,"../path/pathFactory":39,"./interface":42,"./resolvable":43}],45:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./url/urlMatcherFactory"),i=t("./url/urlRouter"),o=t("./transition/transitionService"),s=t("./view/view"),a=t("./state/stateRegistry"),u=t("./state/stateService"),c=t("./globals"),l=t("./common/common"),f=t("./common/predicates"),d=t("./url/urlService"),h=t("./common/trace"),p=0,v=function(){function t(t,e){void 0===t&&(t=d.UrlService.locationServiceStub),void 0===e&&(e=d.UrlService.locationConfigStub),this.locationService=t,this.locationConfig=e,this.$id=p++,this._disposed=!1,this._disposables=[],this.trace=h.trace,this.viewService=new s.ViewService,this.transitionService=new o.TransitionService(this),this.globals=new c.UIRouterGlobals,this.urlMatcherFactory=new r.UrlMatcherFactory,this.urlRouter=new i.UrlRouter(this),this.stateRegistry=new a.StateRegistry(this),this.stateService=new u.StateService(this),this.urlService=new d.UrlService(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(t),this.disposable(e)}return t.prototype.disposable=function(t){this._disposables.push(t)},t.prototype.dispose=function(t){var e=this;t&&f.isFunction(t.dispose)?t.dispose(this):(this._disposed=!0,this._disposables.slice().forEach(function(t){try{"function"==typeof t.dispose&&t.dispose(e),l.removeFrom(e._disposables,t)}catch(t){}}))},t.prototype.plugin=function(t,e){void 0===e&&(e={});var n=new t(this,e);if(!n.name)throw new Error("Required property `name` missing on plugin: "+n);return this._disposables.push(n),this._plugins[n.name]=n},t.prototype.getPlugin=function(t){return t?this._plugins[t]:l.values(this._plugins)},t}();n.UIRouter=v},{"./common/common":11,"./common/predicates":16,"./common/trace":19,"./globals":20,"./state/stateRegistry":51,"./state/stateService":52,"./transition/transitionService":62,"./url/urlMatcherFactory":65,"./url/urlRouter":66,"./url/urlService":68,"./view/view":82}],46:[function(t,e,n){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(t("./stateBuilder")),r(t("./stateObject")),r(t("./stateMatcher")),r(t("./stateQueueManager")),r(t("./stateRegistry")),r(t("./stateService")),r(t("./targetState"))},{"./stateBuilder":47,"./stateMatcher":48,"./stateObject":49,"./stateQueueManager":50,"./stateRegistry":51,"./stateService":52,"./targetState":53}],47:[function(t,e,n){"use strict";function r(t){return t.name}function i(t){return t.self.$$state=function(){return t},t.self}function o(t){return t.parent&&t.parent.data&&(t.data=t.self.data=c.inherit(t.parent.data,t.data)),t.data}function s(t){return t.parent?t.parent.path.concat(t):[t]}function a(t){var e=t.parent?c.extend({},t.parent.includes):{};return e[t.name]=!0,e}function u(t){var e=function(t){return t.provide||t.token},n=d.pattern([[d.prop("resolveFn"),function(t){return new h.Resolvable(e(t),t.resolveFn,t.deps,t.policy)}],[d.prop("useFactory"),function(t){return new h.Resolvable(e(t),t.useFactory,t.deps||t.dependencies,t.policy)}],[d.prop("useClass"),function(t){return new h.Resolvable(e(t),function(){return new t.useClass},[],t.policy)}],[d.prop("useValue"),function(t){return new h.Resolvable(e(t),function(){return t.useValue},[],t.policy,t.useValue)}],[d.prop("useExisting"),function(t){return new h.Resolvable(e(t),c.identity,[t.useExisting],t.policy)}]]),r=d.pattern([[d.pipe(d.prop("val"),l.isString),function(t){return new h.Resolvable(t.token,c.identity,[t.val],t.policy)}],[d.pipe(d.prop("val"),l.isArray),function(t){return new h.Resolvable(t.token,c.tail(t.val),t.val.slice(0,-1),t.policy)}],[d.pipe(d.prop("val"),l.isFunction),function(t){return new h.Resolvable(t.token,t.val,function(t){var e=p.services.$injector;return t.$inject||e&&e.annotate(t,e.strictDi)||"deferred"}(t.val),t.policy)}]]),i=d.pattern([[d.is(h.Resolvable),function(t){return t}],[function(t){return!(!t.token||!t.resolveFn)},n],[function(t){return!(!t.provide&&!t.token||!(t.useValue||t.useFactory||t.useExisting||t.useClass))},n],[function(t){return!!(t&&t.val&&(l.isString(t.val)||l.isArray(t.val)||l.isFunction(t.val)))},r],[d.val(!0),function(t){throw new Error("Invalid resolve value: "+f.stringify(t))}]]),o=t.resolve;return(l.isArray(o)?o:function(t,e){return Object.keys(t||{}).map(function(n){return{token:n,val:t[n],deps:void 0,policy:e[n]}})}(o,t.resolvePolicy||{})).map(i)}Object.defineProperty(n,"__esModule",{value:!0});var c=t("../common/common"),l=t("../common/predicates"),f=t("../common/strings"),d=t("../common/hof"),h=t("../resolve/resolvable"),p=t("../common/coreservices"),v=function(t,e){return function(n){var r=n;r&&r.url&&r.name&&r.name.match(/\.\*\*$/)&&(r.url+="{remainder:any}");var i=function(t){if(!l.isString(t))return!1;var e="^"===t.charAt(0);return{val:e?t.substring(1):t,root:e}}(r.url),o=n.parent,s=i?t.compile(i.val,{params:n.params||{},paramMap:function(t,e){return!1===r.reloadOnSearch&&e&&(t=c.extend(t||{},{dynamic:!0})),t}}):r.url;if(!s)return null;if(!t.isMatcher(s))throw new Error("Invalid url '"+s+"' in state '"+n+"'");return i&&i.root?s:(o&&o.navigable||e()).url.append(s)}},g=function(t){return function(e){return!t(e)&&e.url?e:e.parent?e.parent.navigable:null}},m=function(t){return function(e){var n=e.url&&e.url.parameters({inherit:!1})||[],r=c.values(c.mapObj(c.omit(e.params||{},n.map(d.prop("id"))),function(e,n){return t.fromConfig(n,null,e)}));return n.concat(r).map(function(t){return[t.id,t]}).reduce(c.applyPairs,{})}};n.resolvablesBuilder=u;var y=function(){function t(t,e){this.matcher=t;var n=this,c=function(){return t.find("")},l=function(t){return""===t.name};this.builders={name:[r],self:[i],parent:[function(e){return l(e)?null:t.find(n.parentName(e))||c()}],data:[o],url:[v(e,c)],navigable:[g(l)],params:[m(e.paramFactory)],views:[],path:[s],includes:[a],resolvables:[u]}}return t.prototype.builder=function(t,e){var n=this.builders,r=n[t]||[];return l.isString(t)&&!l.isDefined(e)?r.length>1?r:r[0]:l.isString(t)&&l.isFunction(e)?(n[t]=r,n[t].push(e),function(){return n[t].splice(n[t].indexOf(e,1))&&null}):void 0},t.prototype.build=function(t){var e=this.matcher,n=this.builders,r=this.parentName(t);if(r&&!e.find(r,void 0,!1))return null;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i].reduce(function(t,e){return function(n){return e(n,t)}},c.noop);t[i]=o(t)}return t},t.prototype.parentName=function(t){var e=t.name||"",n=e.split(".");if("**"===n.pop()&&n.pop(),n.length){if(t.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+e+")");return n.join(".")}return t.parent?l.isString(t.parent)?t.parent:t.parent.name:""},t.prototype.name=function(t){var e=t.name;if(-1!==e.indexOf(".")||!t.parent)return e;var n=l.isString(t.parent)?t.parent:t.parent.name;return n?n+"."+e:e},t}();n.StateBuilder=y},{"../common/common":11,"../common/coreservices":12,"../common/hof":14,"../common/predicates":16,"../common/strings":18,"../resolve/resolvable":43}],48:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/predicates"),i=t("../common/common"),o=function(){function t(t){this._states=t}return t.prototype.isRelative=function(t){return 0===(t=t||"").indexOf(".")||0===t.indexOf("^")},t.prototype.find=function(t,e,n){if(void 0===n&&(n=!0),t||""===t){var o=r.isString(t),s=o?t:t.name;this.isRelative(s)&&(s=this.resolvePath(s,e));var a=this._states[s];if(a&&(o||!(o||a!==t&&a.self!==t)))return a;if(o&&n){var u=i.values(this._states).filter(function(t){return t.__stateObjectCache.nameGlob&&t.__stateObjectCache.nameGlob.matches(s)});return u.length>1&&console.log("stateMatcher.find: Found multiple matches for "+s+" using glob: ",u.map(function(t){return t.name})),u[0]}}},t.prototype.resolvePath=function(t,e){if(!e)throw new Error("No reference point given for path '"+t+"'");for(var n=this.find(e),r=t.split("."),i=0,o=r.length,s=n;i<o;i++)if(""!==r[i]||0!==i){if("^"!==r[i])break;if(!s.parent)throw new Error("Path '"+t+"' not valid for state '"+n.name+"'");s=s.parent}else s=n;var a=r.slice(i).join(".");return s.name+(s.name&&a?".":"")+a},t}();n.StateMatcher=o},{"../common/common":11,"../common/predicates":16}],49:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/hof"),o=t("../common/glob"),s=t("../common/predicates"),a=function(){function t(e){return t.create(e||{})}return t.create=function(e){e=t.isStateClass(e)?new e:e;var n=r.inherit(r.inherit(e,t.prototype));return e.$$state=function(){return n},n.self=e,n.__stateObjectCache={nameGlob:o.Glob.fromString(n.name)},n},t.prototype.is=function(t){return this===t||this.self===t||this.fqn()===t},t.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var t=this.parent.fqn();return t?t+"."+this.name:this.name},t.prototype.root=function(){return this.parent&&this.parent.root()||this},t.prototype.parameters=function(t){return((t=r.defaults(t,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(r.values(this.params)).filter(function(e){return!t.matchingKeys||t.matchingKeys.hasOwnProperty(e.id)})},t.prototype.parameter=function(t,e){return void 0===e&&(e={}),this.url&&this.url.parameter(t,e)||r.find(r.values(this.params),i.propEq("id",t))||e.inherit&&this.parent&&this.parent.parameter(t)},t.prototype.toString=function(){return this.fqn()},t.isStateClass=function(t){return s.isFunction(t)&&!0===t.__uiRouterState},t.isState=function(t){return s.isObject(t.__stateObjectCache)},t}();n.StateObject=a},{"../common/common":11,"../common/glob":13,"../common/hof":14,"../common/predicates":16}],50:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/predicates"),o=t("./stateObject"),s=t("../common/hof"),a=function(){function t(t,e,n,r,i){this.$registry=t,this.$urlRouter=e,this.states=n,this.builder=r,this.listeners=i,this.queue=[],this.matcher=t.matcher}return t.prototype.dispose=function(){this.queue=[]},t.prototype.register=function(t){var e=this.queue,n=o.StateObject.create(t),a=n.name;if(!i.isString(a))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(a)||r.inArray(e.map(s.prop("name")),a))throw new Error("State '"+a+"' is already defined");return e.push(n),this.flush(),n},t.prototype.flush=function(){for(var t=this,e=this.queue,n=this.states,r=this.builder,i=[],o=[],s={},a=function(e){return t.states.hasOwnProperty(e)&&t.states[e]};e.length>0;){var u=e.shift(),c=u.name,l=r.build(u),f=o.indexOf(u);if(l){var d=a(c);if(d&&d.name===c)throw new Error("State '"+c+"' is already defined");var h=a(c+".**");h&&this.$registry.deregister(h),n[c]=u,this.attachRoute(u),f>=0&&o.splice(f,1),i.push(u)}else{var p=s[c];if(s[c]=e.length,f>=0&&p===e.length)return e.push(u),n;f<0&&o.push(u),e.push(u)}}return i.length&&this.listeners.forEach(function(t){return t("registered",i.map(function(t){return t.self}))}),n},t.prototype.attachRoute=function(t){!t.abstract&&t.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(t))},t}();n.StateQueueManager=a},{"../common/common":11,"../common/hof":14,"../common/predicates":16,"./stateObject":49}],51:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./stateMatcher"),i=t("./stateBuilder"),o=t("./stateQueueManager"),s=t("../common/common"),a=t("../common/hof"),u=function(){function t(t){this._router=t,this.states={},this.listeners=[],this.matcher=new r.StateMatcher(this.states),this.builder=new i.StateBuilder(this.matcher,t.urlMatcherFactory),this.stateQueue=new o.StateQueueManager(this,t.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return t.prototype._registerRoot=function(){(this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0})).navigable=null},t.prototype.dispose=function(){var t=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(e){return t.get(e)&&t.deregister(e)})},t.prototype.onStatesChanged=function(t){return this.listeners.push(t),function(){s.removeFrom(this.listeners)(t)}.bind(this)},t.prototype.root=function(){return this._root},t.prototype.register=function(t){return this.stateQueue.register(t)},t.prototype._deregisterTree=function(t){var e=this,n=this.get().map(function(t){return t.$$state()}),r=function(t){var e=n.filter(function(e){return-1!==t.indexOf(e.parent)});return 0===e.length?e:e.concat(r(e))},i=r([t]),o=[t].concat(i).reverse();return o.forEach(function(t){var n=e._router.urlRouter;n.rules().filter(a.propEq("state",t)).forEach(n.removeRule.bind(n)),delete e.states[t.name]}),o},t.prototype.deregister=function(t){var e=this.get(t);if(!e)throw new Error("Can't deregister state; not found: "+t);var n=this._deregisterTree(e.$$state());return this.listeners.forEach(function(t){return t("deregistered",n.map(function(t){return t.self}))}),n},t.prototype.get=function(t,e){var n=this;if(0===arguments.length)return Object.keys(this.states).map(function(t){return n.states[t].self});var r=this.matcher.find(t,e);return r&&r.self||null},t.prototype.decorator=function(t,e){return this.builder.builder(t,e)},t}();n.StateRegistry=u},{"../common/common":11,"../common/hof":14,"./stateBuilder":47,"./stateMatcher":48,"./stateQueueManager":50}],52:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/predicates"),o=t("../common/queue"),s=t("../common/coreservices"),a=t("../path/pathFactory"),u=t("../path/pathNode"),c=t("../transition/transitionService"),l=t("../transition/rejectFactory"),f=t("./targetState"),d=t("../params/param"),h=t("../common/glob"),p=t("../resolve/resolveContext"),v=t("../hooks/lazyLoad"),g=t("../common/hof"),m=function(){function t(e){this.router=e,this.invalidCallbacks=[],this._defaultErrorHandler=function(t){t instanceof Error&&t.stack?(console.error(t),console.error(t.stack)):t instanceof l.Rejection?(console.error(t.toString()),t.detail&&t.detail.stack&&console.error(t.detail.stack)):console.error(t)};var n=Object.keys(t.prototype).filter(g.not(r.inArray(["current","$current","params","transition"])));r.createProxyFunctions(g.val(t.prototype),this,g.val(this),n)}return Object.defineProperty(t.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.defaultErrorHandler(r.noop),this.invalidCallbacks=[]},t.prototype._handleInvalidTargetState=function(t,e){function n(){var t=h.dequeue();if(void 0===t)return l.Rejection.invalid(e.error()).toPromise();return s.services.$q.when(t(e,i,v)).then(g).then(function(t){return t||n()})}var r=this,i=a.PathUtils.makeTargetState(this.router.stateRegistry,t),u=this.router.globals,c=function(){return u.transitionHistory.peekTail()},d=c(),h=new o.Queue(this.invalidCallbacks.slice()),v=new p.ResolveContext(t).injector(),g=function(t){if(t instanceof f.TargetState){var e=t;return(e=r.target(e.identifier(),e.params(),e.options())).valid()?c()!==d?l.Rejection.superseded().toPromise():r.transitionTo(e.identifier(),e.params(),e.options()):l.Rejection.invalid(e.error()).toPromise()}};return n()},t.prototype.onInvalid=function(t){return this.invalidCallbacks.push(t),function(){r.removeFrom(this.invalidCallbacks)(t)}.bind(this)},t.prototype.reload=function(t){return this.transitionTo(this.current,this.params,{reload:!i.isDefined(t)||t,inherit:!1,notify:!1})},t.prototype.go=function(t,e,n){var i={relative:this.$current,inherit:!0},o=r.defaults(n,i,c.defaultTransOpts);return this.transitionTo(t,e,o)},t.prototype.target=function(t,e,n){if(void 0===n&&(n={}),i.isObject(n.reload)&&!n.reload.name)throw new Error("Invalid reload state object");var r=this.router.stateRegistry;if(n.reloadState=!0===n.reload?r.root():r.matcher.find(n.reload,n.relative),n.reload&&!n.reloadState)throw new Error("No such reload state '"+(i.isString(n.reload)?n.reload:n.reload.name)+"'");return new f.TargetState(this.router.stateRegistry,t,e,n)},t.prototype.getCurrentPath=function(){var t=this,e=this.router.globals.successfulTransitions.peekTail();return e?e.treeChanges().to:[new u.PathNode(t.router.stateRegistry.root())]},t.prototype.transitionTo=function(t,e,n){var i=this;void 0===e&&(e={}),void 0===n&&(n={});var o=this.router,a=o.globals;n=r.defaults(n,c.defaultTransOpts);n=r.extend(n,{current:function(){return a.transition}});var u=this.target(t,e,n),d=this.getCurrentPath();if(!u.exists())return this._handleInvalidTargetState(d,u);if(!u.valid())return r.silentRejection(u.error());var h=function(t){return function(e){if(e instanceof l.Rejection){var n=o.globals.lastStartedTransitionId===t.$id;if(e.type===l.RejectType.IGNORED)return n&&o.urlRouter.update(),s.services.$q.when(a.current);var r=e.detail;if(e.type===l.RejectType.SUPERSEDED&&e.redirected&&r instanceof f.TargetState){var u=t.redirect(r);return u.run().catch(h(u))}if(e.type===l.RejectType.ABORTED)return n&&o.urlRouter.update(),s.services.$q.reject(e)}return i.defaultErrorHandler()(e),s.services.$q.reject(e)}},p=this.router.transitionService.create(d,u),v=p.run().catch(h(p));return r.silenceUncaughtInPromise(v),r.extend(v,{transition:p})},t.prototype.is=function(t,e,n){n=r.defaults(n,{relative:this.$current});var o=this.router.stateRegistry.matcher.find(t,n.relative);if(i.isDefined(o)){if(this.$current!==o)return!1;if(!e)return!0;var s=o.parameters({inherit:!0,matchingKeys:e});return d.Param.equals(s,d.Param.values(s,e),this.params)}},t.prototype.includes=function(t,e,n){n=r.defaults(n,{relative:this.$current});var o=i.isString(t)&&h.Glob.fromString(t);if(o){if(!o.matches(this.$current.name))return!1;t=this.$current.name}var s=this.router.stateRegistry.matcher.find(t,n.relative),a=this.$current.includes;if(i.isDefined(s)){if(!i.isDefined(a[s.name]))return!1;if(!e)return!0;var u=s.parameters({inherit:!0,matchingKeys:e});return d.Param.equals(u,d.Param.values(u,e),this.params)}},t.prototype.href=function(t,e,n){var o={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};n=r.defaults(n,o),e=e||{};var s=this.router.stateRegistry.matcher.find(t,n.relative);if(!i.isDefined(s))return null;n.inherit&&(e=this.params.$inherit(e,this.$current,s));var a=s&&n.lossy?s.navigable:s;return a&&void 0!==a.url&&null!==a.url?this.router.urlRouter.href(a.url,e,{absolute:n.absolute}):null},t.prototype.defaultErrorHandler=function(t){return this._defaultErrorHandler=t||this._defaultErrorHandler},t.prototype.get=function(t,e){var n=this.router.stateRegistry;return 0===arguments.length?n.get():n.get(t,e||this.$current)},t.prototype.lazyLoad=function(t,e){var n=this.get(t);if(!n||!n.lazyLoad)throw new Error("Can not lazy load "+t);var r=this.getCurrentPath(),i=a.PathUtils.makeTargetState(this.router.stateRegistry,r);return e=e||this.router.transitionService.create(r,i),v.lazyLoadState(e,n)},t}();n.StateService=m},{"../common/common":11,"../common/coreservices":12,"../common/glob":13,"../common/hof":14,"../common/predicates":16,"../common/queue":17,"../hooks/lazyLoad":24,"../params/param":34,"../path/pathFactory":39,"../path/pathNode":40,"../resolve/resolveContext":44,"../transition/rejectFactory":58,"../transition/transitionService":62,"./targetState":53}],53:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/predicates"),i=t("../common/strings"),o=t("../common"),s=function(){function t(t,e,n,r){this._stateRegistry=t,this._identifier=e,this._identifier=e,this._params=o.extend({},n||{}),this._options=o.extend({},r||{}),this._definition=t.matcher.find(e,this._options.relative)}return t.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},t.prototype.identifier=function(){return this._identifier},t.prototype.params=function(){return this._params},t.prototype.$state=function(){return this._definition},t.prototype.state=function(){return this._definition&&this._definition.self},t.prototype.options=function(){return this._options},t.prototype.exists=function(){return!(!this._definition||!this._definition.self)},t.prototype.valid=function(){return!this.error()},t.prototype.error=function(){var t=this.options().relative;if(!this._definition&&t){var e=t.name?t.name:t;return"Could not resolve '"+this.name()+"' from state '"+e+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},t.prototype.toString=function(){return"'"+this.name()+"'"+i.stringify(this.params())},t.prototype.withState=function(e){return new t(this._stateRegistry,e,this._params,this._options)},t.prototype.withParams=function(e,n){void 0===n&&(n=!1);var r=n?e:o.extend({},this._params,e);return new t(this._stateRegistry,this._identifier,r,this._options)},t.prototype.withOptions=function(e,n){void 0===n&&(n=!1);var r=n?e:o.extend({},this._options,e);return new t(this._stateRegistry,this._identifier,this._params,r)},t.isDef=function(t){return t&&t.state&&(r.isString(t.state)||r.isString(t.state.name))},t}();n.TargetState=s},{"../common":15,"../common/predicates":16,"../common/strings":18}],54:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/predicates"),o=t("./interface"),s=t("./transitionHook"),a=function(){function t(t){this.transition=t}return t.prototype.buildHooksForPhase=function(t){var e=this;return this.transition.router.transitionService._pluginapi._getEvents(t).map(function(t){return e.buildHooks(t)}).reduce(r.unnestR,[]).filter(r.identity)},t.prototype.buildHooks=function(t){var e=this.transition,n=e.treeChanges(),i=this.getMatchingHooks(t,n);if(!i)return[];var a={transition:e,current:e.options().current};return i.map(function(i){return i.matches(n)[t.criteriaMatchPath.name].map(function(n){var u=r.extend({bind:i.bind,traceData:{hookType:t.name,context:n}},a),c=t.criteriaMatchPath.scope===o.TransitionHookScope.STATE?n.state.self:null,l=new s.TransitionHook(e,c,i,u);return{hook:i,node:n,transitionHook:l}})}).reduce(r.unnestR,[]).sort(function(t){return void 0===t&&(t=!1),function(e,n){var r=t?-1:1,i=(e.node.state.path.length-n.node.state.path.length)*r;return 0!==i?i:n.hook.priority-e.hook.priority}}(t.reverseSort)).map(function(t){return t.transitionHook})},t.prototype.getMatchingHooks=function(t,e){var n=t.hookPhase===o.TransitionHookPhase.CREATE,s=this.transition.router.transitionService;return(n?[s]:[this.transition,s]).map(function(e){return e.getHooks(t.name)}).filter(r.assertPredicate(i.isArray,"broken event named: "+t.name)).reduce(r.unnestR,[]).filter(function(t){return t.matches(e)})},t}();n.HookBuilder=a},{"../common/common":11,"../common/predicates":16,"./interface":57,"./transitionHook":61}],55:[function(t,e,n){"use strict";function r(t,e){var n=o.isString(e)?[e]:e;return!!(o.isFunction(n)?n:function(t){for(var e=n,r=0;r<e.length;r++){var i=new a.Glob(e[r]);if(i&&i.matches(t.name)||!i&&e[r]===t.name)return!0}return!1})(t)}Object.defineProperty(n,"__esModule",{value:!0});var i=t("../common/common"),o=t("../common/predicates"),s=t("./interface"),a=t("../common/glob");n.matchState=r;var u=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.tranSvc=t,this.eventType=e,this.callback=n,this.matchCriteria=r,this.removeHookFromRegistry=i,this.invokeCount=0,this._deregistered=!1,this.priority=o.priority||0,this.bind=o.bind||null,this.invokeLimit=o.invokeLimit}return t.prototype._matchingNodes=function(t,e){if(!0===e)return t;var n=t.filter(function(t){return r(t.state,e)});return n.length?n:null},t.prototype._getDefaultMatchCriteria=function(){return i.map(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},t.prototype._getMatchingNodes=function(t){var e=this,n=i.extend(this._getDefaultMatchCriteria(),this.matchCriteria);return i.values(this.tranSvc._pluginapi._getPathTypes()).reduce(function(r,o){var a=o.scope===s.TransitionHookScope.STATE,u=t[o.name]||[],c=a?u:[i.tail(u)];return r[o.name]=e._matchingNodes(c,n[o.name]),r},{})},t.prototype.matches=function(t){var e=this._getMatchingNodes(t);return i.values(e).every(i.identity)?e:null},t.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},t}();n.RegisteredHook=u,n.makeEvent=function(t,e,n){function r(t,r,i){void 0===i&&(i={});var a=new u(e,n,r,t,s,i);return o.push(a),a.deregister.bind(a)}var o=(t._registeredHooks=t._registeredHooks||{})[n.name]=[],s=i.removeFrom(o);return t[n.name]=r,r}},{"../common/common":11,"../common/glob":13,"../common/predicates":16,"./interface":57}],56:[function(t,e,n){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(t("./interface")),r(t("./hookBuilder")),r(t("./hookRegistry")),r(t("./rejectFactory")),r(t("./transition")),r(t("./transitionHook")),r(t("./transitionEventType")),r(t("./transitionService"))},{"./hookBuilder":54,"./hookRegistry":55,"./interface":57,"./rejectFactory":58,"./transition":59,"./transitionEventType":60,"./transitionHook":61,"./transitionService":62}],57:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(t){t[t.CREATE=0]="CREATE",t[t.BEFORE=1]="BEFORE",t[t.RUN=2]="RUN",t[t.SUCCESS=3]="SUCCESS",t[t.ERROR=4]="ERROR"}(n.TransitionHookPhase||(n.TransitionHookPhase={}));!function(t){t[t.TRANSITION=0]="TRANSITION",t[t.STATE=1]="STATE"}(n.TransitionHookScope||(n.TransitionHookScope={}))},{}],58:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=t("../common/common"),o=t("../common/strings"),s=t("../common/hof");!function(t){t[t.SUPERSEDED=2]="SUPERSEDED",t[t.ABORTED=3]="ABORTED",t[t.INVALID=4]="INVALID",t[t.IGNORED=5]="IGNORED",t[t.ERROR=6]="ERROR"}(r=n.RejectType||(n.RejectType={}));var a=0,u=function(){function t(t,e,n){this.$id=a++,this.type=t,this.message=e,this.detail=n}return t.prototype.toString=function(){var t=function(t){return t&&t.toString!==Object.prototype.toString?t.toString():o.stringify(t)}(this.detail);return"Transition Rejection($id: "+this.$id+" type: "+this.type+", message: "+this.message+", detail: "+t+")"},t.prototype.toPromise=function(){return i.extend(i.silentRejection(this),{_transitionRejection:this})},t.isRejectionPromise=function(e){return e&&"function"==typeof e.then&&s.is(t)(e._transitionRejection)},t.superseded=function(e,n){var i=new t(r.SUPERSEDED,"The transition has been superseded by a different transition",e);return n&&n.redirected&&(i.redirected=!0),i},t.redirected=function(e){return t.superseded(e,{redirected:!0})},t.invalid=function(e){return new t(r.INVALID,"This transition is invalid",e)},t.ignored=function(e){return new t(r.IGNORED,"The transition was ignored",e)},t.aborted=function(e){return new t(r.ABORTED,"The transition has been aborted",e)},t.errored=function(e){return new t(r.ERROR,"The transition errored",e)},t.normalize=function(e){return s.is(t)(e)?e:t.errored(e)},t}();n.Rejection=u},{"../common/common":11,"../common/hof":14,"../common/strings":18}],59:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/trace"),i=t("../common/coreservices"),o=t("../common/strings"),s=t("../common/common"),a=t("../common/predicates"),u=t("../common/hof"),c=t("./interface"),l=t("./transitionHook"),f=t("./hookRegistry"),d=t("./hookBuilder"),h=t("../path/pathFactory"),p=t("../params/param"),v=t("../resolve/resolvable"),g=t("../resolve/resolveContext"),m=u.prop("self"),y=function(){function t(t,e,n){var r=this;if(this._deferred=i.services.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new d.HookBuilder(this),this.isActive=function(){return r.router.globals.transition===r},this.router=n,this._targetState=e,!e.valid())throw new Error(e.error());this._options=s.extend({current:u.val(this)},e.options()),this.$id=n.transitionService._transitionCount++;var o=h.PathUtils.buildToPath(t,e);this._treeChanges=h.PathUtils.treeChanges(t,o,this._options.reloadState),this.createTransitionHookRegFns();var a=this._hookBuilder.buildHooksForPhase(c.TransitionHookPhase.CREATE);l.TransitionHook.invokeHooks(a,function(){return null}),this.applyViewConfigs(n)}return t.prototype.onBefore=function(t,e,n){},t.prototype.onStart=function(t,e,n){},t.prototype.onExit=function(t,e,n){},t.prototype.onRetain=function(t,e,n){},t.prototype.onEnter=function(t,e,n){},t.prototype.onFinish=function(t,e,n){},t.prototype.onSuccess=function(t,e,n){},t.prototype.onError=function(t,e,n){},t.prototype.createTransitionHookRegFns=function(){var t=this;this.router.transitionService._pluginapi._getEvents().filter(function(t){return t.hookPhase!==c.TransitionHookPhase.CREATE}).forEach(function(e){return f.makeEvent(t,t.router.transitionService,e)})},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype.applyViewConfigs=function(t){var e=this._treeChanges.entering.map(function(t){return t.state});h.PathUtils.applyViewConfigs(t.transitionService.$view,this._treeChanges.to,e)},t.prototype.$from=function(){return s.tail(this._treeChanges.from).state},t.prototype.$to=function(){return s.tail(this._treeChanges.to).state},t.prototype.from=function(){return this.$from().self},t.prototype.to=function(){return this.$to().self},t.prototype.targetState=function(){return this._targetState},t.prototype.is=function(e){return e instanceof t?this.is({to:e.$to().name,from:e.$from().name}):!(e.to&&!f.matchState(this.$to(),e.to)||e.from&&!f.matchState(this.$from(),e.from))},t.prototype.params=function(t){return void 0===t&&(t="to"),Object.freeze(this._treeChanges[t].map(u.prop("paramValues")).reduce(s.mergeR,{}))},t.prototype.injector=function(t,e){void 0===e&&(e="to");var n=this._treeChanges[e];return t&&(n=h.PathUtils.subPath(n,function(e){return e.state===t||e.state.name===t})),new g.ResolveContext(n).injector()},t.prototype.getResolveTokens=function(t){return void 0===t&&(t="to"),new g.ResolveContext(this._treeChanges[t]).getTokens()},t.prototype.addResolvable=function(t,e){void 0===e&&(e=""),t=u.is(v.Resolvable)(t)?t:new v.Resolvable(t);var n="string"==typeof e?e:e.name,r=this._treeChanges.to,i=s.find(r,function(t){return t.state.name===n});new g.ResolveContext(r).addResolvables([t],i.state)},t.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},t.prototype.originalTransition=function(){var t=this.redirectedFrom();return t&&t.originalTransition()||this},t.prototype.options=function(){return this._options},t.prototype.entering=function(){return s.map(this._treeChanges.entering,u.prop("state")).map(m)},t.prototype.exiting=function(){return s.map(this._treeChanges.exiting,u.prop("state")).map(m).reverse()},t.prototype.retained=function(){return s.map(this._treeChanges.retained,u.prop("state")).map(m)},t.prototype.views=function(t,e){void 0===t&&(t="entering");var n=this._treeChanges[t];return(n=e?n.filter(u.propEq("state",e)):n).map(u.prop("views")).filter(s.identity).reduce(s.unnestR,[])},t.prototype.treeChanges=function(t){return t?this._treeChanges[t]:this._treeChanges},t.prototype.redirect=function(t){for(var e=1,n=this;null!=(n=n.redirectedFrom());)if(++e>20)throw new Error("Too many consecutive Transition redirects (20+)");var r={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==t.options().location&&(r.location="replace");var i=s.extend({},this.options(),t.options(),r);t=t.withOptions(i,!0);var o=this.router.transitionService.create(this._treeChanges.from,t),a=this._treeChanges.entering,c=o._treeChanges.entering;return h.PathUtils.matching(c,a,h.PathUtils.nonDynamicParams).filter(u.not(function(t){return function(e){return t&&e.state.includes[t.name]}}(t.options().reloadState))).forEach(function(t,e){t.resolvables=a[e].resolvables}),o},t.prototype._changedParams=function(){var t=this._treeChanges;if(!this._options.reload&&!t.exiting.length&&!t.entering.length&&t.to.length===t.from.length){if(!s.arrayTuples(t.to,t.from).map(function(t){return t[0].state!==t[1].state}).reduce(s.anyTrueR,!1)){var e=t.to.map(function(t){return t.paramSchema}),n=[t.to,t.from].map(function(t){return t.map(function(t){return t.paramValues})}),r=n[0],i=n[1];return s.arrayTuples(e,r,i).map(function(t){var e=t[0],n=t[1],r=t[2];return p.Param.changed(e,n,r)}).reduce(s.unnestR,[])}}},t.prototype.dynamic=function(){var t=this._changedParams();return!!t&&t.map(function(t){return t.dynamic}).reduce(s.anyTrueR,!1)},t.prototype.ignored=function(){return!!this._ignoredReason()},t.prototype._ignoredReason=function(){var t=this.router.globals.transition,e=this._options.reloadState,n=function(t,n){if(t.length!==n.length)return!1;var r=h.PathUtils.matching(t,n);return t.length===r.filter(function(t){return!e||!t.state.includes[e.name]}).length},r=this.treeChanges(),i=t&&t.treeChanges();return i&&n(i.to,r.to)&&n(i.exiting,r.exiting)?"SameAsPending":0===r.exiting.length&&0===r.entering.length&&n(r.from,r.to)?"SameAsCurrent":void 0},t.prototype.run=function(){var t=this,e=l.TransitionHook.runAllHooks,n=function(e){return t._hookBuilder.buildHooksForPhase(e)},o=n(c.TransitionHookPhase.BEFORE);return l.TransitionHook.invokeHooks(o,function(){var e=t.router.globals;return e.lastStartedTransitionId=t.$id,e.transition=t,e.transitionHistory.enqueue(t),r.trace.traceTransitionStart(t),i.services.$q.when(void 0)}).then(function(){var t=n(c.TransitionHookPhase.RUN);return l.TransitionHook.invokeHooks(t,function(){return i.services.$q.when(void 0)})}).then(function(){r.trace.traceSuccess(t.$to(),t),t.success=!0,t._deferred.resolve(t.to()),e(n(c.TransitionHookPhase.SUCCESS))},function(i){r.trace.traceError(i,t),t.success=!1,t._deferred.reject(i),t._error=i,e(n(c.TransitionHookPhase.ERROR))}),this.promise},t.prototype.valid=function(){return!this.error()||void 0!==this.success},t.prototype.abort=function(){a.isUndefined(this.success)&&(this._aborted=!0)},t.prototype.error=function(){var t=this.$to();if(t.self.abstract)return"Cannot transition to abstract state '"+t.name+"'";var e=t.parameters(),n=this.params(),r=e.filter(function(t){return!t.validates(n[t.id])});return r.length?"Param values not valid for state '"+t.name+"'. Invalid params: [ "+r.map(function(t){return t.id}).join(", ")+" ]":!1===this.success?this._error:void 0},t.prototype.toString=function(){var t=this.from(),e=this.to(),n=function(t){return null!==t["#"]&&void 0!==t["#"]?t:s.omit(t,["#"])};return"Transition#"+this.$id+"( '"+(a.isObject(t)?t.name:t)+"'"+o.stringify(n(this._treeChanges.from.map(u.prop("paramValues")).reduce(s.mergeR,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(a.isObject(e)?e.name:e)+"'"+o.stringify(n(this.params()))+" )"},t.diToken=t,t}();n.Transition=y},{"../common/common":11,"../common/coreservices":12,"../common/hof":14,"../common/predicates":16,"../common/strings":18,"../common/trace":19,"../params/param":34,"../path/pathFactory":39,"../resolve/resolvable":43,"../resolve/resolveContext":44,"./hookBuilder":54,"./hookRegistry":55,"./interface":57,"./transitionHook":61}],60:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./transitionHook"),i=function(){return function(t,e,n,i,o,s,a,u){void 0===o&&(o=!1),void 0===s&&(s=r.TransitionHook.HANDLE_RESULT),void 0===a&&(a=r.TransitionHook.REJECT_ERROR),void 0===u&&(u=!1),this.name=t,this.hookPhase=e,this.hookOrder=n,this.criteriaMatchPath=i,this.reverseSort=o,this.getResultHandler=s,this.getErrorHandler=a,this.synchronous=u}}();n.TransitionEventType=i},{"./transitionHook":61}],61:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./interface"),i=t("../common/common"),o=t("../common/strings"),s=t("../common/predicates"),a=t("../common/hof"),u=t("../common/trace"),c=t("../common/coreservices"),l=t("./rejectFactory"),f=t("../state/targetState"),d={current:i.noop,transition:null,traceData:{},bind:null},h=function(){function t(t,e,n,o){var s=this;this.transition=t,this.stateContext=e,this.registeredHook=n,this.options=o,this.isSuperseded=function(){return s.type.hookPhase===r.TransitionHookPhase.RUN&&!s.options.transition.isActive()},this.options=i.defaults(o,d),this.type=n.eventType}return t.prototype.logError=function(t){this.transition.router.stateService.defaultErrorHandler()(t)},t.prototype.invokeHook=function(){var t=this,e=this.registeredHook;if(!e._deregistered){var n=this.getNotCurrentRejection();if(n)return n;var r=this.options;u.trace.traceHookInvocation(this,this.transition,r);var i=function(n){return e.eventType.getErrorHandler(t)(n)},o=function(n){return e.eventType.getResultHandler(t)(n)};try{var a=e.callback.call(r.bind,t.transition,t.stateContext);return!this.type.synchronous&&s.isPromise(a)?a.catch(function(t){return l.Rejection.normalize(t).toPromise()}).then(o,i):o(a)}catch(t){return i(l.Rejection.normalize(t))}finally{e.invokeLimit&&++e.invokeCount>=e.invokeLimit&&e.deregister()}}},t.prototype.handleHookResult=function(t){var e=this,n=this.getNotCurrentRejection();if(n)return n;if(s.isPromise(t))return t.then(function(t){return e.handleHookResult(t)});if(u.trace.traceHookResult(t,this.transition,this.options),!1===t)return l.Rejection.aborted("Hook aborted transition").toPromise();return a.is(f.TargetState)(t)?l.Rejection.redirected(t).toPromise():void 0},t.prototype.getNotCurrentRejection=function(){var t=this.transition.router;return t._disposed?l.Rejection.aborted("UIRouter instance #"+t.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?l.Rejection.aborted().toPromise():this.isSuperseded()?l.Rejection.superseded(this.options.current()).toPromise():void 0},t.prototype.toString=function(){var t=this.options,e=this.registeredHook,n=a.parse("traceData.hookType")(t)||"internal",r=a.parse("traceData.context.state.name")(t)||a.parse("traceData.context")(t)||"unknown",i=o.fnToString(e.callback);return n+" context: "+r+", "+o.maxLength(200,i)},t.chain=function(t,e){return t.reduce(function(t,e){return t.then(function(){return e.invokeHook()})},e||c.services.$q.when())},t.invokeHooks=function(e,n){for(var r=0;r<e.length;r++){var i=e[r].invokeHook();if(s.isPromise(i)){var o=e.slice(r+1);return t.chain(o,i).then(n)}}return n()},t.runAllHooks=function(t){t.forEach(function(t){return t.invokeHook()})},t.HANDLE_RESULT=function(t){return function(e){return t.handleHookResult(e)}},t.LOG_REJECTED_RESULT=function(t){return function(e){s.isPromise(e)&&e.catch(function(e){return t.logError(l.Rejection.normalize(e))})}},t.LOG_ERROR=function(t){return function(e){return t.logError(e)}},t.REJECT_ERROR=function(t){return function(t){return i.silentRejection(t)}},t.THROW_ERROR=function(t){return function(t){throw t}},t}();n.TransitionHook=h},{"../common/common":11,"../common/coreservices":12,"../common/hof":14,"../common/predicates":16,"../common/strings":18,"../common/trace":19,"../state/targetState":53,"./interface":57,"./rejectFactory":58}],62:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./interface"),i=t("./transition"),o=t("./hookRegistry"),s=t("../hooks/coreResolvables"),a=t("../hooks/redirectTo"),u=t("../hooks/onEnterExitRetain"),c=t("../hooks/resolve"),l=t("../hooks/views"),f=t("../hooks/updateGlobals"),d=t("../hooks/url"),h=t("../hooks/lazyLoad"),p=t("./transitionEventType"),v=t("./transitionHook"),g=t("../common/predicates"),m=t("../common/common"),y=t("../common/hof"),b=t("../hooks/ignoredTransition"),w=t("../hooks/invalidTransition");n.defaultTransOpts={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"};var x=function(){function t(t){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=t,this.$view=t.viewService,this._deregisterHookFns={},this._pluginapi=m.createProxyFunctions(y.val(this),{},y.val(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks()}return t.prototype.onCreate=function(t,e,n){},t.prototype.onBefore=function(t,e,n){},t.prototype.onStart=function(t,e,n){},t.prototype.onExit=function(t,e,n){},t.prototype.onRetain=function(t,e,n){},t.prototype.onEnter=function(t,e,n){},t.prototype.onFinish=function(t,e,n){},t.prototype.onSuccess=function(t,e,n){},t.prototype.onError=function(t,e,n){},t.prototype.dispose=function(t){m.values(this._registeredHooks).forEach(function(t){return t.forEach(function(e){e._deregistered=!0,m.removeFrom(t,e)})})},t.prototype.create=function(t,e){return new i.Transition(t,e,this._router)},t.prototype._defineCoreEvents=function(){var t=r.TransitionHookPhase,e=v.TransitionHook,n=this._criteriaPaths;this._defineEvent("onCreate",t.CREATE,0,n.to,!1,e.LOG_REJECTED_RESULT,e.THROW_ERROR,!0),this._defineEvent("onBefore",t.BEFORE,0,n.to),this._defineEvent("onStart",t.RUN,0,n.to),this._defineEvent("onExit",t.RUN,100,n.exiting,!0),this._defineEvent("onRetain",t.RUN,200,n.retained),this._defineEvent("onEnter",t.RUN,300,n.entering),this._defineEvent("onFinish",t.RUN,400,n.to),this._defineEvent("onSuccess",t.SUCCESS,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0),this._defineEvent("onError",t.ERROR,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0)},t.prototype._defineCorePaths=function(){var t=r.TransitionHookScope.STATE,e=r.TransitionHookScope.TRANSITION;this._definePathType("to",e),this._definePathType("from",e),this._definePathType("exiting",t),this._definePathType("retained",t),this._definePathType("entering",t)},t.prototype._defineEvent=function(t,e,n,r,i,s,a,u){void 0===i&&(i=!1),void 0===s&&(s=v.TransitionHook.HANDLE_RESULT),void 0===a&&(a=v.TransitionHook.REJECT_ERROR),void 0===u&&(u=!1);var c=new p.TransitionEventType(t,e,n,r,i,s,a,u);this._eventTypes.push(c),o.makeEvent(this,this,c)},t.prototype._getEvents=function(t){return(g.isDefined(t)?this._eventTypes.filter(function(e){return e.hookPhase===t}):this._eventTypes.slice()).sort(function(t,e){var n=t.hookPhase-e.hookPhase;return 0===n?t.hookOrder-e.hookOrder:n})},t.prototype._definePathType=function(t,e){this._criteriaPaths[t]={name:t,scope:e}},t.prototype._getPathTypes=function(){return this._criteriaPaths},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype._registerCoreTransitionHooks=function(){var t=this._deregisterHookFns;t.addCoreResolves=s.registerAddCoreResolvables(this),t.ignored=b.registerIgnoredTransitionHook(this),t.invalid=w.registerInvalidTransitionHook(this),t.redirectTo=a.registerRedirectToHook(this),t.onExit=u.registerOnExitHook(this),t.onRetain=u.registerOnRetainHook(this),t.onEnter=u.registerOnEnterHook(this),t.eagerResolve=c.registerEagerResolvePath(this),t.lazyResolve=c.registerLazyResolveState(this),t.loadViews=l.registerLoadEnteringViews(this),t.activateViews=l.registerActivateViews(this),t.updateGlobals=f.registerUpdateGlobalState(this),t.updateUrl=d.registerUpdateUrl(this),t.lazyLoad=h.registerLazyLoadHook(this)},t}();n.TransitionService=x},{"../common/common":11,"../common/hof":14,"../common/predicates":16,"../hooks/coreResolvables":21,"../hooks/ignoredTransition":22,"../hooks/invalidTransition":23,"../hooks/lazyLoad":24,"../hooks/onEnterExitRetain":25,"../hooks/redirectTo":26,"../hooks/resolve":27,"../hooks/updateGlobals":28,"../hooks/url":29,"../hooks/views":30,"./hookRegistry":55,"./interface":57,"./transition":59,"./transitionEventType":60,"./transitionHook":61}],63:[function(t,e,n){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(t("./urlMatcher")),r(t("./urlMatcherFactory")),r(t("./urlRouter")),r(t("./urlRule")),r(t("./urlService"))},{"./urlMatcher":64,"./urlMatcherFactory":65,"./urlRouter":66,"./urlRule":67,"./urlService":68}],64:[function(t,e,n){"use strict";function r(t,e){var n=["",""],r=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return r;switch(e.squash){case!1:n=["(",")"+(e.isOptional?"?":"")];break;case!0:r=r.replace(/\/$/,""),n=["(?:/(",")|/)?"];break;default:n=["("+e.squash+"|",")?"]}return r+n[0]+e.type.pattern.source+n[1]}Object.defineProperty(n,"__esModule",{value:!0});var i=t("../common/common"),o=t("../common/hof"),s=t("../common/predicates"),a=t("../params/param"),u=t("../common/strings"),c=u.splitOnDelim("/"),l=function(){function t(e,n,s,a){var u=this;this.config=a,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=e,this.config=i.defaults(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:i.identity});for(var c,l,f,d=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,h=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,p=0,v=[],g=function(n){if(!t.nameValidator.test(n))throw new Error("Invalid parameter name '"+n+"' in pattern '"+e+"'");if(i.find(u._params,o.propEq("id",n)))throw new Error("Duplicate parameter name '"+n+"' in pattern '"+e+"'")},m=function(t,r){var o=t[2]||t[3],s=r?t[4]:t[4]||("*"===t[1]?"[\\s\\S]*":null);return{id:o,regexp:s,cfg:u.config.params[o],segment:e.substring(p,t.index),type:s?n.type(s)||function(t){return i.inherit(n.type(r?"query":"path"),{pattern:new RegExp(t,u.config.caseInsensitive?"i":void 0)})}(s):null}};(c=d.exec(e))&&!((l=m(c,!1)).segment.indexOf("?")>=0);)g(l.id),this._params.push(s.fromPath(l.id,l.type,this.config.paramMap(l.cfg,!1))),this._segments.push(l.segment),v.push([l.segment,i.tail(this._params)]),p=d.lastIndex;var y=(f=e.substring(p)).indexOf("?");if(y>=0){var b=f.substring(y);if(f=f.substring(0,y),b.length>0)for(p=0;c=h.exec(b);)g((l=m(c,!0)).id),this._params.push(s.fromSearch(l.id,l.type,this.config.paramMap(l.cfg,!0))),p=d.lastIndex}this._segments.push(f),this._compiled=v.map(function(t){return r.apply(null,t)}).concat(r(f))}return t.prototype.append=function(t){return this._children.push(t),t._cache={path:this._cache.path.concat(t),parent:this,pattern:null},t},t.prototype.isRoot=function(){return this._cache.path[0]===this},t.prototype.toString=function(){return this.pattern},t.prototype.exec=function(t,e,n,r){function a(t){var e=function(t){return t.split("").reverse().join("")},n=e(t).split(/-(?!\\)/),r=i.map(n,e);return i.map(r,function(t){return t.replace(/\\-/g,"-")}).reverse()}var u=this;void 0===e&&(e={}),void 0===r&&(r={});var c=function(t,e,n){return t[e]=t[e]||n()}(this._cache,"pattern",function(){return new RegExp(["^",i.unnest(u._cache.path.map(o.prop("_compiled"))).join(""),!1===u.config.strict?"/?":"","$"].join(""),u.config.caseInsensitive?"i":void 0)}).exec(t);if(!c)return null;var l=this.parameters(),f=l.filter(function(t){return!t.isSearch()}),d=l.filter(function(t){return t.isSearch()}),h=this._cache.path.map(function(t){return t._segments.length-1}).reduce(function(t,e){return t+e}),p={};if(h!==c.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var v=0;v<h;v++){for(var g=f[v],m=c[v+1],y=0;y<g.replace.length;y++)g.replace[y].from===m&&(m=g.replace[y].to);m&&!0===g.array&&(m=a(m)),s.isDefined(m)&&(m=g.type.decode(m)),p[g.id]=g.value(m)}return d.forEach(function(t){for(var n=e[t.id],r=0;r<t.replace.length;r++)t.replace[r].from===n&&(n=t.replace[r].to);s.isDefined(n)&&(n=t.type.decode(n)),p[t.id]=t.value(n)}),n&&(p["#"]=n),p},t.prototype.parameters=function(t){return void 0===t&&(t={}),!1===t.inherit?this._params:i.unnest(this._cache.path.map(function(t){return t._params}))},t.prototype.parameter=function(t,e){var n=this;void 0===e&&(e={});var r=this._cache.parent;return function(){for(var e=0,r=n._params;e<r.length;e++){var i=r[e];if(i.id===t)return i}}()||!1!==e.inherit&&r&&r.parameter(t,e)||null},t.prototype.validates=function(t){t=t||{};return this.parameters().filter(function(e){return t.hasOwnProperty(e.id)}).map(function(e){return function(t,e){return!t||t.validates(e)}(e,t[e.id])}).reduce(i.allTrueR,!0)},t.prototype.format=function(e){function n(t){var n=t.value(e[t.id]),r=t.validates(n),i=t.isDefaultValue(n);return{param:t,value:n,isValid:r,isDefaultValue:i,squash:!!i&&t.squash,encoded:t.type.encode(n)}}void 0===e&&(e={});var r=this._cache.path,o=r.map(t.pathSegmentsAndParams).reduce(i.unnestR,[]).map(function(t){return s.isString(t)?t:n(t)}),a=r.map(t.queryParams).reduce(i.unnestR,[]).map(n);if(o.concat(a).filter(function(t){return!1===t.isValid}).length)return null;var u=o.reduce(function(e,n){if(s.isString(n))return e+n;var r=n.squash,o=n.encoded,a=n.param;return!0===r?e.match(/\/$/)?e.slice(0,-1):e:s.isString(r)?e+r:!1!==r?e:null==o?e:s.isArray(o)?e+i.map(o,t.encodeDashes).join("-"):a.raw?e+o:e+encodeURIComponent(o)},""),c=a.map(function(t){var e=t.param,n=t.squash,r=t.encoded,o=t.isDefaultValue;if(!(null==r||o&&!1!==n)&&(s.isArray(r)||(r=[r]),0!==r.length))return e.raw||(r=i.map(r,encodeURIComponent)),r.map(function(t){return e.id+"="+t})}).filter(i.identity).reduce(i.unnestR,[]).join("&");return u+(c?"?"+c:"")+(e["#"]?"#"+e["#"]:"")},t.encodeDashes=function(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})},t.pathSegmentsAndParams=function(t){var e=t._segments,n=t._params.filter(function(t){return t.location===a.DefType.PATH});return i.arrayTuples(e,n.concat(void 0)).reduce(i.unnestR,[]).filter(function(t){return""!==t&&s.isDefined(t)})},t.queryParams=function(t){return t._params.filter(function(t){return t.location===a.DefType.SEARCH})},t.compare=function(e,n){var r=function(e){return e._cache.weights=e._cache.weights||function(e){return e._cache.segments=e._cache.segments||e._cache.path.map(t.pathSegmentsAndParams).reduce(i.unnestR,[]).reduce(u.joinNeighborsR,[]).map(function(t){return s.isString(t)?c(t):t}).reduce(i.unnestR,[])}(e).map(function(t){return"/"===t?1:s.isString(t)?2:t instanceof a.Param?3:void 0})},o=r(e),l=r(n);!function(t,e,n){for(var r=Math.max(t.length,e.length);t.length<r;)t.push(n);for(;e.length<r;)e.push(n)}(o,l,0);var f,d,h=i.arrayTuples(o,l);for(d=0;d<h.length;d++)if(0!=(f=h[d][0]-h[d][1]))return f;return 0},t.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,t}();n.UrlMatcher=l},{"../common/common":11,"../common/hof":14,"../common/predicates":16,"../common/strings":18,"../params/param":34}],65:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/predicates"),o=t("./urlMatcher"),s=t("../params/param"),a=t("../params/paramTypes"),u=function(){function t(){var t=this;this.paramTypes=new a.ParamTypes,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this._getConfig=function(e){return r.extend({strict:t._isStrictMode,caseInsensitive:t._isCaseInsensitive},e)},this.paramFactory={fromConfig:function(e,n,r){return new s.Param(e,n,r,s.DefType.CONFIG,t)},fromPath:function(e,n,r){return new s.Param(e,n,r,s.DefType.PATH,t)},fromSearch:function(e,n,r){return new s.Param(e,n,r,s.DefType.SEARCH,t)}},r.extend(this,{UrlMatcher:o.UrlMatcher,Param:s.Param})}return t.prototype.caseInsensitive=function(t){return this._isCaseInsensitive=i.isDefined(t)?t:this._isCaseInsensitive},t.prototype.strictMode=function(t){return this._isStrictMode=i.isDefined(t)?t:this._isStrictMode},t.prototype.defaultSquashPolicy=function(t){if(i.isDefined(t)&&!0!==t&&!1!==t&&!i.isString(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=i.isDefined(t)?t:this._defaultSquashPolicy},t.prototype.compile=function(t,e){return new o.UrlMatcher(t,this.paramTypes,this.paramFactory,this._getConfig(e))},t.prototype.isMatcher=function(t){if(!i.isObject(t))return!1;var e=!0;return r.forEach(o.UrlMatcher.prototype,function(n,r){i.isFunction(n)&&(e=e&&i.isDefined(t[r])&&i.isFunction(t[r]))}),e},t.prototype.type=function(t,e,n){var r=this.paramTypes.type(t,e,n);return i.isDefined(e)?this:r},t.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},t.prototype.dispose=function(){this.paramTypes.dispose()},t}();n.UrlMatcherFactory=u},{"../common/common":11,"../common/predicates":16,"../params/param":34,"../params/paramTypes":36,"./urlMatcher":64}],66:[function(t,e,n){"use strict";function r(t){if(!(s.isFunction(t)||s.isString(t)||u.is(l.TargetState)(t)||l.TargetState.isDef(t)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return s.isFunction(t)?t:u.val(t)}Object.defineProperty(n,"__esModule",{value:!0});var i,o=t("../common/common"),s=t("../common/predicates"),a=t("./urlMatcher"),u=t("../common/hof"),c=t("./urlRule"),l=t("../state/targetState"),f=t("../common");i=function(t,e){var n=function(t,e){return(e.priority||0)-(t.priority||0)}(t,e);return 0!==n?n:0!==(n=function(t,e){var n={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1};return(n[t.type]||0)-(n[e.type]||0)}(t,e))?n:0!==(n=function(t,e){return t.urlMatcher&&e.urlMatcher?a.UrlMatcher.compare(t.urlMatcher,e.urlMatcher):0}(t,e))?n:function(t,e){var n={STATE:!0,URLMATCHER:!0};return n[t.type]&&n[e.type]?0:(t.$id||0)-(e.$id||0)}(t,e)};var d=function(){function t(e){this._sortFn=i,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=e,this.urlRuleFactory=new c.UrlRuleFactory(e),o.createProxyFunctions(u.val(t.prototype),this,u.val(this))}return t.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},t.prototype.sort=function(t){this._rules=this.stableSort(this._rules,this._sortFn=t||this._sortFn),this._sorted=!0},t.prototype.ensureSorted=function(){this._sorted||this.sort()},t.prototype.stableSort=function(t,e){var n=t.map(function(t,e){return{elem:t,idx:e}});return n.sort(function(t,n){var r=e(t.elem,n.elem);return 0===r?t.idx-n.idx:r}),n.map(function(t){return t.elem})},t.prototype.match=function(t){var e=this;this.ensureSorted(),t=o.extend({path:"",search:{},hash:""},t);var n=this.rules();this._otherwiseFn&&n.push(this._otherwiseFn);for(var r,i=function(n){var r=n.match(t,e._router);return r&&{match:r,rule:n,weight:n.matchPriority(r)}},s=0;s<n.length&&(!r||0===this._sortFn(n[s],r.rule));s++){var a=i(n[s]);r=!r||a&&a.weight>r.weight?a:r}return r},t.prototype.sync=function(t){if(!t||!t.defaultPrevented){var e=this._router,n=e.urlService,r=e.stateService,i={path:n.path(),search:n.search(),hash:n.hash()},o=this.match(i);u.pattern([[s.isString,function(t){return n.url(t,!0)}],[l.TargetState.isDef,function(t){return r.go(t.state,t.params,t.options)}],[u.is(l.TargetState),function(t){return r.go(t.state(),t.params(),t.options())}]])(o&&o.rule.handler(o.match,i,e))}},t.prototype.listen=function(t){var e=this;if(!1!==t)return this._stopFn=this._stopFn||this._router.urlService.onChange(function(t){return e.sync(t)});this._stopFn&&this._stopFn(),delete this._stopFn},t.prototype.update=function(t){var e=this._router.locationService;t?this.location=e.path():e.path()!==this.location&&e.url(this.location,!0)},t.prototype.push=function(t,e,n){var r=n&&!!n.replace;this._router.urlService.url(t.format(e||{}),r)},t.prototype.href=function(t,e,n){var r=t.format(e);if(null==r)return null;n=n||{absolute:!1};var i=this._router.urlService.config,o=i.html5Mode();if(o||null===r||(r="#"+i.hashPrefix()+r),r=function(t,e,n,r){return"/"===r?t:e?f.stripFile(r)+t:n?r.slice(1)+t:t}(r,o,n.absolute,i.baseHref()),!n.absolute||!r)return r;var s=!o&&r?"/":"",a=i.port();return a=80===a||443===a?"":":"+a,[i.protocol(),"://",i.host(),a,s,r].join("")},t.prototype.rule=function(t){var e=this;if(!c.UrlRuleFactory.isUrlRule(t))throw new Error("invalid rule");return t.$id=this._id++,t.priority=t.priority||0,this._rules.push(t),this._sorted=!1,function(){return e.removeRule(t)}},t.prototype.removeRule=function(t){o.removeFrom(this._rules,t)},t.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},t.prototype.otherwise=function(t){var e=r(t);this._otherwiseFn=this.urlRuleFactory.create(u.val(!0),e),this._sorted=!1},t.prototype.initial=function(t){var e=r(t);this.rule(this.urlRuleFactory.create(function(t,e){return 0===e.globals.transitionHistory.size()&&!!/^\/?$/.exec(t.path)},e))},t.prototype.when=function(t,e,n){var r=this.urlRuleFactory.create(t,e);return s.isDefined(n&&n.priority)&&(r.priority=n.priority),this.rule(r),r},t.prototype.deferIntercept=function(t){void 0===t&&(t=!0),this.interceptDeferred=t},t}();n.UrlRouter=d},{"../common":15,"../common/common":11,"../common/hof":14,"../common/predicates":16,"../state/targetState":53,"./urlMatcher":64,"./urlRule":67}],67:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./urlMatcher"),i=t("../common/predicates"),o=t("../common/common"),s=t("../common/hof"),a=function(){function t(t){this.router=t}return t.prototype.compile=function(t){return this.router.urlMatcherFactory.compile(t)},t.prototype.create=function(t,e){var n=this,o=s.pattern([[i.isString,function(t){return o(n.compile(t))}],[s.is(r.UrlMatcher),function(t){return n.fromUrlMatcher(t,e)}],[i.isState,function(t){return n.fromState(t,n.router)}],[s.is(RegExp),function(t){return n.fromRegExp(t,e)}],[i.isFunction,function(t){return new u(t,e)}]]),a=o(t);if(!a)throw new Error("invalid 'what' in when()");return a},t.prototype.fromUrlMatcher=function(t,e){var n=e;i.isString(e)&&(e=this.router.urlMatcherFactory.compile(e)),s.is(r.UrlMatcher)(e)&&(n=function(t){return e.format(t)});var a={urlMatcher:t,matchPriority:function(e){var n=t.parameters().filter(function(t){return t.isOptional});return n.length?n.filter(function(t){return e[t.id]}).length/n.length:1e-6},type:"URLMATCHER"};return o.extend(new u(function(e){var n=t.exec(e.path,e.search,e.hash);return t.validates(n)&&n},n),a)},t.prototype.fromState=function(t,e){var n={state:t,type:"STATE"};return o.extend(this.fromUrlMatcher(t.url,function(n){var r=e.stateService,i=e.globals;r.href(t,n)!==r.href(i.current,i.params)&&r.transitionTo(t,n,{inherit:!0,source:"url"})}),n)},t.prototype.fromRegExp=function(t,e){if(t.global||t.sticky)throw new Error("Rule RegExp must not be global or sticky");var n=i.isString(e)?function(t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}:e,r={regexp:t,type:"REGEXP"};return o.extend(new u(function(e){return t.exec(e.path)},n),r)},t.isUrlRule=function(t){return t&&["type","match","handler"].every(function(e){return i.isDefined(t[e])})},t}();n.UrlRuleFactory=a;var u=function(){return function(t,e){var n=this;this.match=t,this.type="RAW",this.matchPriority=function(t){return 0-n.$id},this.handler=e||o.identity}}();n.BaseUrlRule=u},{"../common/common":11,"../common/hof":14,"../common/predicates":16,"./urlMatcher":64}],68:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/coreservices"),i=t("../common/common"),o=function(t){return t.reduce(function(t,e){return t[e]=r.notImplemented(e),t},{dispose:i.noop})},s=["url","path","search","hash","onChange"],a=["port","protocol","host","baseHref","html5Mode","hashPrefix"],u=["type","caseInsensitive","strictMode","defaultSquashPolicy"],c=["sort","when","initial","otherwise","rules","rule","removeRule"],l=["deferIntercept","listen","sync","match"],f=function(){function t(t,e){void 0===e&&(e=!0),this.router=t,this.rules={},this.config={};var n=function(){return t.locationService};i.createProxyFunctions(n,this,n,s,e);var r=function(){return t.locationConfig};i.createProxyFunctions(r,this.config,r,a,e);var o=function(){return t.urlMatcherFactory};i.createProxyFunctions(o,this.config,o,u);var f=function(){return t.urlRouter};i.createProxyFunctions(f,this.rules,f,c),i.createProxyFunctions(f,this,f,l)}return t.prototype.url=function(t,e,n){},t.prototype.path=function(){},t.prototype.search=function(){},t.prototype.hash=function(){},t.prototype.onChange=function(t){},t.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},t.prototype.dispose=function(){},t.prototype.sync=function(t){},t.prototype.listen=function(t){},t.prototype.deferIntercept=function(t){},t.prototype.match=function(t){},t.locationServiceStub=o(s),t.locationConfigStub=o(a),t}();n.UrlService=f},{"../common/common":11,"../common/coreservices":12}],69:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}(t("./vanilla/index"))},{"./vanilla/index":73}],70:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common"),i=t("./utils"),o=function(){function t(t,e){var n=this;this.fireAfterUpdate=e,this._listener=function(t){return n._listeners.forEach(function(e){return e(t)})},this._listeners=[],this.hash=function(){return i.parseUrl(n._get()).hash},this.path=function(){return i.parseUrl(n._get()).path},this.search=function(){return i.getParams(i.parseUrl(n._get()).search)},this._location=r.root.location,this._history=r.root.history}return t.prototype.url=function(t,e){return void 0===e&&(e=!0),r.isDefined(t)&&t!==this._get()&&(this._set(null,null,t,e),this.fireAfterUpdate&&this._listeners.forEach(function(e){return e({url:t})})),i.buildUrl(this)},t.prototype.onChange=function(t){var e=this;return this._listeners.push(t),function(){return r.removeFrom(e._listeners,t)}},t.prototype.dispose=function(t){r.deregAll(this._listeners)},t}();n.BaseLocationServices=o},{"../common":15,"./utils":80}],71:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/predicates"),i=function(){function t(t,e){void 0===e&&(e=!1),this._isHtml5=e,this._baseHref=void 0,this._hashPrefix=""}return t.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},t.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},t.prototype.host=function(){return location.hostname},t.prototype.html5Mode=function(){return this._isHtml5},t.prototype.hashPrefix=function(t){return r.isDefined(t)?this._hashPrefix=t:this._hashPrefix},t.prototype.baseHref=function(t){return r.isDefined(t)?this._baseHref=t:r.isDefined(this._baseHref)?this._baseHref:this.applyDocumentBaseHref()},t.prototype.applyDocumentBaseHref=function(){var t=document.getElementsByTagName("base")[0];return this._baseHref=t?t.href.substr(location.origin.length):""},t.prototype.dispose=function(){},t}();n.BrowserLocationConfig=i},{"../common/predicates":16}],72:[function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("../common"),o=function(t){function e(e){var n=t.call(this,e,!1)||this;return i.root.addEventListener("hashchange",n._listener,!1),n}return r(e,t),e.prototype._get=function(){return i.trimHashVal(this._location.hash)},e.prototype._set=function(t,e,n,r){this._location.hash=n},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),i.root.removeEventListener("hashchange",this._listener)},e}(t("./baseLocationService").BaseLocationServices);n.HashLocationService=o},{"../common":15,"./baseLocationService":70}],73:[function(t,e,n){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(t("./q")),r(t("./injector")),r(t("./baseLocationService")),r(t("./hashLocationService")),r(t("./memoryLocationService")),r(t("./pushStateLocationService")),r(t("./memoryLocationConfig")),r(t("./browserLocationConfig")),r(t("./utils")),r(t("./plugins"))},{"./baseLocationService":70,"./browserLocationConfig":71,"./hashLocationService":72,"./injector":74,"./memoryLocationConfig":75,"./memoryLocationService":76,"./plugins":77,"./pushStateLocationService":78,"./q":79,"./utils":80}],74:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/index"),i={},o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,s=/([^\s,]+)/g;n.$injector={get:function(t){return i[t]},has:function(t){return null!=n.$injector.get(t)},invoke:function(t,e,o){var s=r.extend({},i,o||{}),a=n.$injector.annotate(t),u=r.assertPredicate(function(t){return s.hasOwnProperty(t)},function(t){return"DI can't find injectable: '"+t+"'"}),c=a.filter(u).map(function(t){return s[t]});return r.isFunction(t)?t.apply(e,c):t.slice(-1)[0].apply(e,c)},annotate:function(t){if(!r.isInjectable(t))throw new Error("Not an injectable function: "+t);if(t&&t.$inject)return t.$inject;if(r.isArray(t))return t.slice(0,-1);var e=t.toString().replace(o,"");return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(s)||[]}}},{"../common/index":15}],75:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/predicates"),i=t("../common/common"),o=function(){return function(){var t=this;this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return t._port},this.protocol=function(){return t._protocol},this.host=function(){return t._host},this.baseHref=function(){return t._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(e){return r.isDefined(e)?t._hashPrefix=e:t._hashPrefix},this.dispose=i.noop}}();n.MemoryLocationConfig=o},{"../common/common":11,"../common/predicates":16}],76:[function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(e){return t.call(this,e,!0)||this}return r(e,t),e.prototype._get=function(){return this._url},e.prototype._set=function(t,e,n,r){this._url=n},e}(t("./baseLocationService").BaseLocationServices);n.MemoryLocationService=i},{"./baseLocationService":70}],77:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./browserLocationConfig"),i=t("./hashLocationService"),o=t("./utils"),s=t("./pushStateLocationService"),a=t("./memoryLocationService"),u=t("./memoryLocationConfig"),c=t("./injector"),l=t("./q"),f=t("../common/coreservices");n.servicesPlugin=function(t){return f.services.$injector=c.$injector,f.services.$q=l.$q,{name:"vanilla.services",$q:l.$q,$injector:c.$injector,dispose:function(){return null}}},n.hashLocationPlugin=o.locationPluginFactory("vanilla.hashBangLocation",!1,i.HashLocationService,r.BrowserLocationConfig),n.pushStateLocationPlugin=o.locationPluginFactory("vanilla.pushStateLocation",!0,s.PushStateLocationService,r.BrowserLocationConfig),n.memoryLocationPlugin=o.locationPluginFactory("vanilla.memoryLocation",!1,a.MemoryLocationService,u.MemoryLocationConfig)},{"../common/coreservices":12,"./browserLocationConfig":71,"./hashLocationService":72,"./injector":74,"./memoryLocationConfig":75,"./memoryLocationService":76,"./pushStateLocationService":78,"./q":79,"./utils":80}],78:[function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./baseLocationService"),o=t("../common"),s=function(t){function e(e){var n=t.call(this,e,!0)||this;return n._config=e.urlService.config,o.root.addEventListener("popstate",n._listener,!1),n}return r(e,t),e.prototype._getBasePrefix=function(){return o.stripFile(this._config.baseHref())},e.prototype._get=function(){var t=this._location,e=t.pathname,n=t.hash,r=t.search;r=o.splitQuery(r)[1],n=o.splitHash(n)[1];var i=this._getBasePrefix(),s=e===this._config.baseHref(),a=e.startsWith(i);return(e=s?"/":a?e.substring(i.length):e)+(r?"?"+r:"")+(n?"#"+n:"")},e.prototype._set=function(t,e,n,r){var i=this._getBasePrefix()+n;r?this._history.replaceState(t,e,i):this._history.pushState(t,e,i)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),o.root.removeEventListener("popstate",this._listener)},e}(i.BaseLocationServices);n.PushStateLocationService=s},{"../common":15,"./baseLocationService":70}],79:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/index");n.$q={when:function(t){return new Promise(function(e,n){return e(t)})},reject:function(t){return new Promise(function(e,n){n(t)})},defer:function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},all:function(t){if(r.isArray(t))return Promise.all(t);if(r.isObject(t)){var e=Object.keys(t).map(function(e){return t[e].then(function(t){return{key:e,val:t}})});return n.$q.all(e).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.val,t},{})})}}}},{"../common/index":15}],80:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common");n.keyValsToObjectR=function(t,e){var n=e[0],i=e[1];return t.hasOwnProperty(n)?r.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]:t[n]=i,t},n.getParams=function(t){return t.split("&").filter(r.identity).map(r.splitEqual).reduce(n.keyValsToObjectR,{})},n.parseUrl=function(t){var e=function(t){return t||""},n=r.splitHash(t).map(e),i=n[0],o=n[1],s=r.splitQuery(i).map(e);return{path:s[0],search:s[1],hash:o,url:t}},n.buildUrl=function(t){var e=t.path(),n=t.search(),i=t.hash(),o=Object.keys(n).map(function(t){var e=n[t];return(r.isArray(e)?e:[e]).map(function(e){return t+"="+e})}).reduce(r.unnestR,[]).join("&");return e+(o?"?"+o:"")+(i?"#"+i:"")},n.locationPluginFactory=function(t,e,n,r){return function(i){var o=i.locationService=new n(i),s=i.locationConfig=new r(i,e);return{name:t,service:o,configuration:s,dispose:function(t){t.dispose(o),t.dispose(s)}}}}},{"../common":15}],81:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}(t("./view"))},{"./view":82}],82:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/common"),i=t("../common/hof"),o=t("../common/predicates"),s=t("../common/trace"),a=function(){function t(){var t=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return t._uiViews},_activeViewConfigs:function(){return t._viewConfigs}}}return t.prototype._rootViewContext=function(t){return this._rootContext=t||this._rootContext},t.prototype._viewConfigFactory=function(t,e){this._viewConfigFactories[t]=e},t.prototype.createViewConfig=function(t,e){var n=this._viewConfigFactories[e.$type];if(!n)throw new Error("ViewService: No view config factory registered for type "+e.$type);var r=n(t,e);return o.isArray(r)?r:[r]},t.prototype.deactivateViewConfig=function(t){s.trace.traceViewServiceEvent("<- Removing",t),r.removeFrom(this._viewConfigs,t)},t.prototype.activateViewConfig=function(t){s.trace.traceViewServiceEvent("-> Registering",t),this._viewConfigs.push(t)},t.prototype.sync=function(){function e(t){for(var e=t.viewDecl.$context,n=0;++n&&e.parent;)e=e.parent;return n}var n=this,o=this._uiViews.map(function(t){return[t.fqn,t]}).reduce(r.applyPairs,{}),a=i.curry(function(t,e,n,r){return e*(t(n)-t(r))}),u=this._uiViews.sort(a(function(t){var e=function(t){return t&&t.parent?e(t.parent)+1:1};return 1e4*t.fqn.split(".").length+e(t.creationContext)},1)).map(function(r){var i=n._viewConfigs.filter(t.matches(o,r));return i.length>1&&i.sort(a(e,-1)),[r,i[0]]});s.trace.traceViewSync(u),u.forEach(function(t){var e=t[0],r=t[1];-1!==n._uiViews.indexOf(e)&&e.configUpdated(r)})},t.prototype.registerUIView=function(t){s.trace.traceViewServiceUIViewEvent("-> Registering",t);var e=this._uiViews;return e.filter(function(e){return e.fqn===t.fqn&&e.$type===t.$type}).length&&s.trace.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",t),e.push(t),this.sync(),function(){-1!==e.indexOf(t)?(s.trace.traceViewServiceUIViewEvent("<- Deregistering",t),r.removeFrom(e)(t)):s.trace.traceViewServiceUIViewEvent("Tried removing non-registered uiView",t)}},t.prototype.available=function(){return this._uiViews.map(i.prop("fqn"))},t.prototype.active=function(){return this._uiViews.filter(i.prop("$config")).map(i.prop("name"))},t.normalizeUIViewTarget=function(t,e){void 0===e&&(e="");var n=e.split("@"),r=n[0]||"$default",i=o.isString(n[1])?n[1]:"^",s=/^(\^(?:\.\^)*)\.(.*$)/.exec(r);s&&(i=s[1],r=s[2]),"!"===r.charAt(0)&&(r=r.substr(1),i="");if(/^(\^(?:\.\^)*)$/.exec(i)){i=i.split(".").reduce(function(t,e){return t.parent},t).name}else"."===i&&(i=t.name);return{uiViewName:r,uiViewContextAnchor:i}},t.matches=function(t,e){return function(n){if(e.$type!==n.viewDecl.$type)return!1;var i=n.viewDecl,o=i.$uiViewName.split("."),s=e.fqn.split(".");if(!r.equals(o,s.slice(0-o.length)))return!1;var a=1-o.length||void 0,u=s.slice(0,a).join("."),c=t[u].creationContext;return i.$uiViewContextAnchor===(c&&c.name)}},t}();n.ViewService=a},{"../common/common":11,"../common/hof":14,"../common/predicates":16,"../common/trace":19}],83:[function(t,e,n){!function(e){"use strict";var r=window.nv;void 0!==n&&(r=t("nvd3")),angular.module("nvd3",[]).directive("nvd3",["nvd3Utils",function(t){return{restrict:"AE",scope:{data:"=",options:"=",api:"=?",events:"=?",config:"=?",onReady:"&?"},link:function(e,n,i){function o(t,n,r){t&&n&&angular.forEach(t,function(i,a){"_"===a[0]||("dispatch"===a?(void 0!==n[a]&&null!==n[a]||e._config.extended&&(n[a]={}),s(i,n[a])):"tooltip"===a?(void 0!==n[a]&&null!==n[a]||e._config.extended&&(n[a]={}),o(t[a],n[a],r)):"contentGenerator"===a?n[a]&&t[a](n[a]):-1===["axis","clearHighlights","defined","highlightPoint","nvPointerEventsClass","options","rangeBand","rangeBands","scatter","open","close","node"].indexOf(a)&&(void 0===n[a]||null===n[a]?e._config.extended&&(n[a]=i()):t[a](n[a])))})}function s(t,n){t&&n&&angular.forEach(t,function(r,i){void 0===n[i]||null===n[i]?e._config.extended&&(n[i]=r.on):t.on(i+"._",n[i])})}function a(r){var i=t.deepExtend(function(t){switch(t){case"title":return{enable:!1,text:"Write Your Title",className:"h4",css:{width:e.options.chart.width+"px",textAlign:"center"}};case"subtitle":return{enable:!1,text:"Write Your Subtitle",css:{width:e.options.chart.width+"px",textAlign:"center"}};case"caption":return{enable:!1,text:"Figure 1. Write Your Caption text.",css:{width:e.options.chart.width+"px",textAlign:"center"}}}}(r),e.options[r]||{});e._config.extended&&(e.options[r]=i);var o=angular.element("<div></div>").html(i.html||"").addClass(r).addClass(i.className).removeAttr("style").css(i.css);i.html||o.text(i.text),i.enable&&("title"===r?n.prepend(o):"subtitle"===r?angular.element(n[0].querySelector(".title")).after(o):"caption"===r&&n.append(o))}function u(t,n){t!==n&&(e._config.disabled||(e._config.refreshDataOnly?e.api.update():e.api.refresh()))}var c={extended:!1,visible:!0,disabled:!1,refreshDataOnly:!0,deepWatchOptions:!0,deepWatchData:!0,deepWatchDataDepth:2,debounce:10,debounceImmediate:!0};e.isReady=!1,e._config=angular.extend(c,e.config),e.api={refresh:function(){e.api.updateWithOptions(),e.isReady=!0},refreshWithTimeout:function(t){setTimeout(function(){e.api.refresh()},t)},update:function(){e.chart&&e.svg?"sunburstChart"===e.options.chart.type?e.svg.datum(angular.copy(e.data)).call(e.chart):e.svg.datum(e.data).call(e.chart):e.api.refresh()},updateWithTimeout:function(t){setTimeout(function(){e.api.update()},t)},updateWithOptions:function(i){if(arguments.length){if(e.options=i,e._config.deepWatchOptions&&!e._config.disabled)return}else i=e.options;e.api.clearElement(),!1!==angular.isDefined(i)&&e._config.visible&&(e.chart=r.models[i.chart.type](),e.chart.id=Math.random().toString(36).substr(2,15),angular.forEach(e.chart,function(t,n){"_"===n[0]||["clearHighlights","highlightPoint","id","options","resizeHandler","state","open","close","tooltipContent"].indexOf(n)>=0||("dispatch"===n?(void 0!==i.chart[n]&&null!==i.chart[n]||e._config.extended&&(i.chart[n]={}),s(e.chart[n],i.chart[n])):["bars","bars1","bars2","boxplot","bullet","controls","discretebar","distX","distY","focus","interactiveLayer","legend","lines","lines1","lines2","multibar","pie","scatter","scatters1","scatters2","sparkline","stack1","stack2","sunburst","tooltip","x2Axis","xAxis","y1Axis","y2Axis","y3Axis","y4Axis","yAxis","yAxis1","yAxis2"].indexOf(n)>=0||"stacked"===n&&"stackedAreaChart"===i.chart.type?(void 0!==i.chart[n]&&null!==i.chart[n]||e._config.extended&&(i.chart[n]={}),o(e.chart[n],i.chart[n],i.chart.type)):"focusHeight"===n&&"lineChart"===i.chart.type||"focusHeight"===n&&"lineWithFocusChart"===i.chart.type||("xTickFormat"!==n&&"yTickFormat"!==n||"lineWithFocusChart"!==i.chart.type)&&("tooltips"===n&&"boxPlotChart"===i.chart.type||("tooltipXContent"!==n&&"tooltipYContent"!==n||"scatterChart"!==i.chart.type)&&("x"!==n&&"y"!==n||"forceDirectedGraph"!==i.chart.type)&&(void 0===i.chart[n]||null===i.chart[n]?e._config.extended&&(i.chart[n]="barColor"===n?t()():t()):e.chart[n](i.chart[n]))))}),e.api.updateWithData(),(i.title||e._config.extended)&&a("title"),(i.subtitle||e._config.extended)&&a("subtitle"),(i.caption||e._config.extended)&&a("caption"),(i.styles||e._config.extended)&&function(){var r=t.deepExtend({classes:{"with-3d-shadow":!0,"with-transitions":!0,gallery:!1},css:{}},e.options.styles||{});e._config.extended&&(e.options.styles=r),angular.forEach(r.classes,function(t,e){t?n.addClass(e):n.removeClass(e)}),n.removeAttr("style").css(r.css)}(),r.addGraph(function(){if(e.chart)return e.chart.resizeHandler&&e.chart.resizeHandler.clear(),e.chart.resizeHandler=r.utils.windowResize(function(){e.chart&&e.chart.update&&e.chart.update()}),void 0!==i.chart.zoom&&["scatterChart","lineChart","candlestickBarChart","cumulativeLineChart","historicalBarChart","ohlcBarChart","stackedAreaChart"].indexOf(i.chart.type)>-1&&t.zoom(e,i),e.chart},i.chart.callback))},updateWithData:function(t){if(arguments.length){if(e.data=t,e._config.deepWatchData&&!e._config.disabled)return}else t="sunburstChart"===e.options.chart.type?angular.copy(e.data):e.data;if(t){d3.select(n[0]).select("svg").remove();var r,i;e.svg=d3.select(n[0]).insert("svg",".caption"),(r=e.options.chart.height)&&(isNaN(+r)||(r+="px"),e.svg.attr("height",r).style({height:r})),(i=e.options.chart.width)?(isNaN(+i)||(i+="px"),e.svg.attr("width",i).style({width:i})):e.svg.attr("width","100%").style({width:"100%"}),e.svg.datum(t).call(e.chart),e.chart&&e.chart.zoomRender&&e.chart.zoomRender()}},clearElement:function(){if(n.find(".title").remove(),n.find(".subtitle").remove(),n.find(".caption").remove(),n.empty(),e.chart&&e.chart.tooltip&&e.chart.tooltip.id&&d3.select("#"+e.chart.tooltip.id()).remove(),r.graphs&&e.chart)for(var t=r.graphs.length-1;t>=0;t--)r.graphs[t]&&r.graphs[t].id===e.chart.id&&r.graphs.splice(t,1);r.tooltip&&r.tooltip.cleanup&&r.tooltip.cleanup(),e.chart&&e.chart.resizeHandler&&e.chart.resizeHandler.clear(),e.chart=null},getScope:function(){return e},getElement:function(){return n}},e._config.deepWatchOptions&&e.$watch("options",t.debounce(function(t){e._config.disabled||e.api.refresh()},e._config.debounce,e._config.debounceImmediate),!0),e._config.deepWatchData&&(1===e._config.deepWatchDataDepth?e.$watchCollection("data",u):e.$watch("data",u,2===e._config.deepWatchDataDepth)),e.$watch("config",function(t,n){t!==n&&(e._config=angular.extend(c,t),e.api.refresh())},!0),e._config.deepWatchOptions||e._config.deepWatchData||e.api.refresh(),angular.forEach(e.events,function(t,n){e.$on(n,function(n,r){return t(n,e,r)})}),n.on("$destroy",function(){e.api.clearElement()}),e.$watch("isReady",function(t){t&&e.onReady&&"function"==typeof e.onReady()&&e.onReady()(e,n)})}}}]).factory("nvd3Utils",function(){return{debounce:function(t,e,n){var r;return function(){var i=this,o=arguments,s=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(i,o)},e),s&&t.apply(i,o)}},deepExtend:function(t){var e=this;return angular.forEach(arguments,function(n){n!==t&&angular.forEach(n,function(n,r){t[r]&&t[r].constructor&&t[r].constructor===Object?e.deepExtend(t[r],n):t[r]=n})}),t},zoom:function(t,e){var n=e.chart.zoom;if(void 0===n.enabled||null===n.enabled||n.enabled){var r,i,o,s,a,u=t.chart.xAxis.scale(),c=t.chart.yAxis.scale(),l=t.chart.xDomain||u.domain,f=t.chart.yDomain||c.domain,d=u.domain().slice(),h=c.domain().slice(),p=n.scale||1,v=n.translate||[0,0],g=n.scaleExtent||[1,10],m=n.useFixedDomain||!1,y=n.useNiceScale||!1,b=n.horizontalOff||!1,w=n.verticalOff||!1,x=n.unzoomEventType||"dblclick.zoom";y&&(u.nice(),c.nice()),r=function(t,e){return t[0]=Math.min(Math.max(t[0],e[0]),e[1]-e[1]/g[1]),t[1]=Math.max(e[0]+e[1]/g[1],Math.min(t[1],e[1])),t},o=function(){if(void 0!==n.zoomed){var e=n.zoomed(u.domain(),c.domain());b||l([e.x1,e.x2]),w||f([e.y1,e.y2])}else b||l(m?r(u.domain(),d):u.domain()),w||f(m?r(c.domain(),h):c.domain());t.chart&&t.chart.update()},s=function(){if(void 0!==n.unzoomed){var e=n.unzoomed(u.domain(),c.domain());b||l([e.x1,e.x2]),w||f([e.y1,e.y2])}else b||l(d),w||f(h);i.scale(p).translate(v),t.chart&&t.chart.update()},a=function(){void 0!==n.zoomend&&n.zoomend()},i=d3.behavior.zoom().x(u).y(c).scaleExtent(g).on("zoom",o).on("zoomend",a),t.svg&&(t.svg.call(i),i.scale(p).translate(v).event(t.svg),"none"!==x&&t.svg.on(x,s)),t.chart&&(t.chart.zoomRender=function(){i.scale(p).translate(v),u=t.chart.xAxis.scale(),c=t.chart.yAxis.scale(),l=t.chart.xDomain||u.domain,f=t.chart.yDomain||c.domain,d=u.domain().slice(),h=c.domain().slice(),i.x(u).y(c),t.svg.call(i),"none"!==x&&t.svg.on(x,s)})}}}})}()},{nvd3:477}],84:[function(t,e,n){t("./dist/angular-nvd3"),e.exports="nvd3"},{"./dist/angular-nvd3":83}],85:[function(t,e,n){!function(t){"use strict";function e(t){if(!x(t))return Kn;w(t.objectMaxDepth)&&(Kn.objectMaxDepth=n(t.objectMaxDepth)?t.objectMaxDepth:NaN)}function n(t){return S(t)&&t>0}function r(t,e){return e=e||Error,function(){var n,r,i=arguments[0],o=arguments[1],s="["+(t?t+":":"")+i+"] ",a=U(arguments,2).map(function(t){return ht(t,Kn.objectMaxDepth)});for(s+=o.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1);return e<a.length?a[e]:t}),s+="\nhttp://errors.angularjs.org/1.6.7/"+(t?t+"/":"")+i,r=0,n="?";r<a.length;r++,n="&")s+=n+"p"+r+"="+encodeURIComponent(a[r]);return new e(s)}}function i(t){if(null==t||A(t))return!1;if(gr(t)||_(t)||ir&&t instanceof ir)return!0;var e="length"in Object(t)&&t.length;return S(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function o(t,e,n){var r,s;if(t)if(k(t))for(r in t)"prototype"!==r&&"length"!==r&&"name"!==r&&t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else if(gr(t)||i(t)){var a="object"!=typeof t;for(r=0,s=t.length;r<s;r++)(a||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==o)t.forEach(e,n,t);else if(E(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)tr.call(t,r)&&e.call(n,t[r],r,t);return t}function s(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function a(t){return function(e,n){t(n,e)}}function u(){return++pr}function c(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function l(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;i<o;++i){var s=e[i];if(x(s)||k(s))for(var a=Object.keys(s),u=0,f=a.length;u<f;u++){var d=a[u],h=s[d];n&&x(h)?$(h)?t[d]=new Date(h.valueOf()):C(h)?t[d]=new RegExp(h):h.nodeName?t[d]=h.cloneNode(!0):O(h)?t[d]=h.clone():(x(t[d])||(t[d]=gr(h)?[]:{}),l(t[d],[h],!0)):t[d]=h}}return c(t,r),t}function f(t){return l(t,ar.call(arguments,1),!1)}function d(t){return l(t,ar.call(arguments,1),!0)}function h(t){return parseInt(t,10)}function p(t,e){return f(Object.create(t),e)}function v(){}function g(t){return t}function m(t){return function(){return t}}function y(t){return k(t.toString)&&t.toString!==lr}function b(t){return void 0===t}function w(t){return void 0!==t}function x(t){return null!==t&&"object"==typeof t}function E(t){return null!==t&&"object"==typeof t&&!fr(t)}function _(t){return"string"==typeof t}function S(t){return"number"==typeof t}function $(t){return"[object Date]"===lr.call(t)}function T(t){switch(lr.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function k(t){return"function"==typeof t}function C(t){return"[object RegExp]"===lr.call(t)}function A(t){return t&&t.window===t}function R(t){return t&&t.$evalAsync&&t.$watch}function M(t){return"boolean"==typeof t}function I(t){return t&&k(t.then)}function O(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function N(t){return er(t.nodeName||t[0]&&t[0].nodeName)}function L(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function D(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function P(t,e,r){function i(t,e,n){if(--n<0)return"...";var r,i=e.$$hashKey;if(gr(t))for(var o=0,a=t.length;o<a;o++)e.push(s(t[o],n));else if(E(t))for(r in t)e[r]=s(t[r],n);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=s(t[r],n));else for(r in t)tr.call(t,r)&&(e[r]=s(t[r],n));return c(e,i),e}function s(t,e){if(!x(t))return t;var n=a.indexOf(t);if(-1!==n)return u[n];if(A(t)||R(t))throw dr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,o=function(t){switch(lr.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(s(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(k(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===o&&(o=gr(t)?[]:Object.create(fr(t)),r=!0),a.push(t),u.push(o),r?i(t,o,e):o}var a=[],u=[];if(r=n(r)?r:NaN,e){if(function(t){return t&&S(t.length)&&mr.test(lr.call(t))}(e)||function(t){return"[object ArrayBuffer]"===lr.call(t)}(e))throw dr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw dr("cpi","Can't copy! Source and destination are identical.");return gr(e)?e.length=0:o(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),a.push(t),u.push(e),i(t,e,r)}return s(t,r)}function V(t,e){return t===e||t!=t&&e!=e}function q(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,o=typeof t;if(o===typeof e&&"object"===o){if(!gr(t)){if($(t))return!!$(e)&&V(t.getTime(),e.getTime());if(C(t))return!!C(e)&&t.toString()===e.toString();if(R(t)||R(e)||A(t)||A(e)||gr(e)||$(e)||C(e))return!1;i=lt();for(r in t)if("$"!==r.charAt(0)&&!k(t[r])){if(!q(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!(r in i)&&"$"!==r.charAt(0)&&w(e[r])&&!k(e[r]))return!1;return!0}if(!gr(e))return!1;if((n=t.length)===e.length){for(r=0;r<n;r++)if(!q(t[r],e[r]))return!1;return!0}}return!1}function F(t,e,n){return t.concat(ar.call(e,n))}function U(t,e){return ar.call(t,e||0)}function B(t,e){var n=arguments.length>2?U(arguments,2):[];return!k(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,F(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function j(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:A(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":R(n)&&(r="$SCOPE"),r}function H(t,e){if(!b(t))return S(e)||(e=e?2:null),JSON.stringify(t,j,e)}function z(t){return _(t)?JSON.parse(t):t}function W(t,e){t=t.replace(Er,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return vr(n)?e:n}function G(t,e,n){n=n?-1:1;var r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,n*(W(e,r)-r))}function Z(t){t=ir(t).clone().empty();var e=ir("<div>").append(t).html();try{return t[0].nodeType===Cr?er(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+er(e)})}catch(t){return er(e)}}function Y(t){try{return decodeURIComponent(t)}catch(t){}}function X(t){var e={};return o((t||"").split("&"),function(t){var n,r,i;t&&(r=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(r=t.substring(0,n),i=t.substring(n+1)),w(r=Y(r))&&(i=!w(i)||Y(i),tr.call(e,r)?gr(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i))}),e}function K(t){var e=[];return o(t,function(t,n){gr(t)?o(t,function(t){e.push(J(n,!0)+(!0===t?"":"="+J(t,!0)))}):e.push(J(n,!0)+(!0===t?"":"="+J(t,!0)))}),e.length?e.join("&"):""}function Q(t){return J(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function J(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function tt(e,n){var r,i,s={};if(o(_r,function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,i=e.getAttribute(n))}),o(_r,function(t){var n,o=t+"app";!r&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(o))}),r){if(!Sr)return void t.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");s.strictDi=null!==function(t,e){var n,r,i=_r.length;for(r=0;r<i;++r)if(n=_r[r]+e,_(n=t.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,i?[i]:[],s)}}function et(e,n,r){x(r)||(r={});r=f({strictDi:!1},r);var i=function(){if((e=ir(e)).injector()){var i=e[0]===t.document?"document":Z(e);throw dr("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Bt(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),o},s=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(t&&s.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(s,"")),t&&!a.test(t.name))return i();t.name=t.name.replace(a,""),hr.resumeBootstrap=function(t){return o(t,function(t){n.push(t)}),i()},k(hr.resumeDeferredBootstrap)&&hr.resumeDeferredBootstrap()}function nt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function rt(t){var e=hr.element(t).injector();if(!e)throw dr("test","no injector found for element argument to getTestability");return e.get("$$testability")}function it(t,e){return e=e||"_",t.replace($r,function(t,n){return(n?e:"")+t.toLowerCase()})}function ot(t,e,n){if(!t)throw dr("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function st(t,e,n){return n&&gr(t)&&(t=t[t.length-1]),ot(k(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function at(t,e){if("hasOwnProperty"===t)throw dr("badname","hasOwnProperty is not a valid {0} name",e)}function ut(t,e,n){if(!e)return t;for(var r,i=e.split("."),o=t,s=i.length,a=0;a<s;a++)r=i[a],t&&(t=(o=t)[r]);return!n&&k(t)?B(o,t):t}function ct(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=ir(ar.call(t,0,i))),e.push(n));return e||t}function lt(){return Object.create(null)}function ft(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!y(t)||gr(t)||$(t)?H(t):t.toString()}return t}function dt(t,e){if(gr(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(x(t)){e=e||{};for(var i in t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i])}return e||t}function ht(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):b(t)?"undefined":"string"!=typeof t?function(t,e){var r=[];return n(e)&&(t=hr.copy(t,null,e)),JSON.stringify(t,function(t,e){if(e=j(t,e),x(e)){if(r.indexOf(e)>=0)return"...";r.push(e)}return e})}(t,e):t}function pt(t,e){return e.toUpperCase()}function vt(t){return t.replace(Lr,pt)}function gt(t){return!Fr.test(t)}function mt(t){var e=t.nodeType;return e===kr||!e||e===Rr}function yt(t,e){var n,r,i,s,a=e.createDocumentFragment(),u=[];if(gt(t))u.push(e.createTextNode(t));else{for(n=a.appendChild(e.createElement("div")),r=(Ur.exec(t)||["",""])[1].toLowerCase(),i=jr[r]||jr._default,n.innerHTML=i[1]+t.replace(Br,"<$1></$2>")+i[2],s=i[0];s--;)n=n.lastChild;u=F(u,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",o(u,function(t){a.appendChild(t)}),a}function bt(e){if(e instanceof bt)return e;var n;if(_(e)&&(e=yr(e),n=!0),!(this instanceof bt)){if(n&&"<"!==e.charAt(0))throw Vr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new bt(e)}n?At(this,function(e,n){n=n||t.document;var r;return(r=qr.exec(e))?[n.createElement(r[1])]:(r=yt(e,n))?r.childNodes:[]}(e)):k(e)?Nt(e):At(this,e)}function wt(t){return t.cloneNode(!0)}function xt(t,e){!e&&mt(t)&&ir.cleanData([t]),t.querySelectorAll&&ir.cleanData(t.querySelectorAll("*"))}function Et(t,e,n,r){if(w(r))throw Vr("offargs","jqLite#off() does not support the `selector` argument");var i=St(t),s=i&&i.events,a=i&&i.handle;if(a)if(e){var u=function(e){var r=s[e];w(n)&&D(r||[],n),w(n)&&r&&r.length>0||(t.removeEventListener(e,a),delete s[e])};o(e.split(" "),function(t){u(t),Pr[t]&&u(Pr[t])})}else for(e in s)"$destroy"!==e&&t.removeEventListener(e,a),delete s[e]}function _t(t,e){var n=t.ng339,r=n&&Or[n];if(r){if(e)return void delete r.data[e];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Et(t)),delete Or[n],t.ng339=void 0}}function St(t,e){var n=t.ng339,r=n&&Or[n];return e&&!r&&(t.ng339=n=++Nr,r=Or[n]={events:{},data:{},handle:void 0}),r}function $t(t,e,n){if(mt(t)){var r,i=w(n),o=!i&&e&&!x(e),s=!e,a=St(t,!o),u=a&&a.data;if(i)u[vt(e)]=n;else{if(s)return u;if(o)return u&&u[vt(e)];for(r in e)u[vt(r)]=e[r]}}}function Tt(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function kt(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;o(e.split(" "),function(t){t=yr(t),r=r.replace(" "+t+" "," ")}),r!==n&&t.setAttribute("class",yr(r))}}function Ct(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;o(e.split(" "),function(t){t=yr(t),-1===r.indexOf(" "+t+" ")&&(r+=t+" ")}),r!==n&&t.setAttribute("class",yr(r))}}function At(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function Rt(t,e){return Mt(t,"$"+(e||"ngController")+"Controller")}function Mt(t,e,n){t.nodeType===Rr&&(t=t.documentElement);for(var r=gr(e)?e:[e];t;){for(var i=0,o=r.length;i<o;i++)if(w(n=ir.data(t,r[i])))return n;t=t.parentNode||t.nodeType===Mr&&t.host}}function It(t){for(xt(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Ot(t,e){e||xt(t);var n=t.parentNode;n&&n.removeChild(t)}function Nt(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}function Lt(t,e){var n=Wr[e.toLowerCase()];return n&&Gr[N(t)]&&n}function Dt(t,e,n){var r=e.relatedTarget;r&&(r===t||Hr.call(t,r))||n.call(t,e)}function Pt(){this.$get=function(){return f(bt,{hasClass:function(t,e){return t.attr&&(t=t[0]),Tt(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Ct(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),kt(t,e)}})}}function Vt(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"===r||"object"===r&&null!==t?t.$$hashKey=r+":"+(e||u)():r+":"+t}function qt(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function Ft(t){return Function.prototype.toString.call(t)}function Ut(t){var e=Ft(t).replace(ni,"");return e.match(Qr)||e.match(Jr)}function Bt(t,e){function n(t){return function(e,n){if(!x(e))return t(e,n);o(e,a(t))}}function r(t,e){if(at(t,"service"),(k(e)||gr(e))&&(e=p.instantiate(e)),!e.$get)throw ri("pget","Provider '{0}' must define $get factory method.",t);return h[t+l]=e}function i(t,e,n){return r(t,{$get:!1!==n?function(t,e){return function(){var n=y.invoke(e,this);if(b(n))throw ri("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}(t,e):e})}function s(t){ot(b(t)||gr(t),"modulesToLoad","not an array");var e,n=[];return o(t,function(t){function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=p.get(r[0]);i[r[1]].apply(i,r[2])}}if(!d.get(t)){d.set(t,!0);try{_(t)?(e=sr(t),y.modules[t]=e,n=n.concat(s(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):k(t)?n.push(p.invoke(t)):gr(t)?n.push(p.invoke(t)):st(t,"module")}catch(e){throw gr(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),ri("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}}),n}function u(t,n){function r(e,r){if(t.hasOwnProperty(e)){if(t[e]===c)throw ri("cdep","Circular dependency found: {0}",e+" <- "+f.join(" <- "));return t[e]}try{return f.unshift(e),t[e]=c,t[e]=n(e,r),t[e]}catch(n){throw t[e]===c&&delete t[e],n}finally{f.shift()}}function i(t,n,i){for(var o=[],s=Bt.$$annotate(t,e,i),a=0,u=s.length;a<u;a++){var c=s[a];if("string"!=typeof c)throw ri("itkn","Incorrect injection token! Expected service name as string, got {0}",c);o.push(n&&n.hasOwnProperty(c)?n[c]:r(c,i))}return o}return{invoke:function(t,e,n,r){"string"==typeof n&&(r=n,n=null);var o=i(t,n,r);return gr(t)&&(t=t[t.length-1]),function(t){if(rr||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return M(e)||(e=t.$$ngIsClass=/^(?:class\b|constructor\()/.test(Ft(t))),e}(t)?(o.unshift(null),new(Function.prototype.bind.apply(t,o))):t.apply(e,o)},instantiate:function(t,e,n){var r=gr(t)?t[t.length-1]:t,o=i(t,e,n);return o.unshift(null),new(Function.prototype.bind.apply(r,o))},get:r,annotate:Bt.$$annotate,has:function(e){return h.hasOwnProperty(e+l)||t.hasOwnProperty(e)}}}e=!0===e;var c={},l="Provider",f=[],d=new Xr,h={$provide:{provider:n(r),factory:n(i),service:n(function(t,e){return i(t,["$injector",function(t){return t.instantiate(e)}])}),value:n(function(t,e){return i(t,m(e),!1)}),constant:n(function(t,e){at(t,"constant"),h[t]=e,v[t]=e}),decorator:function(t,e){var n=p.get(t+l),r=n.$get;n.$get=function(){var t=y.invoke(r,n);return y.invoke(e,null,{$delegate:t})}}}},p=h.$injector=u(h,function(t,e){throw hr.isString(e)&&f.push(e),ri("unpr","Unknown provider: {0}",f.join(" <- "))}),v={},g=u(v,function(t,e){var n=p.get(t+l,e);return y.invoke(n.$get,n,void 0,t)}),y=g;h["$injector"+l]={$get:m(g)},y.modules=p.modules=lt();var w=s(t);return y=g.get("$injector"),y.strictDi=e,o(w,function(t){t&&y.invoke(t)}),y.loadNewModules=function(t){o(s(t),function(t){t&&y.invoke(t)})},y}function jt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){function o(t){if(t){t.scrollIntoView();var e=function(){var t=s.yOffset;if(k(t))t=t();else if(O(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else S(t)||(t=0);return t}();if(e){var r=t.getBoundingClientRect().top;n.scrollBy(0,r-e)}}else n.scrollTo(0,0)}function s(t){var e;(t=_(t)?t:S(t)?t.toString():r.hash())?(e=a.getElementById(t))?o(e):(e=function(t){var e=null;return Array.prototype.some.call(t,function(t){if("a"===N(t))return e=t,!0}),e}(a.getElementsByName(t)))?o(e):"top"===t&&o(null):o(null)}var a=n.document;return e&&i.$watch(function(){return r.hash()},function(e,n){e===n&&""===e||function(e,n){"complete"===(n=n||t).document.readyState?n.setTimeout(e):ir(n).on("load",e)}(function(){i.$evalAsync(s)})}),s}]}function Ht(t,e){return t||e?t?e?(gr(t)&&(t=t.join(" ")),gr(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function zt(t){return x(t)?t:{}}function Wt(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new function(t,e,n,r){function i(t){try{t.apply(null,U(arguments,1))}finally{if(0==--g)for(;m.length;)try{m.pop()()}catch(t){n.error(t)}}}function s(){_=null,u()}function a(){q(y=b(y=S())?null:y,k)&&(y=k),k=y,w=y}function u(){var t=w;a(),x===c.url()&&t===y||(x=c.url(),w=y,o($,function(t){t(c.url(),y)}))}var c=this,l=t.location,f=t.history,d=t.setTimeout,h=t.clearTimeout,p={};c.isMock=!1;var g=0,m=[];c.$$completeOutstandingRequest=i,c.$$incOutstandingRequestCount=function(){g++},c.notifyWhenNoOutstandingRequests=function(t){0===g?t():m.push(t)};var y,w,x=l.href,E=e.find("base"),_=null,S=r.history?function(){try{return f.state}catch(t){}}:v;a(),c.url=function(e,n,i){if(b(i)&&(i=null),l!==t.location&&(l=t.location),f!==t.history&&(f=t.history),e){var o=w===i;if(x===e&&(!r.history||o))return c;var s=x&&Ee(x)===Ee(e);return x=e,w=i,!r.history||s&&o?(s||(_=e),n?l.replace(e):s?l.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):l.href=e,l.href!==e&&(_=e)):(f[n?"replaceState":"pushState"](i,"",e),a()),_&&(_=e),c}return _||l.href.replace(/%27/g,"'")},c.state=function(){return y};var $=[],T=!1,k=null;c.onUrlChange=function(e){return T||(r.history&&ir(t).on("popstate",s),ir(t).on("hashchange",s),T=!0),$.push(e),e},c.$$applicationDestroyed=function(){ir(t).off("hashchange popstate",s)},c.$$checkUrlChange=u,c.baseHref=function(){var t=E.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},c.defer=function(t,e){var n;return g++,n=d(function(){delete p[n],i(t)},e||0),p[n]=!0,n},c.defer.cancel=function(t){return!!p[t]&&(delete p[t],h(t),i(v),!0)}}(t,r,e,n)}]}function Gt(){this.$get=function(){function t(t,n){function i(t){t!==d&&(h?h===t&&(h=t.n):h=t,o(t.n,t.p),o(t,d),(d=t).n=null)}function o(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var s=0,a=f({},n,{id:t}),u=lt(),c=n&&n.capacity||Number.MAX_VALUE,l=lt(),d=null,h=null;return e[t]={put:function(t,e){if(!b(e)){if(c<Number.MAX_VALUE){i(l[t]||(l[t]={key:t}))}return t in u||s++,u[t]=e,s>c&&this.remove(h.key),e}},get:function(t){if(c<Number.MAX_VALUE){var e=l[t];if(!e)return;i(e)}return u[t]},remove:function(t){if(c<Number.MAX_VALUE){var e=l[t];if(!e)return;e===d&&(d=e.p),e===h&&(h=e.n),o(e.n,e.p),delete l[t]}t in u&&(delete u[t],s--)},removeAll:function(){u=lt(),s=0,l=lt(),d=h=null},destroy:function(){u=null,a=null,l=null,delete e[t]},info:function(){return f({},a,{size:s})}}}var e={};return t.info=function(){var t={};return o(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function Zt(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function Yt(e,n){function r(t,e,n){var r=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,i=lt();return o(t,function(t,o){if(t in E)i[o]=E[t];else{var s=t.match(r);if(!s)throw di("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||o},s[4]&&(E[t]=i[o])}}),i}function i(t,e){var n={isolateScope:null,bindToController:null};if(x(t.scope)&&(!0===t.bindToController?(n.bindToController=r(t.scope,e,!0),n.isolateScope={}):n.isolateScope=r(t.scope,e,!1)),x(t.bindToController)&&(n.bindToController=r(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw di("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}var s={},u="Directive",c=/^\s*directive:\s*([\w-]+)\s+(.*)$/,l=/(([\w-]+)(?::([^;]+))?;?)/,d=function(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),h=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,y=/^(on[a-z]+|formaction)$/,E=lt();this.directive=function t(n,r){return ot(n,"name"),at(n,"directive"),_(n)?(!function(t){var e=t.charAt(0);if(!e||e!==er(e))throw di("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw di("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),ot(r,"directiveFactory"),s.hasOwnProperty(n)||(s[n]=[],e.factory(n+u,["$injector","$exceptionHandler",function(t,e){var r=[];return o(s[n],function(i,s){try{var a=t.invoke(i);k(a)?a={compile:m(a)}:!a.compile&&a.link&&(a.compile=m(a.link)),a.priority=a.priority||0,a.index=s,a.name=a.name||n,a.require=function(t){var e=t.require||t.controller&&t.name;return!gr(e)&&x(e)&&o(e,function(t,n){var r=t.match(h);t.substring(r[0].length)||(e[n]=r[0]+n)}),e}(a),a.restrict=function(t,e){if(t&&(!_(t)||!/[EACM]/.test(t)))throw di("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(a.restrict,n),a.$$moduleName=i.$$moduleName,r.push(a)}catch(t){e(t)}}),r}])),s[n].push(r)):o(n,a(t)),this},this.component=function t(e,n){function r(t){function e(e){return k(e)||gr(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var r=n.template||n.templateUrl?n.template:"",s={controller:i,controllerAs:function(t,e){if(e&&_(e))return e;if(_(t)){var n=mi.exec(t);if(n)return n[3]}}(n.controller)||n.controllerAs||"$ctrl",template:e(r),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return o(n,function(t,e){"$"===e.charAt(0)&&(s[e]=t)}),s}if(!_(e))return o(e,a(B(this,t))),this;var i=n.controller||function(){};return o(n,function(t,e){"$"===e.charAt(0)&&(r[e]=t,k(i)&&(i[e]=t))}),r.$inject=["$injector"],this.directive(e,r)},this.aHrefSanitizationWhitelist=function(t){return w(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return w(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var S=!0;this.debugInfoEnabled=function(t){return w(t)?(S=t,this):S};var $=!1;this.preAssignBindingsEnabled=function(t){return w(t)?($=t,this):$};var C=!1;this.strictComponentBindingsEnabled=function(t){return w(t)?(C=t,this):C};var A=10;this.onChangesTtl=function(t){return arguments.length?(A=t,this):A};var I=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(I=t,this):I};var O=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(O=t,this):O},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,r,a,m,E,L,P,F,j){function H(){try{if(!--St)throw yt=void 0,di("infchng","{0} $onChanges() iterations reached. Aborting!\n",A);L.$apply(function(){for(var t=[],e=0,n=yt.length;e<n;++e)try{yt[e]()}catch(e){t.push(e)}if(yt=void 0,t.length)throw t})}finally{St++}}function z(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;n<r;n++)this[i=o[n]]=e[i]}else this.$attr={};this.$$element=t}function W(t,e){try{t.addClass(e)}catch(t){}}function G(t,e,n,r,i){t instanceof ir||(t=ir(t));var o=Y(t,e,t,n,r,i);G.$$addScopeClass(t);var s=null;return function(e,n,r){if(!t)throw di("multilink","This element has already been linked.");ot(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new());var a=(r=r||{}).parentBoundTranscludeFn,u=r.transcludeControllers,c=r.futureParentElement;a&&a.$$boundTransclude&&(a=a.$$boundTransclude),s||(s=function(t){var e=t&&t[0];return e&&"foreignobject"!==N(e)&&lr.call(e).match(/SVG/)?"svg":"html"}(c));var l;if(l="html"!==s?ir(ft(s,ir("<div>").append(t).html())):n?zr.clone.call(t):t,u)for(var f in u)l.data("$"+f+"Controller",u[f].instance);return G.$$addScopeInfo(l,e),n&&n(l,e),o&&o(e,l,l,a),n||(t=o=null),l}}function Y(t,e,n,r,i,o){for(var s,a,u,c,l,f,d,h=[],p=gr(t)||t instanceof ir,v=0;v<t.length;v++)s=new z,11===rr&&function(t,e,n){var r,i=t[e],o=i.parentNode;if(i.nodeType!==Cr)return;for(;(r=o?i.nextSibling:t[e+1])&&r.nodeType===Cr;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===t[e+1]&&t.splice(e+1,1)}(t,v,p),(u=(a=K(t[v],[],s,0===v?r:void 0,i)).length?et(a,t[v],s,e,n,null,[],[],o):null)&&u.scope&&G.$$addScopeClass(s.$$element),l=u&&u.terminal||!(c=t[v].childNodes)||!c.length?null:Y(c,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:e),(u||l)&&(h.push(v,u,l),f=!0,d=d||u),o=null;return f?function(t,n,r,i){var o,s,a,u,c,l,f,p;if(d){var v=n.length;for(p=new Array(v),c=0;c<h.length;c+=3)p[f=h[c]]=n[f]}else p=n;for(c=0,l=h.length;c<l;)a=p[h[c++]],o=h[c++],s=h[c++],o?(o.scope?(u=t.$new(),G.$$addScopeInfo(ir(a),u)):u=t,o(s,u,a,r,o.transcludeOnThisElement?X(t,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&e?X(t,e):null)):s&&s(t,a.childNodes,void 0,i)}:null}function X(t,e,n){function r(r,i,o,s,a){return r||((r=t.$new(!1,a)).$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:s})}var i=r.$$slots=lt();for(var o in e.$$slots)e.$$slots[o]?i[o]=X(t,e.$$slots[o],n):i[o]=null;return r}function K(t,r,i,o,a){var f,h,p,v=t.nodeType,g=i.$attr;switch(v){case kr:st(r,Kt(h=N(t)),"E",o,a);for(var m,b,w,E,S,$,T=t.attributes,k=0,C=T&&T.length;k<C;k++){var A=!1,R=!1;b=(m=T[k]).name,S=m.value,E=Kt(b),($=Ct.test(E))&&(b=b.replace(pi,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var M=E.match(At);M&&function(t){if(s.hasOwnProperty(t))for(var n=e.get(t+u),r=0,i=n.length;r<i;r++)if(n[r].multiElement)return!0;return!1}(M[1])&&(A=b,R=b.substr(0,b.length-5)+"end",b=b.substr(0,b.length-6)),g[w=Kt(b.toLowerCase())]=b,!$&&i.hasOwnProperty(w)||(i[w]=S,Lt(t,w)&&(i[w]=!0)),function(t,e,r,i,o){var s=function(t,e){if("srcdoc"===e)return P.HTML;var n=N(t);if("src"===e||"ngSrc"===e){if(-1===["img","video","audio","source","track"].indexOf(n))return P.RESOURCE_URL}else if("xlinkHref"===e||"form"===n&&"action"===e||"link"===n&&"href"===e)return P.RESOURCE_URL}(t,i),a=!o,u=d[i]||o,c=n(r,a,s,u);if(!c)return;if("multiple"===i&&"select"===N(t))throw di("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Z(t));if(y.test(i))throw di("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var a=o.$$observers||(o.$$observers=lt()),l=o[i];l!==r&&(c=l&&n(l,!0,s,u),r=l),c&&(o[i]=c(t),(a[i]||(a[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||t).$watch(c,function(t,e){"class"===i&&t!==e?o.$updateClass(t,e):o.$set(i,t)}))}}}})}(t,r,S,w,$),st(r,w,"A",o,a,A,R)}if("input"===h&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!_t)break;if(p=t.className,x(p)&&(p=p.animVal),_(p)&&""!==p)for(;f=l.exec(p);)st(r,w=Kt(f[2]),"C",o,a)&&(i[w]=yr(f[3])),p=p.substr(f.index+f[0].length);break;case Cr:!function(t,e){var r=n(e,!0);r&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&G.$$addBindingClass(e),function(t,e){var i=e.parent();n||G.$$addBindingClass(i),G.$$addBindingInfo(i,r.expressions),t.$watch(r,function(t){e[0].nodeValue=t})}}})}(r,t.nodeValue);break;case Ar:if(!Et)break;!function(t,e,n,r,i){try{var o=c.exec(t.nodeValue);if(o){var s=Kt(o[1]);st(e,s,"M",r,i)&&(n[s]=yr(o[2]))}}catch(t){}}(t,r,i,o,a)}return r.sort(ut),r}function Q(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw di("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType===kr&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0);else r.push(t);return ir(r)}function J(t,e,n){return function(r,i,o,s,a){return i=Q(i[0],e,n),t(r,i,o,s,a)}}function tt(t,e,n,r,i,o){var s;return t?G(e,n,r,i,o):function(){return s||(s=G(e,n,r,i,o),e=n=o=null),s.apply(this,arguments)}}function et(t,e,n,i,s,u,c,l,d){function h(t,e,n,r){t&&(n&&(t=J(t,n,r)),t.require=g.require,t.directiveName=m,(M===g||g.$$isolateScope)&&(t=ht(t,{isolateScope:!0})),c.push(t)),e&&(n&&(e=J(e,n,r)),e.require=g.require,e.directiveName=m,(M===g||g.$$isolateScope)&&(e=ht(e,{isolateScope:!0})),l.push(e))}function v(t,i,s,a,u){var d,h,p,v,g,m,y,w,_,S;e===s?(_=n,w=n.$$element):_=new z(w=ir(s),n),g=i,M?v=i.$new(!0):C&&(g=i.$parent),u&&((y=function(t,e,n,r){var i;if(R(t)||(r=n,n=e,e=t,t=void 0),P&&(i=m),n||(n=P?w.parent():w),!r)return u(t,e,i,n,V);var o=u.$$slots[r];if(o)return o(t,e,i,n,V);if(b(o))throw di("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,Z(w))}).$$boundTransclude=u,y.isSlotFilled=function(t){return!!u.$$slots[t]}),A&&(m=function(t,e,n,r,i,o,s){var a=lt();for(var u in r){var c=r[u],l={$scope:c===s||c.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},f=c.controller;"@"===f&&(f=e[c.name]);var d=E(f,l,!0,c.controllerAs);a[c.name]=d,t.data("$"+c.name+"Controller",d.instance)}return a}(w,_,y,A,v,i,M)),M&&(G.$$addScopeInfo(w,v,!0,!(I&&(I===M||I===M.$$originalDirective))),G.$$addScopeClass(w,!0),v.$$isolateBindings=M.$$isolateBindings,(S=mt(i,_,v,v.$$isolateBindings,M)).removeWatches&&v.$on("$destroy",S.removeWatches));for(var T in m){var O=A[T],N=m[T],L=O.$$bindings.bindToController;if($){N.bindingInfo=L?mt(g,_,N.instance,L,O):{};var D=N();D!==N.instance&&(N.instance=D,w.data("$"+O.name+"Controller",D),N.bindingInfo.removeWatches&&N.bindingInfo.removeWatches(),N.bindingInfo=mt(g,_,N.instance,L,O))}else N.instance=N(),w.data("$"+O.name+"Controller",N.instance),N.bindingInfo=mt(g,_,N.instance,L,O)}for(o(A,function(t,e){var n=t.require;t.bindToController&&!gr(n)&&x(n)&&f(m[e].instance,nt(e,n,w,m))}),o(m,function(t){var e=t.instance;if(k(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){r(t)}if(k(e.$onInit))try{e.$onInit()}catch(t){r(t)}k(e.$doCheck)&&(g.$watch(function(){e.$doCheck()}),e.$doCheck()),k(e.$onDestroy)&&g.$on("$destroy",function(){e.$onDestroy()})}),d=0,h=c.length;d<h;d++)pt(p=c[d],p.isolateScope?v:i,w,_,p.require&&nt(p.directiveName,p.require,w,m),y);var V=i;for(M&&(M.template||null===M.templateUrl)&&(V=v),t&&t(V,s.childNodes,void 0,u),d=l.length-1;d>=0;d--)pt(p=l[d],p.isolateScope?v:i,w,_,p.require&&nt(p.directiveName,p.require,w,m),y);o(m,function(t){var e=t.instance;k(e.$postLink)&&e.$postLink()})}d=d||{};for(var g,m,y,w,_,S=-Number.MAX_VALUE,C=d.newScopeDirective,A=d.controllerDirectives,M=d.newIsolateScopeDirective,I=d.templateDirective,O=d.nonTlbTranscludeDirective,L=!1,D=!1,P=d.hasElementTranscludeDirective,V=n.$$element=ir(e),q=u,F=i,j=!1,H=!1,it=0,ot=t.length;it<ot;it++){var st=(g=t[it]).$$start,ut=g.$$end;if(st&&(V=Q(e,st,ut)),y=void 0,S>g.priority)break;if((_=g.scope)&&(g.templateUrl||(x(_)?(ct("new/isolated scope",M||C,g,V),M=g):ct("new/isolated scope",M,g,V)),C=C||g),m=g.name,!j&&(g.replace&&(g.templateUrl||g.template)||g.transclude&&!g.$$tlb)){for(var vt,yt=it+1;vt=t[yt++];)if(vt.transclude&&!vt.$$tlb||vt.replace&&(vt.templateUrl||vt.template)){H=!0;break}j=!0}if(!g.templateUrl&&g.controller&&(A=A||lt(),ct("'"+m+"' controller",A[m],g,V),A[m]=g),_=g.transclude)if(L=!0,g.$$tlb||(ct("transclusion",O,g,V),O=g),"element"===_)P=!0,S=g.priority,y=V,V=n.$$element=ir(G.$$createComment(m,n[m])),e=V[0],dt(s,U(y),e),y[0].$$parentNode=y[0].parentNode,F=tt(H,y,i,S,q&&q.name,{nonTlbTranscludeDirective:O});else{var bt=lt();if(x(_)){y=[];var xt=lt(),Et=lt();o(_,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,xt[t]=e,bt[e]=null,Et[e]=n}),o(V.contents(),function(t){var e=xt[Kt(N(t))];e?(Et[e]=!0,bt[e]=bt[e]||[],bt[e].push(t)):y.push(t)}),o(Et,function(t,e){if(!t)throw di("reqslot","Required transclusion slot `{0}` was not filled.",e)});for(var _t in bt)bt[_t]&&(bt[_t]=tt(H,bt[_t],i))}else y=ir(wt(e)).contents();V.empty(),(F=tt(H,y,i,void 0,void 0,{needsNewScope:g.$$isolateScope||g.$$newScope})).$$slots=bt}if(g.template)if(D=!0,ct("template",I,g,V),I=g,_=k(g.template)?g.template(V,n):g.template,_=kt(_),g.replace){if(q=g,y=gt(_)?[]:Jt(ft(g.templateNamespace,yr(_))),e=y[0],1!==y.length||e.nodeType!==kr)throw di("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m,"");dt(s,V,e);var St={$attr:{}},$t=K(e,[],St),Tt=t.splice(it+1,t.length-(it+1));(M||C)&&rt($t,M,C),t=t.concat($t).concat(Tt),at(n,St),ot=t.length}else V.html(_);if(g.templateUrl)D=!0,ct("template",I,g,V),I=g,g.replace&&(q=g),v=function(t,e,n,i,s,u,c,l){var f,d,h=[],v=e[0],g=t.shift(),m=p(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),y=k(g.templateUrl)?g.templateUrl(e,n):g.templateUrl,b=g.templateNamespace;return e.empty(),a(y).then(function(r){var a,p,w,E;if(r=kt(r),g.replace){if(w=gt(r)?[]:Jt(ft(b,yr(r))),a=w[0],1!==w.length||a.nodeType!==kr)throw di("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,y);p={$attr:{}},dt(i,e,a);var _=K(a,[],p);x(g.scope)&&rt(_,!0),t=_.concat(t),at(n,p)}else a=v,e.html(r);for(t.unshift(m),f=et(t,a,n,s,e,g,u,c,l),o(i,function(t,n){t===a&&(i[n]=e[0])}),d=Y(e[0].childNodes,s);h.length;){var S=h.shift(),$=h.shift(),T=h.shift(),k=h.shift(),C=e[0];if(!S.$$destroyed){if($!==v){var A=$.className;l.hasElementTranscludeDirective&&g.replace||(C=wt(a)),dt(T,ir($),C),W(ir(C),A)}E=f.transcludeOnThisElement?X(S,f.transclude,k):k,f(d,S,C,i,E)}}h=null}).catch(function(t){T(t)&&r(t)}),function(t,e,n,r,i){var o=i;e.$$destroyed||(h?h.push(e,n,r,o):(f.transcludeOnThisElement&&(o=X(e,f.transclude,i)),f(d,e,n,r,o)))}}(t.splice(it,t.length-it),V,n,s,L&&F,c,l,{controllerDirectives:A,newScopeDirective:C!==g&&C,newIsolateScopeDirective:M,templateDirective:I,nonTlbTranscludeDirective:O}),ot=t.length;else if(g.compile)try{w=g.compile(V,n,F);var Ct=g.$$originalDirective||g;k(w)?h(null,B(Ct,w),st,ut):w&&h(B(Ct,w.pre),B(Ct,w.post),st,ut)}catch(t){r(t,Z(V))}g.terminal&&(v.terminal=!0,S=Math.max(S,g.priority))}return v.scope=C&&!0===C.scope,v.transcludeOnThisElement=L,v.templateOnThisElement=D,v.transclude=F,d.hasElementTranscludeDirective=P,v}function nt(t,e,n,r){var i;if(_(e)){var s=e.match(h),a=e.substring(s[0].length),u=s[1]||s[3],c="?"===s[2];if("^^"===u?n=n.parent():i=(i=r&&r[a])&&i.instance,!i){var l="$"+a+"Controller";i=u?n.inheritedData(l):n.data(l)}if(!i&&!c)throw di("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(gr(e)){i=[];for(var f=0,d=e.length;f<d;f++)i[f]=nt(t,e[f],n,r)}else x(e)&&(i={},o(e,function(e,o){i[o]=nt(t,e,n,r)}));return i||null}function rt(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=p(t[r],{$$isolateScope:e,$$newScope:n})}function st(t,n,r,o,a,c,l){if(n===a)return null;var f=null;if(s.hasOwnProperty(n))for(var d,h=e.get(n+u),v=0,g=h.length;v<g;v++)if(d=h[v],(b(o)||o>d.priority)&&-1!==d.restrict.indexOf(r)){if(c&&(d=p(d,{$$start:c,$$end:l})),!d.$$bindings){var m=d.$$bindings=i(d,d.name);x(m.isolateScope)&&(d.$$isolateBindings=m.isolateScope)}t.push(d),f=d}return f}function at(t,e){var n=e.$attr,r=t.$attr;o(t,function(r,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==r&&(r.length?r+=("style"===i?";":" ")+e[i]:r=e[i]),t.$set(i,r,!0,n[i]))}),o(e,function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function ut(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function ct(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw di("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,Z(r))}function ft(e,n){switch(e=er(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function dt(e,n,r){var i,o,s=n[0],a=n.length,u=s.parentNode;if(e)for(i=0,o=e.length;i<o;i++)if(e[i]===s){e[i++]=r;for(var c=i,l=c+a-1,f=e.length;c<f;c++,l++)l<f?e[c]=e[l]:delete e[c];e.length-=a-1,e.context===s&&(e.context=r);break}u&&u.replaceChild(r,s);var d=t.document.createDocumentFragment();for(i=0;i<a;i++)d.appendChild(n[i]);for(ir.hasData(s)&&(ir.data(r,ir.data(s)),ir(s).off("$destroy")),ir.cleanData(d.querySelectorAll("*")),i=1;i<a;i++)delete n[i];n[0]=r,n.length=1}function ht(t,e){return f(function(){return t.apply(null,arguments)},t,e)}function pt(t,e,n,i,o,s){try{t(e,n,i,o,s)}catch(t){r(t,Z(n))}}function vt(t,e){if(C)throw di("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function mt(t,e,r,i,s){function a(e,n,i){k(r.$onChanges)&&!V(n,i)&&(yt||(t.$$postDigest(H),yt=[]),c||(c={},yt.push(u)),c[e]&&(i=c[e].previousValue),c[e]=new Xt(i,n))}function u(){r.$onChanges(c),c=void 0}var c,l=[],f={};return o(i,function(i,o){var u,c,d,h,p,g=i.attrName,y=i.optional;switch(i.mode){case"@":y||tr.call(e,g)||(vt(g,s.name),r[o]=e[g]=void 0),p=e.$observe(g,function(t){if(_(t)||M(t)){var e=r[o];a(o,t,e),r[o]=t}}),e.$$observers[g].$$scope=t,_(u=e[g])?r[o]=n(u)(t):M(u)&&(r[o]=u),f[o]=new Xt(hi,r[o]),l.push(p);break;case"=":if(!tr.call(e,g)){if(y)break;vt(g,s.name),e[g]=void 0}if(y&&!e[g])break;c=m(e[g]),h=c.literal?q:V,d=c.assign||function(){throw u=r[o]=c(t),di("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[g],g,s.name)},u=r[o]=c(t);var b=function(e){return h(e,r[o])||(h(e,u)?d(t,e=r[o]):r[o]=e),u=e};b.$stateful=!0,p=i.collection?t.$watchCollection(e[g],b):t.$watch(m(e[g],b),null,c.literal),l.push(p);break;case"<":if(!tr.call(e,g)){if(y)break;vt(g,s.name),e[g]=void 0}if(y&&!e[g])break;var w=(c=m(e[g])).literal,x=r[o]=c(t);f[o]=new Xt(hi,r[o]),p=t.$watch(c,function(t,e){if(e===t){if(e===x||w&&q(e,x))return;e=x}a(o,t,e),r[o]=t},w),l.push(p);break;case"&":if(y||tr.call(e,g)||vt(g,s.name),(c=e.hasOwnProperty(g)?m(e[g]):v)===v&&y)break;r[o]=function(e){return c(t,e)}}}),{initialChanges:f,removeWatches:l.length&&function(){for(var t=0,e=l.length;t<e;++t)l[t]()}}}var yt,bt=/^\w/,xt=t.document.createElement("div"),Et=I,_t=O,St=A;z.prototype={$normalize:Kt,$addClass:function(t){t&&t.length>0&&F.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&F.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=Qt(t,e);n&&n.length&&F.addClass(this.$$element,n);var r=Qt(e,t);r&&r.length&&F.removeClass(this.$$element,r)},$set:function(t,e,n,i){var s,a=Lt(this.$$element[0],t),u=function(t){return Zr[t]}(t),c=t;if(a?(this.$$element.prop(t,e),i=a):u&&(this[u]=e,c=u),this[t]=e,i?this.$attr[t]=i:(i=this.$attr[t])||(this.$attr[t]=i=it(t,"-")),"a"===(s=N(this.$$element))&&("href"===t||"xlinkHref"===t)||"img"===s&&"src"===t)this[t]=e=j(e,"src"===t);else if("img"===s&&"srcset"===t&&w(e)){for(var l="",f=yr(e),d=/\s/.test(f)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,h=f.split(d),p=Math.floor(h.length/2),v=0;v<p;v++){var g=2*v;l+=j(yr(h[g]),!0),l+=" "+yr(h[g+1])}var m=yr(h[2*v]).split(/\s/);l+=j(yr(m[0]),!0),2===m.length&&(l+=" "+yr(m[1])),this[t]=e=l}!1!==n&&(null===e||b(e)?this.$$element.removeAttr(i):bt.test(i)?this.$$element.attr(i,e):function(t,e,n){xt.innerHTML="<span "+e+">";var r=xt.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,t.attributes.setNamedItem(i)}(this.$$element[0],i,e));var y=this.$$observers;y&&o(y[c],function(t){try{t(e)}catch(t){r(t)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=lt()),i=r[t]||(r[t]=[]);return i.push(e),L.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(t)||b(n[t])||e(n[t])}),function(){D(i,e)}}};var $t=n.startSymbol(),Tt=n.endSymbol(),kt="{{"===$t&&"}}"===Tt?g:function(t){return t.replace(/\{\{/g,$t).replace(/}}/g,Tt)},Ct=/^ngAttr[A-Z]/,At=/^(.+)Start$/;return G.$$addBindingInfo=S?function(t,e){var n=t.data("$binding")||[];gr(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:v,G.$$addBindingClass=S?function(t){W(t,"ng-binding")}:v,G.$$addScopeInfo=S?function(t,e,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:v,G.$$addScopeClass=S?function(t,e){W(t,e?"ng-isolate-scope":"ng-scope")}:v,G.$$createComment=function(e,n){var r="";return S&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},G}]}function Xt(t,e){this.previousValue=t,this.currentValue=e}function Kt(t){return t.replace(pi,"").replace(vi,function(t,e,n){return n?e.toUpperCase():e})}function Qt(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var s=r[o],a=0;a<i.length;a++)if(s===i[a])continue t;n+=(n.length>0?" ":"")+s}return n}function Jt(t){var e=(t=ir(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(n.nodeType===Ar||n.nodeType===Cr&&""===n.nodeValue.trim())&&ur.call(t,e,1)}return t}function te(){var t={},e=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){at(e,"controller"),x(e)?f(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(n,i){function o(t,e,n,i){if(!t||!x(t.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,e);t.$scope[e]=n}return function(r,s,a,u){var c,l,d,h;if(a=!0===a,u&&_(u)&&(h=u),_(r)){if(!(l=r.match(mi)))throw gi("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(d=l[1],h=h||l[3],!(r=t.hasOwnProperty(d)?t[d]:ut(s.$scope,d,!0)||(e?ut(i,d,!0):void 0)))throw gi("ctrlreg","The controller with the name '{0}' is not registered.",d);st(r,d,!0)}if(a){var p=(gr(r)?r[r.length-1]:r).prototype;return c=Object.create(p||null),h&&o(s,h,c,d||r.name),f(function(){var t=n.invoke(r,c,s,d);return t!==c&&(x(t)||k(t))&&(c=t,h&&o(s,h,c,d||r.name)),c},{instance:c,identifier:h})}return c=n.instantiate(r,s,d),h&&o(s,h,c,d||r.name),c}}]}function ee(){this.$get=["$window",function(t){return ir(t.document)}]}function ne(){this.$get=["$document","$rootScope",function(t,e){function n(){i=r.hidden}var r=t[0],i=r&&r.hidden;return t.on("visibilitychange",n),e.$on("$destroy",function(){t.off("visibilitychange",n)}),function(){return i}}]}function re(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function ie(t){return x(t)?$(t)?t.toISOString():H(t):t}function oe(){this.$get=function(){return function(t){if(!t)return"";var e=[];return s(t,function(t,n){null===t||b(t)||k(t)||(gr(t)?o(t,function(t){e.push(J(n)+"="+J(ie(t)))}):e.push(J(n)+"="+J(ie(t))))}),e.join("&")}}}function se(){this.$get=function(){return function(t){function e(t,r,i){null===t||b(t)||(gr(t)?o(t,function(t,n){e(t,r+"["+(x(t)?n:"")+"]")}):x(t)&&!$(t)?s(t,function(t,n){e(t,r+(i?"":"[")+n+(i?"":"]"))}):n.push(J(r)+"="+J(ie(t))))}if(!t)return"";var n=[];return e(t,"",!0),n.join("&")}}}function ae(t,e){if(_(t)){var n=t.replace(_i,"").trim();if(n){var r=e("Content-Type"),i=r&&0===r.indexOf(bi);if(i||function(t){var e=t.match(xi);return e&&Ei[e[0]].test(t)}(n))try{t=z(n)}catch(e){if(!i)return t;throw Si("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}return t}function ue(t){function e(t,e){t&&(r[t]=r[t]?r[t]+", "+e:e)}var n,r=lt();return _(t)?o(t.split("\n"),function(t){n=t.indexOf(":"),e(er(yr(t.substr(0,n))),yr(t.substr(n+1)))}):x(t)&&o(t,function(t,n){e(er(n),yr(t))}),r}function ce(t){var e;return function(n){if(e||(e=ue(t)),n){var r=e[er(n)];return void 0===r&&(r=null),r}return e}}function le(t,e,n,r){return k(r)?r(t,e,n):(o(r,function(r){t=r(t,e,n)}),t)}function fe(t){return 200<=t&&t<300}function de(){var t=this.defaults={transformResponse:[ae],transformRequest:[function(t){return!x(t)||function(t){return"[object File]"===lr.call(t)}(t)||function(t){return"[object Blob]"===lr.call(t)}(t)||function(t){return"[object FormData]"===lr.call(t)}(t)?t:H(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:dt(wi),put:dt(wi),patch:dt(wi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return w(t)?(e=!!t,this):e};var n=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(i,s,a,u,c,l,d,h){function p(n){function u(t,e){for(var n=0,r=e.length;n<r;){var i=e[n++],o=e[n++];t=t.then(i,o)}return e.length=0,t}function y(t){var e=f({},t);return e.data=le(t.data,t.headers,t.status,E.transformResponse),fe(t.status)?e:l.reject(e)}if(!x(n))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!_(h.valueOf(n.url)))throw r("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var E=f({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);E.headers=function(e){var n,r,i,s=t.headers,a=f({},e.headers);s=f({},s.common,s[er(e.method)]);t:for(n in s){r=er(n);for(i in a)if(er(i)===r)continue t;a[n]=s[n]}return function(t,e){var n,r={};return o(t,function(t,i){k(t)?null!=(n=t(e))&&(r[i]=n):r[i]=t}),r}(a,dt(e))}(n),E.method=nr(E.method),E.paramSerializer=_(E.paramSerializer)?d.get(E.paramSerializer):E.paramSerializer,i.$$incOutstandingRequestCount();var S=[],$=[],T=l.resolve(E);return o(m,function(t){(t.request||t.requestError)&&S.unshift(t.request,t.requestError),(t.response||t.responseError)&&$.push(t.response,t.responseError)}),T=u(T,S),T=T.then(function(n){var r=n.headers,i=le(n.data,ce(r),void 0,n.transformRequest);return b(i)&&o(r,function(t,e){"content-type"===er(e)&&delete r[e]}),b(n.withCredentials)&&!b(t.withCredentials)&&(n.withCredentials=t.withCredentials),function(n,r){function i(t){if(t){var n={};return o(t,function(t,r){n[r]=function(n){function r(){t(n)}e?c.$applyAsync(r):c.$$phase?r():c.$apply(r)}}),n}}function u(t,e,r,i,o){(fe(e=e>=-1?e:0)?y.resolve:y.reject)({data:t,status:e,headers:ce(r),config:n,statusText:i,xhrStatus:o})}function f(t){u(t.data,t.status,dt(t.headers()),t.statusText,t.xhrStatus)}function d(){var t=p.pendingRequests.indexOf(n);-1!==t&&p.pendingRequests.splice(t,1)}var v,m,y=l.defer(),E=y.promise,S=n.headers,$="jsonp"===er(n.method),T=n.url;if($?T=h.getTrustedResourceUrl(T):_(T)||(T=h.valueOf(T)),T=function(t,e){return e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}(T,n.paramSerializer(n.params)),$&&(T=function(t,e){var n=t.split("?");if(n.length>2)throw Si("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return o(X(n[1]),function(n,r){if("JSON_CALLBACK"===n)throw Si("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(r===e)throw Si("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)}),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(T,n.jsonpCallbackParam)),p.pendingRequests.push(n),E.then(d,d),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(v=x(n.cache)?n.cache:x(t.cache)?t.cache:g),v&&(w(m=v.get(T))?I(m)?m.then(f,f):gr(m)?u(m[1],m[0],dt(m[2]),m[3],m[4]):u(m,200,{},"OK","complete"):v.put(T,E)),b(m)){var k=un(n.url)?a()[n.xsrfCookieName||t.xsrfCookieName]:void 0;k&&(S[n.xsrfHeaderName||t.xsrfHeaderName]=k),s(n.method,T,r,function(t,n,r,i,o){function s(){u(n,t,r,i,o)}v&&(fe(t)?v.put(T,[t,n,ue(r),i,o]):v.remove(T)),e?c.$applyAsync(s):(s(),c.$$phase||c.$apply())},S,n.timeout,n.withCredentials,n.responseType,i(n.eventHandlers),i(n.uploadEventHandlers))}return E}(n,i).then(y,y)}),T=u(T,$),T=T.finally(function(){i.$$completeOutstandingRequest(v)})}var g=u("$http");t.paramSerializer=_(t.paramSerializer)?d.get(t.paramSerializer):t.paramSerializer;var m=[];return o(n,function(t){m.unshift(_(t)?d.get(t):d.invoke(t))}),p.pendingRequests=[],function(t){o(arguments,function(t){p[t]=function(e,n){return p(f({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){o(arguments,function(t){p[t]=function(e,n,r){return p(f({},r||{},{method:t,url:e,data:n}))}})}("post","put","patch"),p.defaults=t,p}]}function he(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function pe(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,r){return function(t,e,n,r,i){return function(s,a,u,c,l,f,d,h,p,v){function g(){x&&x(),E&&E.abort()}function m(t,e,r,i,o,s){w(_)&&n.cancel(_),x=E=null,t(e,r,i,o,s)}if(a=a||t.url(),"jsonp"===er(s))var y=r.createCallback(a),x=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=i.createElement("script"),s=null;return o.type="text/javascript",o.src=t,o.async=!0,s=function(t){o.removeEventListener("load",s),o.removeEventListener("error",s),i.body.removeChild(o),o=null;var a=-1,u="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),u=t.type,a="error"===t.type?404:200),n&&n(a,u)},o.addEventListener("load",s),o.addEventListener("error",s),i.body.appendChild(o),s}(a,y,function(t,e){var n=200===t&&r.getResponse(y);m(c,t,n,"",e,"complete"),r.removeCallback(y)});else{var E=e(s,a);E.open(s,a,!0),o(l,function(t,e){w(t)&&E.setRequestHeader(e,t)}),E.onload=function(){var t=E.statusText||"",e="response"in E?E.response:E.responseText,n=1223===E.status?204:E.status;0===n&&(n=e?200:"file"===an(a).protocol?404:0),m(c,n,e,E.getAllResponseHeaders(),t,"complete")};if(E.onerror=function(){m(c,-1,null,null,"","error")},E.onabort=function(){m(c,-1,null,null,"","abort")},E.ontimeout=function(){m(c,-1,null,null,"","timeout")},o(p,function(t,e){E.addEventListener(e,t)}),o(v,function(t,e){E.upload.addEventListener(e,t)}),d&&(E.withCredentials=!0),h)try{E.responseType=h}catch(t){if("json"!==h)throw t}E.send(b(u)?null:u)}if(f>0)var _=n(g,f);else I(f)&&f.then(g)}}(t,r,t.defer,e,n[0])}]}function ve(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(t){return"\\\\\\"+t}function s(n){return n.replace(d,t).replace(h,e)}function a(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function u(o,u,d,h){if(!o.length||-1===o.indexOf(t)){var p;if(!u){(p=m(s(o))).exp=o,p.expressions=[],p.$$watchDelegate=a}return p}h=!!h;for(var v,g,y,x=0,E=[],_=[],S=o.length,$=[],T=[];x<S;){if(-1===(v=o.indexOf(t,x))||-1===(g=o.indexOf(e,v+c))){x!==S&&$.push(s(o.substring(x)));break}x!==v&&$.push(s(o.substring(x,v))),y=o.substring(v+c,g),E.push(y),_.push(n(y,function(t){try{return t=A(t),h&&!w(t)?t:ft(t)}catch(t){r($i.interr(o,t))}})),x=g+l,T.push($.length),$.push("")}if(d&&$.length>1&&$i.throwNoconcat(o),!u||E.length){var C=function(t){for(var e=0,n=E.length;e<n;e++){if(h&&b(t[e]))return;$[T[e]]=t[e]}return $.join("")},A=function(t){return d?i.getTrusted(d,t):i.valueOf(t)};return f(function(t){var e=0,n=E.length,i=new Array(n);try{for(;e<n;e++)i[e]=_[e](t);return C(i)}catch(t){r($i.interr(o,t))}},{exp:o,expressions:E,$$watchDelegate:function(t,e){var n;return t.$watchGroup(_,function(r,i){var o=C(r);k(e)&&e.call(this,o,r!==i?n:o,t),n=o})}})}}var c=t.length,l=e.length,d=new RegExp(t.replace(/./g,o),"g"),h=new RegExp(e.replace(/./g,o),"g");return u.startSymbol=function(){return t},u.endSymbol=function(){return e},u}]}function ge(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,r,i){function o(o,a,u,c){function l(){f?o.apply(null,d):o(v)}var f=arguments.length>4,d=f?U(arguments,4):[],h=e.setInterval,p=e.clearInterval,v=0,g=w(c)&&!c,m=(g?r:n).defer(),y=m.promise;return u=w(u)?u:0,y.$$intervalId=h(function(){g?i.defer(l):t.$evalAsync(l),m.notify(v++),u>0&&v>=u&&(m.resolve(v),p(y.$$intervalId),delete s[y.$$intervalId]),g||t.$apply()},a),s[y.$$intervalId]=m,y}var s={};return o.cancel=function(t){return!!(t&&t.$$intervalId in s)&&(Ze(s[t.$$intervalId].promise),s[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete s[t.$$intervalId],!0)},o}]}function me(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=Q(e[n].replace(/%2F/g,"/"));return e.join("/")}function ye(t,e){var n=an(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=h(n.port)||Ci[n.protocol]||null}function be(t,e,n){if(Ri.test(t))throw Ai("badpath",'Invalid url "{0}".',t);var r="/"!==t.charAt(0);r&&(t="/"+t);var i=an(t),o=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;e.$$path=function(t,e){for(var n=t.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),e&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(o,n),e.$$search=X(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function we(t,e){return t.slice(0,e.length)===e}function xe(t,e){if(we(e,t))return e.substr(t.length)}function Ee(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function _e(t){return t.replace(/(#.+)|#$/,"$1")}function Se(t,e,n){this.$$html5=!0,n=n||"",ye(t,this),this.$$parse=function(t){var n=xe(e,t);if(!_(n))throw Ai("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);be(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=K(this.$$search),n=this.$$hash?"#"+Q(this.$$hash):"";this.$$url=me(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,s,a;return w(o=xe(t,r))?(s=o,a=n&&w(o=xe(n,o))?e+(xe("/",o)||o):t+s):w(o=xe(e,r))?a=e+o:e===r+"/"&&(a=e),a&&this.$$parse(a),!!a}}function $e(t,e,n){ye(t,this),this.$$parse=function(r){var i,o=xe(t,r)||xe(e,r);b(o)||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",b(o)&&(t=r,this.replace())):b(i=xe(n,o))&&(i=o),be(i,this,!1),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;return we(e,n)&&(e=e.replace(n,"")),i.exec(e)?t:(r=i.exec(t))?r[1]:t}(this.$$path,i,t),this.$$compose()},this.$$compose=function(){var e=K(this.$$search),r=this.$$hash?"#"+Q(this.$$hash):"";this.$$url=me(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+(this.$$url?n+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,n){return Ee(t)===Ee(e)&&(this.$$parse(e),!0)}}function Te(t,e,n){this.$$html5=!0,$e.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,s;return t===Ee(r)?o=r:(s=xe(e,r))?o=t+n+s:e===r+"/"&&(o=e),o&&this.$$parse(o),!!o},this.$$compose=function(){var e=K(this.$$search),r=this.$$hash?"#"+Q(this.$$hash):"";this.$$url=me(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+n+this.$$url,this.$$urlUpdatedByLocation=!0}}function ke(t){return function(){return this[t]}}function Ce(t,e){return function(n){return b(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function Ae(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return w(e)?(t=e,this):t},this.html5Mode=function(t){return M(t)?(e.enabled=t,this):x(t)?(M(t.enabled)&&(e.enabled=t.enabled),M(t.requireBase)&&(e.requireBase=t.requireBase),(M(t.rewriteLinks)||_(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,s){function a(t,e,n){var i=c.url(),o=c.$$state;try{r.url(t,e,n),c.$$state=r.state()}catch(t){throw c.url(i),c.$$state=o,t}}function u(t,e){n.$broadcast("$locationChangeSuccess",c.absUrl(),t,c.$$state,e)}var c,l,f,d=r.baseHref(),h=r.url();if(e.enabled){if(!d&&e.requireBase)throw Ai("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=function(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}(h)+(d||"/"),l=i.history?Se:Te}else f=Ee(h),l=$e;var p=function(t){return t.substr(0,Ee(t).lastIndexOf("/")+1)}(f);(c=new l(f,p,"#"+t)).$$parseLinkUrl(h,h),c.$$state=r.state();var v=/^\s*(javascript|mailto):/i;o.on("click",function(t){var i=e.rewriteLinks;if(i&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var a=ir(t.target);"a"!==N(a[0]);)if(a[0]===o[0]||!(a=a.parent())[0])return;if(!_(i)||!b(a.attr(i))){var u=a.prop("href"),l=a.attr("href")||a.attr("xlink:href");x(u)&&"[object SVGAnimatedString]"===u.toString()&&(u=an(u.animVal).href),v.test(u)||!u||a.attr("target")||t.isDefaultPrevented()||c.$$parseLinkUrl(u,l)&&(t.preventDefault(),c.absUrl()!==r.url()&&(n.$apply(),s.angular["ff-684208-preventDefault"]=!0))}}}),_e(c.absUrl())!==_e(h)&&r.url(c.absUrl(),!0);var g=!0;return r.onUrlChange(function(t,e){we(t,p)?(n.$evalAsync(function(){var r,i=c.absUrl(),o=c.$$state;t=_e(t),c.$$parse(t),c.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,c.absUrl()===t&&(r?(c.$$parse(i),c.$$state=o,a(i,!1,o)):(g=!1,u(i,o)))}),n.$$phase||n.$digest()):s.location.href=t}),n.$watch(function(){if(g||c.$$urlUpdatedByLocation){c.$$urlUpdatedByLocation=!1;var t=_e(r.url()),e=_e(c.absUrl()),o=r.state(),s=c.$$replace,l=t!==e||c.$$html5&&i.history&&o!==c.$$state;(g||l)&&(g=!1,n.$evalAsync(function(){var e=c.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,c.$$state,o).defaultPrevented;c.absUrl()===e&&(r?(c.$$parse(t),c.$$state=o):(l&&a(e,s,o===c.$$state?null:c.$$state),u(t,o)))}))}c.$$replace=!1}),c}]}function Re(){var t=!0,e=this;this.debugEnabled=function(e){return w(e)?(t=e,this):t},this.$get=["$window",function(n){function r(t){var e=n.console||{},r=e[t]||e.log||v;return function(){var t=[];return o(arguments,function(e){t.push(function(t){return T(t)&&(t.stack&&i?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}(e))}),Function.prototype.apply.call(r,e,t)}}var i=rr||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:function(){var n=r("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function Me(t){return t+""}function Ie(t,e){return void 0!==t?t:e}function Oe(t,e){return void 0===t?e:void 0===e?t:t+e}function Ne(t,e,n){var r,i,s,a=t.isPure=function(t,e){switch(t.type){case Pi.MemberExpression:if(t.computed)return!1;break;case Pi.UnaryExpression:return Vi;case Pi.BinaryExpression:return"+"!==t.operator&&Vi;case Pi.CallExpression:return!1}return void 0===e?qi:e}(t,n);switch(t.type){case Pi.Program:r=!0,o(t.body,function(t){Ne(t.expression,e,a),r=r&&t.expression.constant}),t.constant=r;break;case Pi.Literal:t.constant=!0,t.toWatch=[];break;case Pi.UnaryExpression:Ne(t.argument,e,a),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Pi.BinaryExpression:Ne(t.left,e,a),Ne(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Pi.LogicalExpression:Ne(t.left,e,a),Ne(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Pi.ConditionalExpression:Ne(t.test,e,a),Ne(t.alternate,e,a),Ne(t.consequent,e,a),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Pi.Identifier:t.constant=!1,t.toWatch=[t];break;case Pi.MemberExpression:Ne(t.object,e,a),t.computed&&Ne(t.property,e,a),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case Pi.CallExpression:s=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),r=s,i=[],o(t.arguments,function(t){Ne(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=s?i:[t];break;case Pi.AssignmentExpression:Ne(t.left,e,a),Ne(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Pi.ArrayExpression:r=!0,i=[],o(t.elements,function(t){Ne(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=i;break;case Pi.ObjectExpression:r=!0,i=[],o(t.properties,function(t){Ne(t.value,e,a),r=r&&t.value.constant,i.push.apply(i,t.value.toWatch),t.computed&&(Ne(t.key,e,!1),r=r&&t.key.constant,i.push.apply(i,t.key.toWatch))}),t.constant=r,t.toWatch=i;break;case Pi.ThisExpression:case Pi.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Le(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function De(t){return t.type===Pi.Identifier||t.type===Pi.MemberExpression}function Pe(t){if(1===t.body.length&&De(t.body[0].expression))return{type:Pi.AssignmentExpression,left:t.body[0].expression,right:{type:Pi.NGValueParameter},operator:"="}}function Ve(t){this.$filter=t}function qe(t){this.$filter=t}function Fe(t,e,n){this.ast=new Pi(t,n),this.astCompiler=n.csp?new qe(e):new Ve(e)}function Ue(t){return k(t.valueOf)?t.valueOf():Oi.call(t)}function Be(){var t,e,n=lt(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,r){return t=n,e=r,this},this.$get=["$filter",function(i){function s(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Ue(t))&&!n)&&(t===e||t!=t&&e!=e)}function a(t,e,n,r,i){var o,a=r.inputs;if(1===a.length){var u=s;return a=a[0],t.$watch(function(t){var e=a(t);return s(e,u,a.isPure)||(o=r(t,void 0,void 0,[e]),u=e&&Ue(e)),o},e,n,i)}for(var c=[],l=[],f=0,d=a.length;f<d;f++)c[f]=s,l[f]=null;return t.$watch(function(t){for(var e=!1,n=0,i=a.length;n<i;n++){var u=a[n](t);(e||(e=!s(u,c[n],a[n].isPure)))&&(l[n]=u,c[n]=u&&Ue(u))}return e&&(o=r(t,void 0,void 0,l)),o},e,n,i)}function u(t,e,n,r,i){function o(t,n,r){u=t,k(e)&&e(t,n,r),w(t)&&r.$$postDigest(function(){w(u)&&s()})}var s,u;return s=r.inputs?a(t,o,n,r,i):t.$watch(function(t){return r(t)},o,n)}function c(t,e,n,r){function i(t){var e=!0;return o(t,function(t){w(t)||(e=!1)}),e}var s,a;return s=t.$watch(function(t){return r(t)},function(t,n,r){a=t,k(e)&&e(t,n,r),i(t)&&r.$$postDigest(function(){i(a)&&s()})},n)}function l(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function f(t,e){if(!e)return t;var n=t.$$watchDelegate,r=!1,i=n!==c&&n!==u?function(n,i,o,s){var a=r&&s?s[0]:t(n,i,o,s);return e(a,n,i)}:function(n,r,i,o){var s=t(n,r,i,o),a=e(s,n,r);return w(s)?a:s};return r=!t.inputs,n&&n!==a?(i.$$watchDelegate=n,i.inputs=t.inputs):e.$stateful||(i.$$watchDelegate=a,i.inputs=t.inputs?t.inputs:[t]),i.inputs&&(i.inputs=i.inputs.map(function(t){return t.isPure===qi?function(e){return t(e)}:t})),i}var d={csp:wr().noUnsafeEval,literals:P(r),isIdentifierStart:k(t)&&t,isIdentifierContinue:k(e)&&e};return function(t,e){var r,o,s;switch(typeof t){case"string":return t=t.trim(),s=t,(r=n[s])||(":"===t.charAt(0)&&":"===t.charAt(1)&&(o=!0,t=t.substring(2)),(r=new Fe(new Di(d),i,d).parse(t)).constant?r.$$watchDelegate=l:o?r.$$watchDelegate=r.literal?c:u:r.inputs&&(r.$$watchDelegate=a),n[s]=r),f(r,e);case"function":return f(t,e);default:return f(v,e)}}}]}function je(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return ze(function(t){e.$evalAsync(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return w(e)?(t=e,this):t}}function He(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return ze(function(t){e.defer(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return w(e)?(t=e,this):t}}function ze(t,e,n){function i(){return new function(){var t=this.promise=new s;this.resolve=function(e){c(t,e)},this.reject=function(e){d(t,e)},this.notify=function(e){p(t,e)}}}function s(){this.$$state={status:0}}function a(){for(;!E&&_.length;){var t=_.shift();if(!We(t)){Ge(t);var n="Possibly unhandled rejection: "+ht(t.value);T(t.value)?e(t.value,n):e(n)}}}function u(r){!n||r.pending||2!==r.status||We(r)||(0===E&&0===_.length&&t(a),_.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++E,t(function(){!function(r){var i,o,s;s=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var u=0,l=s.length;u<l;++u){Ge(r),o=s[u][0],i=s[u][r.status];try{k(i)?c(o,i(r.value)):1===r.status?c(o,r.value):d(o,r.value)}catch(t){d(o,t),t&&!0===t.$$passToExceptionHandler&&e(t)}}}finally{--E,n&&0===E&&t(a)}}(r)}))}function c(t,e){t.$$state.status||(e===t?h(t,w("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):l(t,e))}function l(t,e){function n(e){i||(i=!0,h(t,e))}var r,i=!1;try{(x(e)||k(e))&&(r=e.then),k(r)?(t.$$state.status=-1,r.call(e,function(e){i||(i=!0,l(t,e))},n,function(e){p(t,e)})):(t.$$state.value=e,t.$$state.status=1,u(t.$$state))}catch(t){n(t)}}function d(t,e){t.$$state.status||h(t,e)}function h(t,e){t.$$state.value=e,t.$$state.status=2,u(t.$$state)}function p(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&t(function(){for(var t,n,o=0,s=i.length;o<s;o++){n=i[o][0],t=i[o][3];try{p(n,k(t)?t(r):r)}catch(t){e(t)}}})}function v(t){var e=new s;return d(e,t),e}function g(t,e,n){var r=null;try{k(n)&&(r=n())}catch(t){return v(t)}return I(r)?r.then(function(){return e(t)},v):e(t)}function m(t,e,n,r){var i=new s;return c(i,t),i.then(e,n,r)}function y(t){if(!k(t))throw w("norslvr","Expected resolverFn, got '{0}'",t);var e=new s;return t(function(t){c(e,t)},function(t){d(e,t)}),e}var w=r("$q",TypeError),E=0,_=[];f(s.prototype,{then:function(t,e,n){if(b(t)&&b(e)&&b(n))return this;var r=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&u(this.$$state),r},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return g(e,S,t)},function(e){return g(e,v,t)},e)}});var S=m;return y.prototype=s.prototype,y.defer=i,y.reject=v,y.when=m,y.resolve=S,y.all=function(t){var e=new s,n=0,r=gr(t)?[]:{};return o(t,function(t,i){n++,m(t).then(function(t){r[i]=t,--n||c(e,r)},function(t){d(e,t)})}),0===n&&c(e,r),e},y.race=function(t){var e=i();return o(t,function(t){m(t).then(e.resolve,e.reject)}),e.promise},y}function We(t){return!!t.pur}function Ge(t){t.pur=!0}function Ze(t){Ge(t.$$state)}function Ye(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function Xe(){var t=10,e=r("$rootScope"),n=null,s=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(r,a,c){function l(t){t.currentScope.$$destroyed=!0}function f(t){9===rr&&(t.$$childHead&&f(t.$$childHead),t.$$nextSibling&&f(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function d(){this.$id=u(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function h(t){if(E.$$phase)throw e("inprog","{0} already in progress",E.$$phase);E.$$phase=t}function p(){E.$$phase=null}function g(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function m(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function y(){}function w(){for(;$.length;)try{$.shift()()}catch(t){r(t)}s=null}d.prototype={constructor:d,$new:function(t,e){var n;return e=e||this,t?(n=new d).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=u(),this.$$ChildScope=null}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",l),n},$watch:function(t,e,r,i){var o=a(t);if(o.$$watchDelegate)return o.$$watchDelegate(this,e,r,o,t);var s=this,u=s.$$watchers,c={fn:e,last:y,get:o,exp:i||t,eq:!!r};return n=null,k(e)||(c.fn=v),u||((u=s.$$watchers=[]).$$digestWatchIndex=-1),u.unshift(c),u.$$digestWatchIndex++,g(this,1),function(){var t=D(u,c);t>=0&&(g(s,-1),t<u.$$digestWatchIndex&&u.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){function n(){u=!1,c?(c=!1,e(i,i,a)):e(i,r,a)}var r=new Array(t.length),i=new Array(t.length),s=[],a=this,u=!1,c=!0;if(!t.length){var l=!0;return a.$evalAsync(function(){l&&e(i,i,a)}),function(){l=!1}}return 1===t.length?this.$watch(t[0],function(t,n,o){i[0]=t,r[0]=n,e(i,t===n?i:r,o)}):(o(t,function(t,e){var o=a.$watch(t,function(t,o){i[e]=t,r[e]=o,u||(u=!0,a.$evalAsync(n))});s.push(o)}),function(){for(;s.length;)s.shift()()})},$watchCollection:function(t,e){function n(t){var e,n,s,a;if(!b(r=t)){if(x(r))if(i(r)){o!==d&&(v=(o=d).length=0,l++),e=r.length,v!==e&&(l++,o.length=v=e);for(var u=0;u<e;u++)a=o[u],s=r[u],a!=a&&s!=s||a===s||(l++,o[u]=s)}else{o!==h&&(o=h={},v=0,l++),e=0;for(n in r)tr.call(r,n)&&(e++,s=r[n],a=o[n],n in o?a!=a&&s!=s||a===s||(l++,o[n]=s):(v++,o[n]=s,l++));if(v>e){l++;for(n in o)tr.call(r,n)||(v--,delete o[n])}}else o!==r&&(o=r,l++);return l}}n.$stateful=!0;var r,o,s,u=this,c=e.length>1,l=0,f=a(t,n),d=[],h={},p=!0,v=0;return this.$watch(f,function(){if(p?(p=!1,e(r,r,u)):e(r,s,u),c)if(x(r))if(i(r)){s=new Array(r.length);for(var t=0;t<r.length;t++)s[t]=r[t]}else{s={};for(var n in r)tr.call(r,n)&&(s[n]=r[n])}else s=r})},$digest:function(){var i,o,a,u,l,f,d,v,g,m,b=t,x=[];h("$digest"),c.$$checkUrlChange(),this===E&&null!==s&&(c.defer.cancel(s),w()),n=null;do{f=!1,v=this;for(var $=0;$<_.length;$++){try{(0,(m=_[$]).fn)(m.scope,m.locals)}catch(t){r(t)}n=null}_.length=0;t:do{if(l=v.$$watchers)for(l.$$digestWatchIndex=l.length;l.$$digestWatchIndex--;)try{if(i=l[l.$$digestWatchIndex])if(u=i.get,(o=u(v))===(a=i.last)||(i.eq?q(o,a):vr(o)&&vr(a))){if(i===n){f=!1;break t}}else f=!0,n=i,i.last=i.eq?P(o,null):o,(0,i.fn)(o,a===y?o:a,v),b<5&&(x[g=4-b]||(x[g]=[]),x[g].push({msg:k(i.exp)?"fn: "+(i.exp.name||i.exp.toString()):i.exp,newVal:o,oldVal:a}))}catch(t){r(t)}if(!(d=v.$$watchersCount&&v.$$childHead||v!==this&&v.$$nextSibling))for(;v!==this&&!(d=v.$$nextSibling);)v=v.$parent}while(v=d);if((f||_.length)&&!b--)throw p(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,x)}while(f||_.length);for(p();T<S.length;)try{S[T++]()}catch(t){r(t)}S.length=T=0,c.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===E&&c.$$applicationDestroyed(),g(this,-this.$$watchersCount);for(var e in this.$$listenerCount)m(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=v,this.$on=this.$watch=this.$watchGroup=function(){return v},this.$$listeners={},this.$$nextSibling=null,f(this)}},$eval:function(t,e){return a(t)(this,e)},$evalAsync:function(t,e){E.$$phase||_.length||c.defer(function(){_.length&&E.$digest()}),_.push({scope:this,fn:a(t),locals:e})},$$postDigest:function(t){S.push(t)},$apply:function(t){try{h("$apply");try{return this.$eval(t)}finally{p()}}catch(t){r(t)}finally{try{E.$digest()}catch(t){throw r(t),t}}},$applyAsync:function(t){var e=this;t&&$.push(function(){e.$eval(t)}),t=a(t),null===s&&(s=c.defer(function(){E.$apply(w)}))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do{r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(delete n[r],m(i,1,t))}},$emit:function(t,e){var n,i,o,s=[],a=this,u=!1,c={name:t,targetScope:a,stopPropagation:function(){u=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=F([c],arguments,1);do{for(n=a.$$listeners[t]||s,c.currentScope=a,i=0,o=n.length;i<o;i++)if(n[i])try{n[i].apply(null,l)}catch(t){r(t)}else n.splice(i,1),i--,o--;if(u)break;a=a.$parent}while(a);return c.currentScope=null,c},$broadcast:function(t,e){var n=this,i=this,o={name:t,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return o;for(var s,a,u,c=F([o],arguments,1);n=i;){for(o.currentScope=n,a=0,u=(s=n.$$listeners[t]||[]).length;a<u;a++)if(s[a])try{s[a].apply(null,c)}catch(t){r(t)}else s.splice(a,1),a--,u--;if(!(i=n.$$listenerCount[t]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(i=n.$$nextSibling);)n=n.$parent}return o.currentScope=null,o}};var E=new d,_=E.$$asyncQueue=[],S=E.$$postDigestQueue=[],$=E.$$applyAsyncQueue=[],T=0;return E}]}function Ke(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return w(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return w(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i,o=r?e:t;return""===(i=an(n&&n.trim()).href)||i.match(o)?n:"unsafe:"+i}}}function Qe(t){return t.replace(Bi,pt)}function Je(t){var e=[];return w(t)&&o(t,function(t){e.push(function(t){if("self"===t)return t;if(_(t)){if(t.indexOf("***")>-1)throw Fi("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=br(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(C(t))return new RegExp("^"+t.source+"$");throw Fi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function tn(){this.SCE_CONTEXTS=Ui;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Je(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=Je(t)),e},this.$get=["$injector",function(n){function r(t,e){return"self"===t?un(e):!!t.exec(e.href)}function i(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}var o=function(t){throw Fi("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(o=n.get("$sanitize"));var s=i(),a={};return a[Ui.HTML]=i(s),a[Ui.CSS]=i(s),a[Ui.URL]=i(s),a[Ui.JS]=i(s),a[Ui.RESOURCE_URL]=i(a[Ui.URL]),{trustAs:function(t,e){var n=a.hasOwnProperty(t)?a[t]:null;if(!n)throw Fi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||b(e)||""===e)return e;if("string"!=typeof e)throw Fi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(n,i){if(null===i||b(i)||""===i)return i;var s=a.hasOwnProperty(n)?a[n]:null;if(s&&i instanceof s)return i.$$unwrapTrustedValue();if(n===Ui.RESOURCE_URL){if(function(n){var i,o,s=an(n.toString()),a=!1;for(i=0,o=t.length;i<o;i++)if(r(t[i],s)){a=!0;break}if(a)for(i=0,o=e.length;i<o;i++)if(r(e[i],s)){a=!1;break}return a}(i))return i;throw Fi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",i.toString())}if(n===Ui.HTML)return o(i);throw Fi("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof s?t.$$unwrapTrustedValue():t}}}]}function en(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&rr<8)throw Fi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=dt(Ui);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=g),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,s=r.getTrusted,a=r.trustAs;return o(Ui,function(t,e){var n=er(e);r[Qe("parse_as_"+n)]=function(e){return i(t,e)},r[Qe("get_trusted_"+n)]=function(e){return s(t,e)},r[Qe("trust_as_"+n)]=function(e){return a(t,e)}}),r}]}function nn(){this.$get=["$window","$document",function(t,e){var n={},r=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,i=h((/android (\d+)/.exec(er((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},a=s.body&&s.body.style,u=!1,c=!1;return a&&(u=!!("transition"in a||"webkitTransition"in a),c=!!("animation"in a||"webkitAnimation"in a)),{history:!(!r||i<4||o),hasEvent:function(t){if("input"===t&&rr)return!1;if(b(n[t])){var e=s.createElement("div");n[t]="on"+t in e}return n[t]},csp:wr(),transitions:u,animations:c,android:i}}]}function rn(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,r,i,o){function s(a,u){s.totalPendingRequests++,_(a)&&!b(n.get(a))||(a=o.getTrustedResourceUrl(a));var c=r.defaults&&r.defaults.transformResponse;return gr(c)?c=c.filter(function(t){return t!==ae}):c===ae&&(c=null),r.get(a,f({cache:n,transformResponse:c},t)).finally(function(){s.totalPendingRequests--}).then(function(t){return n.put(a,t.data),t.data},function(t){return u||(t=ji("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,t.status,t.statusText),e(t)),i.reject(t)})}return s.totalPendingRequests=0,s}]}function on(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={};return r.findBindings=function(t,e,n){var r=[];return o(t.getElementsByClassName("ng-binding"),function(t){var i=hr.element(t).data("$binding");i&&o(i,function(i){if(n){new RegExp("(^|\\s)"+br(e)+"(\\s|\\||$)").test(i)&&r.push(t)}else-1!==i.indexOf(e)&&r.push(t)})}),r},r.findModels=function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o="["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]',s=t.querySelectorAll(o);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(e){e!==n.url()&&(n.url(e),t.$digest())},r.whenStable=function(t){e.notifyWhenNoOutstandingRequests(t)},r}]}function sn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){function o(o,a,u){k(o)||(u=a,a=o,o=v);var c,l=U(arguments,3),f=w(u)&&!u,d=(f?r:n).defer(),h=d.promise;return c=e.defer(function(){try{d.resolve(o.apply(null,l))}catch(t){d.reject(t),i(t)}finally{delete s[h.$$timeoutId]}f||t.$apply()},a),h.$$timeoutId=c,s[c]=d,h}var s={};return o.cancel=function(t){return!!(t&&t.$$timeoutId in s)&&(Ze(s[t.$$timeoutId].promise),s[t.$$timeoutId].reject("canceled"),delete s[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},o}]}function an(t){var e=t;return rr&&(Hi.setAttribute("href",e),e=Hi.href),Hi.setAttribute("href",e),{href:Hi.href,protocol:Hi.protocol?Hi.protocol.replace(/:$/,""):"",host:Hi.host,search:Hi.search?Hi.search.replace(/^\?/,""):"",hash:Hi.hash?Hi.hash.replace(/^#/,""):"",hostname:Hi.hostname,port:Hi.port,pathname:"/"===Hi.pathname.charAt(0)?Hi.pathname:"/"+Hi.pathname}}function un(t){var e=_(t)?an(t):t;return e.protocol===zi.protocol&&e.host===zi.host}function cn(){this.$get=m(t)}function ln(t){function e(t){try{return decodeURIComponent(t)}catch(e){return t}}var n=t[0]||{},r={},i="";return function(){var t,o,s,a,u,c=function(t){try{return t.cookie||""}catch(t){return""}}(n);if(c!==i)for(t=(i=c).split("; "),r={},s=0;s<t.length;s++)(a=(o=t[s]).indexOf("="))>0&&(u=e(o.substring(0,a)),b(r[u])&&(r[u]=e(o.substring(a+1))));return r}}function fn(){this.$get=ln}function dn(t){function e(r,i){if(x(r)){var s={};return o(r,function(t,n){s[n]=e(n,t)}),s}return t.factory(r+n,i)}var n="Filter";this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+n)}}],e("currency",gn),e("date",$n),e("filter",hn),e("json",Tn),e("limitTo",kn),e("lowercase",Qi),e("number",mn),e("orderBy",An),e("uppercase",Ji)}function hn(){return function(t,e,n,o){if(!i(t)){if(null==t)return t;throw r("filter")("notarray","Expected array but received: {0}",t)}o=o||"$";var s,a;switch(vn(e)){case"function":s=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":s=function(t,e,n,r){var i=x(t)&&n in t;!0===e?e=q:k(e)||(e=function(t,e){return!b(t)&&(null===t||null===e?t===e:!(x(e)||x(t)&&!y(t))&&(t=er(""+t),e=er(""+e),-1!==t.indexOf(e)))});return function(o){return i&&!x(o)?pn(o,t[n],e,n,!1):pn(o,t,e,n,r)}}(e,n,o,a);break;default:return t}return Array.prototype.filter.call(t,s)}}function pn(t,e,n,r,i,o){var s=vn(t),a=vn(e);if("string"===a&&"!"===e.charAt(0))return!pn(t,e.substring(1),n,r,i);if(gr(t))return t.some(function(t){return pn(t,e,n,r,i)});switch(s){case"object":var u;if(i){for(u in t)if(u.charAt&&"$"!==u.charAt(0)&&pn(t[u],e,n,r,!0))return!0;return!o&&pn(t,e,n,r,!1)}if("object"===a){for(u in e){var c=e[u];if(!k(c)&&!b(c)){var l=u===r;if(!pn(l?t:t[u],c,n,r,l,l))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function vn(t){return null===t?"null":typeof t}function gn(t){var e=t.NUMBER_FORMATS;return function(t,n,r){return b(n)&&(n=e.CURRENCY_SYM),b(r)&&(r=e.PATTERNS[1].maxFrac),null==t?t:yn(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function mn(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:yn(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function yn(t,e,n,r,i){if(!_(t)&&!S(t)||isNaN(t))return"";var o,s=!isFinite(t),a=!1,u=Math.abs(t)+"",c="";if(s)c="";else{(function(t,e,n,r){var i=t.d,o=i.length-t.i,s=(e=b(e)?Math.min(Math.max(n,o),r):+e)+t.i,a=i[s];if(s>0){i.splice(Math.max(t.i,s));for(var u=s;u<i.length;u++)i[u]=0}else{o=Math.max(0,o),t.i=1,i.length=Math.max(1,s=e+1),i[0]=0;for(var c=1;c<s;c++)i[c]=0}if(a>=5)if(s-1<0){for(var l=0;l>s;l--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[s-1]++;for(;o<Math.max(0,e);o++)i.push(0);var f=i.reduceRight(function(t,e,n,r){return e+=t,r[n]=e%10,Math.floor(e/10)},0);f&&(i.unshift(f),t.i++)})(o=function(t){var e,n,r,i,o,s=0;for((n=t.indexOf(Gi))>-1&&(t=t.replace(Gi,"")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charAt(r)===Zi;r++);if(r===(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)===Zi;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=+t.charAt(r)}return n>Wi&&(e=e.splice(0,Wi-1),s=n-1,n=1),{d:e,e:s,i:n}}(u),i,e.minFrac,e.maxFrac);var l=o.d,f=o.i,d=o.e,h=[];for(a=l.reduce(function(t,e){return t&&!e},!0);f<0;)l.unshift(0),f++;f>0?h=l.splice(f,l.length):(h=l,l=[0]);var p=[];for(l.length>=e.lgSize&&p.unshift(l.splice(-e.lgSize,l.length).join(""));l.length>e.gSize;)p.unshift(l.splice(-e.gSize,l.length).join(""));l.length&&p.unshift(l.join("")),c=p.join(n),h.length&&(c+=r+h.join("")),d&&(c+="e+"+d)}return t<0&&!a?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function bn(t,e,n,r){var i="";for((t<0||r&&t<=0)&&(r?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t=Zi+t;return n&&(t=t.substr(t.length-e)),i+t}function wn(t,e,n,r,i){return n=n||0,function(o){var s=o["get"+t]();return(n>0||s>-n)&&(s+=n),0===s&&-12===n&&(s=12),bn(s,e,r,i)}}function xn(t,e,n){return function(r,i){var o=r["get"+t]();return i[nr((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function En(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function _n(t){return function(e){var n=En(e.getFullYear()),r=+function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}(e)-+n;return bn(1+Math.round(r/6048e5),t)}}function Sn(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}function $n(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var s,a,u="",c=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,_(n)&&(n=Ki.test(n)?h(n):function(t){var n;if(n=t.match(e)){var r=new Date(0),i=0,o=0,s=n[8]?r.setUTCFullYear:r.setFullYear,a=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=h(n[9]+n[10]),o=h(n[9]+n[11])),s.call(r,h(n[1]),h(n[2])-1,h(n[3]));var u=h(n[4]||0)-i,c=h(n[5]||0)-o,l=h(n[6]||0),f=Math.round(1e3*parseFloat("0."+(n[7]||0)));return a.call(r,u,c,l,f),r}return t}(n)),S(n)&&(n=new Date(n)),!$(n)||!isFinite(n.getTime()))return n;for(;r;)(a=Xi.exec(r))?r=(c=F(c,a,1)).pop():(c.push(r),r=null);var l=n.getTimezoneOffset();return i&&(l=W(i,l),n=G(n,i,!0)),o(c,function(e){s=Yi[e],u+=s?s(n,t.DATETIME_FORMATS,l):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function Tn(){return function(t,e){return b(e)&&(e=2),H(t,e)}}function kn(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):h(e),vr(e)?t:(S(t)&&(t=t.toString()),i(t)?(n=!n||isNaN(n)?0:h(n),n=n<0?Math.max(0,t.length+n):n,e>=0?Cn(t,n,n+e):0===n?Cn(t,e,t.length):Cn(t,Math.max(0,n+e),n)):t)}}function Cn(t,e,n){return _(t)?t.slice(e,n):ar.call(t,e,n)}function An(t){function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,n){var r=typeof t;return null===t?(r="string",t="null"):"object"===r&&(t=function(t){return k(t.valueOf)&&(t=t.valueOf(),e(t))?t:(y(t)&&(t=t.toString(),e(t)),t)}(t)),{value:t,type:r,index:n}}function o(t,e){var n=0,r=t.type,i=e.type;if(r===i){var o=t.value,s=e.value;"string"===r?(o=o.toLowerCase(),s=s.toLowerCase()):"object"===r&&(x(o)&&(o=t.index),x(s)&&(s=e.index)),o!==s&&(n=o<s?-1:1)}else n=r<i?-1:1;return n}return function(e,s,a,u){if(null==e)return e;if(!i(e))throw r("orderBy")("notarray","Expected array but received: {0}",e);gr(s)||(s=[s]),0===s.length&&(s=["+"]);var c=function(e){return e.map(function(e){var n=1,r=g;if(k(e))r=e;else if(_(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e)).constant)){var i=r();r=function(t){return t[i]}}return{get:r,descending:n}})}(s),l=a?-1:1,f=k(u)?u:o,d=Array.prototype.map.call(e,function(t,e){return{value:t,tieBreaker:{value:e,type:"number",index:e},predicateValues:c.map(function(r){return n(r.get(t),e)})}});return d.sort(function(t,e){for(var n=0,r=c.length;n<r;n++){var i=f(t.predicateValues[n],e.predicateValues[n]);if(i)return i*c[n].descending*l}return(f(t.tieBreaker,e.tieBreaker)||o(t.tieBreaker,e.tieBreaker))*l}),e=d.map(function(t){return t.value})}}function Rn(t){return k(t)&&(t={link:t}),t.restrict=t.restrict||"AC",m(t)}function Mn(t,e,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=no,this.$$element=t,this.$$animate=r,In(this)}function In(t){t.$$classCache={},t.$$classCache[Fo]=!(t.$$classCache[qo]=t.$$element.hasClass(qo))}function On(t){function e(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function n(t,n,r){n=n?"-"+it(n,"-"):"",e(t,qo+n,!0===r),e(t,Fo+n,!1===r)}var r=t.clazz,i=t.set,o=t.unset;r.prototype.$setValidity=function(t,r,s){b(r)?function(t,e,n,r){t[e]||(t[e]={}),i(t[e],n,r)}(this,"$pending",t,s):function(t,e,n,r){t[e]&&o(t[e],n,r),Nn(t[e])&&(t[e]=void 0)}(this,"$pending",t,s),M(r)?r?(o(this.$error,t,s),i(this.$$success,t,s)):(i(this.$error,t,s),o(this.$$success,t,s)):(o(this.$error,t,s),o(this.$$success,t,s)),this.$pending?(e(this,ro,!0),this.$valid=this.$invalid=void 0,n(this,"",null)):(e(this,ro,!1),this.$valid=Nn(this.$error),this.$invalid=!this.$valid,n(this,"",this.$valid));var a;n(this,t,a=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,a,this)}}function Nn(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ln(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function Dn(t,e,n,r,i,o){var s=er(e[0].type);if(!i.android){var a=!1;e.on("compositionstart",function(){a=!0}),e.on("compositionend",function(){a=!1,c()})}var u,c=function(t){if(u&&(o.defer.cancel(u),u=null),!a){var i=e.val(),c=t&&t.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(i=yr(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,c)}};if(i.hasEvent("input"))e.on("input",c);else{var l=function(t,e,n){u||(u=o.defer(function(){u=null,e&&e.value===n||c(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||l(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut",l)}e.on("change",c),yo[s]&&r.$$hasNativeValidators&&s===n.type&&e.on(mo,function(t){if(!u){var e=this[Jn],n=e.badInput,r=e.typeMismatch;u=o.defer(function(){u=null,e.badInput===n&&e.typeMismatch===r||c(t)})}}),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function Pn(t,e){return function(n,r){var i,s;if($(n))return n;if(_(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),ao.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n))return i.shift(),s=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(i,function(t,n){n<e.length&&(s[e[n]]=+t)}),new Date(s.yyyy,s.MM-1,s.dd,s.HH,s.mm,s.ss||0,1e3*s.sss||0)}return NaN}}function Vn(t,e,n,r){return function(i,o,s,a,u,c,l){function f(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function d(t){return w(t)&&!$(t)?n(t)||void 0:t}qn(i,o,s,a),Dn(0,o,s,a,u,c);var h,p=a&&a.$options.getOption("timezone");if(a.$$parserName=t,a.$parsers.push(function(t){if(a.$isEmpty(t))return null;if(e.test(t)){var r=n(t,h);return p&&(r=G(r,p)),r}}),a.$formatters.push(function(t){if(t&&!$(t))throw Ho("datefmt","Expected `{0}` to be a date",t);return f(t)?((h=t)&&p&&(h=G(h,p,!0)),l("date")(t,r,p)):(h=null,"")}),w(s.min)||s.ngMin){var v;a.$validators.min=function(t){return!f(t)||b(v)||n(t)>=v},s.$observe("min",function(t){v=d(t),a.$validate()})}if(w(s.max)||s.ngMax){var g;a.$validators.max=function(t){return!f(t)||b(g)||n(t)<=g},s.$observe("max",function(t){g=d(t),a.$validate()})}}}function qn(t,e,n,r){var i=e[0];(r.$$hasNativeValidators=x(i.validity))&&r.$parsers.push(function(t){var n=e.prop(Jn)||{};return n.badInput||n.typeMismatch?void 0:t})}function Fn(t){t.$$parserName="number",t.$parsers.push(function(e){return t.$isEmpty(e)?null:lo.test(e)?parseFloat(e):void 0}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!S(e))throw Ho("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function Un(t){return w(t)&&!S(t)&&(t=parseFloat(t)),vr(t)?void 0:t}function Bn(t){return(0|t)===t}function jn(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var r=/e-(\d+)$/.exec(e);if(r)return Number(r[1])}return 0}return e.length-n-1}function Hn(t,e,n){var r=Number(t),i=!Bn(r),o=!Bn(e),s=!Bn(n);if(i||o||s){var a=i?jn(r):0,u=o?jn(e):0,c=s?jn(n):0,l=Math.max(a,u,c),f=Math.pow(10,l);r*=f,e*=f,n*=f,i&&(r=Math.round(r)),o&&(e=Math.round(e)),s&&(n=Math.round(n))}return(r-e)%n==0}function zn(t,e,n,r,i){var o;if(w(r)){if(!(o=t(r)).constant)throw Ho("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(e)}return i}function Wn(t,e){function n(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i===e[o])continue t;n.push(i)}return n}function r(t){return t&&t.split(" ")}function i(t){var e=t;return gr(t)?e=t.map(i).join(" "):x(t)&&(e=Object.keys(t).filter(function(e){return t[e]}).join(" ")),e}function s(t){var e=t;if(gr(t))e=t.map(s);else if(x(t)){var n=!1;e=Object.keys(t).filter(function(e){var r=t[e];return!n&&b(r)&&(n=!0),r}),n&&e.push(void 0)}return e}t="ngClass"+t;var a;return["$parse",function(u){return{restrict:"AC",link:function(c,l,f){function d(t,e){var n=[];return o(t,function(t){(e>0||b[t])&&(b[t]=(b[t]||0)+e,b[t]===+(e>0)&&n.push(t))}),n.join(" ")}function h(t){w===e&&function(t,e){var i=r(t),o=r(e),s=n(i,o),a=n(o,i),u=d(s,-1),c=d(a,1);f.$addClass(c),f.$removeClass(u)}(p,t),p=t}var p,v=f[t].trim(),g=":"===v.charAt(0)&&":"===v.charAt(1),m=u(v,g?s:i),y=g?function(t){var e=i(t);e!==p&&h(e)}:h,b=l.data("$classCounts"),w=!0;b||(b=lt(),l.data("$classCounts",b)),"ngClass"!==t&&(a||(a=u("$index",function(t){return 1&t})),c.$watch(a,function(t){t===e?function(t){t=d(r(t),1),f.$addClass(t)}(p):function(t){t=d(r(t),-1),f.$removeClass(t)}(p),w=t})),c.$watch(m,y,g)}}}]}function Gn(t,e,n,r,i,o,s,a,u){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=u(n.name||"",!1)(t),this.$$parentForm=no,this.$options=zo,this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:t}),this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=s,this.$$parse=i,this.$$q=a,this.$$exceptionHandler=e,In(this),function(t){t.$$scope.$watch(function(e){var n=t.$$ngModelGet(e);return n===t.$modelValue||t.$modelValue!=t.$modelValue&&n!=n||t.$$setModelValue(n),n})}(this)}function Zn(t){this.$$options=t}function Yn(t,e){o(e,function(e,n){w(t[n])||(t[n]=e)})}function Xn(t,e){t.prop("selected",e),t.attr("selected",e)}var Kn={objectMaxDepth:5},Qn=/^\/(.+)\/([a-z]*)$/,Jn="validity",tr=Object.prototype.hasOwnProperty,er=function(t){return _(t)?t.toLowerCase():t},nr=function(t){return _(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(er=function(t){return _(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},nr=function(t){return _(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t});var rr,ir,or,sr,ar=[].slice,ur=[].splice,cr=[].push,lr=Object.prototype.toString,fr=Object.getPrototypeOf,dr=r("ng"),hr=t.angular||(t.angular={}),pr=0;rr=t.document.documentMode;var vr=Number.isNaN||function(t){return t!=t};v.$inject=[],g.$inject=[];var gr=Array.isArray,mr=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,yr=function(t){return _(t)?t.trim():t},br=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},wr=function(){if(!w(wr.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");wr.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else wr.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return wr.rules},xr=function(){if(w(xr.name_))return xr.name_;var e,n,r,i,o=_r.length;for(n=0;n<o;++n)if(r=_r[n],e=t.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return xr.name_=i},Er=/:/g,_r=["ng-","data-ng-","ng:","x-ng-"],Sr=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every(function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(t.document),$r=/[A-Z]/g,Tr=!1,kr=1,Cr=3,Ar=8,Rr=9,Mr=11,Ir={full:"1.6.7",major:1,minor:6,dot:7,codeName:"imperial-backstroke"};bt.expando="ng339";var Or=bt.cache={},Nr=1;bt._data=function(t){return this.cache[t[this.expando]]||{}};var Lr=/-([a-z])/g,Dr=/^-ms-/,Pr={mouseleave:"mouseout",mouseenter:"mouseover"},Vr=r("jqLite"),qr=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Fr=/<|&#?\w+;/,Ur=/<([\w:-]+)/,Br=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,jr={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};jr.optgroup=jr.option,jr.tbody=jr.tfoot=jr.colgroup=jr.caption=jr.thead,jr.th=jr.td;var Hr=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))},zr=bt.prototype={ready:Nt,toString:function(){var t=[];return o(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return ir(t>=0?this[t]:this[this.length+t])},length:0,push:cr,sort:[].sort,splice:[].splice},Wr={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Wr[er(t)]=t});var Gr={};o("input,select,option,textarea,button,form,details".split(","),function(t){Gr[t]=!0});var Zr={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};o({data:$t,removeData:_t,hasData:function(t){for(var e in Or[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)_t(t[e])}},function(t,e){bt[e]=t}),o({data:$t,inheritedData:Mt,scope:function(t){return ir.data(t,"$scope")||Mt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return ir.data(t,"$isolateScope")||ir.data(t,"$isolateScopeNoTemplate")},controller:Rt,injector:function(t){return Mt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Tt,css:function(t,e,n){if(e=function(t){return vt(t.replace(Dr,"ms-"))}(e),!w(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var r,i=t.nodeType;if(i!==Cr&&2!==i&&i!==Ar&&t.getAttribute){var o=er(e),s=Wr[o];if(!w(n))return r=t.getAttribute(e),s&&null!==r&&(r=o),null===r?void 0:r;null===n||!1===n&&s?t.removeAttribute(e):t.setAttribute(e,s?o:n)}},prop:function(t,e,n){if(!w(n))return t[e];t[e]=n},text:function(){function t(t,e){if(b(e)){var n=t.nodeType;return n===kr||n===Cr?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(b(e)){if(t.multiple&&"select"===N(t)){var n=[];return o(t.options,function(t){t.selected&&n.push(t.value||t.text)}),n}return t.value}t.value=e},html:function(t,e){if(b(e))return t.innerHTML;xt(t,!0),t.innerHTML=e},empty:It},function(t,e){bt.prototype[e]=function(e,n){var r,i,o=this.length;if(t!==It&&b(2===t.length&&t!==Tt&&t!==Rt?e:n)){if(x(e)){for(r=0;r<o;r++)if(t===$t)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(var s=t.$dv,a=b(s)?Math.min(o,1):o,u=0;u<a;u++){var c=t(this[u],e,n);s=s?s+c:c}return s}for(r=0;r<o;r++)t(this[r],e,n);return this}}),o({removeData:_t,on:function(t,e,n,r){if(w(r))throw Vr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(mt(t)){var i=St(t,!0),o=i.events,s=i.handle;s||(s=i.handle=function(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if(b(n.immediatePropagationStopped)){var s=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),s&&s.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var a=i.specialHandlerWrapper||function(t,e,n){n.call(t,e)};o>1&&(i=dt(i));for(var u=0;u<o;u++)n.isImmediatePropagationStopped()||a(t,n,i[u])}};return n.elem=t,n}(t,o));for(var a=e.indexOf(" ")>=0?e.split(" "):[e],u=a.length,c=function(e,r,i){var a=o[e];a||((a=o[e]=[]).specialHandlerWrapper=r,"$destroy"===e||i||t.addEventListener(e,s)),a.push(n)};u--;)e=a[u],Pr[e]?(c(Pr[e],Dt),c(e,void 0,!0)):c(e)}},off:Et,one:function(t,e,n){(t=ir(t)).on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;xt(t),o(new bt(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return o(t.childNodes,function(t){t.nodeType===kr&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===kr||n===Mr)for(var r=0,i=(e=new bt(e)).length;r<i;r++){var o=e[r];t.appendChild(o)}},prepend:function(t,e){if(t.nodeType===kr){var n=t.firstChild;o(new bt(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){!function(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}(t,ir(e).eq(0).clone()[0])},remove:Ot,detach:function(t){Ot(t,!0)},after:function(t,e){var n=t,r=t.parentNode;if(r)for(var i=0,o=(e=new bt(e)).length;i<o;i++){var s=e[i];r.insertBefore(s,n.nextSibling),n=s}},addClass:Ct,removeClass:kt,toggleClass:function(t,e,n){e&&o(e.split(" "),function(e){var r=n;b(r)&&(r=!Tt(t,e)),(r?Ct:kt)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Mr?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:wt,triggerHandler:function(t,e,n){var r,i,s,a=e.type||e,u=St(t),c=u&&u.events,l=c&&c[a];l&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:v,type:a,target:t},e.type&&(r=f(r,e)),i=dt(l),s=n?[r].concat(n):[r],o(i,function(e){r.isImmediatePropagationStopped()||e.apply(t,s)}))}},function(t,e){bt.prototype[e]=function(e,n,r){for(var i,o=0,s=this.length;o<s;o++)b(i)?w(i=t(this[o],e,n,r))&&(i=ir(i)):At(i,t(this[o],e,n,r));return w(i)?i:this}}),bt.prototype.bind=bt.prototype.on,bt.prototype.unbind=bt.prototype.off;var Yr=Object.create(null);qt.prototype={_idx:function(t){return t===this._lastKey?this._lastIndex:(this._lastKey=t,this._lastIndex=this._keys.indexOf(t),this._lastIndex)},_transformKey:function(t){return vr(t)?Yr:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Xr=qt,Kr=[function(){this.$get=[function(){return Xr}]}],Qr=/^([^(]+?)=>/,Jr=/^[^(]*\(\s*([^)]*)\)/m,ti=/,/,ei=/^\s*(_?)(\S+?)\1\s*$/,ni=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ri=r("$injector");Bt.$$annotate=function(t,e,n){var r,i;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw _(n)&&n||(n=t.name||function(t){var e=Ut(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),ri("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);o(Ut(t)[1].split(ti),function(t){t.replace(ei,function(t,e,n){r.push(n)})})}t.$inject=r}}else gr(t)?(st(t[i=t.length-1],"fn"),r=t.slice(0,i)):st(t,"fn",!0);return r};var ii=r("$animate"),oi=1,si=function(){this.$get=v},ai=function(){var t=new Xr,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function i(t,e,n){var r=!1;return e&&o(e=_(e)?e.split(" "):gr(e)?e:[],function(e){e&&(r=!0,t[e]=n)}),r}function s(){o(e,function(e){var n=t.get(e);if(n){var r=function(t){_(t)&&(t=t.split(" "));var e=lt();return o(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),i="",s="";o(n,function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:s+=(s.length?" ":"")+e)}),o(e,function(t){i&&Ct(t,i),s&&kt(t,s)}),t.delete(e)}}),e.length=0}return{enabled:v,on:v,off:v,pin:v,push:function(o,a,u,c){c&&c(),(u=u||{}).from&&o.css(u.from),u.to&&o.css(u.to),(u.addClass||u.removeClass)&&function(n,o,a){var u=t.get(n)||{},c=i(u,o,!0),l=i(u,a,!1);(c||l)&&(t.set(n,u),e.push(n),1===e.length&&r.$$postDigest(s))}(o,u.addClass,u.removeClass);var l=new n;return l.complete(),l}}}]},ui=["$provide",function(t){var e=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw ii("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.customFilter=function(t){return 1===arguments.length&&(r=k(t)?t:null),r},this.classNameFilter=function(t){if(1===arguments.length&&(n=t instanceof RegExp?t:null)){if(new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]").test(n.toString()))throw n=null,ii("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate")}return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===oi)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,r,i,o){return r=r&&ir(r),i=i&&ir(i),r=r||i.parent(),e(n,r,i),t.push(n,"enter",zt(o))},move:function(n,r,i,o){return r=r&&ir(r),i=i&&ir(i),r=r||i.parent(),e(n,r,i),t.push(n,"move",zt(o))},leave:function(e,n){return t.push(e,"leave",zt(n),function(){e.remove()})},addClass:function(e,n,r){return r=zt(r),r.addClass=Ht(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return r=zt(r),r.removeClass=Ht(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return i=zt(i),i.addClass=Ht(i.addClass,n),i.removeClass=Ht(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return o=zt(o),o.from=o.from?f(o.from,n):n,o.to=o.to?f(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=Ht(o.tempClasses,i),t.push(e,"animate",o)}}}]}],ci=function(){this.$get=["$$rAF",function(t){function e(e){n.push(e),n.length>1||t(function(){for(var t=0;t<n.length;t++)n[t]();n=[]})}var n=[];return function(){var t=!1;return e(function(){t=!0}),function(n){t?n():e(n)}}}]},li=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function s(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){r()?function(t){i(t,0,!1)}(t):e(t)},this._state=0}return s.chain=function(t,e){function n(){r!==t.length?t[r](function(t){!1!==t?(r++,n()):e(!1)}):e(!0)}var r=0;n()},s.all=function(t,e){function n(n){i=i&&n,++r===t.length&&e(i)}var r=0,i=!0;o(t,function(t){t.done(n)})},s.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:v,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(o(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},s}]},fi=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){function i(){return t(function(){!function(){o.addClass&&(e.addClass(o.addClass),o.addClass=null);o.removeClass&&(e.removeClass(o.removeClass),o.removeClass=null);o.to&&(e.css(o.to),o.to=null)}(),s||a.complete(),s=!0}),a}var o=r||{};o.$$prepared||(o=P(o)),o.cleanupStyles&&(o.from=o.to=null),o.from&&(e.css(o.from),o.from=null);var s,a=new n;return{start:i,end:i}}}]},di=r("$compile"),hi=new function(){};Yt.$inject=["$provide","$$sanitizeUriProvider"],Xt.prototype.isFirstChange=function(){return this.previousValue===hi};var pi=/^((?:x|data)[:\-_])/i,vi=/[:\-_]+(.)/g,gi=r("$controller"),mi=/^(\S+)(\s+as\s+([\w$]+))?$/,yi=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof ir&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},bi="application/json",wi={"Content-Type":bi+";charset=utf-8"},xi=/^\[|^\{(?!\{)/,Ei={"[":/]$/,"{":/}$/},_i=/^\)]\}',?\n/,Si=r("$http"),$i=hr.$interpolateMinErr=r("$interpolate");$i.throwNoconcat=function(t){throw $i("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},$i.interr=function(t,e){return $i("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Ti=function(){this.$get=function(){var t=hr.callbacks,e={};return{createCallback:function(n){var r="_"+(t.$$counter++).toString(36),i="angular.callbacks."+r,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(r);return e[i]=t[r]=o,i},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var r=e[n];delete t[r.id],delete e[n]}}}},ki=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Ci={http:80,https:443,ftp:21},Ai=r("$location"),Ri=/^\s*[\\/]{2,}/,Mi={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:ke("$$absUrl"),url:function(t){if(b(t))return this.$$url;var e=ki.exec(t);return(e[1]||""===t)&&this.path(decodeURI(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:ke("$$protocol"),host:ke("$$host"),port:ke("$$port"),path:Ce("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(_(t)||S(t))t=t.toString(),this.$$search=X(t);else{if(!x(t))throw Ai("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");o(t=P(t,{}),function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:b(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:Ce("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};o([Te,$e,Se],function(t){t.prototype=Object.create(Mi),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Se||!this.$$html5)throw Ai("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=b(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var Ii=r("$parse"),Oi={}.constructor.prototype.valueOf,Ni=lt();o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){Ni[t]=!0});var Li={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Di=function(t){this.options=t};Di.prototype={constructor:Di,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=Ni[e],o=Ni[n],s=Ni[r];if(i||o||s){var a=s?r:o?n:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||""===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=w(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw Ii("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=er(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{n+=Li[o]||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var Pi=function(t,e){this.lexer=t,this.options=e};Pi.Program="Program",Pi.ExpressionStatement="ExpressionStatement",Pi.AssignmentExpression="AssignmentExpression",Pi.ConditionalExpression="ConditionalExpression",Pi.LogicalExpression="LogicalExpression",Pi.BinaryExpression="BinaryExpression",Pi.UnaryExpression="UnaryExpression",Pi.CallExpression="CallExpression",Pi.MemberExpression="MemberExpression",Pi.Identifier="Identifier",Pi.Literal="Literal",Pi.ArrayExpression="ArrayExpression",Pi.Property="Property",Pi.ObjectExpression="ObjectExpression",Pi.ThisExpression="ThisExpression",Pi.LocalsExpression="LocalsExpression",Pi.NGValueParameter="NGValueParameter",Pi.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Pi.Program,body:t}},expressionStatement:function(){return{type:Pi.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!De(t))throw Ii("lval","Trying to assign a value to a non l-value");t={type:Pi.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Pi.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Pi.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Pi.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Pi.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Pi.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Pi.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Pi.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Pi.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=P(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Pi.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)"("===e.text?(t={type:Pi.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Pi.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Pi.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:Pi.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Pi.Identifier,name:t.text}},constant:function(){return{type:Pi.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Pi.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Pi.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Pi.ObjectExpression,properties:e}},throwError:function(t,e){throw Ii("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw Ii("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw Ii("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===n||s===r||s===i||!e&&!n&&!r&&!i)return o}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:Pi.ThisExpression},$locals:{type:Pi.LocalsExpression}}};var Vi=1,qi=2;Ve.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Ne(t,e.$filter);var n,r="";if(this.stage="assign",n=Pe(t)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var s=Le(t.body);e.stage="inputs",o(s,function(t,n){var r="fn"+n;e.state[r]={vars:[],body:[],own:{}},e.state.computing=r;var i=e.nextId();e.recurse(t,i),e.return_(i),e.state.inputs.push({name:r,isPure:t.isPure}),t.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(t);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",u=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,Me,Ie,Oe);return this.state=this.stage=void 0,u},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return o(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(t){return t.name}).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return o(this.state.filters,function(n,r){t.push(n+"=$filter("+e.escape(r)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,i,s){var a,u,c,l,f,d=this;if(r=r||v,!s&&w(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,i,!0));switch(t.type){case Pi.Program:o(t.body,function(e,n){d.recurse(e.expression,void 0,void 0,function(t){u=t}),n!==t.body.length-1?d.current().body.push(u,";"):d.return_(u)});break;case Pi.Literal:l=this.escape(t.value),this.assign(e,l),r(e||l);break;case Pi.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){u=t}),l=t.operator+"("+this.ifDefined(u,0)+")",this.assign(e,l),r(l);break;case Pi.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){u=t}),l="+"===t.operator?this.plus(a,u):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(u,0):"("+a+")"+t.operator+"("+u+")",this.assign(e,l),r(l);break;case Pi.LogicalExpression:e=e||this.nextId(),d.recurse(t.left,e),d.if_("&&"===t.operator?e:d.not(e),d.lazyRecurse(t.right,e)),r(e);break;case Pi.ConditionalExpression:e=e||this.nextId(),d.recurse(t.test,e),d.if_(e,d.lazyRecurse(t.alternate,e),d.lazyRecurse(t.consequent,e)),r(e);break;case Pi.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",t.name)),function(){d.if_("inputs"===d.stage||"s",function(){i&&1!==i&&d.if_(d.isNull(d.nonComputedMember("s",t.name)),d.lazyAssign(d.nonComputedMember("s",t.name),"{}")),d.assign(e,d.nonComputedMember("s",t.name))})},e&&d.lazyAssign(e,d.nonComputedMember("l",t.name))),r(e);break;case Pi.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),d.recurse(t.object,a,void 0,function(){d.if_(d.notNull(a),function(){t.computed?(u=d.nextId(),d.recurse(t.property,u),d.getStringValue(u),i&&1!==i&&d.if_(d.not(d.computedMember(a,u)),d.lazyAssign(d.computedMember(a,u),"{}")),l=d.computedMember(a,u),d.assign(e,l),n&&(n.computed=!0,n.name=u)):(i&&1!==i&&d.if_(d.isNull(d.nonComputedMember(a,t.property.name)),d.lazyAssign(d.nonComputedMember(a,t.property.name),"{}")),l=d.nonComputedMember(a,t.property.name),d.assign(e,l),n&&(n.computed=!1,n.name=t.property.name))},function(){d.assign(e,"undefined")}),r(e)},!!i);break;case Pi.CallExpression:e=e||this.nextId(),t.filter?(u=d.filter(t.callee.name),c=[],o(t.arguments,function(t){var e=d.nextId();d.recurse(t,e),c.push(e)}),l=u+"("+c.join(",")+")",d.assign(e,l),r(e)):(u=d.nextId(),a={},c=[],d.recurse(t.callee,u,a,function(){d.if_(d.notNull(u),function(){o(t.arguments,function(e){d.recurse(e,t.constant?void 0:d.nextId(),void 0,function(t){c.push(t)})}),l=a.name?d.member(a.context,a.name,a.computed)+"("+c.join(",")+")":u+"("+c.join(",")+")",d.assign(e,l)},function(){d.assign(e,"undefined")}),r(e)}));break;case Pi.AssignmentExpression:u=this.nextId(),a={},this.recurse(t.left,void 0,a,function(){d.if_(d.notNull(a.context),function(){d.recurse(t.right,u),l=d.member(a.context,a.name,a.computed)+t.operator+u,d.assign(e,l),r(e||l)})},1);break;case Pi.ArrayExpression:c=[],o(t.elements,function(e){d.recurse(e,t.constant?void 0:d.nextId(),void 0,function(t){c.push(t)})}),l="["+c.join(",")+"]",this.assign(e,l),r(e||l);break;case Pi.ObjectExpression:c=[],f=!1,o(t.properties,function(t){t.computed&&(f=!0)}),f?(e=e||this.nextId(),this.assign(e,"{}"),o(t.properties,function(t){t.computed?(a=d.nextId(),d.recurse(t.key,a)):a=t.key.type===Pi.Identifier?t.key.name:""+t.key.value,u=d.nextId(),d.recurse(t.value,u),d.assign(d.member(e,a,t.computed),u)})):(o(t.properties,function(e){d.recurse(e.value,t.constant?void 0:d.nextId(),void 0,function(t){c.push(d.escape(e.key.type===Pi.Identifier?e.key.name:""+e.key.value)+":"+t)})}),l="{"+c.join(",")+"}",this.assign(e,l)),r(e||l);break;case Pi.ThisExpression:this.assign(e,"s"),r(e||"s");break;case Pi.LocalsExpression:this.assign(e,"l"),r(e||"l");break;case Pi.NGValueParameter:this.assign(e,"v"),r(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,r,i,o){var s=this;return function(){s.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(_(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(S(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw Ii("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},qe.prototype={compile:function(t){var e=this;Ne(t,e.$filter);var n,r;(n=Pe(t))&&(r=this.recurse(n));var i,s=Le(t.body);s&&(i=[],o(s,function(t,n){var r=e.recurse(t);r.isPure=t.isPure,t.input=r,i.push(r),t.watchId=n}));var a=[];o(t.body,function(t){a.push(e.recurse(t.expression))});var u=0===t.body.length?v:1===t.body.length?a[0]:function(t,e){var n;return o(a,function(r){n=r(t,e)}),n};return r&&(u.assign=function(t,e,n){return r(t,n,e)}),i&&(u.inputs=i),u},recurse:function(t,e,n){var r,i,s,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Pi.Literal:return this.value(t.value,e);case Pi.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case Pi.BinaryExpression:case Pi.LogicalExpression:return r=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](r,i,e);case Pi.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Pi.Identifier:return a.identifier(t.name,e,n);case Pi.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(r,i,e,n):this.nonComputedMember(r,i,e,n);case Pi.CallExpression:return s=[],o(t.arguments,function(t){s.push(a.recurse(t))}),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,n,r,o){for(var a=[],u=0;u<s.length;++u)a.push(s[u](t,n,r,o));var c=i.apply(void 0,a,o);return e?{context:void 0,name:void 0,value:c}:c}:function(t,n,r,o){var a,u=i(t,n,r,o);if(null!=u.value){for(var c=[],l=0;l<s.length;++l)c.push(s[l](t,n,r,o));a=u.value.apply(u.context,c)}return e?{value:a}:a};case Pi.AssignmentExpression:return r=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,n,o,s){var a=r(t,n,o,s),u=i(t,n,o,s);return a.context[a.name]=u,e?{value:u}:u};case Pi.ArrayExpression:return s=[],o(t.elements,function(t){s.push(a.recurse(t))}),function(t,n,r,i){for(var o=[],a=0;a<s.length;++a)o.push(s[a](t,n,r,i));return e?{value:o}:o};case Pi.ObjectExpression:return s=[],o(t.properties,function(t){t.computed?s.push({key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}):s.push({key:t.key.type===Pi.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})}),function(t,n,r,i){for(var o={},a=0;a<s.length;++a)s[a].computed?o[s[a].key(t,n,r,i)]=s[a].value(t,n,r,i):o[s[a].key]=s[a].value(t,n,r,i);return e?{value:o}:o};case Pi.ThisExpression:return function(t){return e?{value:t}:t};case Pi.LocalsExpression:return function(t,n){return e?{value:n}:n};case Pi.NGValueParameter:return function(t,n,r){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){var s=t(n,r,i,o);return s=w(s)?+s:0,e?{value:s}:s}},"unary-":function(t,e){return function(n,r,i,o){var s=t(n,r,i,o);return s=w(s)?-s:-0,e?{value:s}:s}},"unary!":function(t,e){return function(n,r,i,o){var s=!t(n,r,i,o);return e?{value:s}:s}},"binary+":function(t,e,n){return function(r,i,o,s){var a=Oe(t(r,i,o,s),e(r,i,o,s));return n?{value:a}:a}},"binary-":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s),u=e(r,i,o,s),c=(w(a)?a:0)-(w(u)?u:0);return n?{value:c}:c}},"binary*":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)*e(r,i,o,s);return n?{value:a}:a}},"binary/":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)/e(r,i,o,s);return n?{value:a}:a}},"binary%":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)%e(r,i,o,s);return n?{value:a}:a}},"binary===":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)===e(r,i,o,s);return n?{value:a}:a}},"binary!==":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)!==e(r,i,o,s);return n?{value:a}:a}},"binary==":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)==e(r,i,o,s);return n?{value:a}:a}},"binary!=":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)!=e(r,i,o,s);return n?{value:a}:a}},"binary<":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)<e(r,i,o,s);return n?{value:a}:a}},"binary>":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)>e(r,i,o,s);return n?{value:a}:a}},"binary<=":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)<=e(r,i,o,s);return n?{value:a}:a}},"binary>=":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)>=e(r,i,o,s);return n?{value:a}:a}},"binary&&":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)&&e(r,i,o,s);return n?{value:a}:a}},"binary||":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s)||e(r,i,o,s);return n?{value:a}:a}},"ternary?:":function(t,e,n,r){return function(i,o,s,a){var u=t(i,o,s,a)?e(i,o,s,a):n(i,o,s,a);return r?{value:u}:u}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(r,i,o,s){var a=i&&t in i?i:r;n&&1!==n&&a&&null==a[t]&&(a[t]={});var u=a?a[t]:void 0;return e?{context:a,name:t,value:u}:u}},computedMember:function(t,e,n,r){return function(i,o,s,a){var u,c,l=t(i,o,s,a);return null!=l&&(u=Me(u=e(i,o,s,a)),r&&1!==r&&l&&!l[u]&&(l[u]={}),c=l[u]),n?{context:l,name:u,value:c}:c}},nonComputedMember:function(t,e,n,r){return function(i,o,s,a){var u=t(i,o,s,a);r&&1!==r&&u&&null==u[e]&&(u[e]={});var c=null!=u?u[e]:void 0;return n?{context:u,name:e,value:c}:c}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}},Fe.prototype={constructor:Fe,parse:function(t){var e=this.ast.ast(t),n=this.astCompiler.compile(e);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Pi.Literal||t.body[0].expression.type===Pi.ArrayExpression||t.body[0].expression.type===Pi.ObjectExpression)}(e),n.constant=function(t){return t.constant}(e),n}};var Fi=r("$sce"),Ui={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Bi=/_([a-z])/g,ji=r("$compile"),Hi=t.document.createElement("a"),zi=an(t.location.href);ln.$inject=["$document"],dn.$inject=["$provide"];var Wi=22,Gi=".",Zi="0";gn.$inject=["$locale"],mn.$inject=["$locale"];var Yi={yyyy:wn("FullYear",4,0,!1,!0),yy:wn("FullYear",2,0,!0,!0),y:wn("FullYear",1,0,!1,!0),MMMM:xn("Month"),MMM:xn("Month",!0),MM:wn("Month",2,1),M:wn("Month",1,1),LLLL:xn("Month",!1,!0),dd:wn("Date",2),d:wn("Date",1),HH:wn("Hours",2),H:wn("Hours",1),hh:wn("Hours",2,-12),h:wn("Hours",1,-12),mm:wn("Minutes",2),m:wn("Minutes",1),ss:wn("Seconds",2),s:wn("Seconds",1),sss:wn("Milliseconds",3),EEEE:xn("Day"),EEE:xn("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var r=-1*n,i=r>=0?"+":"";return i+=bn(Math[r>0?"floor":"ceil"](r/60),2)+bn(Math.abs(r%60),2)},ww:_n(2),w:_n(1),G:Sn,GG:Sn,GGG:Sn,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Xi=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Ki=/^-?\d+$/;$n.$inject=["$locale"];var Qi=m(er),Ji=m(nr);An.$inject=["$parse"];var to=m({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===lr.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),eo={};o(Wr,function(t,e){function n(t,n,i){t.$watch(i[r],function(t){i.$set(e,!!t)})}if("multiple"!==t){var r=Kt("ng-"+e),i=n;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[r]&&n(t,0,i)}),eo[r]=function(){return{restrict:"A",priority:100,link:i}}}}),o(Zr,function(t,e){eo[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(Qn);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),o(["src","srcset","href"],function(t){var e=Kt("ng-"+t);eo[e]=function(){return{priority:99,link:function(n,r,i){var o=t,s=t;"href"===t&&"[object SVGAnimatedString]"===lr.call(r.prop("href"))&&(s="xlinkHref",i.$attr[s]="xlink:href",o=null),i.$observe(e,function(e){e?(i.$set(s,e),rr&&o&&r.prop(o,i[s])):"href"===t&&i.$set(s,null)})}}}});var no={$addControl:v,$$renameControl:function(t,e){t.$name=e},$removeControl:v,$setValidity:v,$setDirty:v,$setPristine:v,$setSubmitted:v},ro="ng-pending";Mn.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Mn.prototype={$rollbackViewValue:function(){o(this.$$controls,function(t){t.$rollbackViewValue()})},$commitViewValue:function(){o(this.$$controls,function(t){t.$commitViewValue()})},$addControl:function(t){at(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],o(this.$pending,function(e,n){this.$setValidity(n,null,t)},this),o(this.$error,function(e,n){this.$setValidity(n,null,t)},this),o(this.$$success,function(e,n){this.$setValidity(n,null,t)},this),D(this.$$controls,t),t.$$parentForm=no},$setDirty:function(){this.$$animate.removeClass(this.$$element,Uo),this.$$animate.addClass(this.$$element,Bo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Uo,Bo+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,o(this.$$controls,function(t){t.$setPristine()})},$setUntouched:function(){o(this.$$controls,function(t){t.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},On({clazz:Mn,set:function(t,e,n){var r=t[e];if(r){-1===r.indexOf(n)&&r.push(n)}else t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(D(r,n),0===r.length&&delete t[e])}});var io=function(t){return["$timeout","$parse",function(e,n){function r(t){return""===t?n('this[""]').assign:n(t).assign||v}return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Mn,compile:function(n,i){n.addClass(Uo).addClass(qo);var o=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,n,i,s){var a=s[0];if(!("action"in i)){var u=function(e){t.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),e.preventDefault()};n[0].addEventListener("submit",u),n.on("$destroy",function(){e(function(){n[0].removeEventListener("submit",u)},0,!1)})}(s[1]||a.$$parentForm).$addControl(a);var c=o?r(a.$name):v;o&&(c(t,a),i.$observe(o,function(e){a.$name!==e&&(c(t,void 0),a.$$parentForm.$$renameControl(a,e),(c=r(a.$name))(t,a))})),n.on("$destroy",function(){a.$$parentForm.$removeControl(a),c(t,void 0),f(a,no)})}}}}}]},oo=io(),so=io(!0),ao=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,uo=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,co=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,lo=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,fo=/^(\d{4,})-(\d{2})-(\d{2})$/,ho=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,po=/^(\d{4,})-W(\d\d)$/,vo=/^(\d{4,})-(\d\d)$/,go=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,mo="keydown wheel mousedown",yo=lt();o("date,datetime-local,month,time,week".split(","),function(t){yo[t]=!0});var bo={text:function(t,e,n,r,i,o){Dn(0,e,n,r,i,o),Ln(r)},date:Vn("date",fo,Pn(fo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Vn("datetimelocal",ho,Pn(ho,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Vn("time",go,Pn(go,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Vn("week",po,function(t,e){if($(t))return t;if(_(t)){po.lastIndex=0;var n=po.exec(t);if(n){var r=+n[1],i=+n[2],o=0,s=0,a=0,u=0,c=En(r),l=7*(i-1);return e&&(o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),u=e.getMilliseconds()),new Date(r,0,c.getDate()+l,o,s,a,u)}}return NaN},"yyyy-Www"),month:Vn("month",vo,Pn(vo,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,r,i,o){qn(0,e,0,r),Fn(r),Dn(0,e,n,r,i,o);var s,a;if((w(n.min)||n.ngMin)&&(r.$validators.min=function(t){return r.$isEmpty(t)||b(s)||t>=s},n.$observe("min",function(t){s=Un(t),r.$validate()})),(w(n.max)||n.ngMax)&&(r.$validators.max=function(t){return r.$isEmpty(t)||b(a)||t<=a},n.$observe("max",function(t){a=Un(t),r.$validate()})),w(n.step)||n.ngStep){var u;r.$validators.step=function(t,e){return r.$isEmpty(e)||b(u)||Hn(e,s||0,u)},n.$observe("step",function(t){u=Un(t),r.$validate()})}},url:function(t,e,n,r,i,o){Dn(0,e,n,r,i,o),Ln(r),r.$$parserName="url",r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||uo.test(n)}},email:function(t,e,n,r,i,o){Dn(0,e,n,r,i,o),Ln(r),r.$$parserName="email",r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||co.test(n)}},radio:function(t,e,n,r){var i=!n.ngTrim||"false"!==yr(n.ngTrim);b(n.name)&&e.attr("name",u()),e.on("click",function(t){var o;e[0].checked&&(o=n.value,i&&(o=yr(o)),r.$setViewValue(o,t&&t.type))}),r.$render=function(){var t=n.value;i&&(t=yr(t)),e[0].checked=t===r.$viewValue},n.$observe("value",r.$render)},range:function(t,e,n,r,i,o){function s(t,r){e.attr(t,n[t]),n.$observe(t,r)}qn(0,e,0,r),Fn(r),Dn(0,e,n,r,i,o);var a=r.$$hasNativeValidators&&"range"===e[0].type,u=a?0:void 0,c=a?100:void 0,l=a?1:void 0,f=e[0].validity,d=w(n.min),h=w(n.max),p=w(n.step),v=r.$render;r.$render=a&&w(f.rangeUnderflow)&&w(f.rangeOverflow)?function(){v(),r.$setViewValue(e.val())}:v,d&&(r.$validators.min=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||b(u)||e>=u},s("min",function(t){if(u=Un(t),!vr(r.$modelValue))if(a){var n=e.val();u>n&&(n=u,e.val(n)),r.$setViewValue(n)}else r.$validate()})),h&&(r.$validators.max=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||b(c)||e<=c},s("max",function(t){if(c=Un(t),!vr(r.$modelValue))if(a){var n=e.val();c<n&&(e.val(c),n=c<u?u:c),r.$setViewValue(n)}else r.$validate()})),p&&(r.$validators.step=a?function(){return!f.stepMismatch}:function(t,e){return r.$isEmpty(e)||b(l)||Hn(e,u||0,l)},s("step",function(t){l=Un(t),vr(r.$modelValue)||(a&&r.$viewValue!==e.val()?r.$setViewValue(e.val()):r.$validate())}))},checkbox:function(t,e,n,r,i,o,s,a){var u=zn(a,t,"ngTrueValue",n.ngTrueValue,!0),c=zn(a,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){r.$setViewValue(e[0].checked,t&&t.type)}),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push(function(t){return q(t,u)}),r.$parsers.push(function(t){return t?u:c})},hidden:v,button:v,submit:v,reset:v,file:v},wo=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,s,a){a[0]&&(bo[er(s.type)]||bo.text)(i,o,s,a[0],e,t,n,r)}}}}],xo=/^(true|false|\d+)$/,Eo=function(){function t(t,e,n){var r=w(n)?n:9===rr?"":null;t.prop("value",r),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return xo.test(n.ngValue)?function(e,n,r){t(n,r,e.$eval(r.ngValue))}:function(e,n,r){e.$watch(r.ngValue,function(e){t(n,r,e)})}}}},_o=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,function(t){n.textContent=ft(t)})}}}}],So=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){var o=t(r.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(t){r.textContent=b(t)?"":t})}}}}],$o=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),s=e(i.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(s,function(){var n=o(e);r.html(t.getTrustedHtml(n)||"")})}}}}],To=m({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),ko=Wn("",!0),Co=Wn("Odd",0),Ao=Wn("Even",1),Ro=Rn({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Mo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Io={},Oo={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=Kt("ng-"+t);Io[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var s=n(o[e]);return function(e,n){n.on(t,function(n){var i=function(){s(e,{$event:n})};Oo[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var No=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,s){var a,u,c;n.$watch(i.ngIf,function(n){n?u||s(function(n,o){u=o,n[n.length++]=e.$$createComment("end ngIf",i.ngIf),a={clone:n},t.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),u&&(u.$destroy(),u=null),a&&(c=ct(a.clone),t.leave(c).done(function(t){!1!==t&&(c=null)}),a=null))})}}}],Lo=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:hr.noop,compile:function(r,i){var o=i.ngInclude||i.src,s=i.onload||"",a=i.autoscroll;return function(r,i,u,c,l){var f,d,h,p=0,v=function(){d&&(d.remove(),d=null),f&&(f.$destroy(),f=null),h&&(n.leave(h).done(function(t){!1!==t&&(d=null)}),d=h,h=null)};r.$watch(o,function(o){var u=function(t){!1===t||!w(a)||a&&!r.$eval(a)||e()},d=++p;o?(t(o,!0).then(function(t){if(!r.$$destroyed&&d===p){var e=r.$new();c.template=t;var a=l(e,function(t){v(),n.enter(t,null,i).done(u)});h=a,(f=e).$emit("$includeContentLoaded",o),r.$eval(s)}},function(){r.$$destroyed||d===p&&(v(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(v(),c.template=null)})}}}}],Do=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){if(lr.call(r[0]).match(/SVG/))return r.empty(),void e(yt(o.template,t.document).childNodes)(n,function(t){r.append(t)},{futureParentElement:r});r.html(o.template),e(r.contents())(n)}}}],Po=Rn({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Vo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var i=n.ngList||", ",s="false"!==n.ngTrim,a=s?yr(i):i;r.$parsers.push(function(t){if(!b(t)){var e=[];return t&&o(t.split(a),function(t){t&&e.push(s?yr(t):t)}),e}}),r.$formatters.push(function(t){if(gr(t))return t.join(i)}),r.$isEmpty=function(t){return!t||!t.length}}}},qo="ng-valid",Fo="ng-invalid",Uo="ng-pristine",Bo="ng-dirty",jo="ng-untouched",Ho=r("ngModel");Gn.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Gn.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return k(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){k(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Ho("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,Z(this.$$element))},$render:v,$isEmpty:function(t){return b(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Bo),this.$$animate.addClass(this.$$element,Uo)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Uo),this.$$animate.addClass(this.$$element,Bo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,jo,"ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched",jo)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!vr(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,function(t){i||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==r&&o.$$writeModelToScope())})}},$$runValidators:function(t,e,n){function r(t,e){s===a.$$currentValidationRunId&&a.$setValidity(t,e)}function i(t){s===a.$$currentValidationRunId&&n(t)}this.$$currentValidationRunId++;var s=this.$$currentValidationRunId,a=this;!function(){var t=a.$$parserName||"parse";return b(a.$$parserValid)?(r(t,null),!0):(a.$$parserValid||(o(a.$validators,function(t,e){r(e,null)}),o(a.$asyncValidators,function(t,e){r(e,null)})),r(t,a.$$parserValid),a.$$parserValid)}()?i(!1):function(){var n=!0;return o(a.$validators,function(i,o){var s=Boolean(i(t,e));n=n&&s,r(o,s)}),!!n||(o(a.$asyncValidators,function(t,e){r(e,null)}),!1)}()?function(){var n=[],s=!0;o(a.$asyncValidators,function(i,o){var a=i(t,e);if(!I(a))throw Ho("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);r(o,void 0),n.push(a.then(function(){r(o,!0)},function(){s=!1,r(o,!1)}))}),n.length?a.$$q.all(n).then(function(){i(s)},v):i(!0)}():i(!1)},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){function t(){n.$modelValue!==i&&n.$$writeModelToScope()}var e=this.$$lastCommittedViewValue,n=this;if(this.$$parserValid=!b(e)||void 0,this.$$parserValid)for(var r=0;r<this.$parsers.length;r++)if(e=this.$parsers[r](e),b(e)){this.$$parserValid=!1;break}vr(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var i=this.$modelValue,o=this.$options.getOption("allowInvalid");this.$$rawModelValue=e,o&&(this.$modelValue=e,t()),this.$$runValidators(e,this.$$lastCommittedViewValue,function(r){o||(n.$modelValue=r?e:void 0,t())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),o(this.$viewChangeListeners,function(t){try{t()}catch(t){this.$$exceptionHandler(t)}},this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");S(e[t])?e=e[t]:S(e.default)&&(e=e.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},e):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t)},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,v))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()}},On({clazz:Gn,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var zo,Wo=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Gn,priority:1,compile:function(e){return e.addClass(Uo).addClass(jo).addClass(qo),{pre:function(t,e,n,r){var i=r[0],o=r[1]||i.$$parentForm,s=r[2];s&&(i.$options=s.$options),i.$$initGetterSetters(),o.$addControl(i),n.$observe("name",function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)}),t.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,n,r,i){function o(){s.$setTouched()}var s=i[0];s.$options.getOption("updateOn")&&n.on(s.$options.getOption("updateOn"),function(t){s.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(){s.$touched||(t.$$phase?e.$evalAsync(o):e.$apply(o))})}}}}}],Go=/(\s+|^)default(\s+|$)/;Zn.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return t=f({},t),o(t,function(n,r){"$inherit"===n?"*"===r?e=!0:(t[r]=this.$$options[r],"updateOn"===r&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(t.updateOnDefault=!1,t[r]=yr(n.replace(Go,function(){return t.updateOnDefault=!0," "})))},this),e&&(delete t["*"],Yn(t,this.$$options)),Yn(t,zo.$$options),new Zn(t)}},zo=new Zn({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Zo=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:zo,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}},Yo=Rn({terminal:!0,priority:1e3}),Xo=r("ngOptions"),Ko=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Qo=["$compile","$document","$parse",function(e,n,r){var s=t.document.createElement("option"),a=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=v},post:function(t,u,c,l){function f(t,e){var n=s.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),e.value=t.selectValue}(t,n)}function d(t){var e=x.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}for(var h=l[0],p=l[1],v=c.multiple,g=0,m=u.children(),y=m.length;g<y;g++)if(""===m[g].value){h.hasEmptyOption=!0,h.emptyOption=m.eq(g);break}u.empty();var b=!!h.emptyOption;ir(s.cloneNode(!1)).val("?");var x,E=function(t,e,n){function o(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function s(t){var e;if(!c&&i(t))e=t;else{e=[];for(var n in t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n)}return e}var a=t.match(Ko);if(!a)throw Xo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,Z(e));var u=a[5]||a[7],c=a[6],l=/ as /.test(a[0])&&a[1],f=a[9],d=r(a[2]?a[1]:u),h=l&&r(l)||d,p=f&&r(f),v=f?function(t,e){return p(n,e)}:function(t){return Vt(t)},g=function(t,e){return v(t,E(t,e))},m=r(a[2]||a[1]),y=r(a[3]||""),b=r(a[4]||""),w=r(a[8]),x={},E=c?function(t,e){return x[c]=e,x[u]=t,x}:function(t){return x[u]=t,x};return{trackBy:f,getTrackByValue:g,getWatchables:r(w,function(t){for(var e=[],r=s(t=t||[]),i=r.length,o=0;o<i;o++){var u=t===r?o:r[o],c=t[u],l=E(c,u),f=v(c,l);if(e.push(f),a[2]||a[1]){var d=m(n,l);e.push(d)}if(a[4]){var h=b(n,l);e.push(h)}}return e}),getOptions:function(){for(var t=[],e={},r=w(n)||[],i=s(r),a=i.length,u=0;u<a;u++){var c=r===i?u:i[u],l=E(r[c],c),d=h(n,l),p=v(d,l),x=new o(p,d,m(n,l),y(n,l),b(n,l));t.push(x),e[p]=x}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[g(t)]},getViewValueFromOption:function(t){return f?P(t.viewValue):t.viewValue}}}}}(c.ngOptions,u,t),_=n[0].createDocumentFragment();h.generateUnknownOptionValue=function(t){return"?"},v?(h.writeValue=function(t){if(x){var e=t&&t.map(d)||[];x.items.forEach(function(t){t.element.selected&&!L(e,t)&&(t.element.selected=!1)})}},h.readValue=function(){var t=[];return o(u.val()||[],function(e){var n=x.selectValueMap[e];n&&!n.disabled&&t.push(x.getViewValueFromOption(n))}),t},E.trackBy&&t.$watchCollection(function(){if(gr(p.$viewValue))return p.$viewValue.map(function(t){return E.getTrackByValue(t)})},function(){p.$render()})):(h.writeValue=function(t){if(x){var e=u[0].options[u[0].selectedIndex],n=x.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(u[0].value!==n.selectValue&&(h.removeUnknownOption(),u[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):h.selectUnknownOrEmptyOption(t)}},h.readValue=function(){var t=x.selectValueMap[u.val()];return t&&!t.disabled?(h.unselectEmptyOption(),h.removeUnknownOption(),x.getViewValueFromOption(t)):null},E.trackBy&&t.$watch(function(){return E.getTrackByValue(p.$viewValue)},function(){p.$render()})),b&&(e(h.emptyOption)(t),u.prepend(h.emptyOption),h.emptyOption[0].nodeType===Ar?(h.hasEmptyOption=!1,h.registerOption=function(t,e){""===e.val()&&(h.hasEmptyOption=!0,h.emptyOption=e,h.emptyOption.removeClass("ng-scope"),p.$render(),e.on("$destroy",function(){var t=h.$isEmptyOptionSelected();h.hasEmptyOption=!1,h.emptyOption=void 0,t&&p.$render()}))}):h.emptyOption.removeClass("ng-scope")),t.$watchCollection(E.getWatchables,function(){var t=x&&h.readValue();if(x)for(var e=x.items.length-1;e>=0;e--){var n=x.items[e];w(n.group)?Ot(n.element.parentNode):Ot(n.element)}var r={};if((x=E.getOptions()).items.forEach(function(t){var e;w(t.group)?((e=r[t.group])||(e=a.cloneNode(!1),_.appendChild(e),e.label=null===t.group?"null":t.group,r[t.group]=e),f(t,e)):f(t,_)}),u[0].appendChild(_),p.$render(),!p.$isEmpty(t)){var i=h.readValue();(E.trackBy||v?q(t,i):t===i)||(p.$setViewValue(i),p.$render())}})}}}}],Jo=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(s,a,u){function c(t){a.text(t||"")}var l,f=u.count,d=u.$attr.when&&a.attr(u.$attr.when),h=u.offset||0,p=s.$eval(d)||{},g={},m=e.startSymbol(),y=e.endSymbol(),w=m+f+"-"+h+y,x=hr.noop;o(u,function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+er(n[2]);p[r]=a.attr(u.$attr[e])}}),o(p,function(t,n){g[n]=e(t.replace(r,w))}),s.$watch(f,function(e){var r=parseFloat(e),i=vr(r);if(i||r in p||(r=t.pluralCat(r-h)),!(r===l||i&&vr(l))){x();var o=g[r];b(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+d),x=v,c()):x=s.$watch(o,c),l=r}})}}}],ts=["$parse","$animate","$compile",function(t,e,n){var s=r("ngRepeat"),a=function(t,e,n,r,i,o,s){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},u=function(t){return t.clone[0]},c=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,l){var f=l.ngRepeat,d=n.$$createComment("end ngRepeat",f),h=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!h)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);var p=h[1],v=h[2],g=h[3],m=h[4];if(!(h=p.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",p);var y=h[3]||h[1],b=h[2];if(g&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(g)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(g)))throw s("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",g);var w,x,E,_,S={$id:Vt};return m?w=t(m):(E=function(t,e){return Vt(e)},_=function(t){return t}),function(t,n,r,l,h){w&&(x=function(e,n,r){return b&&(S[b]=e),S[y]=n,S.$index=r,w(t,S)});var p=lt();t.$watchCollection(v,function(r){var l,v,m,w,S,$,T,k,C,A,R,M,I=n[0],O=lt();if(g&&(t[g]=r),i(r))C=r,k=x||E;else{k=x||_,C=[];for(var N in r)tr.call(r,N)&&"$"!==N.charAt(0)&&C.push(N)}for(w=C.length,R=new Array(w),l=0;l<w;l++)if(S=r===C?l:C[l],$=r[S],T=k(S,$,l),p[T])A=p[T],delete p[T],O[T]=A,R[l]=A;else{if(O[T])throw o(R,function(t){t&&t.scope&&(p[t.id]=t)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",f,T,$);R[l]={id:T,scope:void 0,clone:void 0},O[T]=!0}for(var L in p){if(A=p[L],M=ct(A.clone),e.leave(M),M[0].parentNode)for(l=0,v=M.length;l<v;l++)M[l].$$NG_REMOVED=!0;A.scope.$destroy()}for(l=0;l<w;l++)if(S=r===C?l:C[l],$=r[S],(A=R[l]).scope){m=I;do{m=m.nextSibling}while(m&&m.$$NG_REMOVED);u(A)!==m&&e.move(ct(A.clone),null,I),I=c(A),a(A.scope,l,y,$,b,S,w)}else h(function(t,n){A.scope=n;var r=d.cloneNode(!1);t[t.length++]=r,e.enter(t,null,I),I=r,A.clone=t,O[A.id]=A,a(A.scope,l,y,$,b,S,w)});p=O})}}}}],es=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ns=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],rs=Rn(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&o(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),is=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,s){var a=i.ngSwitch||i.on,u=[],c=[],l=[],f=[],d=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(a,function(n){for(var r,i;l.length;)t.cancel(l.pop());for(r=0,i=f.length;r<i;++r){var a=ct(c[r].clone);f[r].$destroy();(l[r]=t.leave(a)).done(d(l,r))}c.length=0,f.length=0,(u=s.cases["!"+n]||s.cases["?"])&&o(u,function(n){n.transclude(function(r,i){f.push(i);var o=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen");var s={clone:r};c.push(s),t.enter(r,o.parent(),o)})})})}}}],os=Rn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){o(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(t,e,n){return n[e-1]!==t}),function(t){r.cases["!"+t]=r.cases["!"+t]||[],r.cases["!"+t].push({transclude:i,element:e})})}}),ss=Rn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),as=r("ngTransclude"),us=["$compile",function(t){return{restrict:"EAC",terminal:!0,compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,r,i,o){function s(){n(t,function(t){e.append(t)})}if(!o)throw as("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Z(e));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var a=r.ngTransclude||r.ngTranscludeSlot;o(function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];if(r.nodeType!==Cr||r.nodeValue.trim())return!0}}(t)?e.append(t):(s(),n.$destroy())},null,a),a&&!o.isSlotFilled(a)&&s()}}}}],cs=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var r=n.id,i=e[0].text;t.put(r,i)}}}}],ls={$setViewValue:v,$render:v},fs=["$element","$scope",function(e,n){function r(){a||(a=!0,n.$$postDigest(function(){a=!1,o.ngModelCtrl.$render()}))}function i(t){u||(u=!0,n.$$postDigest(function(){n.$$destroyed||(u=!1,o.ngModelCtrl.$setViewValue(o.readValue()),t&&o.ngModelCtrl.$render())}))}var o=this,s=new Xr;o.selectValueMap={},o.ngModelCtrl=ls,o.multiple=!1,o.unknownOption=ir(t.document.createElement("option")),o.hasEmptyOption=!1,o.emptyOption=void 0,o.renderUnknownOption=function(t){var n=o.generateUnknownOptionValue(t);o.unknownOption.val(n),e.prepend(o.unknownOption),Xn(o.unknownOption,!0),e.val(n)},o.updateUnknownOption=function(t){var n=o.generateUnknownOptionValue(t);o.unknownOption.val(n),Xn(o.unknownOption,!0),e.val(n)},o.generateUnknownOptionValue=function(t){return"? "+Vt(t)+" ?"},o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.selectEmptyOption=function(){o.emptyOption&&(e.val(""),Xn(o.emptyOption,!0))},o.unselectEmptyOption=function(){o.hasEmptyOption&&Xn(o.emptyOption,!1)},n.$on("$destroy",function(){o.renderUnknownOption=v}),o.readValue=function(){var t=e.val(),n=t in o.selectValueMap?o.selectValueMap[t]:t;return o.hasOption(n)?n:null},o.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&Xn(ir(n),!1),o.hasOption(t)){o.removeUnknownOption();var r=Vt(t);e.val(r in o.selectValueMap?r:t);var i=e[0].options[e[0].selectedIndex];Xn(ir(i),!0)}else o.selectUnknownOrEmptyOption(t)},o.addOption=function(t,e){if(e[0].nodeType!==Ar){at(t,'"option value"'),""===t&&(o.hasEmptyOption=!0,o.emptyOption=e);var n=s.get(t)||0;s.set(t,n+1),r()}},o.removeOption=function(t){var e=s.get(t);e&&(1===e?(s.delete(t),""===t&&(o.hasEmptyOption=!1,o.emptyOption=void 0)):s.set(t,e-1))},o.hasOption=function(t){return!!s.get(t)},o.$hasEmptyOption=function(){return o.hasEmptyOption},o.$isUnknownOptionSelected=function(){return e[0].options[0]===o.unknownOption[0]},o.$isEmptyOptionSelected=function(){return o.hasEmptyOption&&e[0].options[e[0].selectedIndex]===o.emptyOption[0]},o.selectUnknownOrEmptyOption=function(t){null==t&&o.emptyOption?(o.removeUnknownOption(),o.selectEmptyOption()):o.unknownOption.parent().length?o.updateUnknownOption(t):o.renderUnknownOption(t)};var a=!1,u=!1;o.registerOption=function(t,e,n,s,a){if(n.$attr.ngValue){var u,c=NaN;n.$observe("value",function(t){var n,r=e.prop("selected");w(c)&&(o.removeOption(u),delete o.selectValueMap[c],n=!0),c=Vt(t),u=t,o.selectValueMap[c]=t,o.addOption(t,e),e.attr("value",c),n&&r&&i()})}else s?n.$observe("value",function(t){o.readValue();var n,r=e.prop("selected");w(u)&&(o.removeOption(u),n=!0),u=t,o.addOption(t,e),n&&r&&i()}):a?t.$watch(a,function(t,r){n.$set("value",t);var s=e.prop("selected");r!==t&&o.removeOption(r),o.addOption(t,e),r&&s&&i()}):o.addOption(n.value,e);n.$observe("disabled",function(t){("true"===t||t&&e.prop("selected"))&&(o.multiple?i(!0):(o.ngModelCtrl.$setViewValue(null),o.ngModelCtrl.$render()))}),e.on("$destroy",function(){var t=o.readValue(),e=n.value;o.removeOption(e),r(),(o.multiple&&t&&-1!==t.indexOf(e)||t===e)&&i(!0)})}}],ds=function(){return{restrict:"E",require:["select","?ngModel"],controller:fs,priority:1,link:{pre:function(t,e,n,r){var i=r[0],s=r[1];if(s){if(i.ngModelCtrl=s,e.on("change",function(){i.removeUnknownOption(),t.$apply(function(){s.$setViewValue(i.readValue())})}),n.multiple){i.multiple=!0,i.readValue=function(){var t=[];return o(e.find("option"),function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in i.selectValueMap?i.selectValueMap[n]:n)}}),t},i.writeValue=function(t){o(e.find("option"),function(e){var n=!!t&&(L(t,e.value)||L(t,i.selectValueMap[e.value]));n!==e.selected&&Xn(ir(e),n)})};var a,u=NaN;t.$watch(function(){u!==s.$viewValue||q(a,s.$viewValue)||(a=dt(s.$viewValue),s.$render()),u=s.$viewValue}),s.$isEmpty=function(t){return!t||0===t.length}}}else i.registerOption=v},post:function(t,e,n,r){var i=r[1];if(i){var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}}}},hs=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var r,i;return w(n.ngValue)||(w(n.value)?r=t(n.value,!0):(i=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o=e.parent(),s=o.data("$selectController")||o.parent().data("$selectController");s&&s.registerOption(t,e,n,r,i)}}}}],ps=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},vs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var o,s=n.ngPattern||n.pattern;n.$observe("pattern",function(t){if(_(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,Z(e));o=t||void 0,i.$validate()}),i.$validators.pattern=function(t,e){return i.$isEmpty(e)||b(o)||o.test(e)}}}}},gs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",function(t){var e=h(t);i=vr(e)?-1:e,r.$validate()}),r.$validators.maxlength=function(t,e){return i<0||r.$isEmpty(e)||e.length<=i}}}}},ms=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",function(t){i=h(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load angular more than once."):(!function(){var e;if(!Tr){var n=xr();(or=b(n)?t.jQuery:n?t[n]:void 0)&&or.fn.on?(ir=or,f(or.fn,{scope:zr.scope,isolateScope:zr.isolateScope,controller:zr.controller,injector:zr.injector,inheritedData:zr.inheritedData}),e=or.cleanData,or.cleanData=function(t){for(var n,r,i=0;null!=(r=t[i]);i++)(n=or._data(r,"events"))&&n.$destroy&&or(r).triggerHandler("$destroy");e(t)}):ir=bt,hr.element=ir,Tr=!0}}(),function(n){f(n,{errorHandlingConfig:e,bootstrap:et,copy:P,extend:f,merge:d,equals:q,element:ir,forEach:o,injector:Bt,noop:v,bind:B,toJson:H,fromJson:z,identity:g,isUndefined:b,isDefined:w,isString:_,isFunction:k,isObject:x,isNumber:S,isElement:O,isArray:gr,version:Ir,isDate:$,lowercase:er,uppercase:nr,callbacks:{$$counter:0},getTestability:rt,reloadWithDebugInfo:nt,$$minErr:r,$$csp:wr,$$encodeUriSegment:Q,$$encodeUriQuery:J,$$stringify:ft}),(sr=function(t){function e(t,e,n){return t[e]||(t[e]=n())}var n=r("$injector"),i=r("ng"),o=e(t,"angular",Object);return o.$$minErr=o.$$minErr||r,e(o,"module",function(){var t={};return function(r,o,s){var a={};return function(t,e){if("hasOwnProperty"===t)throw i("badname","hasOwnProperty is not a valid {0} name",e)}(r,"module"),o&&t.hasOwnProperty(r)&&(t[r]=null),e(t,r,function(){function t(t,e,n,r){return r||(r=u),function(){return r[n||"push"]([t,e,arguments]),d}}function e(t,e,n){return n||(n=u),function(i,o){return o&&k(o)&&(o.$$moduleName=r),n.push([t,e,arguments]),d}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var u=[],c=[],l=[],f=t("$injector","invoke","push",c),d={_invokeQueue:u,_configBlocks:c,_runBlocks:l,info:function(t){if(w(t)){if(!x(t))throw i("aobj","Argument '{0}' must be an object","value");return a=t,this}return a},requires:o,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:e("$provide","decorator",c),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),component:e("$compileProvider","component"),config:f,run:function(t){return l.push(t),this}};return s&&f(s),d})}})}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Ke}),t.provider("$compile",Yt).directive({a:to,input:wo,textarea:wo,form:oo,script:cs,select:ds,option:hs,ngBind:_o,ngBindHtml:$o,ngBindTemplate:So,ngClass:ko,ngClassEven:Ao,ngClassOdd:Co,ngCloak:Ro,ngController:Mo,ngForm:so,ngHide:ns,ngIf:No,ngInclude:Lo,ngInit:Po,ngNonBindable:Yo,ngPluralize:Jo,ngRepeat:ts,ngShow:es,ngStyle:rs,ngSwitch:is,ngSwitchWhen:os,ngSwitchDefault:ss,ngOptions:Qo,ngTransclude:us,ngModel:Wo,ngList:Vo,ngChange:To,pattern:vs,ngPattern:vs,required:ps,ngRequired:ps,minlength:ms,ngMinlength:ms,maxlength:gs,ngMaxlength:gs,ngValue:Eo,ngModelOptions:Zo}).directive({ngInclude:Do}).directive(eo).directive(Io),t.provider({$anchorScroll:jt,$animate:ui,$animateCss:fi,$$animateJs:si,$$animateQueue:ai,$$AnimateRunner:li,$$animateAsyncRun:ci,$browser:Wt,$cacheFactory:Gt,$controller:te,$document:ee,$$isDocumentHidden:ne,$exceptionHandler:re,$filter:dn,$$forceReflow:yi,$interpolate:ve,$interval:ge,$http:de,$httpParamSerializer:oe,$httpParamSerializerJQLike:se,$httpBackend:pe,$xhrFactory:he,$jsonpCallbacks:Ti,$location:Ae,$log:Re,$parse:Be,$rootScope:Xe,$q:je,$$q:He,$sce:en,$sceDelegate:tn,$sniffer:nn,$templateCache:Zt,$templateRequest:rn,$$testability:on,$timeout:sn,$window:cn,$$rAF:Ye,$$jqLite:Pt,$$Map:Kr,$$cookieReader:fn})}]).info({angularVersion:"1.6.7"})}(hr),hr.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,r){var i=0|t,o=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var r=Math.pow(10,n);return{v:n,f:(t*r|0)%r}}(t,r);return 1==i&&0==o.v?e:n}})}]),ir(function(){tt(t.document,et)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},{}],86:[function(t,e,n){t("./angular"),e.exports=angular},{"./angular":85}],87:[function(t,e,n){!function(t){"use strict";function e(){var e={size:200,value:void 0,min:0,max:100,cap:"butt",thick:6,type:"full",foregroundColor:"rgba(0, 150, 136, 1)",backgroundColor:"rgba(0, 0, 0, 0.1)",duration:1500,fractionSize:null,labelOnly:!1};this.setOptions=function(n){if(!n||!t.isObject(n))throw new Error("Invalid option type specified in the ngGaugeProvider");e=t.merge(e,n)};var n={getOptions:function(){return t.extend({},e)}};this.$get=function(){return n}}function n(e){var n=function(t,e){this.element=t.find("canvas")[0],this.text=t.find("span"),this.legend=t.find("b"),this.unit=t.find("u"),this.context=this.element.getContext("2d"),this.options=e,this.init()};return n.prototype={init:function(){this.setupStyles(),this.create(null,null)},setupStyles:function(){this.context.canvas.width=this.options.size,this.context.canvas.height=this.options.size,this.context.lineCap=this.options.cap,this.context.lineWidth=this.options.thick;var t=.22*this.options.size,e=this.options.size;this.text.css({display:"inline-block",fontWeight:"normal",width:"100%",position:"absolute",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",fontSize:t+"px",lineHeight:e+"px"}),this.unit.css({textDecoration:"none",fontSize:"0.6em",fontWeight:200,opacity:.8});var n=this.options.labelOnly?.8*t:this.options.size/13,r=this.options.labelOnly?e:5*n+parseInt(this.options.size);this.legend.css({display:"inline-block",width:"100%",position:"absolute",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"normal",fontSize:n+"px",lineHeight:r+"px"})},create:function(t,e){function n(t){var s=(t=t||(new Date).getTime())-i,a=Math.min(s/u,1),c=d+(e?e*h:0)+p*a;o.drawShell(d,c,v,g),s<u?r=window.requestAnimationFrame(function(t){n(t)}):cancelAnimationFrame(r)}var r,i,o=this,s=this.getType(),a=this.getBounds(s),u=this.getDuration(),c=this.getMin(),l=this.getMax(),f=this.clamp(this.getValue(),c,l),d=a.head,h=(a.tail-a.head)/(l-c),p=h*(f-c),v=a.tail,g=this.getForegroundColorByRange(f);t&&e&&(p=h*t-h*e),requestAnimationFrame(function(t){i=t||(new Date).getTime(),n(t)})},getBounds:function(t){var e,n;return"semi"==t?(e=Math.PI,n=2*Math.PI):"full"==t?(e=1.5*Math.PI,n=3.5*Math.PI):"arch"===t&&(e=.8*Math.PI,n=2.2*Math.PI),{head:e,tail:n}},drawShell:function(t,e,n,r){var i=this.context,o=this.getCenter(),s=this.getRadius(),a=r,u=this.getBackgroundColor();this.clear(),e=Math.max(e,t),e=Math.min(e,n),i.beginPath(),i.strokeStyle=u,i.arc(o.x,o.y,s,e,n,!1),i.stroke(),i.beginPath(),i.strokeStyle=a,i.arc(o.x,o.y,s,t,e,!1),i.stroke()},clear:function(){this.context.clearRect(0,0,this.getWidth(),this.getHeight())},update:function(t,e){this.create(t,e)},destroy:function(){this.clear()},getRadius:function(){return this.getCenter().x-this.getThickness()},getCenter:function(){return{x:this.getWidth()/2,y:this.getHeight()/2}},getValue:function(){return this.options.value},getMin:function(){return this.options.min},getMax:function(){return this.options.max},getWidth:function(){return this.context.canvas.width},getHeight:function(){return this.context.canvas.height},getThickness:function(){return this.options.thick},getBackgroundColor:function(){return this.options.backgroundColor},getForegroundColor:function(){return this.options.foregroundColor},getForegroundColorByRange:function(t){var e=Object.keys(this.options.thresholds).filter(function(e){return function(t){return void 0!=t&&!isNaN(parseFloat(t))&&!isNaN(Number(t))}(e)&&Number(e)<=t}).sort(function(t,e){return Number(t)>Number(e)}).reverse()[0];return void 0!==e?this.options.thresholds[e].color||this.getForegroundColor():this.getForegroundColor()},getLineCap:function(){return this.options.cap},getType:function(){return this.options.type},getDuration:function(){return this.options.duration},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))}},{restrict:"E",replace:!0,template:'<div style="display:inline-block;text-align:center;position:relative;"><span ng-show="{{!labelOnly}}"><u>{{prepend}}</u><span ng-if="fractionSize === null">{{value | number}}</span><span ng-if="fractionSize !== null">{{value | number: fractionSize}}</span><u>{{append}}</u></span><b>{{ label }}</b><canvas></canvas></div>',scope:{append:"@?",backgroundColor:"@?",cap:"@?",foregroundColor:"@?",label:"@?",labelOnly:"@?",prepend:"@?",size:"@?",thick:"@?",type:"@?",duration:"@?",value:"=?",min:"=?",max:"=?",thresholds:"=?",fractionSize:"=?"},link:function(r,i){function o(e,n){u&&t.isDefined(e)&&!t.equals(e,n)&&u.update(e,n)}function s(e,n){t.isDefined(e)&&!t.equals(e,n)&&(u.destroy(),u.init())}var a=e.getOptions();r.min=t.isDefined(r.min)?r.min:a.min,r.max=t.isDefined(r.max)?r.max:a.max,r.value=t.isDefined(r.value)?r.value:a.value,r.size=t.isDefined(r.size)?r.size:a.size,r.cap=t.isDefined(r.cap)?r.cap:a.cap,r.thick=t.isDefined(r.thick)?r.thick:a.thick,r.type=t.isDefined(r.type)?r.type:a.type,r.duration=t.isDefined(r.duration)?r.duration:a.duration,r.labelOnly=t.isDefined(r.labelOnly)?r.labelOnly:a.labelOnly,r.foregroundColor=t.isDefined(r.foregroundColor)?r.foregroundColor:a.foregroundColor,r.backgroundColor=t.isDefined(r.backgroundColor)?r.backgroundColor:a.backgroundColor,r.thresholds=t.isDefined(r.thresholds)?r.thresholds:{},r.fractionSize=t.isDefined(r.fractionSize)?r.fractionSize:a.fractionSize;var u=new n(i,r);r.$watch("value",o,!1),r.$watch("min",o,!1),r.$watch("max",o,!1),r.$watch("cap",s,!1),r.$watch("thick",s,!1),r.$watch("type",s,!1),r.$watch("size",s,!1),r.$watch("duration",s,!1),r.$watch("foregroundColor",s,!1),r.$watch("backgroundColor",s,!1),r.$watch("thresholds",s,!1),r.$watch("fractionSize",o,!1),r.$on("$destroy",function(){}),r.$on("$resize",function(){})}}}t.module("angularjs-gauge",[]).directive("ngGauge",n).provider("ngGauge",e),e.$inject=[],n.$inject=["ngGauge"]}(angular)},{}],88:[function(t,e,n){!function(n,r){"use strict";if("function"==typeof define&&define.amd)define(["angular"],r);else if("object"==typeof e&&e.exports){var i=angular||t("angular");i&&i.module||"undefined"==typeof angular||(i=angular),e.exports=r(i)}else r(n.angular)}(this,function(t){"use strict";var e=t.module("rzModule",[]).factory("RzSliderOptions",function(){var e={floor:0,ceil:null,step:1,precision:0,minRange:null,maxRange:null,pushRange:!1,minLimit:null,maxLimit:null,id:null,translate:null,getLegend:null,stepsArray:null,bindIndexForStepsArray:!1,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,showSelectionBarEnd:!1,showSelectionBarFromValue:null,showOuterSelectionBars:!1,hidePointerLabels:!1,hideLimitLabels:!1,autoHideLimitLabels:!0,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksArray:null,ticksTooltip:null,ticksValuesTooltip:null,vertical:!1,getSelectionBarColor:null,getTickColor:null,getPointerColor:null,keyboardSupport:!0,scale:1,enforceStep:!0,enforceRange:!1,noSwitching:!1,onlyBindHandles:!1,onStart:null,onChange:null,onEnd:null,rightToLeft:!1,reversedControls:!1,boundPointerLabels:!0,mergeRangeLabelsIfSame:!1,customTemplateScope:null,logScale:!1,customValueToPosition:null,customPositionToValue:null,selectionBarGradient:null,ariaLabel:null,ariaLabelledBy:null,ariaLabelHigh:null,ariaLabelledByHigh:null},n={},r={};return r.options=function(e){t.extend(n,e)},r.getOptions=function(r){return t.extend({},e,n,r)},r}).factory("rzThrottle",["$timeout",function(t){return function(e,n,r){var i,o,s,a=Date.now||function(){return(new Date).getTime()},u=null,c=0;r=r||{};var l=function(){c=a(),u=null,s=e.apply(i,o),i=o=null};return function(){var f=a(),d=n-(f-c);return i=this,o=arguments,d<=0?(t.cancel(u),u=null,c=f,s=e.apply(i,o),i=o=null):u||!1===r.trailing||(u=t(l,d)),s}}}]).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function(e,n,r,i,o,s){var a=function(t,e){this.scope=t,this.lowValue=0,this.highValue=0,this.sliderElem=e,this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.dragging={active:!1,value:0,difference:0,position:0,lowLimit:0,highLimit:0},this.positionProperty="left",this.dimensionProperty="width",this.handleHalfDim=0,this.maxPos=0,this.precision=0,this.step=1,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.intermediateTicks=!1,this.initHasRun=!1,this.firstKeyDown=!1,this.internalChange=!1,this.cmbLabelShown=!1,this.currentFocusElement=null,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()};return a.prototype={init:function(){var e,n,i=this,o=function(){i.calcViewDimensions()};this.applyOptions(),this.syncLowValue(),this.range&&this.syncHighValue(),this.initElemHandles(),this.manageElementsStyle(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.addAccessibility(),this.updateCeilLab(),this.updateFloorLab(),this.initHandles(),this.manageEventsBindings(),this.scope.$on("reCalcViewDimensions",o),t.element(r).on("resize",o),this.initHasRun=!0,e=s(function(){i.onLowHandleChange()},i.options.interval),n=s(function(){i.onHighHandleChange()},i.options.interval),this.scope.$on("rzSliderForceRender",function(){i.resetLabelsValue(),e(),i.range&&n(),i.resetSlider()}),this.scope.$watchCollection("rzSliderOptions()",function(t,e){t!==e&&(i.applyOptions(),i.syncLowValue(),i.range&&i.syncHighValue(),i.resetSlider())}),this.scope.$watch("rzSliderModel",function(t,n){i.internalChange||t!==n&&e()}),this.scope.$watch("rzSliderHigh",function(t,e){i.internalChange||t!==e&&(null!=t&&n(),(i.range&&null==t||!i.range&&null!=t)&&(i.applyOptions(),i.resetSlider()))}),this.scope.$on("$destroy",function(){i.unbindEvents(),t.element(r).off("resize",o),i.currentFocusElement=null})},findStepIndex:function(e){for(var n=0,r=0;r<this.options.stepsArray.length;r++){var i=this.options.stepsArray[r];if(i===e){n=r;break}if(t.isDate(i)){if(i.getTime()===e.getTime()){n=r;break}}else if(t.isObject(i)&&(t.isDate(i.value)&&i.value.getTime()===e.getTime()||i.value===e)){n=r;break}}return n},syncLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.lowValue=this.scope.rzSliderModel:this.lowValue=this.findStepIndex(this.scope.rzSliderModel):this.lowValue=this.scope.rzSliderModel},syncHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.highValue=this.scope.rzSliderHigh:this.highValue=this.findStepIndex(this.scope.rzSliderHigh):this.highValue=this.scope.rzSliderHigh},getStepValue:function(e){var n=this.options.stepsArray[e];return t.isDate(n)?n:t.isObject(n)?n.value:n},applyLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderModel=this.lowValue:this.scope.rzSliderModel=this.getStepValue(this.lowValue):this.scope.rzSliderModel=this.lowValue},applyHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderHigh=this.highValue:this.scope.rzSliderHigh=this.getStepValue(this.highValue):this.scope.rzSliderHigh=this.highValue},onLowHandleChange:function(){this.syncLowValue(),this.range&&this.syncHighValue(),this.setMinAndMax(),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCmbLabel()},onHighHandleChange:function(){this.syncLowValue(),this.syncHighValue(),this.setMinAndMax(),this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel(),this.updateAriaAttributes()},applyOptions:function(){var e;e=this.scope.rzSliderOptions?this.scope.rzSliderOptions():{},this.options=o.getOptions(e),this.options.step<=0&&(this.options.step=1),this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.options.draggableRange=this.range&&this.options.draggableRange,this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly,this.options.draggableRangeOnly&&(this.options.draggableRange=!0),this.options.showTicks=this.options.showTicks||this.options.showTicksValues||!!this.options.ticksArray,this.scope.showTicks=this.options.showTicks,(t.isNumber(this.options.showTicks)||this.options.ticksArray)&&(this.intermediateTicks=!0),this.options.showSelectionBar=this.options.showSelectionBar||this.options.showSelectionBarEnd||null!==this.options.showSelectionBarFromValue,this.options.stepsArray?this.parseStepsArray():(this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(t){return String(t)},this.getLegend=this.options.getLegend),this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height"),this.options.customTemplateScope&&(this.scope.custom=this.options.customTemplateScope)},parseStepsArray:function(){this.options.floor=0,this.options.ceil=this.options.stepsArray.length-1,this.options.step=1,this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(t){return this.options.bindIndexForStepsArray?this.getStepValue(t):t},this.getLegend=function(e){var n=this.options.stepsArray[e];return t.isObject(n)?n.legend:null}},resetSlider:function(){this.manageElementsStyle(),this.addAccessibility(),this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.unbindEvents(),this.manageEventsBindings(),this.setDisabledState(),this.calcViewDimensions(),this.refocusPointerIfNeeded()},refocusPointerIfNeeded:function(){this.currentFocusElement&&(this.onPointerFocus(this.currentFocusElement.pointer,this.currentFocusElement.ref),this.focusElement(this.currentFocusElement.pointer))},initElemHandles:function(){t.forEach(this.sliderElem.children(),function(e,n){var r=t.element(e);switch(n){case 0:this.leftOutSelBar=r;break;case 1:this.rightOutSelBar=r;break;case 2:this.fullBar=r;break;case 3:this.selBar=r;break;case 4:this.minH=r;break;case 5:this.maxH=r;break;case 6:this.flrLab=r;break;case 7:this.ceilLab=r;break;case 8:this.minLab=r;break;case 9:this.maxLab=r;break;case 10:this.cmbLab=r;break;case 11:this.ticks=r}},this),this.selBar.rzsp=0,this.minH.rzsp=0,this.maxH.rzsp=0,this.flrLab.rzsp=0,this.ceilLab.rzsp=0,this.minLab.rzsp=0,this.maxLab.rzsp=0,this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",""):this.maxH.css("display","none"),this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels);var t=this.options.showTicksValues&&!this.intermediateTicks;this.alwaysHide(this.minLab,t||this.options.hidePointerLabels),this.alwaysHide(this.maxLab,t||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.cmbLab,t||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar),this.alwaysHide(this.leftOutSelBar,!this.range||!this.options.showOuterSelectionBars),this.alwaysHide(this.rightOutSelBar,!this.range||!this.options.showOuterSelectionBars),this.range&&this.options.showOuterSelectionBars&&this.fullBar.addClass("rz-transparent"),this.options.vertical&&this.sliderElem.addClass("rz-vertical"),this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable"),this.intermediateTicks&&this.options.showTicksValues&&this.ticks.addClass("rz-ticks-values-under")},alwaysHide:function(t,e){t.rzAlwaysHide=e,e?this.hideEl(t):this.showEl(t)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToPosition(this.lowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(t,e,n,r){r=void 0===r||r;var i="",o=!1,s=e.hasClass("no-label-injection");r?(this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(t=this.getStepValue(t)),i=String(this.customTrFn(t,this.options.id,n))):i=String(t),(void 0===e.rzsv||e.rzsv.length!==i.length||e.rzsv.length>0&&0===e.rzsd)&&(o=!0,e.rzsv=i),s||e.html(i),this.scope[n+"Label"]=i,o&&this.getDimension(e)},setMinAndMax:function(){if(this.step=+this.options.step,this.precision=+this.options.precision,this.minValue=this.options.floor,this.options.logScale&&0===this.minValue)throw Error("Can't use floor=0 with logarithmic scale");this.options.enforceStep&&(this.lowValue=this.roundStep(this.lowValue),this.range&&(this.highValue=this.roundStep(this.highValue))),null!=this.options.ceil?this.maxValue=this.options.ceil:this.maxValue=this.options.ceil=this.range?this.highValue:this.lowValue,this.options.enforceRange&&(this.lowValue=this.sanitizeValue(this.lowValue),this.range&&(this.highValue=this.sanitizeValue(this.highValue))),this.applyLowValue(),this.range&&this.applyHighValue(),this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider"),this.updateAriaAttributes(),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.minH.attr("tabindex",""):this.minH.attr("tabindex","0"),this.options.vertical&&this.minH.attr("aria-orientation","vertical"),this.options.ariaLabel?this.minH.attr("aria-label",this.options.ariaLabel):this.options.ariaLabelledBy&&this.minH.attr("aria-labelledby",this.options.ariaLabelledBy),this.range&&(this.maxH.attr("role","slider"),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.maxH.attr("tabindex",""):this.maxH.attr("tabindex","0"),this.options.vertical&&this.maxH.attr("aria-orientation","vertical"),this.options.ariaLabelHigh?this.maxH.attr("aria-label",this.options.ariaLabelHigh):this.options.ariaLabelledByHigh&&this.maxH.attr("aria-labelledby",this.options.ariaLabelledByHigh))},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel,this.options.id,"model"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue}),this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh,this.options.id,"high"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var t=this.getDimension(this.minH);if(this.handleHalfDim=t/2,this.barDimension=this.getDimension(this.fullBar),this.maxPos=this.barDimension-t,this.getDimension(this.sliderElem),this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty],this.initHasRun){this.updateFloorLab(),this.updateCeilLab(),this.initHandles();var n=this;e(function(){n.updateTicksScale()})}},updateTicksScale:function(){if(this.options.showTicks){var t=this.options.ticksArray||this.getTicksArray(),e=this.options.vertical?"translateY":"translateX",n=this;this.options.rightToLeft&&t.reverse(),this.scope.ticks=t.map(function(t){var r=n.valueToPosition(t);n.options.vertical&&(r=n.maxPos-r);var i=e+"("+Math.round(r)+"px)",o={selected:n.isTickSelected(t),style:{"-webkit-transform":i,"-moz-transform":i,"-o-transform":i,"-ms-transform":i,transform:i}};if(o.selected&&n.options.getSelectionBarColor&&(o.style["background-color"]=n.getSelectionBarColor()),!o.selected&&n.options.getTickColor&&(o.style["background-color"]=n.getTickColor(t)),n.options.ticksTooltip&&(o.tooltip=n.options.ticksTooltip(t),o.tooltipPlacement=n.options.vertical?"right":"top"),!0!==n.options.showTicksValues&&t%n.options.showTicksValues!=0||(o.value=n.getDisplayValue(t,"tick-value"),n.options.ticksValuesTooltip&&(o.valueTooltip=n.options.ticksValuesTooltip(t),o.valueTooltipPlacement=n.options.vertical?"right":"top")),n.getLegend){var s=n.getLegend(t,n.options.id);s&&(o.legend=s)}return o})}},getTicksArray:function(){var t=this.step,e=[];this.intermediateTicks&&(t=this.options.showTicks);for(var n=this.minValue;n<=this.maxValue;n+=t)e.push(n);return e},isTickSelected:function(t){if(!this.range)if(null!==this.options.showSelectionBarFromValue){var e=this.options.showSelectionBarFromValue;if(this.lowValue>e&&t>=e&&t<=this.lowValue)return!0;if(this.lowValue<e&&t<=e&&t>=this.lowValue)return!0}else if(this.options.showSelectionBarEnd){if(t>=this.lowValue)return!0}else if(this.options.showSelectionBar&&t<=this.lowValue)return!0;return!!(this.range&&t>=this.lowValue&&t<=this.highValue)},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab,"floor"),this.getDimension(this.flrLab);var t=this.options.rightToLeft?this.barDimension-this.flrLab.rzsd:0;this.setPosition(this.flrLab,t)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab,"ceil"),this.getDimension(this.ceilLab);var t=this.options.rightToLeft?0:this.barDimension-this.ceilLab.rzsd;this.setPosition(this.ceilLab,t)},updateHandles:function(t,e){"lowValue"===t?this.updateLowHandle(e):this.updateHighHandle(e),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()},getHandleLabelPos:function(t,e){var n=this[t].rzsd,r=e-n/2+this.handleHalfDim,i=this.barDimension-n;return this.options.boundPointerLabels?this.options.rightToLeft&&"minLab"===t||!this.options.rightToLeft&&"maxLab"===t?Math.min(r,i):Math.min(Math.max(r,0),i):r},updateLowHandle:function(t){if(this.setPosition(this.minH,t),this.translateFn(this.lowValue,this.minLab,"model"),this.setPosition(this.minLab,this.getHandleLabelPos("minLab",t)),this.options.getPointerColor){var e=this.getPointerColor("min");this.scope.minPointerStyle={backgroundColor:e}}this.options.autoHideLimitLabels&&this.shFloorCeil()},updateHighHandle:function(t){if(this.setPosition(this.maxH,t),this.translateFn(this.highValue,this.maxLab,"high"),this.setPosition(this.maxLab,this.getHandleLabelPos("maxLab",t)),this.options.getPointerColor){var e=this.getPointerColor("max");this.scope.maxPointerStyle={backgroundColor:e}}this.options.autoHideLimitLabels&&this.shFloorCeil()},shFloorCeil:function(){if(!this.options.hidePointerLabels){var t=!1,e=!1,n=this.isLabelBelowFloorLab(this.minLab),r=this.isLabelAboveCeilLab(this.minLab),i=this.isLabelAboveCeilLab(this.maxLab),o=this.isLabelBelowFloorLab(this.cmbLab),s=this.isLabelAboveCeilLab(this.cmbLab);if(n?(t=!0,this.hideEl(this.flrLab)):(t=!1,this.showEl(this.flrLab)),r?(e=!0,this.hideEl(this.ceilLab)):(e=!1,this.showEl(this.ceilLab)),this.range){var a=this.cmbLabelShown?s:i,u=this.cmbLabelShown?o:n;a?this.hideEl(this.ceilLab):e||this.showEl(this.ceilLab),u?this.hideEl(this.flrLab):t||this.showEl(this.flrLab)}}},isLabelBelowFloorLab:function(t){var e=this.options.rightToLeft,n=t.rzsp,r=t.rzsd,i=this.flrLab.rzsp,o=this.flrLab.rzsd;return e?n+r>=i-2:n<=i+o+2},isLabelAboveCeilLab:function(t){var e=this.options.rightToLeft,n=t.rzsp,r=t.rzsd,i=this.ceilLab.rzsp,o=this.ceilLab.rzsd;return e?n<=i+o+2:n+r>=i-2},updateSelectionBar:function(){var t=0,e=0,n=this.options.rightToLeft?!this.options.showSelectionBarEnd:this.options.showSelectionBarEnd,r=this.options.rightToLeft?this.maxH.rzsp+this.handleHalfDim:this.minH.rzsp+this.handleHalfDim;if(this.range)e=Math.abs(this.maxH.rzsp-this.minH.rzsp),t=r;else if(null!==this.options.showSelectionBarFromValue){var i=this.options.showSelectionBarFromValue,o=this.valueToPosition(i);(this.options.rightToLeft?this.lowValue<=i:this.lowValue>i)?(e=this.minH.rzsp-o,t=o+this.handleHalfDim):(e=o-this.minH.rzsp,t=this.minH.rzsp+this.handleHalfDim)}else n?(e=Math.abs(this.maxPos-this.minH.rzsp)+this.handleHalfDim,t=this.minH.rzsp+this.handleHalfDim):(e=this.minH.rzsp+this.handleHalfDim,t=0);if(this.setDimension(this.selBar,e),this.setPosition(this.selBar,t),this.range&&this.options.showOuterSelectionBars&&(this.options.rightToLeft?(this.setDimension(this.rightOutSelBar,t),this.setPosition(this.rightOutSelBar,0),this.setDimension(this.leftOutSelBar,this.getDimension(this.fullBar)-(t+e)),this.setPosition(this.leftOutSelBar,t+e)):(this.setDimension(this.leftOutSelBar,t),this.setPosition(this.leftOutSelBar,0),this.setDimension(this.rightOutSelBar,this.getDimension(this.fullBar)-(t+e)),this.setPosition(this.rightOutSelBar,t+e))),this.options.getSelectionBarColor){var s=this.getSelectionBarColor();this.scope.barStyle={backgroundColor:s}}else if(this.options.selectionBarGradient){var a=null!==this.options.showSelectionBarFromValue?this.valueToPosition(this.options.showSelectionBarFromValue):0,u=a-t>0^n,c=this.options.vertical?u?"bottom":"top":u?"left":"right";this.scope.barStyle={backgroundImage:"linear-gradient(to "+c+", "+this.options.selectionBarGradient.from+" 0%,"+this.options.selectionBarGradient.to+" 100%)"},this.options.vertical?(this.scope.barStyle.backgroundPosition="center "+(a+e+t+(u?-this.handleHalfDim:0))+"px",this.scope.barStyle.backgroundSize="100% "+(this.barDimension-this.handleHalfDim)+"px"):(this.scope.barStyle.backgroundPosition=a-t+(u?this.handleHalfDim:0)+"px center",this.scope.barStyle.backgroundSize=this.barDimension-this.handleHalfDim+"px 100%")}},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},getPointerColor:function(t){return"max"===t?this.options.getPointerColor(this.scope.rzSliderHigh,t):this.options.getPointerColor(this.scope.rzSliderModel,t)},getTickColor:function(t){return this.options.getTickColor(t)},updateCmbLabel:function(){if(this.options.rightToLeft?this.minLab.rzsp-this.minLab.rzsd-10<=this.maxLab.rzsp:this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp){var t=this.getDisplayValue(this.lowValue,"model"),e=this.getDisplayValue(this.highValue,"high"),n="";n=this.options.mergeRangeLabelsIfSame&&t===e?t:this.options.rightToLeft?e+" - "+t:t+" - "+e,this.translateFn(n,this.cmbLab,"cmb",!1);var r=this.options.boundPointerLabels?Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd):this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2;this.setPosition(this.cmbLab,r),this.cmbLabelShown=!0,this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)}else this.cmbLabelShown=!1,this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab);this.options.autoHideLimitLabels&&this.shFloorCeil()},getDisplayValue:function(t,e){return this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(t=this.getStepValue(t)),this.customTrFn(t,this.options.id,e)},roundStep:function(t,e){var n=e||this.step,r=parseFloat((t-this.minValue)/n).toPrecision(12);r=Math.round(+r)*n;return+(this.minValue+r).toFixed(this.precision)},hideEl:function(t){return t.css({visibility:"hidden"})},showEl:function(t){return t.rzAlwaysHide?t:t.css({visibility:"visible"})},setPosition:function(t,e){t.rzsp=e;var n={};return n[this.positionProperty]=Math.round(e)+"px",t.css(n),e},getDimension:function(t){var e=t[0].getBoundingClientRect();return this.options.vertical?t.rzsd=(e.bottom-e.top)*this.options.scale:t.rzsd=(e.right-e.left)*this.options.scale,t.rzsd},setDimension:function(t,e){t.rzsd=e;var n={};return n[this.dimensionProperty]=Math.round(e)+"px",t.css(n),e},sanitizeValue:function(t){return Math.min(Math.max(t,this.minValue),this.maxValue)},valueToPosition:function(t){var e=this.linearValueToPosition;this.options.customValueToPosition?e=this.options.customValueToPosition:this.options.logScale&&(e=this.logValueToPosition);var n=e(t=this.sanitizeValue(t),this.minValue,this.maxValue)||0;return this.options.rightToLeft&&(n=1-n),n*this.maxPos},linearValueToPosition:function(t,e,n){return(t-e)/(n-e)},logValueToPosition:function(t,e,n){return((t=Math.log(t))-(e=Math.log(e)))/((n=Math.log(n))-e)},positionToValue:function(t){var e=t/this.maxPos;this.options.rightToLeft&&(e=1-e);var n=this.linearPositionToValue;return this.options.customPositionToValue?n=this.options.customPositionToValue:this.options.logScale&&(n=this.logPositionToValue),n(e,this.minValue,this.maxValue)||0},linearPositionToValue:function(t,e,n){return t*(n-e)+e},logPositionToValue:function(t,e,n){e=Math.log(e);var r=t*((n=Math.log(n))-e)+e;return Math.exp(r)},getEventAttr:function(t,e){return void 0===t.originalEvent?t[e]:t.originalEvent[e]},getEventXY:function(t,e){var n=this.options.vertical?"clientY":"clientX";if(void 0!==t[n])return t[n];var r=this.getEventAttr(t,"touches");if(void 0!==e)for(var i=0;i<r.length;i++)if(r[i].identifier===e)return r[i][n];return r[0][n]},getEventPosition:function(t,e){var n=this.sliderElem.rzsp;return(this.options.vertical?-this.getEventXY(t,e)+n:this.getEventXY(t,e)-n)*this.options.scale-this.handleHalfDim},getEventNames:function(t){var e={moveEvent:"",endEvent:""};return this.getEventAttr(t,"touches")?(e.moveEvent="touchmove",e.endEvent="touchend"):(e.moveEvent="mousemove",e.endEvent="mouseup"),e},getNearestHandle:function(t){if(!this.range)return this.minH;var e=this.getEventPosition(t),n=Math.abs(e-this.minH.rzsp),r=Math.abs(e-this.maxH.rzsp);return n<r?this.minH:n>r?this.maxH:this.options.rightToLeft?e>this.minH.rzsp?this.minH:this.maxH:e<this.minH.rzsp?this.minH:this.maxH},focusElement:function(t){t[0].focus()},bindEvents:function(){var e,n,r;this.options.draggableRange?(e="rzSliderDrag",n=this.onDragStart,r=this.onDragMove):(e="lowValue",n=this.onStart,r=this.onMove),this.options.onlyBindHandles||(this.selBar.on("mousedown",t.bind(this,n,null,e)),this.selBar.on("mousedown",t.bind(this,r,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("mousedown",t.bind(this,n,null,e)),this.maxH.on("mousedown",t.bind(this,n,null,e))):(this.minH.on("mousedown",t.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("mousedown",t.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("mousedown",t.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",t.bind(this,this.onMove,this.fullBar)),this.ticks.on("mousedown",t.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",t.bind(this,this.onTickClick,this.ticks)))),this.options.onlyBindHandles||(this.selBar.on("touchstart",t.bind(this,n,null,e)),this.selBar.on("touchstart",t.bind(this,r,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("touchstart",t.bind(this,n,null,e)),this.maxH.on("touchstart",t.bind(this,n,null,e))):(this.minH.on("touchstart",t.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("touchstart",t.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("touchstart",t.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",t.bind(this,this.onMove,this.fullBar)),this.ticks.on("touchstart",t.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",t.bind(this,this.onTickClick,this.ticks)))),this.options.keyboardSupport&&(this.minH.on("focus",t.bind(this,this.onPointerFocus,this.minH,"lowValue")),this.range&&this.maxH.on("focus",t.bind(this,this.onPointerFocus,this.maxH,"highValue")))},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(e,r,i){var o,s,a=this.getEventNames(i);i.stopPropagation(),i.preventDefault(),this.calcViewDimensions(),e?this.tracking=r:(e=this.getNearestHandle(i),this.tracking=e===this.minH?"lowValue":"highValue"),e.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(e),o=t.bind(this,this.dragging.active?this.onDragMove:this.onMove,e),s=t.bind(this,this.onEnd,o),n.on(a.moveEvent,o),n.on(a.endEvent,s),this.endHandlerToBeRemovedOnEnd=s,this.callOnStart();var u=this.getEventAttr(i,"changedTouches");u&&(this.touchId||(this.isDragging=!0,this.touchId=u[0].identifier))},onMove:function(e,n,r){var i,o=this.getEventAttr(n,"changedTouches");if(o)for(var s=0;s<o.length;s++)if(o[s].identifier===this.touchId){i=o[s];break}if(!o||i){var a,u=this.getEventPosition(n,i?i.identifier:void 0),c=this.options.rightToLeft?this.minValue:this.maxValue,l=this.options.rightToLeft?this.maxValue:this.minValue;u<=0?a=l:u>=this.maxPos?a=c:(a=this.positionToValue(u),a=r&&t.isNumber(this.options.showTicks)?this.roundStep(a,this.options.showTicks):this.roundStep(a)),this.positionTrackingHandle(a)}},onEnd:function(t,e){var r=this.getEventAttr(e,"changedTouches");if(!r||r[0].identifier===this.touchId){this.isDragging=!1,this.touchId=null,this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1;var i=this.getEventNames(e);n.off(i.moveEvent,t),n.off(i.endEvent,this.endHandlerToBeRemovedOnEnd),this.endHandlerToBeRemovedOnEnd=null,this.callOnEnd()}},onTickClick:function(t,e){this.onMove(t,e,!0)},onPointerFocus:function(e,n){this.tracking=n,e.one("blur",t.bind(this,this.onPointerBlur,e)),e.on("keydown",t.bind(this,this.onKeyboardEvent)),e.on("keyup",t.bind(this,this.onKeyUp)),this.firstKeyDown=!0,e.addClass("rz-active"),this.currentFocusElement={pointer:e,ref:n}},onKeyUp:function(){this.firstKeyDown=!0,this.callOnEnd()},onPointerBlur:function(t){t.off("keydown"),t.off("keyup"),t.removeClass("rz-active"),this.isDragging||(this.tracking="",this.currentFocusElement=null)},getKeyActions:function(t){var e=t+this.step,n=t-this.step,r=t+this.valueRange/10,i=t-this.valueRange/10;this.options.reversedControls&&(e=t-this.step,n=t+this.step,r=t-this.valueRange/10,i=t+this.valueRange/10);var o={UP:e,DOWN:n,LEFT:n,RIGHT:e,PAGEUP:r,PAGEDOWN:i,HOME:this.options.reversedControls?this.maxValue:this.minValue,END:this.options.reversedControls?this.minValue:this.maxValue};return this.options.rightToLeft&&(o.LEFT=e,o.RIGHT=n,this.options.vertical&&(o.UP=n,o.DOWN=e)),o},onKeyboardEvent:function(t){var n=this[this.tracking],r=t.keyCode||t.which,i=this.getKeyActions(n)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[r]];if(null!=i&&""!==this.tracking){t.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.callOnStart());var o=this;e(function(){var t=o.roundStep(o.sanitizeValue(i));if(o.options.draggableRangeOnly){var e,n,r=o.highValue-o.lowValue;"lowValue"===o.tracking?(e=t,(n=t+r)>o.maxValue&&(e=(n=o.maxValue)-r)):(n=t,(e=t-r)<o.minValue&&(n=(e=o.minValue)+r)),o.positionTrackingBar(e,n)}else o.positionTrackingHandle(t)})}},onDragStart:function(t,e,n){var r=this.getEventPosition(n);this.dragging={active:!0,value:this.positionToValue(r),difference:this.highValue-this.lowValue,lowLimit:this.options.rightToLeft?this.minH.rzsp-r:r-this.minH.rzsp,highLimit:this.options.rightToLeft?r-this.maxH.rzsp:this.maxH.rzsp-r},this.onStart(t,e,n)},getValue:function(t,e,n,r){var i=this.options.rightToLeft,o=null;return o="min"===t?n?r?i?this.minValue:this.maxValue-this.dragging.difference:i?this.maxValue-this.dragging.difference:this.minValue:i?this.positionToValue(e+this.dragging.lowLimit):this.positionToValue(e-this.dragging.lowLimit):n?r?i?this.minValue+this.dragging.difference:this.maxValue:i?this.maxValue:this.minValue+this.dragging.difference:i?this.positionToValue(e+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(e-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(o)},onDragMove:function(t,e){var n,r,i,o,s,a,u,c,l=this.getEventPosition(e);if(this.options.rightToLeft?(i=this.dragging.lowLimit,o=this.dragging.highLimit,u=this.maxH,c=this.minH):(i=this.dragging.highLimit,o=this.dragging.lowLimit,u=this.minH,c=this.maxH),s=l<=o,a=l>=this.maxPos-i,s){if(0===u.rzsp)return;n=this.getValue("min",l,!0,!1),r=this.getValue("max",l,!0,!1)}else if(a){if(c.rzsp===this.maxPos)return;r=this.getValue("max",l,!0,!0),n=this.getValue("min",l,!0,!0)}else n=this.getValue("min",l,!1),r=this.getValue("max",l,!1);this.positionTrackingBar(n,r)},positionTrackingBar:function(t,e){null!=this.options.minLimit&&t<this.options.minLimit&&(e=(t=this.options.minLimit)+this.dragging.difference),null!=this.options.maxLimit&&e>this.options.maxLimit&&(t=(e=this.options.maxLimit)-this.dragging.difference),this.lowValue=t,this.highValue=e,this.applyLowValue(),this.range&&this.applyHighValue(),this.applyModel(!0),this.updateHandles("lowValue",this.valueToPosition(t)),this.updateHandles("highValue",this.valueToPosition(e))},positionTrackingHandle:function(t){var e=!1;t=this.applyMinMaxLimit(t),this.range&&(this.options.pushRange?(t=this.applyPushRange(t),e=!0):(this.options.noSwitching&&("lowValue"===this.tracking&&t>this.highValue?t=this.applyMinMaxRange(this.highValue):"highValue"===this.tracking&&t<this.lowValue&&(t=this.applyMinMaxRange(this.lowValue))),t=this.applyMinMaxRange(t),"lowValue"===this.tracking&&t>this.highValue?(this.lowValue=this.highValue,this.applyLowValue(),this.applyModel(),this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="highValue",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH),e=!0):"highValue"===this.tracking&&t<this.lowValue&&(this.highValue=this.lowValue,this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="lowValue",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH),e=!0))),this[this.tracking]!==t&&(this[this.tracking]=t,"lowValue"===this.tracking?this.applyLowValue():this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.valueToPosition(t)),this.updateAriaAttributes(),e=!0),e&&this.applyModel(!0)},applyMinMaxLimit:function(t){return null!=this.options.minLimit&&t<this.options.minLimit?this.options.minLimit:null!=this.options.maxLimit&&t>this.options.maxLimit?this.options.maxLimit:t},applyMinMaxRange:function(t){var e="lowValue"===this.tracking?this.highValue:this.lowValue,n=Math.abs(t-e);return null!=this.options.minRange&&n<this.options.minRange?"lowValue"===this.tracking?this.highValue-this.options.minRange:this.lowValue+this.options.minRange:null!=this.options.maxRange&&n>this.options.maxRange?"lowValue"===this.tracking?this.highValue-this.options.maxRange:this.lowValue+this.options.maxRange:t},applyPushRange:function(t){var e="lowValue"===this.tracking?this.highValue-t:t-this.lowValue,n=null!==this.options.minRange?this.options.minRange:this.options.step,r=this.options.maxRange;return e<n?("lowValue"===this.tracking?(this.highValue=Math.min(t+n,this.maxValue),t=this.highValue-n,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=Math.max(t-n,this.minValue),t=this.lowValue+n,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()):null!==r&&e>r&&("lowValue"===this.tracking?(this.highValue=t+r,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=t-r,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()),t},applyModel:function(t){this.internalChange=!0,this.scope.$apply(),t&&this.callOnChange(),this.internalChange=!1},callOnStart:function(){if(this.options.onStart){var t=this,e="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){t.options.onStart(t.options.id,t.scope.rzSliderModel,t.scope.rzSliderHigh,e)})}},callOnChange:function(){if(this.options.onChange){var t=this,e="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){t.options.onChange(t.options.id,t.scope.rzSliderModel,t.scope.rzSliderHigh,e)})}},callOnEnd:function(){if(this.options.onEnd){var t=this,e="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){t.options.onEnd(t.options.id,t.scope.rzSliderModel,t.scope.rzSliderHigh,e)})}this.scope.$emit("slideEnded")}},a}]).directive("rzslider",["RzSlider",function(t){return{restrict:"AE",replace:!0,scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"&?",rzSliderTplUrl:"@"},templateUrl:function(t,e){return e.rzSliderTplUrl||"rzSliderTpl.html"},link:function(e,n){e.slider=new t(e,n)}}}]);return e.run(["$templateCache",function(t){t.put("rzSliderTpl.html",'<div class=rzslider><span class="rz-bar-wrapper rz-left-out-selection"><span class=rz-bar></span></span> <span class="rz-bar-wrapper rz-right-out-selection"><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle></span></span> <span class="rz-pointer rz-pointer-min" ng-style=minPointerStyle></span> <span class="rz-pointer rz-pointer-max" ng-style=maxPointerStyle></span> <span class="rz-bubble rz-limit rz-floor"></span> <span class="rz-bubble rz-limit rz-ceil"></span> <span class="rz-bubble rz-model-value"></span> <span class="rz-bubble rz-model-high"></span> <span class=rz-bubble></span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=rz-tick ng-class="{\'rz-selected\': t.selected}" ng-style=t.style ng-attr-uib-tooltip="{{ t.tooltip }}" ng-attr-tooltip-placement={{t.tooltipPlacement}} ng-attr-tooltip-append-to-body="{{ t.tooltip ? true : undefined}}"><span ng-if="t.value != null" class=rz-tick-value ng-attr-uib-tooltip="{{ t.valueTooltip }}" ng-attr-tooltip-placement={{t.valueTooltipPlacement}}>{{ t.value }}</span> <span ng-if="t.legend != null" class=rz-tick-legend>{{ t.legend }}</span></li></ul></div>')}]),e.name})},{angular:86}],89:[function(t,e,n){(function(n){"use strict";function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function o(t){return Object.prototype.toString.call(t)}function s(t){return!i(t)&&("function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function a(t){if(m.isFunction(t)){if(w)return t.name;var e=t.toString().match(E);return e&&e[1]}}function u(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function c(t){if(w||!m.isFunction(t))return m.inspect(t);var e=a(t);return"[Function"+(e?": "+e:"")+"]"}function l(t,e,n,r,i){throw new x.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function f(t,e){t||l(t,!0,e,"==",x.ok)}function d(t,e,n,a){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(m.isDate(t)&&m.isDate(e))return t.getTime()===e.getTime();if(m.isRegExp(t)&&m.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(s(t)&&s(e)&&o(t)===o(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var u=(a=a||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===a.expected.indexOf(e)||(a.actual.push(t),a.expected.push(e),function(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(m.isPrimitive(t)||m.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=h(t),o=h(e);if(i&&!o||!i&&o)return!1;if(i)return t=b.call(t),e=b.call(e),d(t,e,n);var s,a,u=_(t),c=_(e);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),a=u.length-1;a>=0;a--)if(u[a]!==c[a])return!1;for(a=u.length-1;a>=0;a--)if(s=u[a],!d(t[s],e[s],n,r))return!1;return!0}(t,e,n,a))}return n?t===e:t==e}function h(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function p(t,e,n){d(t,e,!0)&&l(t,e,n,"notDeepStrictEqual",p)}function v(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function g(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&l(i,n,"Missing expected exception"+r);var o="string"==typeof r,s=!t&&m.isError(i),a=!t&&i&&!n;if((s&&o&&v(i,n)||a)&&l(i,n,"Got unwanted exception"+r),t&&i&&n&&!v(i,n)||!t&&i)throw i}var m=t("util/"),y=Object.prototype.hasOwnProperty,b=Array.prototype.slice,w="foo"===function(){}.name,x=e.exports=f,E=/\s*function\s+([^\(\s]*)\s*/;x.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return u(c(t.actual),128)+" "+t.operator+" "+u(c(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=a(e),o=r.indexOf("\n"+i);if(o>=0){var s=r.indexOf("\n",o+1);r=r.substring(s+1)}this.stack=r}}},m.inherits(x.AssertionError,Error),x.fail=l,x.ok=f,x.equal=function(t,e,n){t!=e&&l(t,e,n,"==",x.equal)},x.notEqual=function(t,e,n){t==e&&l(t,e,n,"!=",x.notEqual)},x.deepEqual=function(t,e,n){d(t,e,!1)||l(t,e,n,"deepEqual",x.deepEqual)},x.deepStrictEqual=function(t,e,n){d(t,e,!0)||l(t,e,n,"deepStrictEqual",x.deepStrictEqual)},x.notDeepEqual=function(t,e,n){d(t,e,!1)&&l(t,e,n,"notDeepEqual",x.notDeepEqual)},x.notDeepStrictEqual=p,x.strictEqual=function(t,e,n){t!==e&&l(t,e,n,"===",x.strictEqual)},x.notStrictEqual=function(t,e,n){t===e&&l(t,e,n,"!==",x.notStrictEqual)},x.throws=function(t,e,n){g(!0,t,e,n)},x.doesNotThrow=function(t,e,n){g(!1,t,e,n)},x.ifError=function(t){if(t)throw t};var _=Object.keys||function(t){var e=[];for(var n in t)y.call(t,n)&&e.push(n);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":511}],90:[function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function o(t,e,n){for(var r,o=[],s=e;s<n;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(i(r));return o.join("")}n.byteLength=function(t){return 3*t.length/4-r(t)},n.toByteArray=function(t){var e,n,i,o,s,c=t.length;o=r(t),s=new u(3*c/4-o),n=o>0?c-4:c;var l=0;for(e=0;e<n;e+=4)i=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],s[l++]=i>>16&255,s[l++]=i>>8&255,s[l++]=255&i;return 2===o?(i=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,s[l++]=255&i):1===o&&(i=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,s[l++]=i>>8&255,s[l++]=255&i),s},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i="",a=[],u=0,c=n-r;u<c;u+=16383)a.push(o(t,u,u+16383>c?c:u+16383));return 1===r?(e=t[n-1],i+=s[e>>2],i+=s[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=s[e>>10],i+=s[e>>4&63],i+=s[e<<2&63],i+="="),a.push(i),a.join("")};for(var s=[],a=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,f=c.length;l<f;++l)s[l]=c[l],a[c.charCodeAt(l)]=l;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],91:[function(t,e,n){},{}],92:[function(t,e,n){(function(e,r){"use strict";function i(t){if("number"!=typeof t||t<n.DEFLATE||t>n.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}var o=t("assert"),s=t("pako/lib/zlib/zstream"),a=t("pako/lib/zlib/deflate.js"),u=t("pako/lib/zlib/inflate.js"),c=t("pako/lib/zlib/constants");for(var l in c)n[l]=c[l];n.NONE=0,n.DEFLATE=1,n.INFLATE=2,n.GZIP=3,n.GUNZIP=4,n.DEFLATERAW=5,n.INFLATERAW=6,n.UNZIP=7;i.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,o(this.init_done,"close before init"),o(this.mode<=n.UNZIP),this.mode===n.DEFLATE||this.mode===n.GZIP||this.mode===n.DEFLATERAW?a.deflateEnd(this.strm):this.mode!==n.INFLATE&&this.mode!==n.GUNZIP&&this.mode!==n.INFLATERAW&&this.mode!==n.UNZIP||u.inflateEnd(this.strm),this.mode=n.NONE,this.dictionary=null)},i.prototype.write=function(t,e,n,r,i,o,s){return this._write(!0,t,e,n,r,i,o,s)},i.prototype.writeSync=function(t,e,n,r,i,o,s){return this._write(!1,t,e,n,r,i,o,s)},i.prototype._write=function(t,i,s,a,u,c,l,f){if(o.equal(arguments.length,8),o(this.init_done,"write before init"),o(this.mode!==n.NONE,"already finalized"),o.equal(!1,this.write_in_progress,"write already in progress"),o.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,o.equal(!1,void 0===i,"must provide flush value"),this.write_in_progress=!0,i!==n.Z_NO_FLUSH&&i!==n.Z_PARTIAL_FLUSH&&i!==n.Z_SYNC_FLUSH&&i!==n.Z_FULL_FLUSH&&i!==n.Z_FINISH&&i!==n.Z_BLOCK)throw new Error("Invalid flush value");if(null==s&&(s=r.alloc(0),u=0,a=0),this.strm.avail_in=u,this.strm.input=s,this.strm.next_in=a,this.strm.avail_out=f,this.strm.output=c,this.strm.next_out=l,this.flush=i,t){var d=this;return e.nextTick(function(){d._process(),d._after()}),this}if(this._process(),this._checkError())return this._afterSync()},i.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},i.prototype._process=function(){var t=null;switch(this.mode){case n.DEFLATE:case n.GZIP:case n.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case n.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31!==this.strm.input[t]){this.mode=n.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=n.GUNZIP):this.mode=n.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case n.INFLATE:case n.GUNZIP:case n.INFLATERAW:for(this.err=u.inflate(this.strm,this.flush),this.err===n.Z_NEED_DICT&&this.dictionary&&(this.err=u.inflateSetDictionary(this.strm,this.dictionary),this.err===n.Z_OK?this.err=u.inflate(this.strm,this.flush):this.err===n.Z_DATA_ERROR&&(this.err=n.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===n.GUNZIP&&this.err===n.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=u.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},i.prototype._checkError=function(){switch(this.err){case n.Z_OK:case n.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===n.Z_FINISH)return this._error("unexpected end of file"),!1;break;case n.Z_STREAM_END:break;case n.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},i.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},i.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},i.prototype.init=function(t,e,r,i,s){o(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),o(t>=8&&t<=15,"invalid windowBits"),o(e>=-1&&e<=9,"invalid compression level"),o(r>=1&&r<=9,"invalid memlevel"),o(i===n.Z_FILTERED||i===n.Z_HUFFMAN_ONLY||i===n.Z_RLE||i===n.Z_FIXED||i===n.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(e,t,r,i,s),this._setDictionary()},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype.reset=function(){this._reset(),this._setDictionary()},i.prototype._init=function(t,e,r,i,o){switch(this.level=t,this.windowBits=e,this.memLevel=r,this.strategy=i,this.flush=n.Z_NO_FLUSH,this.err=n.Z_OK,this.mode!==n.GZIP&&this.mode!==n.GUNZIP||(this.windowBits+=16),this.mode===n.UNZIP&&(this.windowBits+=32),this.mode!==n.DEFLATERAW&&this.mode!==n.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new s,this.mode){case n.DEFLATE:case n.GZIP:case n.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,n.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case n.INFLATE:case n.GUNZIP:case n.INFLATERAW:case n.UNZIP:this.err=u.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==n.Z_OK&&this._error("Init error"),this.dictionary=o,this.write_in_progress=!1,this.init_done=!0},i.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=n.Z_OK,this.mode){case n.DEFLATE:case n.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary)}this.err!==n.Z_OK&&this._error("Failed to set dictionary")}},i.prototype._reset=function(){switch(this.err=n.Z_OK,this.mode){case n.DEFLATE:case n.DEFLATERAW:case n.GZIP:this.err=a.deflateReset(this.strm);break;case n.INFLATE:case n.INFLATERAW:case n.GUNZIP:this.err=u.inflateReset(this.strm)}this.err!==n.Z_OK&&this._error("Failed to reset stream")},n.Zlib=i}).call(this,t("_process"),t("buffer").Buffer)},{_process:490,assert:89,buffer:94,"pako/lib/zlib/constants":480,"pako/lib/zlib/deflate.js":482,"pako/lib/zlib/inflate.js":484,"pako/lib/zlib/zstream":488}],93:[function(t,e,n){(function(e){"use strict";function r(t,e,n){function r(){for(var e;null!==(e=t.read());)o.push(e),s+=e.length;t.once("readable",r)}function i(){var e,r=null;s>=x?r=new RangeError(E):e=g.concat(o,s),o=[],t.close(),n(r,e)}var o=[],s=0;t.on("error",function(e){t.removeListener("end",i),t.removeListener("readable",r),n(e)}),t.on("end",i),t.end(e),r()}function i(t,e){if("string"==typeof e&&(e=g.from(e)),!g.isBuffer(e))throw new TypeError("Not a string or buffer");var n=t._finishFlushFlag;return t._processChunk(e,n)}function o(t){if(!(this instanceof o))return new o(t);h.call(this,t,y.DEFLATE)}function s(t){if(!(this instanceof s))return new s(t);h.call(this,t,y.INFLATE)}function a(t){if(!(this instanceof a))return new a(t);h.call(this,t,y.GZIP)}function u(t){if(!(this instanceof u))return new u(t);h.call(this,t,y.GUNZIP)}function c(t){if(!(this instanceof c))return new c(t);h.call(this,t,y.DEFLATERAW)}function l(t){if(!(this instanceof l))return new l(t);h.call(this,t,y.INFLATERAW)}function f(t){if(!(this instanceof f))return new f(t);h.call(this,t,y.UNZIP)}function d(t){return t===y.Z_NO_FLUSH||t===y.Z_PARTIAL_FLUSH||t===y.Z_SYNC_FLUSH||t===y.Z_FULL_FLUSH||t===y.Z_FINISH||t===y.Z_BLOCK}function h(t,e){var r=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||n.Z_DEFAULT_CHUNK,m.call(this,t),t.flush&&!d(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!d(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||y.Z_NO_FLUSH,this._finishFlushFlag=void 0!==t.finishFlush?t.finishFlush:y.Z_FINISH,t.chunkSize&&(t.chunkSize<n.Z_MIN_CHUNK||t.chunkSize>n.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<n.Z_MIN_WINDOWBITS||t.windowBits>n.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<n.Z_MIN_LEVEL||t.level>n.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<n.Z_MIN_MEMLEVEL||t.memLevel>n.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=n.Z_FILTERED&&t.strategy!=n.Z_HUFFMAN_ONLY&&t.strategy!=n.Z_RLE&&t.strategy!=n.Z_FIXED&&t.strategy!=n.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!g.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new y.Zlib(e);var i=this;this._hadError=!1,this._handle.onerror=function(t,e){p(i),i._hadError=!0;var r=new Error(t);r.errno=e,r.code=n.codes[e],i.emit("error",r)};var o=n.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(o=t.level);var s=n.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(s=t.strategy),this._handle.init(t.windowBits||n.Z_DEFAULT_WINDOWBITS,o,t.memLevel||n.Z_DEFAULT_MEMLEVEL,s,t.dictionary),this._buffer=g.allocUnsafe(this._chunkSize),this._offset=0,this._level=o,this._strategy=s,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!r._handle},configurable:!0,enumerable:!0})}function p(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function v(t){t.emit("close")}var g=t("buffer").Buffer,m=t("stream").Transform,y=t("./binding"),b=t("util"),w=t("assert").ok,x=t("buffer").kMaxLength,E="Cannot create final Buffer. It would be larger than 0x"+x.toString(16)+" bytes";y.Z_MIN_WINDOWBITS=8,y.Z_MAX_WINDOWBITS=15,y.Z_DEFAULT_WINDOWBITS=15,y.Z_MIN_CHUNK=64,y.Z_MAX_CHUNK=1/0,y.Z_DEFAULT_CHUNK=16384,y.Z_MIN_MEMLEVEL=1,y.Z_MAX_MEMLEVEL=9,y.Z_DEFAULT_MEMLEVEL=8,y.Z_MIN_LEVEL=-1,y.Z_MAX_LEVEL=9,y.Z_DEFAULT_LEVEL=y.Z_DEFAULT_COMPRESSION;for(var _=Object.keys(y),S=0;S<_.length;S++){var $=_[S];$.match(/^Z/)&&Object.defineProperty(n,$,{enumerable:!0,value:y[$],writable:!1})}for(var T={Z_OK:y.Z_OK,Z_STREAM_END:y.Z_STREAM_END,Z_NEED_DICT:y.Z_NEED_DICT,Z_ERRNO:y.Z_ERRNO,Z_STREAM_ERROR:y.Z_STREAM_ERROR,Z_DATA_ERROR:y.Z_DATA_ERROR,Z_MEM_ERROR:y.Z_MEM_ERROR,Z_BUF_ERROR:y.Z_BUF_ERROR,Z_VERSION_ERROR:y.Z_VERSION_ERROR},k=Object.keys(T),C=0;C<k.length;C++){var A=k[C];T[T[A]]=A}Object.defineProperty(n,"codes",{enumerable:!0,value:Object.freeze(T),writable:!1}),n.Deflate=o,n.Inflate=s,n.Gzip=a,n.Gunzip=u,n.DeflateRaw=c,n.InflateRaw=l,n.Unzip=f,n.createDeflate=function(t){return new o(t)},n.createInflate=function(t){return new s(t)},n.createDeflateRaw=function(t){return new c(t)},n.createInflateRaw=function(t){return new l(t)},n.createGzip=function(t){return new a(t)},n.createGunzip=function(t){return new u(t)},n.createUnzip=function(t){return new f(t)},n.deflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new o(e),t,n)},n.deflateSync=function(t,e){return i(new o(e),t)},n.gzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new a(e),t,n)},n.gzipSync=function(t,e){return i(new a(e),t)},n.deflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new c(e),t,n)},n.deflateRawSync=function(t,e){return i(new c(e),t)},n.unzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new f(e),t,n)},n.unzipSync=function(t,e){return i(new f(e),t)},n.inflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new s(e),t,n)},n.inflateSync=function(t,e){return i(new s(e),t)},n.gunzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new u(e),t,n)},n.gunzipSync=function(t,e){return i(new u(e),t)},n.inflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new l(e),t,n)},n.inflateRawSync=function(t,e){return i(new l(e),t)},b.inherits(h,m),h.prototype.params=function(t,r,i){if(t<n.Z_MIN_LEVEL||t>n.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(r!=n.Z_FILTERED&&r!=n.Z_HUFFMAN_ONLY&&r!=n.Z_RLE&&r!=n.Z_FIXED&&r!=n.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==t||this._strategy!==r){var o=this;this.flush(y.Z_SYNC_FLUSH,function(){w(o._handle,"zlib binding closed"),o._handle.params(t,r),o._hadError||(o._level=t,o._strategy=r,i&&i())})}else e.nextTick(i)},h.prototype.reset=function(){return w(this._handle,"zlib binding closed"),this._handle.reset()},h.prototype._flush=function(t){this._transform(g.alloc(0),"",t)},h.prototype.flush=function(t,n){var r=this,i=this._writableState;("function"==typeof t||void 0===t&&!n)&&(n=t,t=y.Z_FULL_FLUSH),i.ended?n&&e.nextTick(n):i.ending?n&&this.once("end",n):i.needDrain?n&&this.once("drain",function(){return r.flush(t,n)}):(this._flushFlag=t,this.write(g.alloc(0),"",n))},h.prototype.close=function(t){p(this,t),e.nextTick(v,this)},h.prototype._transform=function(t,e,n){var r,i=this._writableState,o=(i.ending||i.ended)&&(!t||i.length===t.length);return null===t||g.isBuffer(t)?this._handle?(o?r=this._finishFlushFlag:(r=this._flushFlag,t.length>=i.length&&(this._flushFlag=this._opts.flush||y.Z_NO_FLUSH)),void this._processChunk(t,r,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},h.prototype._processChunk=function(t,e,n){function r(c,d){if(this&&(this.buffer=null,this.callback=null),!a._hadError){var h=o-d;if(w(h>=0,"have should not go down"),h>0){var p=a._buffer.slice(a._offset,a._offset+h);a._offset+=h,u?a.push(p):(l.push(p),f+=p.length)}if((0===d||a._offset>=a._chunkSize)&&(o=a._chunkSize,a._offset=0,a._buffer=g.allocUnsafe(a._chunkSize)),0===d){if(s+=i-c,i=c,!u)return!0;var v=a._handle.write(e,t,s,i,a._buffer,a._offset,a._chunkSize);return v.callback=r,void(v.buffer=t)}if(!u)return!1;n()}}var i=t&&t.length,o=this._chunkSize-this._offset,s=0,a=this,u="function"==typeof n;if(!u){var c,l=[],f=0;this.on("error",function(t){c=t}),w(this._handle,"zlib binding closed");do{var d=this._handle.writeSync(e,t,s,i,this._buffer,this._offset,o)}while(!this._hadError&&r(d[0],d[1]));if(this._hadError)throw c;if(f>=x)throw p(this),new RangeError(E);var h=g.concat(l,f);return p(this),h}w(this._handle,"zlib binding closed");var v=this._handle.write(e,t,s,i,this._buffer,this._offset,o);v.buffer=t,v.callback=r},b.inherits(o,h),b.inherits(s,h),b.inherits(a,h),b.inherits(u,h),b.inherits(c,h),b.inherits(l,h),b.inherits(f,h)}).call(this,t("_process"))},{"./binding":92,_process:490,assert:89,buffer:94,stream:505,util:511}],94:[function(t,e,n){"use strict";function r(t){if(t>L)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=i.prototype,e}function i(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return a(t)}return o(t,e,n)}function o(t,e,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return R(t)?function(t,e,n){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");var r;r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n);return r.__proto__=i.prototype,r}(t,e,n):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!i.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|l(t,e),o=r(n),s=o.write(t,e);s!==n&&(o=o.slice(0,s));return o}(t,e):function(t){if(i.isBuffer(t)){var e=0|c(t.length),n=r(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}if(t){if(M(t)||"length"in t)return"number"!=typeof t.length||I(t.length)?r(0):u(t);if("Buffer"===t.type&&Array.isArray(t.data))return u(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t){return s(t),r(t<0?0:0|c(t))}function u(t){for(var e=t.length<0?0:0|c(t.length),n=r(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function c(t){if(t>=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");return 0|t}function l(t,e){if(i.isBuffer(t))return t.length;if(M(t)||R(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return k(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return C(t).length;default:if(r)return k(t).length;e=(""+e).toLowerCase(),r=!0}}function f(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,n){var r=t.length;(!e||e<0)&&(e=0);(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return i}(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}(this,e,n);case"latin1":case"binary":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}(this,e,n);case"base64":return function(t,e,n){return 0===e&&n===t.length?O.fromByteArray(t):O.fromByteArray(t.slice(e,n))}(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function h(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,I(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=i.from(e,r)),i.isBuffer(e))return 0===e.length?-1:p(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):p(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function p(t,e,n,r,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<a;c++)if(o(t,c)===o(e,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*s}else-1!==l&&(c-=c-l),l=-1}else for(n+u>a&&(n=a-u),c=n;c>=0;c--){for(var f=!0,d=0;d<u;d++)if(o(t,c+d)!==o(e,d)){f=!1;break}if(f)return c}return-1}function v(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(I(a))return s;t[n+s]=a}return s}function g(t,e,n,r){return A(k(e,t.length-n),t,n,r)}function m(t,e,n,r){return A(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function y(t,e,n,r){return m(t,e,n,r)}function b(t,e,n,r){return A(C(e),t,n,r)}function w(t,e,n,r){return A(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function x(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var u,c,l,f;switch(a){case 1:o<128&&(s=o);break;case 2:128==(192&(u=t[i+1]))&&(f=(31&o)<<6|63&u)>127&&(s=f);break;case 3:u=t[i+1],c=t[i+2],128==(192&u)&&128==(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return function(t){var e=t.length;if(e<=D)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=D));return n}(r)}function E(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function _(t,e,n,r,o,s){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function S(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function $(t,e,n,r,i){return e=+e,n>>>=0,i||S(t,0,n,4),N.write(t,e,n,r,23,4),n+4}function T(t,e,n,r,i){return e=+e,n>>>=0,i||S(t,0,n,8),N.write(t,e,n,r,52,8),n+8}function k(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function C(t){return O.toByteArray(function(t){if((t=t.trim().replace(P,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function A(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function R(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function M(t){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(t)}function I(t){return t!=t}var O=t("base64-js"),N=t("ieee754");n.Buffer=i,n.SlowBuffer=function(t){return+t!=t&&(t=0),i.alloc(+t)},n.INSPECT_MAX_BYTES=50;var L=2147483647;n.kMaxLength=L,(i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(t,e,n){return o(t,e,n)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(t,e,n){return function(t,e,n){return s(t),t<=0?r(t):void 0!==e?"string"==typeof n?r(t).fill(e,n):r(t).fill(e):r(t)}(t,e,n)},i.allocUnsafe=function(t){return a(t)},i.allocUnsafeSlow=function(t){return a(t)},i.isBuffer=function(t){return null!=t&&!0===t._isBuffer},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,s=Math.min(n,r);o<s;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=i.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},i.byteLength=l,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?x(this,0,t):f.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t,e,n,r,o){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var s=o-r,a=n-e,u=Math.min(s,a),c=this.slice(r,o),l=t.slice(e,n),f=0;f<u;++f)if(c[f]!==l[f]){s=c[f],a=l[f];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},i.prototype.indexOf=function(t,e,n){return h(this,t,e,n,!0)},i.prototype.lastIndexOf=function(t,e,n){return h(this,t,e,n,!1)},i.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return g(this,t,e,n);case"ascii":return m(this,t,e,n);case"latin1":case"binary":return y(this,t,e,n);case"base64":return b(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;i.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=i.prototype,r},i.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||E(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},i.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||E(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},i.prototype.readUInt8=function(t,e){return t>>>=0,e||E(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||E(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||E(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||E(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||E(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||E(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},i.prototype.readInt8=function(t,e){return t>>>=0,e||E(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||E(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){t>>>=0,e||E(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||E(t,4,this.length),N.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||E(t,4,this.length),N.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||E(t,8,this.length),N.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||E(t,8,this.length),N.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){_(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){_(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);_(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);_(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,n){return $(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return $(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return T(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return T(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},i.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=i.isBuffer(t)?t:new i(t,r),u=a.length;for(s=0;s<n-e;++s)this[s+e]=a[s%u]}return this};var P=/[^+/0-9A-Za-z-_]/g},{"base64-js":90,ieee754:471}],95:[function(t,e,n){(function(t){function e(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return"[object RegExp]"===e(t)},n.isObject=function(t){return"object"==typeof t&&null!==t},n.isDate=function(t){return"[object Date]"===e(t)},n.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},n.isFunction=function(t){return"function"==typeof t},n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":473}],96:[function(t,e,n){!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function i(t){return null===t?NaN:+t}function o(t){return!isNaN(t)}function s(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function a(t){return t.length}function u(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function c(){this._=Object.create(null)}function l(t){return(t+="")===lo||t[0]===fo?fo+t:t}function f(t){return(t+="")[0]===fo?t.slice(1):t}function d(t){return l(t)in this._}function h(t){return(t=l(t))in this._&&delete this._[t]}function p(){var t=[];for(var e in this._)t.push(f(e));return t}function v(){var t=0;for(var e in this._)++t;return t}function g(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(t){return t}function b(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=ho.length;n<r;++n){var i=ho[n]+e;if(i in t)return i}}function w(){}function x(){}function E(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new c;return e.on=function(e,i){var o,s=r.get(e);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,o=n.indexOf(s)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function _(){Ji.event.preventDefault()}function S(){for(var t,e=Ji.event;t=e.sourceEvent;)e=t;return e}function $(t){for(var e=new x,n=0,r=arguments.length;++n<r;)e[arguments[n]]=E(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=Ji.event;i.target=t,Ji.event=i,e[i.type].apply(n,r)}finally{Ji.event=o}}},e}function T(t){return vo(t,bo),t}function k(t){return"function"==typeof t?t:function(){return go(t,this)}}function C(t){return"function"==typeof t?t:function(){return mo(t,this)}}function A(t,e){return t=Ji.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function R(t){return t.trim().replace(/\s+/g," ")}function M(t){return new RegExp("(?:^|\\s+)"+Ji.requote(t)+"(?:\\s+|$)","g")}function I(t){return(t+"").trim().split(/^|\s+/)}function O(t,e){var n=(t=I(t).map(N)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function N(t){var e=M(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",R(i+" "+t))):n.setAttribute("class",R(i.replace(e," ")))}}function L(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function D(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function P(t){return"function"==typeof t?t:(t=Ji.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===wo&&e.documentElement.namespaceURI===wo?e.createElement(t):e.createElementNS(n,t)}}function V(){var t=this.parentNode;t&&t.removeChild(this)}function q(t){return{__data__:t}}function F(t){return function(){return yo(this,t)}}function U(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,o=t[n],s=0,a=o.length;s<a;s++)(i=o[s])&&e(i,s,n);return t}function B(t){return vo(t,Eo),t}function j(t,e,n){function r(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}var i="__on"+t,o=t.indexOf("."),s=H;o>0&&(t=t.slice(0,o));var a=_o.get(t);return a&&(t=a,s=z),o?e?function(){var o=s(e,eo(arguments));r.call(this),this.addEventListener(t,this[i]=o,o.$=n),o._=e}:r:e?w:function(){var e,n=new RegExp("^__on([^.]+)"+Ji.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}}function H(t,e){return function(n){var r=Ji.event;Ji.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{Ji.event=r}}}function z(t,e){var n=H(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function W(e){var r=".dragsuppress-"+ ++$o,i="click"+r,o=Ji.select(n(e)).on("touchmove"+r,_).on("dragstart"+r,_).on("selectstart"+r,_);if(null==So&&(So=!("onselectstart"in e)&&b(e.style,"userSelect")),So){var s=t(e).style,a=s[So];s[So]="none"}return function(t){if(o.on(r,null),So&&(s[So]=a),t){var e=function(){o.on(i,null)};o.on(i,function(){_(),e()},!0),setTimeout(e,0)}}}function G(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(To<0){var o=n(t);if(o.scrollX||o.scrollY){var s=(r=Ji.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();To=!(s.f||s.e),r.remove()}}return To?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function Z(){return Ji.event.changedTouches[0].identifier}function Y(t){return t>0?1:t<0?-1:0}function X(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function K(t){return t>1?0:t<-1?Ao:Math.acos(t)}function Q(t){return t>1?Io:t<-1?-Io:Math.asin(t)}function J(t){return((t=Math.exp(t))+1/t)/2}function tt(t){return(t=Math.sin(t/2))*t}function et(){}function nt(t,e,n){return this instanceof nt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof nt?new nt(t.h,t.s,t.l):gt(""+t,mt,nt):new nt(t,e,n)}function rt(t,e,n){function r(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?i+(o-i)*t/60:t<180?o:t<240?i+(o-i)*(240-t)/60:i}(t))}var i,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=n<0?0:n>1?1:n,o=n<=.5?n*(1+e):n+e-n*e,i=2*n-o,new dt(r(t+120),r(t),r(t-120))}function it(t,e,n){return this instanceof it?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof it?new it(t.h,t.c,t.l):ut(t instanceof st?t.l:(t=yt((t=Ji.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new it(t,e,n)}function ot(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new st(n,Math.cos(t*=Oo)*e,Math.sin(t)*e)}function st(t,e,n){return this instanceof st?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof st?new st(t.l,t.a,t.b):t instanceof it?ot(t.h,t.c,t.l):yt((t=dt(t)).r,t.g,t.b):new st(t,e,n)}function at(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=ct(i)*Bo,r=ct(r)*jo,o=ct(o)*Ho,new dt(ft(3.2404542*i-1.5371385*r-.4985314*o),ft(-.969266*i+1.8760108*r+.041556*o),ft(.0556434*i-.2040259*r+1.0572252*o))}function ut(t,e,n){return t>0?new it(Math.atan2(n,e)*No,Math.sqrt(e*e+n*n),t):new it(NaN,NaN,t)}function ct(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function lt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ft(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function dt(t,e,n){return this instanceof dt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof dt?new dt(t.r,t.g,t.b):gt(""+t,dt,rt):new dt(t,e,n)}function ht(t){return new dt(t>>16,t>>8&255,255&t)}function pt(t){return ht(t)+""}function vt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function gt(t,e,n){var r,i,o,s=0,a=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(wt(i[0]),wt(i[1]),wt(i[2]))}return(o=Go.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(s=(3840&o)>>4,s|=s>>4,a=240&o,a|=a>>4,u=15&o,u|=u<<4):7===t.length&&(s=(16711680&o)>>16,a=(65280&o)>>8,u=255&o)),e(s,a,u))}function mt(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-o,u=(s+o)/2;return a?(i=u<.5?a/(s+o):a/(2-s-o),r=t==s?(e-n)/a+(e<n?6:0):e==s?(n-t)/a+2:(t-e)/a+4,r*=60):(r=NaN,i=u>0&&u<1?0:r),new nt(r,i,u)}function yt(t,e,n){var r=lt((.4124564*(t=bt(t))+.3575761*(e=bt(e))+.1804375*(n=bt(n)))/Bo),i=lt((.2126729*t+.7151522*e+.072175*n)/jo);return st(116*i-16,500*(r-i),200*(i-lt((.0193339*t+.119192*e+.9503041*n)/Ho)))}function bt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function wt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function xt(t){return"function"==typeof t?t:function(){return t}}function Et(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),_t(e,n,t,r)}}function _t(t,e,n,r){function i(){var t,e=u.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||e>=200&&e<300||304===e){try{t=n.call(o,u)}catch(t){return void s.error.call(o,t)}s.load.call(o,t)}else s.error.call(o,u)}var o={},s=Ji.dispatch("beforesend","progress","load","error"),a={},u=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=i:u.onreadystatechange=function(){u.readyState>3&&i()},u.onprogress=function(t){var e=Ji.event;Ji.event=t;try{s.progress.call(o,u)}finally{Ji.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?a[t]:(null==e?delete a[t]:a[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(eo(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),u.open(n,t,!0),null==e||"accept"in a||(a.accept=e+",*/*"),u.setRequestHeader)for(var l in a)u.setRequestHeader(l,a[l]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=c&&(u.responseType=c),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),s.beforesend.call(o,u),u.send(null==r?null:r),o},o.abort=function(){return u.abort(),o},Ji.rebind(o,s,"on"),null==r?o:o.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(r))}function St(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i={c:t,t:n+e,n:null};return Yo?Yo.n=i:Zo=i,Yo=i,Xo||(Ko=clearTimeout(Ko),Xo=1,Qo($t)),i}function $t(){var t=Tt(),e=kt()-t;e>24?(isFinite(e)&&(clearTimeout(Ko),Ko=setTimeout($t,e)),Xo=0):(Xo=1,Qo($t))}function Tt(){for(var t=Date.now(),e=Zo;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function kt(){for(var t,e=Zo,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:Zo=e.n;return Yo=t,n}function Ct(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function At(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Rt(t,e,n){function r(e){var n=t(e),r=o(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new rs(n-1)),1),n}function o(t,n){return e(t=new rs(+t),n),t}function s(t,r,o){var s=i(t),a=[];if(o>1)for(;s<r;)n(s)%o||a.push(new Date(+s)),e(s,1);else for(;s<r;)a.push(new Date(+s)),e(s,1);return a}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=s;var a=t.utc=Mt(t);return a.floor=a,a.round=Mt(r),a.ceil=Mt(i),a.offset=Mt(o),a.range=function(t,e,n){try{rs=At;var r=new At;return r._=t,s(r,e,n)}finally{rs=Date}},t}function Mt(t){return function(e,n){try{rs=At;var r=new At;return r._=e,t(r,n)._}finally{rs=Date}}}function It(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Ot(t){return new RegExp("^(?:"+t.map(Ji.requote).join("|")+")","i")}function Nt(t){for(var e=new c,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Lt(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Dt(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Pt(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Vt(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qt(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n,n+2));return r?(t.y=function(t){return t+(t>68?1900:2e3)}(+r[0]),n+r[0].length):-1}function Ft(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ut(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Bt(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function jt(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function Ht(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function zt(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Wt(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Gt(t,e,n){ss.lastIndex=0;var r=ss.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Zt(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=co(e)/60|0,i=co(e)%60;return n+It(r,"0",2)+It(i,"0",2)}function Yt(t,e,n){as.lastIndex=0;var r=as.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Xt(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function Kt(){}function Qt(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function Jt(t,e){t&&fs.hasOwnProperty(t.type)&&fs[t.type](t,e)}function te(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ee(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)te(t[n],e,1);e.polygonEnd()}function ne(){function t(t,e){e=e*Oo/2+Ao/4;var n=(t*=Oo)-r,s=n>=0?1:-1,a=s*n,u=Math.cos(e),c=Math.sin(e),l=o*c,f=i*u+l*Math.cos(a),d=l*s*Math.sin(a);hs.add(Math.atan2(d,f)),r=t,i=u,o=c}var e,n,r,i,o;ps.point=function(s,a){ps.point=t,r=(e=s)*Oo,i=Math.cos(a=(n=a)*Oo/2+Ao/4),o=Math.sin(a)},ps.lineEnd=function(){t(e,n)}}function re(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function ie(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function oe(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function se(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ae(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ue(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ce(t){return[Math.atan2(t[1],t[0]),Q(t[2])]}function le(t,e){return co(t[0]-e[0])<ko&&co(t[1]-e[1])<ko}function fe(t,e){t*=Oo;var n=Math.cos(e*=Oo);de(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function de(t,e,n){ms+=(t-ms)/++vs,ys+=(e-ys)/vs,bs+=(n-bs)/vs}function he(){function t(t,i){t*=Oo;var o=Math.cos(i*=Oo),s=o*Math.cos(t),a=o*Math.sin(t),u=Math.sin(i),c=Math.atan2(Math.sqrt((c=n*u-r*a)*c+(c=r*s-e*u)*c+(c=e*a-n*s)*c),e*s+n*a+r*u);gs+=c,ws+=c*(e+(e=s)),xs+=c*(n+(n=a)),Es+=c*(r+(r=u)),de(e,n,r)}var e,n,r;Ts.point=function(i,o){i*=Oo;var s=Math.cos(o*=Oo);e=s*Math.cos(i),n=s*Math.sin(i),r=Math.sin(o),Ts.point=t,de(e,n,r)}}function pe(){Ts.point=fe}function ve(){function t(t,e){t*=Oo;var n=Math.cos(e*=Oo),s=n*Math.cos(t),a=n*Math.sin(t),u=Math.sin(e),c=i*u-o*a,l=o*s-r*u,f=r*a-i*s,d=Math.sqrt(c*c+l*l+f*f),h=r*s+i*a+o*u,p=d&&-K(h)/d,v=Math.atan2(d,h);_s+=p*c,Ss+=p*l,$s+=p*f,gs+=v,ws+=v*(r+(r=s)),xs+=v*(i+(i=a)),Es+=v*(o+(o=u)),de(r,i,o)}var e,n,r,i,o;Ts.point=function(s,a){e=s,n=a,Ts.point=t,s*=Oo;var u=Math.cos(a*=Oo);r=u*Math.cos(s),i=u*Math.sin(s),o=Math.sin(a),de(r,i,o)},Ts.lineEnd=function(){t(e,n),Ts.lineEnd=pe,Ts.point=fe}}function ge(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function me(){return!0}function ye(t,e,n,r,i){var o=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(le(n,r)){i.lineStart();for(var a=0;a<e;++a)i.point((n=t[a])[0],n[1]);i.lineEnd()}else{var u=new we(n,t,null,!0),c=new we(n,null,u,!1);u.o=c,o.push(u),s.push(c),c=new we(r,null,u=new we(r,t,null,!1),!0),u.o=c,o.push(u),s.push(c)}}}),s.sort(e),be(o),be(s),o.length){for(var a=0,u=n,c=s.length;a<c;++a)s[a].e=u=!u;for(var l,f,d=o[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,c=l.length;a<c;++a)i.point((f=l[a])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(a=(l=h.p.z).length-1;a>=0;--a)i.point((f=l[a])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function be(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function we(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function xe(t,e,n,r){return function(i,o){function s(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function a(t,e){var n=i(t,e);g.point(n[0],n[1])}function u(){y.point=a,g.lineStart()}function c(){y.point=s,g.lineEnd()}function l(t,e){v.push([t,e]);var n=i(t,e);w.point(n[0],n[1])}function f(){w.lineStart(),v=[]}function d(){l(v[0][0],v[0][1]),w.lineEnd();var t,e=w.clean(),n=b.buffer(),r=n.length;if(v.pop(),p.push(v),v=null,r)if(1&e){var i,s=-1;if((r=(t=n[0]).length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++s<r;)o.point((i=t[s])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Ee))}var h,p,v,g=e(o),m=i.invert(r[0],r[1]),y={point:s,lineStart:u,lineEnd:c,polygonStart:function(){y.point=l,y.lineStart=f,y.lineEnd=d,h=[],p=[]},polygonEnd:function(){y.point=s,y.lineStart=u,y.lineEnd=c,h=Ji.merge(h);var t=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,s=0;hs.reset();for(var a=0,u=e.length;a<u;++a){var c=e[a],l=c.length;if(l)for(var f=c[0],d=f[0],h=f[1]/2+Ao/4,p=Math.sin(h),v=Math.cos(h),g=1;;){g===l&&(g=0);var m=(t=c[g])[0],y=t[1]/2+Ao/4,b=Math.sin(y),w=Math.cos(y),x=m-d,E=x>=0?1:-1,_=E*x,S=_>Ao,$=p*b;if(hs.add(Math.atan2($*E*Math.sin(_),v*w+$*Math.cos(_))),o+=S?x+E*Ro:x,S^d>=n^m>=n){var T=oe(re(f),re(t));ue(T);var k=oe(i,T);ue(k);var C=(S^x>=0?-1:1)*Q(k[2]);(r>C||r===C&&(T[0]||T[1]))&&(s+=S^x>=0?1:-1)}if(!g++)break;d=m,p=b,v=w,f=t}}return(o<-ko||o<ko&&hs<-ko)^1&s}(m,p);h.length?(x||(o.polygonStart(),x=!0),ye(h,Se,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),h=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=_e(),w=e(b),x=!1;return y}}function Ee(t){return t.length>1}function _e(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:w,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Se(t,e){return((t=t.x)[0]<0?t[1]-Io-ko:Io-t[1])-((e=e.x)[0]<0?e[1]-Io-ko:Io-e[1])}function $e(t,e,n,r){return function(i){var o,s=i.a,a=i.b,u=s.x,c=s.y,l=0,f=1,d=a.x-u,h=a.y-c;if(o=t-u,d||!(o>0)){if(o/=d,d<0){if(o<l)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>l&&(l=o)}if(o=n-u,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>l&&(l=o)}else if(d>0){if(o<l)return;o<f&&(f=o)}if(o=e-c,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>l&&(l=o)}if(o=r-c,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<f&&(f=o)}return l>0&&(i.a={x:u+l*d,y:c+l*h}),f<1&&(i.b={x:u+f*d,y:c+f*h}),i}}}}}}function Te(t,e,n,r){function i(r,i){return co(r[0]-t)<ko?i>0?0:3:co(r[0]-n)<ko?i>0?2:1:co(r[1]-e)<ko?i>0?1:0:i>0?3:2}function o(t,e){return s(t.x,e.x)}function s(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(o,a,u,c){var l=0,f=0;if(null==o||(l=i(o,u))!==(f=i(a,u))||s(o,a)<0^u>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+u+4)%4)!==f);else c.point(a[0],a[1])}function c(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function l(t,e){c(t,e)&&a.point(t,e)}function f(t,e){var n=c(t=Math.max(-Cs,Math.min(Cs,t)),e=Math.max(-Cs,Math.min(Cs,e)));if(h&&p.push([t,e]),x)v=t,g=e,m=n,x=!1,n&&(a.lineStart(),a.point(t,e));else if(n&&w)a.point(t,e);else{var r={a:{x:y,y:b},b:{x:t,y:e}};$(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),n||a.lineEnd(),E=!1):n&&(a.lineStart(),a.point(t,e),E=!1)}y=t,b=e,w=n}var d,h,p,v,g,m,y,b,w,x,E,_=a,S=_e(),$=$e(t,e,n,r),T={point:l,lineStart:function(){T.point=f,h&&h.push(p=[]),x=!0,w=!1,y=b=NaN},lineEnd:function(){d&&(f(v,g),m&&w&&S.rejoin(),d.push(S.buffer())),T.point=l,w&&a.lineEnd()},polygonStart:function(){a=S,d=[],h=[],E=!0},polygonEnd:function(){a=_,d=Ji.merge(d);var e=function(t){for(var e=0,n=h.length,r=t[1],i=0;i<n;++i)for(var o,s=1,a=h[i],u=a.length,c=a[0];s<u;++s)o=a[s],c[1]<=r?o[1]>r&&X(c,o,t)>0&&++e:o[1]<=r&&X(c,o,t)<0&&--e,c=o;return 0!==e}([t,r]),n=E&&e,i=d.length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),u(null,null,1,a),a.lineEnd()),i&&ye(d,o,e,u,a),a.polygonEnd()),d=h=p=null}};return T}}function ke(t){var e=0,n=Ao/3,r=qe(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ao/180,n=t[1]*Ao/180):[e/Ao*180,n/Ao*180]},i}function Ce(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),s-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),s=Math.sqrt(o)/i;return n.invert=function(t,e){var n=s-e;return[Math.atan2(t,n)/i,Q((o-(t*t+n*n)*i*i)/(2*i))]},n}function Ae(){function t(t,e){Rs+=i*t-r*e,r=t,i=e}var e,n,r,i;Ls.point=function(o,s){Ls.point=t,e=r=o,n=i=s},Ls.lineEnd=function(){t(e,n)}}function Re(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Me(t,e){ms+=t,ys+=e,++bs}function Ie(){function t(t,r){var i=t-e,o=r-n,s=Math.sqrt(i*i+o*o);ws+=s*(e+t)/2,xs+=s*(n+r)/2,Es+=s,Me(e=t,n=r)}var e,n;Ps.point=function(r,i){Ps.point=t,Me(e=r,n=i)}}function Oe(){Ps.point=Me}function Ne(){function t(t,e){var n=t-r,o=e-i,s=Math.sqrt(n*n+o*o);ws+=s*(r+t)/2,xs+=s*(i+e)/2,Es+=s,_s+=(s=i*t-r*e)*(r+t),Ss+=s*(i+e),$s+=3*s,Me(r=t,i=e)}var e,n,r,i;Ps.point=function(o,s){Ps.point=t,Me(e=r=o,n=i=s)},Ps.lineEnd=function(){t(e,n)}}function Le(t){function e(e){return(o?function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){y=NaN,_.point=s,e.lineStart()}function s(r,i){var s=re([r,i]),a=t(r,i);n(y,b,m,w,x,E,y=a[0],b=a[1],m=r,w=s[0],x=s[1],E=s[2],o,e),e.point(y,b)}function a(){_.point=r,e.lineEnd()}function u(){i(),_.point=c,_.lineEnd=l}function c(t,e){s(f=t,e),d=y,h=b,p=w,v=x,g=E,_.point=s}function l(){n(y,b,m,w,x,E,d,h,f,p,v,g,o,e),_.lineEnd=a,a()}var f,d,h,p,v,g,m,y,b,w,x,E,_={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),_.lineStart=u},polygonEnd:function(){e.polygonEnd(),_.lineStart=i}};return _}:function(e){return Pe(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})})(e)}function n(e,o,s,a,u,c,l,f,d,h,p,v,g,m){var y=l-e,b=f-o,w=y*y+b*b;if(w>4*r&&g--){var x=a+h,E=u+p,_=c+v,S=Math.sqrt(x*x+E*E+_*_),$=Math.asin(_/=S),T=co(co(_)-1)<ko||co(s-d)<ko?(s+d)/2:Math.atan2(E,x),k=t(T,$),C=k[0],A=k[1],R=C-e,M=A-o,I=b*R-y*M;(I*I/w>r||co((y*R+b*M)/w-.5)>.3||a*h+u*p+c*v<i)&&(n(e,o,s,a,u,c,C,A,T,x/=S,E/=S,_,g,m),m.point(C,A),n(C,A,T,x,E,_,l,f,d,h,p,v,g,m))}}var r=.5,i=Math.cos(30*Oo),o=16;return e.precision=function(t){return arguments.length?(o=(r=t*t)>0&&16,e):Math.sqrt(r)},e}function De(t){this.stream=t}function Pe(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Ve(t){return qe(function(){return t})()}function qe(t){function e(t){return t=s(t[0]*Oo,t[1]*Oo),[t[0]*f+a,u-t[1]*f]}function n(){s=ge(o=je(g,m,b),i);var t=i(p,v);return a=d-t[0]*f,u=h+t[1]*f,r()}function r(){return c&&(c.valid=!1,c=null),e}var i,o,s,a,u,c,l=Le(function(t,e){return t=i(t,e),[t[0]*f+a,u-t[1]*f]}),f=150,d=480,h=250,p=0,v=0,g=0,m=0,b=0,w=ks,x=y,E=null,_=null;return e.stream=function(t){return c&&(c.valid=!1),c=Fe(w(o,l(x(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(E=t,ks):function(t){function e(t,e){return Math.cos(t)*Math.cos(e)>i}function n(t,e,n){var r=[1,0,0],o=oe(re(t),re(e)),s=ie(o,o),a=o[0],u=s-a*a;if(!u)return!n&&t;var c=i*s/u,l=-i*a/u,f=oe(r,o),d=ae(r,c);se(d,ae(o,l));var h=f,p=ie(d,h),v=ie(h,h),g=p*p-v*(ie(d,d)-1);if(!(g<0)){var m=Math.sqrt(g),y=ae(h,(-p-m)/v);if(se(y,d),y=ce(y),!n)return y;var b,w=t[0],x=e[0],E=t[1],_=e[1];x<w&&(b=w,w=x,x=b);var S=x-w,$=co(S-Ao)<ko;if(!$&&_<E&&(b=E,E=_,_=b),$||S<ko?$?E+_>0^y[1]<(co(y[0]-w)<ko?E:_):E<=y[1]&&y[1]<=_:S>Ao^(w<=y[0]&&y[0]<=x)){var T=ae(h,(-p+m)/v);return se(T,d),[y,ce(T)]}}}function r(e,n){var r=o?t:Ao-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var i=Math.cos(t),o=i>0,s=co(i)>ko;return xe(e,function(t){var i,a,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(f,d){var h,p=[f,d],v=e(f,d),g=o?v?0:r(f,d):v?r(f+(f<0?Ao:-Ao),d):0;if(!i&&(c=u=v)&&t.lineStart(),v!==u&&(h=n(i,p),(le(i,h)||le(p,h))&&(p[0]+=ko,p[1]+=ko,v=e(p[0],p[1]))),v!==u)l=0,v?(t.lineStart(),h=n(p,i),t.point(h[0],h[1])):(h=n(i,p),t.point(h[0],h[1]),t.lineEnd()),i=h;else if(s&&i&&o^v){var m;g&a||!(m=n(p,i,!0))||(l=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||i&&le(i,p)||t.point(p[0],p[1]),i=p,u=v,a=g},lineEnd:function(){u&&t.lineEnd(),i=null},clean:function(){return l|(c&&u)<<1}}},Ge(t,6*Oo),o?[0,-t]:[-Ao,t-Ao])}((E=+t)*Oo),r()):E},e.clipExtent=function(t){return arguments.length?(_=t,x=t?Te(t[0][0],t[0][1],t[1][0],t[1][1]):y,r()):_},e.scale=function(t){return arguments.length?(f=+t,n()):f},e.translate=function(t){return arguments.length?(d=+t[0],h=+t[1],n()):[d,h]},e.center=function(t){return arguments.length?(p=t[0]%360*Oo,v=t[1]%360*Oo,n()):[p*No,v*No]},e.rotate=function(t){return arguments.length?(g=t[0]%360*Oo,m=t[1]%360*Oo,b=t.length>2?t[2]%360*Oo:0,n()):[g*No,m*No,b*No]},Ji.rebind(e,l,"precision"),function(){return i=t.apply(this,arguments),e.invert=i.invert&&function(t){return(t=s.invert((t[0]-a)/f,(u-t[1])/f))&&[t[0]*No,t[1]*No]},n()}}function Fe(t){return Pe(t,function(e,n){t.point(e*Oo,n*Oo)})}function Ue(t,e){return[t,e]}function Be(t,e){return[t>Ao?t-Ro:t<-Ao?t+Ro:t,e]}function je(t,e,n){return t?e||n?ge(ze(t),We(e,n)):ze(t):e||n?We(e,n):Be}function He(t){return function(e,n){return e+=t,[e>Ao?e-Ro:e<-Ao?e+Ro:e,n]}}function ze(t){var e=He(t);return e.invert=He(-t),e}function We(t,e){function n(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,c=Math.sin(e),l=c*r+a*i;return[Math.atan2(u*o-l*s,a*r-c*i),Q(l*o+u*s)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),s=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,c=Math.sin(e),l=c*o-u*s;return[Math.atan2(u*o+c*s,a*r+l*i),Q(l*r-a*i)]},n}function Ge(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,s,a){var u=s*e;null!=i?(i=Ze(n,i),o=Ze(n,o),(s>0?i<o:i>o)&&(i+=s*Ro)):(i=t+s*Ro,o=t-.5*u);for(var c,l=i;s>0?l>o:l<o;l-=u)a.point((c=ce([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],c[1])}}function Ze(t,e){var n=re(e);n[0]-=t,ue(n);var r=K(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-ko)%(2*Math.PI)}function Ye(t,e,n){var r=Ji.range(t,e-ko,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Xe(t,e,n){var r=Ji.range(t,e-ko,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Ke(t){return t.source}function Qe(t){return t.target}function Je(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),s=Math.cos(i);return[Math.atan2(t*o,r*s),Math.asin(r&&n*o/r)]},n}function tn(t,e){function n(t,e){s>0?e<-Io+ko&&(e=-Io+ko):e>Io-ko&&(e=Io-ko);var n=s/Math.pow(i(e),o);return[n*Math.sin(o*t),s-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Ao/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),s=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=s-e,r=Y(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(s/r,1/o))-Io]},n):nn}function en(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return co(i)<ko?Ue:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-Y(i)*Math.sqrt(t*t+n*n)]},n)}function nn(t,e){return[t,Math.log(Math.tan(Ao/4+e/2))]}function rn(t){var e,n=Ve(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var s=o.apply(n,arguments);if(s===n){if(e=null==t){var a=Ao*r(),u=i();o([[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]])}}else e&&(s=null);return s},n.clipExtent(null)}function on(t,e){return[Math.log(Math.tan(Ao/4+e/2)),-t]}function sn(t){return t[0]}function an(t){return t[1]}function un(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&X(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function cn(t,e){return t[0]-e[0]||t[1]-e[1]}function ln(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function fn(t,e,n,r){var i=t[0],o=n[0],s=e[0]-i,a=r[0]-o,u=t[1],c=n[1],l=e[1]-u,f=r[1]-c,d=(a*(u-c)-f*(i-o))/(f*s-a*l);return[i+d*s,u+d*l]}function dn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function hn(t){var e=Ks.pop()||new function(){Cn(this),this.edge=this.site=this.circle=null};return e.site=t,e}function pn(t){En(t),Zs.remove(t),Ks.push(t),Cn(t)}function vn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,s=t.N,a=[t];pn(t);for(var u=o;u.circle&&co(n-u.circle.x)<ko&&co(r-u.circle.cy)<ko;)o=u.P,a.unshift(u),pn(u),u=o;a.unshift(u),En(u);for(var c=s;c.circle&&co(n-c.circle.x)<ko&&co(r-c.circle.cy)<ko;)s=c.N,a.push(c),pn(c),c=s;a.push(c),En(c);var l,f=a.length;for(l=1;l<f;++l)c=a[l],u=a[l-1],$n(c.edge,u.site,c.site,i);u=a[0],(c=a[f-1]).edge=Sn(u.site,c.site,null,i),xn(u),xn(c)}function gn(t){for(var e,n,r,i,o=t.x,s=t.y,a=Zs._;a;)if((r=mn(a,s)-o)>ko)a=a.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return mn(n,e);var r=t.site;return r.y===e?r.x:1/0}(a,s))>ko)){r>-ko?(e=a.P,n=a):i>-ko?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}var u=hn(t);if(Zs.insert(e,u),e||n){if(e===n)return En(e),n=hn(e.site),Zs.insert(u,n),u.edge=n.edge=Sn(e.site,u.site),xn(e),void xn(n);if(n){En(e),En(n);var c=e.site,l=c.x,f=c.y,d=t.x-l,h=t.y-f,p=n.site,v=p.x-l,g=p.y-f,m=2*(d*g-h*v),y=d*d+h*h,b=v*v+g*g,w={x:(g*y-h*b)/m+l,y:(d*b-v*y)/m+f};$n(n.edge,c,p,w),u.edge=Sn(c,t,null,w),n.edge=Sn(t,p,null,w),xn(e),xn(n)}else u.edge=Sn(e.site,u.site)}}function mn(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site).x,u=n.y,c=u-e;if(!c)return a;var l=a-r,f=1/o-1/c,d=l/c;return f?(-d+Math.sqrt(d*d-2*f*(l*l/(-2*c)-u+c/2+i-o/2)))/f+r:(r+a)/2}function yn(t){this.site=t,this.edges=[]}function bn(t){for(var e,n,r,i,o,s,a,u,c,l,f=t[0][0],d=t[1][0],h=t[0][1],p=t[1][1],v=Gs,g=v.length;g--;)if((o=v[g])&&o.prepare())for(u=(a=o.edges).length,s=0;s<u;)r=(l=a[s].end()).x,i=l.y,e=(c=a[++s%u].start()).x,n=c.y,(co(r-e)>ko||co(i-n)>ko)&&(a.splice(s,0,new Tn(function(t,e,n){var r=new _n(t,null);return r.a=e,r.b=n,Ws.push(r),r}(o.site,l,co(r-f)<ko&&p-i>ko?{x:f,y:co(e-f)<ko?n:p}:co(i-p)<ko&&d-r>ko?{x:co(n-p)<ko?e:d,y:p}:co(r-d)<ko&&i-h>ko?{x:d,y:co(e-d)<ko?n:h}:co(i-h)<ko&&r-f>ko?{x:co(n-h)<ko?e:f,y:h}:null),o.site,null)),++u)}function wn(t,e){return e.angle-t.angle}function xn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i.x,a=i.y,u=r.x-s,c=r.y-a,l=o.x-s,f=2*(u*(g=o.y-a)-c*l);if(!(f>=-Co)){var d=u*u+c*c,h=l*l+g*g,p=(g*d-c*h)/f,v=(u*h-l*d)/f,g=v+a,m=Qs.pop()||new function(){Cn(this),this.x=this.y=this.arc=this.site=this.cy=null};m.arc=t,m.site=i,m.x=p+s,m.y=g+Math.sqrt(p*p+v*v),m.cy=g,t.circle=m;for(var y=null,b=Xs._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Xs.insert(y,m),y||(Ys=m)}}}}function En(t){var e=t.circle;e&&(e.P||(Ys=e.N),Xs.remove(e),Qs.push(e),Cn(e),t.circle=null)}function _n(t,e){this.l=t,this.r=e,this.a=this.b=null}function Sn(t,e,n,r){var i=new _n(t,e);return Ws.push(i),n&&$n(i,t,e,n),r&&$n(i,e,t,r),Gs[t.i].edges.push(new Tn(i,t,e)),Gs[e.i].edges.push(new Tn(i,e,t)),i}function $n(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Tn(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function kn(){this._=null}function Cn(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function An(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Rn(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Mn(t){for(;t.L;)t=t.L;return t}function In(t,e){var n,r,i,o=t.sort(On).pop();for(Ws=[],Gs=new Array(t.length),Zs=new kn,Xs=new kn;;)if(i=Ys,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(Gs[o.i]=new yn(o),gn(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;vn(i.arc)}e&&(function(t){for(var e,n=Ws,r=$e(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!function(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,s=e[0][0],a=e[1][0],u=e[0][1],c=e[1][1],l=t.l,f=t.r,d=l.x,h=l.y,p=f.x,v=f.y,g=(d+p)/2,m=(h+v)/2;if(v===h){if(g<s||g>=a)return;if(d>p){if(o){if(o.y>=c)return}else o={x:g,y:u};n={x:g,y:c}}else{if(o){if(o.y<u)return}else o={x:g,y:c};n={x:g,y:u}}}else if(r=(d-p)/(v-h),i=m-r*g,r<-1||r>1)if(d>p){if(o){if(o.y>=c)return}else o={x:(u-i)/r,y:u};n={x:(c-i)/r,y:c}}else{if(o){if(o.y<u)return}else o={x:(c-i)/r,y:c};n={x:(u-i)/r,y:u}}else if(h<v){if(o){if(o.x>=a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}else{if(o){if(o.x<s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}return t.a=o,t.b=n,!0}(e=n[i],t)||!r(e)||co(e.a.x-e.b.x)<ko&&co(e.a.y-e.b.y)<ko)&&(e.a=e.b=null,n.splice(i,1))}(e),bn(e));var s={cells:Gs,edges:Ws};return Zs=Xs=Ws=Gs=null,s}function On(t,e){return e.y-t.y||e.x-t.x}function Nn(t){return t.x}function Ln(t){return t.y}function Dn(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var s=.5*(n+i),a=.5*(r+o),u=e.nodes;u[0]&&Dn(t,u[0],n,r,s,a),u[1]&&Dn(t,u[1],s,r,i,a),u[2]&&Dn(t,u[2],n,a,s,o),u[3]&&Dn(t,u[3],s,a,i,o)}}function Pn(t,e){t=Ji.rgb(t),e=Ji.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,s=e.g-r,a=e.b-i;return function(t){return"#"+vt(Math.round(n+o*t))+vt(Math.round(r+s*t))+vt(Math.round(i+a*t))}}function Vn(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Un(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function qn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Fn(t,e){var n,r,i,o=ta.lastIndex=ea.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=ta.exec(t))&&(r=ea.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:qn(n,r)})),o=ea.lastIndex;return o<e.length&&(i=e.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;r<e;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})}function Un(t,e){for(var n,r=Ji.interpolators.length;--r>=0&&!(n=Ji.interpolators[r](t,e)););return n}function Bn(t,e){var n,r=[],i=[],o=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;n<a;++n)r.push(Un(t[n],e[n]));for(;n<o;++n)i[n]=t[n];for(;n<s;++n)i[n]=e[n];return function(t){for(n=0;n<a;++n)i[n]=r[n](t);return i}}function jn(t){return function(e){return 1-t(1-e)}}function Hn(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function zn(t){return t*t}function Wn(t){return t*t*t}function Gn(t){return 1-Math.cos(t*Io)}function Zn(t){return Math.pow(2,10*(t-1))}function Yn(t){return 1-Math.sqrt(1-t*t)}function Xn(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Kn(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Qn(t){var e=[t.a,t.b],n=[t.c,t.d],r=tr(e),i=Jn(e,n),o=tr(function(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*No,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*No:0}function Jn(t,e){return t[0]*e[0]+t[1]*e[1]}function tr(t){var e=Math.sqrt(Jn(t,t));return e&&(t[0]/=e,t[1]/=e),e}function er(t){return t.length?t.pop()+",":""}function nr(t,e){var n=[],r=[];return t=Ji.transform(t),e=Ji.transform(e),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:qn(t[0],e[0])},{i:i-2,x:qn(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,r),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(er(n)+"rotate(",null,")")-2,x:qn(t,e)})):e&&n.push(er(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,r),function(t,e,n,r){t!==e?r.push({i:n.push(er(n)+"skewX(",null,")")-2,x:qn(t,e)}):e&&n.push(er(n)+"skewX("+e+")")}(t.skew,e.skew,n,r),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(er(n)+"scale(",null,",",null,")");r.push({i:i-4,x:qn(t[0],e[0])},{i:i-2,x:qn(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(er(n)+"scale("+e+")")}(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,o=r.length;++i<o;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function rr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function ir(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function or(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;var n=sr(t),r=sr(e),i=n.pop(),o=r.pop(),s=null;for(;i===o;)s=i,i=n.pop(),o=r.pop();return s}(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function sr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function ar(t){t.fixed|=2}function ur(t){t.fixed&=-7}function cr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function lr(t){t.fixed&=-5}function fr(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,a=s.length,u=-1;++u<a;)null!=(o=s[u])&&(fr(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=e*n[t.point.index];t.charge+=t.pointCharge=c,r+=c*t.point.x,i+=c*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function dr(t,e){return Ji.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=yr,t}function hr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function pr(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,s=-1;++s<i;)n.push(o[s]);for(;null!=(t=r.pop());)e(t)}function vr(t){return t.children}function gr(t){return t.value}function mr(t,e){return e.value-t.value}function yr(t){return Ji.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function br(t){return t.x}function wr(t){return t.y}function xr(t,e,n){t.y0=e,t.y=n}function Er(t){return Ji.range(t.length)}function _r(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function Sr(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function $r(t){return t.reduce(Tr,0)}function Tr(t,e){return t+e[1]}function kr(t,e){return Cr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Cr(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function Ar(t){return[Ji.min(t),Ji.max(t)]}function Rr(t,e){return t.value-e.value}function Mr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Ir(t,e){t._pack_next=e,e._pack_prev=t}function Or(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Nr(t){function e(t){l=Math.min(t.x-t.r,l),f=Math.max(t.x+t.r,f),d=Math.min(t.y-t.r,d),h=Math.max(t.y+t.r,h)}if((n=t.children)&&(c=n.length)){var n,r,i,o,s,a,u,c,l=1/0,f=-1/0,d=1/0,h=-1/0;if(n.forEach(Lr),r=n[0],r.x=-r.r,r.y=0,e(r),c>1&&(i=n[1],i.x=i.r,i.y=0,e(i),c>2))for(Vr(r,i,o=n[2]),e(o),Mr(r,o),r._pack_prev=o,Mr(o,i),i=r._pack_next,s=3;s<c;s++){Vr(r,i,o=n[s]);var p=0,v=1,g=1;for(a=i._pack_next;a!==i;a=a._pack_next,v++)if(Or(a,o)){p=1;break}if(1==p)for(u=r._pack_prev;u!==a._pack_prev&&!Or(u,o);u=u._pack_prev,g++);p?(v<g||v==g&&i.r<r.r?Ir(r,i=a):Ir(r=u,i),s--):(Mr(r,o),i=o,e(o))}var m=(l+f)/2,y=(d+h)/2,b=0;for(s=0;s<c;s++)(o=n[s]).x-=m,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,n.forEach(Dr)}}function Lr(t){t._pack_next=t._pack_prev=t}function Dr(t){delete t._pack_next,delete t._pack_prev}function Pr(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,s=i.length;++o<s;)Pr(i[o],e,n,r)}function Vr(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var s=e.r+n.r,a=i*i+o*o,u=.5+((r*=r)-(s*=s))/(2*a),c=Math.sqrt(Math.max(0,2*s*(r+a)-(r-=a)*r-s*s))/(2*a);n.x=t.x+u*i+c*o,n.y=t.y+u*o-c*i}else n.x=t.x+r,n.y=t.y}function qr(t,e){return t.parent==e.parent?1:2}function Fr(t){var e=t.children;return e.length?e[0]:t.t}function Ur(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Br(t){var e=t.children;return e&&e.length?Br(e[0]):t}function jr(t){var e,n=t.children;return n&&(e=n.length)?jr(n[e-1]):t}function Hr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function zr(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Wr(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Gr(t){return t.rangeExtent?t.rangeExtent():Wr(t.range())}function Zr(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function Yr(t,e){var n,r=0,i=t.length-1,o=t[r],s=t[i];return s<o&&(n=r,r=i,i=n,n=o,o=s,s=n),t[r]=e.floor(o),t[i]=e.ceil(s),t}function Xr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:da}function Kr(t,e,n,r){var i=[],o=[],s=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=a;)i.push(n(t[s-1],t[s])),o.push(r(e[s-1],e[s]));return function(e){var n=Ji.bisect(t,e,1,a)-1;return o[n](i[n](e))}}function Qr(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Kr:Zr,u=r?ir:rr;return s=i(t,e,u,n),a=i(e,t,u,Un),o}function o(t){return s(t)}var s,a;return o.invert=function(t){return a(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(Kn)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return ni(t,e)},o.tickFormat=function(e,n){return ri(t,e,n)},o.nice=function(e){return ti(t,e),i()},o.copy=function(){return Qr(t,e,n,r)},i()}function Jr(t,e){return Ji.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ti(t,e){return Yr(t,Xr(ei(t,e)[2])),Yr(t,Xr(ei(t,e)[2])),t}function ei(t,e){null==e&&(e=10);var n=Wr(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function ni(t,e){return Ji.range.apply(Ji,ei(t,e))}function ri(t,e,n){var r=ei(t,e);if(n){var i=ts.exec(n);if(i.shift(),"s"===i[8]){var o=Ji.formatPrefix(Math.max(co(r[0]),co(r[1])));return i[7]||(i[7]="."+ii(o.scale(r[2]))),i[8]="f",n=Ji.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+function(t,e){var n=ii(e[2]);return t in ha?Math.abs(n-ii(Math.max(co(e[0]),co(e[1]))))+ +("e"!==t):n-2*("%"===t)}(i[8],r)),n=i.join("")}else n=",."+ii(r[2])+"f";return Ji.format(n)}function ii(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function oi(t,e,n,r){function i(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function s(e){return t(i(e))}return s.invert=function(e){return o(t.invert(e))},s.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),s):r},s.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),s):e},s.nice=function(){var e=Yr(r.map(i),n?Math:va);return t.domain(e),r=e.map(o),s},s.ticks=function(){var t=Wr(r),s=[],a=t[0],u=t[1],c=Math.floor(i(a)),l=Math.ceil(i(u)),f=e%1?2:e;if(isFinite(l-c)){if(n){for(;c<l;c++)for(var d=1;d<f;d++)s.push(o(c)*d);s.push(o(c))}else for(s.push(o(c));c++<l;)for(d=f-1;d>0;d--)s.push(o(c)*d);for(c=0;s[c]<a;c++);for(l=s.length;s[l-1]>u;l--);s=s.slice(c,l)}return s},s.tickFormat=function(t,n){if(!arguments.length)return pa;arguments.length<2?n=pa:"function"!=typeof n&&(n=Ji.format(n));var r=Math.max(1,e*t/s.ticks().length);return function(t){var s=t/o(Math.round(i(t)));return s*e<e-.5&&(s*=e),s<=r?n(t):""}},s.copy=function(){return oi(t.copy(),e,n,r)},Jr(s,t)}function si(t,e,n){function r(e){return t(i(e))}var i=ai(e),o=ai(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return ni(n,t)},r.tickFormat=function(t,e){return ri(n,t,e)},r.nice=function(t){return r.domain(ti(n,t))},r.exponent=function(s){return arguments.length?(i=ai(e=s),o=ai(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return si(t.copy(),e,n)},Jr(r,t)}function ai(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ui(t,e){function n(n){return o[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):NaN))-1)%o.length]}function r(e,n){return Ji.range(t.length).map(function(t){return e+n*t})}var i,o,s;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new c;for(var o,s=-1,a=r.length;++s<a;)i.has(o=r[s])||i.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,s=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,a){arguments.length<2&&(a=0);var u=i[0],c=i[1],l=t.length<2?(u=(u+c)/2,0):(c-u)/(t.length-1+a);return o=r(u+l*a/2,l),s=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,a){arguments.length<2&&(a=0);var u=i[0],c=i[1],l=t.length<2?(u=c=Math.round((u+c)/2),0):(c-u)/(t.length-1+a)|0;return o=r(u+Math.round(l*a/2+(c-u-(t.length-1+a)*l)/2),l),s=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var c=i[1]<i[0],l=i[c-0],f=(i[1-c]-l)/(t.length-a+2*u);return o=r(l+f*u,f),c&&o.reverse(),s=f*(1-a),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var c=i[1]<i[0],l=i[c-0],f=i[1-c],d=Math.floor((f-l)/(t.length-a+2*u));return o=r(l+Math.round((f-l-(t.length-a)*d)/2),d),c&&o.reverse(),s=Math.round(d*(1-a)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Wr(e.a[0])},n.copy=function(){return ui(t,e)},n.domain(t)}function ci(t,e){function n(){var n=0,r=e.length;for(a=[];++n<r;)a[n-1]=Ji.quantile(t,n/r);return s}function s(t){if(!isNaN(t=+t))return e[Ji.bisect(a,t)]}var a;return s.domain=function(e){return arguments.length?(t=e.map(i).filter(o).sort(r),n()):t},s.range=function(t){return arguments.length?(e=t,n()):e},s.quantiles=function(){return a},s.invertExtent=function(n){return(n=e.indexOf(n))<0?[NaN,NaN]:[n>0?a[n-1]:t[0],n<a.length?a[n]:t[t.length-1]]},s.copy=function(){return ci(t,e)},n()}function li(t,e,n){function r(e){return n[Math.max(0,Math.min(s,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),s=n.length-1,r}var o,s;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=e<0?NaN:e/o+t,[e,e+1/o]},r.copy=function(){return li(t,e,n)},i()}function fi(t,e){function n(n){if(n<=n)return e[Ji.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return fi(t,e)},n}function di(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return ni(t,e)},e.tickFormat=function(e,n){return ri(t,e,n)},e.copy=function(){return di(t)},e}function hi(){return 0}function pi(t){return t.innerRadius}function vi(t){return t.outerRadius}function gi(t){return t.startAngle}function mi(t){return t.endAngle}function yi(t){return t&&t.padAngle}function bi(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function wi(t,e,n,r,i){var o=t[0]-e[0],s=t[1]-e[1],a=(i?r:-r)/Math.sqrt(o*o+s*s),u=a*s,c=-a*o,l=t[0]+u,f=t[1]+c,d=e[0]+u,h=e[1]+c,p=(l+d)/2,v=(f+h)/2,g=d-l,m=h-f,y=g*g+m*m,b=n-r,w=l*h-d*f,x=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-w*w)),E=(w*m-g*x)/y,_=(-w*g-m*x)/y,S=(w*m+g*x)/y,$=(-w*g+m*x)/y,T=E-p,k=_-v,C=S-p,A=$-v;return T*T+k*k>C*C+A*A&&(E=S,_=$),[[E-u,_-c],[E*n/b,_*n/b]]}function xi(t){function e(e){function s(){c.push("M",o(t(l),a))}for(var u,c=[],l=[],f=-1,d=e.length,h=xt(n),p=xt(r);++f<d;)i.call(this,u=e[f],f)?l.push([+h.call(this,u,f),+p.call(this,u,f)]):l.length&&(s(),l=[]);return l.length&&s(),c.length?c.join(""):null}var n=sn,r=an,i=me,o=Ei,s=o.key,a=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=xa.get(t)||Ei).key,e):s},e.tension=function(t){return arguments.length?(a=t,e):a},e}function Ei(t){return t.length>1?t.join("L"):t+"Z"}function _i(t){return t.join("L")+"Z"}function Si(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function $i(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Ti(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ei(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],s=e[0],a=s,u=1;if(n&&(r+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],i=t[1],u=2),e.length>1){a=e[1],o=t[u],u++,r+="C"+(i[0]+s[0])+","+(i[1]+s[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var c=2;c<e.length;c++,u++)o=t[u],a=e[c],r+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}if(n){var l=t[u];r+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+l[0]+","+l[1]}return r}function ki(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],s=t[1],a=1,u=t.length;++a<u;)n=o,o=s,s=t[a],r.push([i*(s[0]-n[0]),i*(s[1]-n[1])]);return r}function Ci(t){if(t.length<3)return Ei(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],s=[i,i,i,(r=t[1])[0]],a=[o,o,o,r[1]],u=[i,",",o,"L",Ai(Sa,s),",",Ai(Sa,a)];for(t.push(t[n-1]);++e<=n;)r=t[e],s.shift(),s.push(r[0]),a.shift(),a.push(r[1]),Ri(u,s,a);return t.pop(),u.push("L",r),u.join("")}function Ai(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ri(t,e,n){t.push("C",Ai(Ea,e),",",Ai(Ea,n),",",Ai(_a,e),",",Ai(_a,n),",",Ai(Sa,e),",",Ai(Sa,n))}function Mi(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ii(t){for(var e,n,r,i,o=[],s=function(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],s=r[0]=Mi(i,o);++e<n;)r[e]=(s+(s=Mi(i=o,o=t[e+1])))/2;return r[e]=s,r}(t),a=-1,u=t.length-1;++a<u;)e=Mi(t[a],t[a+1]),co(e)<ko?s[a]=s[a+1]=0:(i=(n=s[a]/e)*n+(r=s[a+1]/e)*r)>9&&(i=3*e/Math.sqrt(i),s[a]=i*n,s[a+1]=i*r);for(a=-1;++a<=u;)i=(t[Math.min(u,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),o.push([i||0,s[a]*i||0]);return o}function Oi(t){for(var e,n,r,i=-1,o=t.length;++i<o;)n=(e=t[i])[0],r=e[1]-Io,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Ni(t){function e(e){function u(){v.push("M",a(t(m),f),l,c(t(g.reverse()),f),"Z")}for(var d,h,p,v=[],g=[],m=[],y=-1,b=e.length,w=xt(n),x=xt(i),E=n===r?function(){return h}:xt(r),_=i===o?function(){return p}:xt(o);++y<b;)s.call(this,d=e[y],y)?(g.push([h=+w.call(this,d,y),p=+x.call(this,d,y)]),m.push([+E.call(this,d,y),+_.call(this,d,y)])):g.length&&(u(),g=[],m=[]);return g.length&&u(),v.length?v.join(""):null}var n=sn,r=sn,i=0,o=an,s=me,a=Ei,u=a.key,c=a,l="L",f=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(s=t,e):s},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?a=t:(a=xa.get(t)||Ei).key,c=a.reverse||a,l=a.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(f=t,e):f},e}function Li(t){return t.radius}function Di(t){return[t.x,t.y]}function Pi(){return 64}function Vi(){return"circle"}function qi(t){var e=Math.sqrt(t/Ao);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Fi(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ui(t,e,n){return vo(t,Ma),t.namespace=e,t.id=n,t}function Bi(t,e,n,r){var i=t.id,o=t.namespace;return U(t,"function"==typeof n?function(t,s,a){t[o][i].tween.set(e,r(n.call(t,t.__data__,s,a)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function ji(t){return null==t&&(t=""),function(){this.textContent=t}}function Hi(t){return null==t?"__transition__":"__transition_"+t+"__"}function zi(t,e,n,r,i){function o(n){var i=h.active,o=h[i];o&&(o.timer.c=null,o.timer.t=NaN,--h.count,delete h[i],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var c in h)if(+c<r){var v=h[c];v.timer.c=null,v.timer.t=NaN,--h.count,delete h[c]}u.c=s,St(function(){return u.c&&s(n||1)&&(u.c=null,u.t=NaN),1},0,a),h.active=r,p.event&&p.event.start.call(t,t.__data__,e),d=[],p.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&d.push(r)}),f=p.ease,l=p.duration}function s(i){for(var o=i/l,s=f(o),a=d.length;a>0;)d[--a].call(t,s);if(o>=1)return p.event&&p.event.end.call(t,t.__data__,e),--h.count?delete h[r]:delete t[n],1}var a,u,l,f,d,h=t[n]||(t[n]={active:0,count:0}),p=h[r];p||(a=i.time,u=St(function(t){var e=p.delay;if(u.t=e+a,e<=t)return o(t-e);u.c=o},0,a),p=h[r]={tween:new c,time:a,timer:u,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++h.count)}function Wi(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Gi(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function Zi(t){return t.toISOString()}function Yi(t,e,n){function r(e){return t(e)}function i(t,n){var r=(t[1]-t[0])/n,i=Ji.bisect(Fa,r);return i==Fa.length?[e.year,ei(t.map(function(t){return t/31536e6}),n)[2]]:i?e[r/Fa[i-1]<Fa[i]/r?i-1:i]:[ja,ei(t,n)[2]]}return r.invert=function(e){return Xi(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Xi)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Xi(+n+1),e).length}var o=r.domain(),s=Wr(o),a=null==t?i(s,10):"number"==typeof t&&i(s,t);return a&&(t=a[0],e=a[1]),r.domain(Yr(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Xi(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Xi(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Wr(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Xi(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Yi(t.copy(),e,n)},Jr(r,t)}function Xi(t){return new Date(t)}function Ki(t){return JSON.parse(t.responseText)}function Qi(t){var e=no.createRange();return e.selectNode(no.body),e.createContextualFragment(t.responseText)}var Ji={version:"3.5.17"},to=[].slice,eo=function(t){return to.call(t)},no=this.document;if(no)try{eo(no.documentElement.childNodes)[0].nodeType}catch(t){eo=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),no)try{no.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var ro=this.Element.prototype,io=ro.setAttribute,oo=ro.setAttributeNS,so=this.CSSStyleDeclaration.prototype,ao=so.setProperty;ro.setAttribute=function(t,e){io.call(this,t,e+"")},ro.setAttributeNS=function(t,e,n){oo.call(this,t,e,n+"")},so.setProperty=function(t,e,n){ao.call(this,t,e+"",n)}}Ji.ascending=r,Ji.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Ji.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},Ji.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},Ji.extent=function(t,e){var n,r,i,o=-1,s=t.length;if(1===arguments.length){for(;++o<s;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<s;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<s;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<s;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},Ji.sum=function(t,e){var n,r=0,i=t.length,s=-1;if(1===arguments.length)for(;++s<i;)o(n=+t[s])&&(r+=n);else for(;++s<i;)o(n=+e.call(t,t[s],s))&&(r+=n);return r},Ji.mean=function(t,e){var n,r=0,s=t.length,a=-1,u=s;if(1===arguments.length)for(;++a<s;)o(n=i(t[a]))?r+=n:--u;else for(;++a<s;)o(n=i(e.call(t,t[a],a)))?r+=n:--u;if(u)return r/u},Ji.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},Ji.median=function(t,e){var n,s=[],a=t.length,u=-1;if(1===arguments.length)for(;++u<a;)o(n=i(t[u]))&&s.push(n);else for(;++u<a;)o(n=i(e.call(t,t[u],u)))&&s.push(n);if(s.length)return Ji.quantile(s.sort(r),.5)},Ji.variance=function(t,e){var n,r,s=t.length,a=0,u=0,c=-1,l=0;if(1===arguments.length)for(;++c<s;)o(n=i(t[c]))&&(u+=(r=n-a)*(n-(a+=r/++l)));else for(;++c<s;)o(n=i(e.call(t,t[c],c)))&&(u+=(r=n-a)*(n-(a+=r/++l)));if(l>1)return u/(l-1)},Ji.deviation=function(){var t=Ji.variance.apply(this,arguments);return t?Math.sqrt(t):t};var uo=s(r);Ji.bisectLeft=uo.left,Ji.bisect=Ji.bisectRight=uo.right,Ji.bisector=function(t){return s(1===t.length?function(e,n){return r(t(e),n)}:t)},Ji.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},Ji.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},Ji.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},Ji.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=Ji.min(t,a),r=new Array(n);++e<n;)for(var i,o=-1,s=r[e]=new Array(i);++o<i;)s[o]=t[o][e];return r},Ji.zip=function(){return Ji.transpose(arguments)},Ji.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Ji.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Ji.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Ji.merge=function(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n};var co=Math.abs;Ji.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],o=function(t){for(var e=1;t*e%1;)e*=10;return e}(co(n)),s=-1;if(t*=o,e*=o,(n*=o)<0)for(;(r=t+n*++s)>e;)i.push(r/o);else for(;(r=t+n*++s)<e;)i.push(r/o);return i},Ji.map=function(t,e){var n=new c;if(t instanceof c)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var s in t)n.set(s,t[s]);return n};var lo="__proto__",fo="\0";u(c,{has:d,get:function(t){return this._[l(t)]},set:function(t,e){return this._[l(t)]=e},remove:h,keys:p,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:f(e),value:this._[e]});return t},size:v,empty:g,forEach:function(t){for(var e in this._)t.call(this,f(e),this._[e])}}),Ji.nest=function(){function t(e,s,a){if(a>=o.length)return r?r.call(i,s):n?s.sort(n):s;for(var u,l,f,d,h=-1,p=s.length,v=o[a++],g=new c;++h<p;)(d=g.get(u=v(l=s[h])))?d.push(l):g.set(u,[l]);return e?(l=e(),f=function(n,r){l.set(n,t(e,r,a))}):(l={},f=function(n,r){l[n]=t(e,r,a)}),g.forEach(f),l}function e(t,n){if(n>=o.length)return t;var r=[],i=s[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},o=[],s=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(Ji.map,n,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return s[o.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},Ji.set=function(t){var e=new m;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},u(m,{has:d,add:function(t){return this._[l(t+="")]=!0,t},remove:h,values:p,size:v,empty:g,forEach:function(t){for(var e in this._)t.call(this,f(e))}}),Ji.behavior={},Ji.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=function(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}(t,e,e[n]);return t};var ho=["webkit","ms","moz","Moz","o","O"];Ji.dispatch=function(){for(var t=new x,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=E(t);return t},x.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},Ji.event=null,Ji.requote=function(t){return t.replace(po,"\\$&")};var po=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,vo={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},go=function(t,e){return e.querySelector(t)},mo=function(t,e){return e.querySelectorAll(t)},yo=function(t,e){var n=t.matches||t[b(t,"matchesSelector")];return(yo=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(go=function(t,e){return Sizzle(t,e)[0]||null},mo=Sizzle,yo=Sizzle.matchesSelector),Ji.selection=function(){return Ji.select(no.documentElement)};var bo=Ji.selection.prototype=[];bo.select=function(t){var e,n,r,i,o=[];t=k(t);for(var s=-1,a=this.length;++s<a;){o.push(e=[]),e.parentNode=(r=this[s]).parentNode;for(var u=-1,c=r.length;++u<c;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,s)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return T(o)},bo.selectAll=function(t){var e,n,r=[];t=C(t);for(var i=-1,o=this.length;++i<o;)for(var s=this[i],a=-1,u=s.length;++a<u;)(n=s[a])&&(r.push(e=eo(t.call(n,n.__data__,a,i))),e.parentNode=n);return T(r)};var wo="http://www.w3.org/1999/xhtml",xo={svg:"http://www.w3.org/2000/svg",xhtml:wo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Ji.ns={prefix:xo,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),xo.hasOwnProperty(n)?{space:xo[n],local:t}:t}},bo.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=Ji.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(A(e,t[e]));return this}return this.each(A(t,e))},bo.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=I(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!M(t[i]).test(e))return!1;return!0}for(e in t)this.each(O(e,t[e]));return this}return this.each(O(t,e))},bo.style=function(t,e,r){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(e="");for(r in t)this.each(L(r,t[r],e));return this}if(i<2){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(L(t,e,r))},bo.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(D(e,t[e]));return this}return this.each(D(t,e))},bo.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},bo.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},bo.append=function(t){return t=P(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},bo.insert=function(t,e){return t=P(t),e=k(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},bo.remove=function(){return this.each(V)},bo.data=function(t,e){function n(t,n){var r,i,o,s=t.length,f=n.length,d=Math.min(s,f),h=new Array(f),p=new Array(f),v=new Array(s);if(e){var g,m=new c,y=new Array(s);for(r=-1;++r<s;)(i=t[r])&&(m.has(g=e.call(i,i.__data__,r))?v[r]=i:m.set(g,i),y[r]=g);for(r=-1;++r<f;)(i=m.get(g=e.call(n,o=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=o):p[r]=q(o),m.set(g,!0);for(r=-1;++r<s;)r in y&&!0!==m.get(y[r])&&(v[r]=t[r])}else{for(r=-1;++r<d;)i=t[r],o=n[r],i?(i.__data__=o,h[r]=i):p[r]=q(o);for(;r<f;++r)p[r]=q(n[r]);for(;r<s;++r)v[r]=t[r]}p.update=h,p.parentNode=h.parentNode=v.parentNode=t.parentNode,a.push(p),u.push(h),l.push(v)}var r,i,o=-1,s=this.length;if(!arguments.length){for(t=new Array(s=(r=this[0]).length);++o<s;)(i=r[o])&&(t[o]=i.__data__);return t}var a=B([]),u=T([]),l=T([]);if("function"==typeof t)for(;++o<s;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<s;)n(r=this[o],t);return u.enter=function(){return a},u.exit=function(){return l},u},bo.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},bo.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=F(t));for(var o=0,s=this.length;o<s;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var a=0,u=n.length;a<u;a++)(r=n[a])&&t.call(r,r.__data__,a,o)&&e.push(r)}return T(i)},bo.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},bo.sort=function(t){t=function(t){return arguments.length||(t=r),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},bo.each=function(t){return U(this,function(e,n,r){t.call(e,e.__data__,n,r)})},bo.call=function(t){var e=eo(arguments);return t.apply(e[0]=this,e),this},bo.empty=function(){return!this.node()},bo.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},bo.size=function(){var t=0;return U(this,function(){++t}),t};var Eo=[];Ji.selection.enter=B,Ji.selection.enter.prototype=Eo,Eo.append=bo.append,Eo.empty=bo.empty,Eo.node=bo.node,Eo.call=bo.call,Eo.size=bo.size,Eo.select=function(t){for(var e,n,r,i,o,s=[],a=-1,u=this.length;++a<u;){r=(i=this[a]).update,s.push(e=[]),e.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(o=i[c])?(e.push(r[c]=n=t.call(i.parentNode,o.__data__,c,a)),n.__data__=o.__data__):e.push(null)}return T(s)},Eo.insert=function(t,e){return arguments.length<2&&(e=function(t){var e,n;return function(r,i,o){var s,a=t[o].update,u=a.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(s=a[e])&&++e<u;);return s}}(this)),bo.insert.call(this,t,e)},Ji.select=function(e){var n;return"string"==typeof e?(n=[go(e,no)]).parentNode=no.documentElement:(n=[e]).parentNode=t(e),T([n])},Ji.selectAll=function(t){var e;return"string"==typeof t?(e=eo(mo(t,no))).parentNode=no.documentElement:(e=eo(t)).parentNode=null,T([e])},bo.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(e=!1);for(n in t)this.each(j(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(j(t,e,n))};var _o=Ji.map({mouseenter:"mouseover",mouseleave:"mouseout"});no&&_o.forEach(function(t){"on"+t in no&&_o.remove(t)});var So,$o=0;Ji.mouse=function(t){return G(t,S())};var To=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Ji.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=S().changedTouches),e)for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).identifier===n)return G(t,r)},Ji.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",s)}function e(t,e,n,o,s){return function(){var a,u=Ji.event.target.correspondingElement||Ji.event.target,c=this.parentNode,l=r.of(this,arguments),f=0,d=t(),h=".drag"+(null==d?"":"-"+d),p=Ji.select(n(u)).on(o+h,function(){var t,n,r=e(c,d);r&&(t=r[0]-g[0],n=r[1]-g[1],f|=t|n,g=r,l({type:"drag",x:r[0]+a[0],y:r[1]+a[1],dx:t,dy:n}))}).on(s+h,function(){e(c,d)&&(p.on(o+h,null).on(s+h,null),v(f),l({type:"dragend"}))}),v=W(u),g=e(c,d);a=i?[(a=i.apply(this,arguments)).x-g[0],a.y-g[1]]:[0,0],l({type:"dragstart"})}}var r=$(t,"drag","dragstart","dragend"),i=null,o=e(w,Ji.mouse,n,"mousemove","mouseup"),s=e(Z,Ji.touch,y,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},Ji.rebind(t,r,"on")},Ji.touches=function(t,e){return arguments.length<2&&(e=S().touches),e?eo(e).map(function(e){var n=G(t,e);return n.identifier=e.identifier,n}):[]};var ko=1e-6,Co=ko*ko,Ao=Math.PI,Ro=2*Ao,Mo=Ro-ko,Io=Ao/2,Oo=Ao/180,No=180/Ao,Lo=Math.SQRT2;Ji.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],s=t[2],a=e[0],u=e[1],c=e[2],l=a-i,f=u-o,d=l*l+f*f;if(d<Co)r=Math.log(c/s)/Lo,n=function(t){return[i+t*l,o+t*f,s*Math.exp(Lo*t*r)]};else{var h=Math.sqrt(d),p=(c*c-s*s+4*d)/(2*s*2*h),v=(c*c-s*s-4*d)/(2*c*2*h),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-g)/Lo,n=function(t){var e=t*r,n=J(g),a=s/(2*h)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Lo*e+g)-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+a*l,o+a*f,s*n/J(Lo*e+g)]}}return n.duration=1e3*r,n},Ji.behavior.zoom=function(){function t(t){t.on(R,l).on(Po+".zoom",d).on("dblclick.zoom",h).on(O,f)}function e(t){return[(t[0]-S.x)/S.k,(t[1]-S.y)/S.k]}function r(t){S.k=Math.max(k[0],Math.min(k[1],t))}function i(t,e){e=function(t){return[t[0]*S.k+S.x,t[1]*S.k+S.y]}(e),S.x+=t[0]-e[0],S.y+=t[1]-e[1]}function o(e,n,o,s){e.__chart__={x:S.x,y:S.y,k:S.k},r(Math.pow(2,s)),i(v=n,o),e=Ji.select(e),C>0&&(e=e.transition().duration(C)),e.call(t.event)}function s(){w&&w.domain(b.range().map(function(t){return(t-S.x)/S.k}).map(b.invert)),E&&E.domain(x.range().map(function(t){return(t-S.y)/S.k}).map(x.invert))}function a(t){A++||t({type:"zoomstart"})}function u(t){s(),t({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(t){--A||(t({type:"zoomend"}),v=null)}function l(){var t=this,r=N.of(t,arguments),o=0,s=Ji.select(n(t)).on(M,function(){o=1,i(Ji.mouse(t),l),u(r)}).on(I,function(){s.on(M,null).on(I,null),f(o),c(r)}),l=e(Ji.mouse(t)),f=W(t);Ra.call(t),a(r)}function f(){function t(){var t=Ji.touches(p);return h=S.k,t.forEach(function(t){t.identifier in g&&(g[t.identifier]=e(t))}),t}function n(){var e=Ji.event.target;Ji.select(e).on(w,s).on(x,d),E.push(e);for(var n=Ji.event.changedTouches,r=0,i=n.length;r<i;++r)g[n[r].identifier]=null;var a=t(),u=Date.now();if(1===a.length){if(u-y<500){var c=a[0];o(p,c,g[c.identifier],Math.floor(Math.log(S.k)/Math.LN2)+1),_()}y=u}else if(a.length>1){c=a[0];var l=a[1],f=c[0]-l[0],h=c[1]-l[1];m=f*f+h*h}}function s(){var t,e,n,o,s=Ji.touches(p);Ra.call(p);for(var a=0,c=s.length;a<c;++a,o=null)if(n=s[a],o=g[n.identifier]){if(e)break;t=n,e=o}if(o){var l=(l=n[0]-t[0])*l+(l=n[1]-t[1])*l,f=m&&Math.sqrt(l/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+o[0])/2,(e[1]+o[1])/2],r(f*h)}y=null,i(t,e),u(v)}function d(){if(Ji.event.touches.length){for(var e=Ji.event.changedTouches,n=0,r=e.length;n<r;++n)delete g[e[n].identifier];for(var i in g)return void t()}Ji.selectAll(E).on(b,null),$.on(R,l).on(O,f),T(),c(v)}var h,p=this,v=N.of(p,arguments),g={},m=0,b=".zoom-"+Ji.event.changedTouches[0].identifier,w="touchmove"+b,x="touchend"+b,E=[],$=Ji.select(p),T=W(p);n(),a(v),$.on(R,null).on(O,n)}function d(){var t=N.of(this,arguments);m?clearTimeout(m):(Ra.call(this),p=e(v=g||Ji.mouse(this)),a(t)),m=setTimeout(function(){m=null,c(t)},50),_(),r(Math.pow(2,.002*Do())*S.k),i(v,p),u(t)}function h(){var t=Ji.mouse(this),n=Math.log(S.k)/Math.LN2;o(this,t,e(t),Ji.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var p,v,g,m,y,b,w,x,E,S={x:0,y:0,k:1},T=[960,500],k=Vo,C=250,A=0,R="mousedown.zoom",M="mousemove.zoom",I="mouseup.zoom",O="touchstart.zoom",N=$(t,"zoomstart","zoom","zoomend");return Po||(Po="onwheel"in no?(Do=function(){return-Ji.event.deltaY*(Ji.event.deltaMode?120:1)},"wheel"):"onmousewheel"in no?(Do=function(){return Ji.event.wheelDelta},"mousewheel"):(Do=function(){return-Ji.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=N.of(this,arguments),e=S;Ca?Ji.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},a(t)}).tween("zoom:zoom",function(){var n=T[0],r=T[1],i=v?v[0]:n/2,o=v?v[1]:r/2,s=Ji.interpolateZoom([(i-S.x)/S.k,(o-S.y)/S.k,n/S.k],[(i-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=s(e),a=n/r[2];this.__chart__=S={x:i-r[0]*a,y:o-r[1]*a,k:a},u(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=S,a(t),u(t),c(t))})},t.translate=function(e){return arguments.length?(S={x:+e[0],y:+e[1],k:S.k},s(),t):[S.x,S.y]},t.scale=function(e){return arguments.length?(S={x:S.x,y:S.y,k:null},r(+e),s(),t):S.k},t.scaleExtent=function(e){return arguments.length?(k=null==e?Vo:[+e[0],+e[1]],t):k},t.center=function(e){return arguments.length?(g=e&&[+e[0],+e[1]],t):g},t.size=function(e){return arguments.length?(T=e&&[+e[0],+e[1]],t):T},t.duration=function(e){return arguments.length?(C=+e,t):C},t.x=function(e){return arguments.length?(w=e,b=e.copy(),S={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(E=e,x=e.copy(),S={x:0,y:0,k:1},t):E},Ji.rebind(t,N,"on")};var Do,Po,Vo=[0,1/0];Ji.color=et,et.prototype.toString=function(){return this.rgb()+""},Ji.hsl=nt;var qo=nt.prototype=new et;qo.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new nt(this.h,this.s,this.l/t)},qo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new nt(this.h,this.s,t*this.l)},qo.rgb=function(){return rt(this.h,this.s,this.l)},Ji.hcl=it;var Fo=it.prototype=new et;Fo.brighter=function(t){return new it(this.h,this.c,Math.min(100,this.l+Uo*(arguments.length?t:1)))},Fo.darker=function(t){return new it(this.h,this.c,Math.max(0,this.l-Uo*(arguments.length?t:1)))},Fo.rgb=function(){return ot(this.h,this.c,this.l).rgb()},Ji.lab=st;var Uo=18,Bo=.95047,jo=1,Ho=1.08883,zo=st.prototype=new et;zo.brighter=function(t){return new st(Math.min(100,this.l+Uo*(arguments.length?t:1)),this.a,this.b)},zo.darker=function(t){return new st(Math.max(0,this.l-Uo*(arguments.length?t:1)),this.a,this.b)},zo.rgb=function(){return at(this.l,this.a,this.b)},Ji.rgb=dt;var Wo=dt.prototype=new et;Wo.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b;return e||n||r?(e&&e<30&&(e=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new dt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new dt(30,30,30)},Wo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new dt(t*this.r,t*this.g,t*this.b)},Wo.hsl=function(){return mt(this.r,this.g,this.b)},Wo.toString=function(){return"#"+vt(this.r)+vt(this.g)+vt(this.b)};var Go=Ji.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Go.forEach(function(t,e){Go.set(t,ht(e))}),Ji.functor=xt,Ji.xhr=Et(y),Ji.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var s=_t(t,e,null==n?r:i(n),o);return s.row=function(t){return arguments.length?s.response(null==(n=t)?r:i(t)):n},s}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(s).join(t)}function s(t){return a.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var a=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(l>=c)return s;if(i)return i=!1,o;var e=l;if(34===t.charCodeAt(e)){for(var n=e;n++<c;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}l=n+2;return 13===(r=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++l):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l<c;){var r,a=1;if(10===(r=t.charCodeAt(l++)))i=!0;else if(13===r)i=!0,10===t.charCodeAt(l)&&(++l,++a);else if(r!==u)continue;return t.slice(e,l-a)}return t.slice(e)}for(var r,i,o={},s={},a=[],c=t.length,l=0,f=0;(r=n())!==s;){for(var d=[];r!==o&&r!==s;)d.push(r),r=n();e&&null==(d=e(d,f++))||a.push(d)}return a},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new m,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(s).join(t)].concat(e.map(function(e){return i.map(function(t){return s(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},Ji.csv=Ji.dsv(",","text/csv"),Ji.tsv=Ji.dsv("\t","text/tab-separated-values");var Zo,Yo,Xo,Ko,Qo=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Ji.timer=function(){St.apply(this,arguments)},Ji.timer.flush=function(){Tt(),kt()},Ji.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Jo=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*co(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});Ji.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=Ji.round(t,Ct(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Jo[8+n/3]};var ts=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,es=Ji.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Ji.round(t,Ct(t,e))).toFixed(Math.max(0,Math.min(20,Ct(t*(1+1e-15),e))))}}),ns=Ji.time={},rs=Date;At.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){is.setUTCDate.apply(this._,arguments)},setDay:function(){is.setUTCDay.apply(this._,arguments)},setFullYear:function(){is.setUTCFullYear.apply(this._,arguments)},setHours:function(){is.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){is.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){is.setUTCMinutes.apply(this._,arguments)},setMonth:function(){is.setUTCMonth.apply(this._,arguments)},setSeconds:function(){is.setUTCSeconds.apply(this._,arguments)},setTime:function(){is.setTime.apply(this._,arguments)}};var is=Date.prototype;ns.year=Rt(function(t){return(t=ns.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ns.years=ns.year.range,ns.years.utc=ns.year.utc.range,ns.day=Rt(function(t){var e=new rs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ns.days=ns.day.range,ns.days.utc=ns.day.utc.range,ns.dayOfYear=function(t){var e=ns.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=ns[t]=Rt(function(t){return(t=ns.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ns.year(t).getDay();return Math.floor((ns.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ns[t+"s"]=n.range,ns[t+"s"].utc=n.utc.range,ns[t+"OfYear"]=function(t){var n=ns.year(t).getDay();return Math.floor((ns.dayOfYear(t)+(n+e)%7)/7)}}),ns.week=ns.sunday,ns.weeks=ns.sunday.range,ns.weeks.utc=ns.sunday.utc.range,ns.weekOfYear=ns.sundayOfYear;var os={"-":"",_:" ",0:"0"},ss=/^\s*\d+/,as=/^%/;Ji.locale=function(t){return{numberFormat:function(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,o=[],s=0,a=r[0],u=0;i>0&&a>0&&(u+a+1>e&&(a=Math.max(1,e-u)),o.push(t.substring(i-=a,i+a)),!((u+=a+1)>e));)a=r[s=(s+1)%r.length];return o.reverse().join(n)}:y;return function(t){var n=ts.exec(t),r=n[1]||" ",s=n[2]||">",a=n[3]||"-",u=n[4]||"",c=n[5],l=+n[6],f=n[7],d=n[8],h=n[9],p=1,v="",g="",m=!1,y=!0;switch(d&&(d=+d.substring(1)),(c||"0"===r&&"="===s)&&(c=r="0",s="="),h){case"n":f=!0,h="g";break;case"%":p=100,g="%",h="f";break;case"p":p=100,g="%",h="r";break;case"b":case"o":case"x":case"X":"#"===u&&(v="0"+h.toLowerCase());case"c":y=!1;case"d":m=!0,d=0;break;case"s":p=-1,h="r"}"$"===u&&(v=i[0],g=i[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):"e"!=h&&"f"!=h||(d=Math.max(0,Math.min(20,d)))),h=es.get(h)||function(t){return t+""};var b=c&&f;return function(t){var n=g;if(m&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===a?"":a;if(p<0){var u=Ji.formatPrefix(t,d);t=u.scale(t),n=u.symbol+g}else t*=p;var w,x,E=(t=h(t,d)).lastIndexOf(".");if(E<0){var _=y?t.lastIndexOf("e"):-1;_<0?(w=t,x=""):(w=t.substring(0,_),x=t.substring(_))}else w=t.substring(0,E),x=e+t.substring(E+1);!c&&f&&(w=o(w,1/0));var S=v.length+w.length+x.length+(b?0:i.length),$=S<l?new Array(S=l-S+1).join(r):"";return b&&(w=o($+w,$.length?l-x.length:1/0)),i+=v,t=w+x,("<"===s?i+t+$:">"===s?$+i+t:"^"===s?$.substring(0,S>>=1)+i+t+$.substring(S):i+(b?t:$+t))+n}}}(t),timeFormat:function(t){function e(t){function e(e){for(var n,i,o,s=[],a=-1,u=0;++a<r;)37===t.charCodeAt(a)&&(s.push(t.slice(u,a)),null!=(i=os[n=t.charAt(++a)])&&(n=t.charAt(++a)),(o=w[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),s.push(n),u=a+1);return s.push(t.slice(u,a)),s.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(r,t,e,0)!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&rs!==At,o=new(i?At:rs);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,s,a=0,u=e.length,c=n.length;a<u;){if(r>=c)return-1;if(37===(i=e.charCodeAt(a++))){if(s=e.charAt(a++),!(o=x[s in os?e.charAt(a++):s])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var r=t.dateTime,i=t.date,o=t.time,s=t.periods,a=t.days,u=t.shortDays,c=t.months,l=t.shortMonths;e.multi=(e.utc=function(t){function n(t){try{var e=new(rs=At);return e._=t,r(e)}finally{rs=Date}}var r=e(t);return n.parse=function(t){try{rs=At;var e=r.parse(t);return e&&e._}finally{rs=Date}},n.toString=r.toString,n}).multi=Xt;var f=Ji.map(),d=Ot(a),h=Nt(a),p=Ot(u),v=Nt(u),g=Ot(c),m=Nt(c),y=Ot(l),b=Nt(l);s.forEach(function(t,e){f.set(t.toLowerCase(),e)});var w={a:function(t){return u[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return c[t.getMonth()]},c:e(r),d:function(t,e){return It(t.getDate(),e,2)},e:function(t,e){return It(t.getDate(),e,2)},H:function(t,e){return It(t.getHours(),e,2)},I:function(t,e){return It(t.getHours()%12||12,e,2)},j:function(t,e){return It(1+ns.dayOfYear(t),e,3)},L:function(t,e){return It(t.getMilliseconds(),e,3)},m:function(t,e){return It(t.getMonth()+1,e,2)},M:function(t,e){return It(t.getMinutes(),e,2)},p:function(t){return s[+(t.getHours()>=12)]},S:function(t,e){return It(t.getSeconds(),e,2)},U:function(t,e){return It(ns.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return It(ns.mondayOfYear(t),e,2)},x:e(i),X:e(o),y:function(t,e){return It(t.getFullYear()%100,e,2)},Y:function(t,e){return It(t.getFullYear()%1e4,e,4)},Z:Zt,"%":function(){return"%"}},x={a:function(t,e,n){p.lastIndex=0;var r=p.exec(e.slice(n));return r?(t.w=v.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){d.lastIndex=0;var r=d.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){y.lastIndex=0;var r=y.exec(e.slice(n));return r?(t.m=b.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){g.lastIndex=0;var r=g.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,r){return n(t,w.c.toString(),e,r)},d:Bt,e:Bt,H:Ht,I:Ht,j:jt,L:Gt,m:Ut,M:zt,p:function(t,e,n){var r=f.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:Wt,U:Dt,w:Lt,W:Pt,x:function(t,e,r){return n(t,w.x.toString(),e,r)},X:function(t,e,r){return n(t,w.X.toString(),e,r)},y:qt,Y:Vt,Z:Ft,"%":Yt};return e}(t)}};var us=Ji.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Ji.format=us.numberFormat,Ji.geo={},Kt.prototype={s:0,t:0,add:function(t){Qt(t,this.t,cs),Qt(cs.s,this.s,this),this.s?this.t+=cs.t:this.s=cs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var cs=new Kt;Ji.geo.stream=function(t,e){t&&ls.hasOwnProperty(t.type)?ls[t.type](t,e):Jt(t,e)};var ls={Feature:function(t,e){Jt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Jt(n[r].geometry,e)}},fs={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){te(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)te(n[r],e,0)},Polygon:function(t,e){ee(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ee(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Jt(n[r],e)}};Ji.geo.area=function(t){return ds=0,Ji.geo.stream(t,ps),ds};var ds,hs=new Kt,ps={sphere:function(){ds+=4*Ao},point:w,lineStart:w,lineEnd:w,polygonStart:function(){hs.reset(),ps.lineStart=ne},polygonEnd:function(){var t=2*hs;ds+=t<0?4*Ao+t:t,ps.lineStart=ps.lineEnd=ps.point=w}};Ji.geo.bounds=function(){function t(t,e){b.push(w=[l=t,d=t]),e<f&&(f=e),e>h&&(h=e)}function e(e,n){var r=re([e*Oo,n*Oo]);if(m){var i=oe(m,r),o=oe([i[1],-i[0],0],i);ue(o),o=ce(o);var s=e-p,u=s>0?1:-1,c=o[0]*No*u,v=co(s)>180;if(v^(u*p<c&&c<u*e)){(g=o[1]*No)>h&&(h=g)}else if(c=(c+360)%360-180,v^(u*p<c&&c<u*e)){var g;(g=-o[1]*No)<f&&(f=g)}else n<f&&(f=n),n>h&&(h=n);v?e<p?a(l,e)>a(l,d)&&(d=e):a(e,d)>a(l,d)&&(l=e):d>=l?(e<l&&(l=e),e>d&&(d=e)):e>p?a(l,e)>a(l,d)&&(d=e):a(e,d)>a(l,d)&&(l=e)}else t(e,n);m=r,p=e}function n(){x.point=e}function r(){w[0]=l,w[1]=d,x.point=t,m=null}function i(t,n){if(m){var r=t-p;y+=co(r)>180?r+(r>0?360:-360):r}else v=t,g=n;ps.point(t,n),e(t,n)}function o(){ps.lineStart()}function s(){i(v,g),ps.lineEnd(),co(y)>ko&&(l=-(d=180)),w[0]=l,w[1]=d,m=null}function a(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function c(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var l,f,d,h,p,v,g,m,y,b,w,x={point:t,lineStart:n,lineEnd:r,polygonStart:function(){x.point=i,x.lineStart=o,x.lineEnd=s,y=0,ps.polygonStart()},polygonEnd:function(){ps.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=r,hs<0?(l=-(d=180),f=-(h=90)):y>ko?h=90:y<-ko&&(f=-90),w[0]=l,w[1]=d}};return function(t){h=d=-(l=f=1/0),b=[],Ji.geo.stream(t,x);if(i=b.length){b.sort(u);for(var e=1,n=[p=b[0]];e<i;++e)c((o=b[e])[0],p)||c(o[1],p)?(a(p[0],o[1])>a(p[0],p[1])&&(p[1]=o[1]),a(o[0],p[1])>a(p[0],p[1])&&(p[0]=o[0])):n.push(p=o);for(var r,i,o,s=-1/0,p=(e=0,n[i=n.length-1]);e<=i;p=o,++e)o=n[e],(r=a(p[1],o[0]))>s&&(s=r,l=o[0],d=p[1])}return b=w=null,l===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,f],[d,h]]}}(),Ji.geo.centroid=function(t){vs=gs=ms=ys=bs=ws=xs=Es=_s=Ss=$s=0,Ji.geo.stream(t,Ts);var e=_s,n=Ss,r=$s,i=e*e+n*n+r*r;return i<Co&&(e=ws,n=xs,r=Es,gs<ko&&(e=ms,n=ys,r=bs),(i=e*e+n*n+r*r)<Co)?[NaN,NaN]:[Math.atan2(n,e)*No,Q(r/Math.sqrt(i))*No]};var vs,gs,ms,ys,bs,ws,xs,Es,_s,Ss,$s,Ts={sphere:w,point:fe,lineStart:he,lineEnd:pe,polygonStart:function(){Ts.lineStart=ve},polygonEnd:function(){Ts.lineStart=he}},ks=xe(me,function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Ao:-Ao,u=co(o-n);co(u-Ao)<ko?(t.point(n,r=(r+s)/2>0?Io:-Io),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=Ao&&(co(n-i)<ko&&(n-=i*ko),co(o-a)<ko&&(o-=a*ko),r=function(t,e,n,r){var i,o,s=Math.sin(t-n);return co(s)>ko?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*Io,r.point(-Ao,i),r.point(0,i),r.point(Ao,i),r.point(Ao,0),r.point(Ao,-i),r.point(0,-i),r.point(-Ao,-i),r.point(-Ao,0),r.point(-Ao,i);else if(co(t[0]-e[0])>ko){var o=t[0]<e[0]?Ao:-Ao;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Ao,-Ao/2]),Cs=1e9;Ji.geo.clipExtent=function(){var t,e,n,r,i,o,s={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(a){return arguments.length?(o=Te(t=+a[0][0],e=+a[0][1],n=+a[1][0],r=+a[1][1]),i&&(i.valid=!1,i=null),s):[[t,e],[n,r]]}};return s.extent([[0,0],[960,500]])},(Ji.geo.conicEqualArea=function(){return ke(Ce)}).raw=Ce,Ji.geo.albers=function(){return Ji.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Ji.geo.albersUsa=function(){function t(t){var o=t[0],s=t[1];return e=null,n(o,s),e||(r(o,s),e)||i(o,s),e}var e,n,r,i,o=Ji.geo.albers(),s=Ji.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=Ji.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?a:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=s.stream(t),r=a.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),s.precision(e),a.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),s.scale(.35*e),a.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var c=o.scale(),l=+e[0],f=+e[1];return n=o.translate(e).clipExtent([[l-.455*c,f-.238*c],[l+.455*c,f+.238*c]]).stream(u).point,r=s.translate([l-.307*c,f+.201*c]).clipExtent([[l-.425*c+ko,f+.12*c+ko],[l-.214*c-ko,f+.234*c-ko]]).stream(u).point,i=a.translate([l-.205*c,f+.212*c]).clipExtent([[l-.214*c+ko,f+.166*c+ko],[l-.115*c-ko,f+.234*c-ko]]).stream(u).point,t},t.scale(1070)};var As,Rs,Ms,Is,Os,Ns,Ls={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Rs=0,Ls.lineStart=Ae},polygonEnd:function(){Ls.lineStart=Ls.lineEnd=Ls.point=w,As+=co(Rs/2)}},Ds={point:function(t,e){t<Ms&&(Ms=t),t>Os&&(Os=t),e<Is&&(Is=e),e>Ns&&(Ns=e)},lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Ps={point:Me,lineStart:Ie,lineEnd:Oe,polygonStart:function(){Ps.lineStart=Ne},polygonEnd:function(){Ps.point=Me,Ps.lineStart=Ie,Ps.lineEnd=Oe}};Ji.geo.path=function(){function t(t){return t&&("function"==typeof a&&o.pointRadius(+a.apply(this,arguments)),s&&s.valid||(s=i(o)),Ji.geo.stream(t,s)),o.result()}function e(){return s=null,t}var n,r,i,o,s,a=4.5;return t.area=function(t){return As=0,Ji.geo.stream(t,i(Ls)),As},t.centroid=function(t){return ms=ys=bs=ws=xs=Es=_s=Ss=$s=0,Ji.geo.stream(t,i(Ps)),$s?[_s/$s,Ss/$s]:Es?[ws/Es,xs/Es]:bs?[ms/bs,ys/bs]:[NaN,NaN]},t.bounds=function(t){return Os=Ns=-(Ms=Is=1/0),Ji.geo.stream(t,i(Ds)),[[Ms,Is],[Os,Ns]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||function(t){var e=Le(function(e,n){return t([e*No,n*No])});return function(t){return Fe(e(t))}}(t):y,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new function(){function t(t,e){s.push("M",t,",",e,o)}function e(t,e){s.push("M",t,",",e),a.point=n}function n(t,e){s.push("L",t,",",e)}function r(){a.point=t}function i(){s.push("Z")}var o=Re(4.5),s=[],a={point:t,lineStart:function(){a.point=e},lineEnd:r,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=r,a.point=t},pointRadius:function(t){return o=Re(t),a},result:function(){if(s.length){var t=s.join("");return s=[],t}}};return a}:new function(t){function e(e,n){t.moveTo(e+s,n),t.arc(e,n,s,0,Ro)}function n(e,n){t.moveTo(e,n),a.point=r}function r(e,n){t.lineTo(e,n)}function i(){a.point=e}function o(){t.closePath()}var s=4.5,a={point:e,lineStart:function(){a.point=n},lineEnd:i,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=i,a.point=e},pointRadius:function(t){return s=t,a},result:w};return a}(t),"function"!=typeof a&&o.pointRadius(a),e()):r},t.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(o.pointRadius(+e),+e),t):a},t.projection(Ji.geo.albersUsa()).context(null)},Ji.geo.transform=function(t){return{stream:function(e){var n=new De(e);for(var r in t)n[r]=t[r];return n}}},De.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Ji.geo.projection=Ve,Ji.geo.projectionMutator=qe,(Ji.geo.equirectangular=function(){return Ve(Ue)}).raw=Ue.invert=Ue,Ji.geo.rotation=function(t){function e(e){return e=t(e[0]*Oo,e[1]*Oo),e[0]*=No,e[1]*=No,e}return t=je(t[0]%360*Oo,t[1]*Oo,t.length>2?t[2]*Oo:0),e.invert=function(e){return e=t.invert(e[0]*Oo,e[1]*Oo),e[0]*=No,e[1]*=No,e},e},Be.invert=Ue,Ji.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=je(-t[0]*Oo,-t[1]*Oo,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=No,t[1]*=No}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=Ge((e=+r)*Oo,i*Oo),t):e},t.precision=function(r){return arguments.length?(n=Ge(e*Oo,(i=+r)*Oo),t):i},t.angle(90)},Ji.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Oo,i=t[1]*Oo,o=e[1]*Oo,s=Math.sin(r),a=Math.cos(r),u=Math.sin(i),c=Math.cos(i),l=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*s)*n+(n=c*l-u*f*a)*n),u*l+c*f*a)},Ji.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Ji.range(Math.ceil(o/g)*g,i,g).map(d).concat(Ji.range(Math.ceil(c/m)*m,u,m).map(h)).concat(Ji.range(Math.ceil(r/p)*p,n,p).filter(function(t){return co(t%g)>ko}).map(l)).concat(Ji.range(Math.ceil(a/v)*v,s,v).filter(function(t){return co(t%m)>ko}).map(f))}var n,r,i,o,s,a,u,c,l,f,d,h,p=10,v=p,g=90,m=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(h(u).slice(1),d(i).reverse().slice(1),h(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],c=+e[0][1],u=+e[1][1],o>i&&(e=o,o=i,i=e),c>u&&(e=c,c=u,u=e),t.precision(y)):[[o,c],[i,u]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],r>n&&(e=r,r=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(y)):[[r,a],[n,s]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(g=+e[0],m=+e[1],t):[g,m]},t.minorStep=function(e){return arguments.length?(p=+e[0],v=+e[1],t):[p,v]},t.precision=function(e){return arguments.length?(y=+e,l=Ye(a,s,90),f=Xe(r,n,y),d=Ye(c,u,90),h=Xe(o,i,y),t):y},t.majorExtent([[-180,-90+ko],[180,90-ko]]).minorExtent([[-180,-80-ko],[180,80+ko]])},Ji.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=Ke,i=Qe;return t.distance=function(){return Ji.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},Ji.geo.interpolate=function(t,e){return function(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),s=Math.cos(r),a=Math.sin(r),u=i*Math.cos(t),c=i*Math.sin(t),l=s*Math.cos(n),f=s*Math.sin(n),d=2*Math.asin(Math.sqrt(tt(r-e)+i*s*tt(n-t))),h=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*h,n=Math.sin(d-t)*h,r=n*u+e*l,i=n*c+e*f,s=n*o+e*a;return[Math.atan2(i,r)*No,Math.atan2(s,Math.sqrt(r*r+i*i))*No]}:function(){return[t*No,e*No]};return p.distance=d,p}(t[0]*Oo,t[1]*Oo,e[0]*Oo,e[1]*Oo)},Ji.geo.length=function(t){return Vs=0,Ji.geo.stream(t,qs),Vs};var Vs,qs={sphere:w,point:w,lineStart:function(){function t(t,i){var o=Math.sin(i*=Oo),s=Math.cos(i),a=co((t*=Oo)-e),u=Math.cos(a);Vs+=Math.atan2(Math.sqrt((a=s*Math.sin(a))*a+(a=r*o-n*s*u)*a),n*o+r*s*u),e=t,n=o,r=s}var e,n,r;qs.point=function(i,o){e=i*Oo,n=Math.sin(o*=Oo),r=Math.cos(o),qs.point=t},qs.lineEnd=function(){qs.point=qs.lineEnd=w}},lineEnd:w,polygonStart:w,polygonEnd:w},Fs=Je(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Ji.geo.azimuthalEqualArea=function(){return Ve(Fs)}).raw=Fs;var Us=Je(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},y);(Ji.geo.azimuthalEquidistant=function(){return Ve(Us)}).raw=Us,(Ji.geo.conicConformal=function(){return ke(tn)}).raw=tn,(Ji.geo.conicEquidistant=function(){return ke(en)}).raw=en;var Bs=Je(function(t){return 1/t},Math.atan);(Ji.geo.gnomonic=function(){return Ve(Bs)}).raw=Bs,nn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Io]},(Ji.geo.mercator=function(){return rn(nn)}).raw=nn;var js=Je(function(){return 1},Math.asin);(Ji.geo.orthographic=function(){return Ve(js)}).raw=js;var Hs=Je(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Ji.geo.stereographic=function(){return Ve(Hs)}).raw=Hs,on.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Io]},(Ji.geo.transverseMercator=function(){var t=rn(on),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=on,Ji.geom={},Ji.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=xt(n),o=xt(r),s=t.length,a=[],u=[];for(e=0;e<s;e++)a.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(a.sort(cn),e=0;e<s;e++)u.push([a[e][0],-a[e][1]]);var c=un(a),l=un(u),f=l[0]===c[0],d=l[l.length-1]===c[c.length-1],h=[];for(e=c.length-1;e>=0;--e)h.push(t[a[c[e]][2]]);for(e=+f;e<l.length-d;++e)h.push(t[a[l[e]][2]]);return h}var n=sn,r=an;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},Ji.geom.polygon=function(t){return vo(t,zs),t};var zs=Ji.geom.polygon.prototype=[];zs.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},zs.centroid=function(t){var e,n,r=-1,i=this.length,o=0,s=0,a=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=a,a=this[r],n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return[o*t,s*t]},zs.clip=function(t){for(var e,n,r,i,o,s,a=dn(t),u=-1,c=this.length-dn(this),l=this[c-1];++u<c;){for(e=t.slice(),t.length=0,i=this[u],o=e[(r=e.length-a)-1],n=-1;++n<r;)ln(s=e[n],l,i)?(ln(o,l,i)||t.push(fn(o,s,l,i)),t.push(s)):ln(o,l,i)&&t.push(fn(o,s,l,i)),o=s;a&&t.push(t[0]),l=i}return t};var Ws,Gs,Zs,Ys,Xs,Ks=[],Qs=[];yn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(wn),e.length},Tn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},kn.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Mn(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(An(this,n),n=(t=n).U),n.C=!1,r.C=!0,Rn(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Rn(this,n),n=(t=n).U),n.C=!1,r.C=!0,An(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?Mn(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,An(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Rn(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,An(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Rn(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,An(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Rn(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},Ji.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=a[0][0],i=a[0][1],o=a[1][0],s=a[1][1];return In(n(t),a).cells.forEach(function(n,a){var u=n.edges,c=n.site;(e[a]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):c.x>=r&&c.x<=o&&c.y>=i&&c.y<=s?[[r,s],[o,s],[o,i],[r,i]]:[]).point=t[a]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/ko)*ko,y:Math.round(s(t,e)/ko)*ko,i:e}})}var r=sn,i=an,o=r,s=i,a=Js;return t?e(t):(e.links=function(t){return In(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return In(n(t)).cells.forEach(function(n,r){for(var i,o=n.site,s=n.edges.sort(wn),a=-1,u=s.length,c=s[u-1].edge,l=c.l===o?c.r:c.l;++a<u;)c,i=l,l=(c=s[a].edge).l===o?c.r:c.l,r<i.i&&r<l.i&&function(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}(o,i,l)<0&&e.push([t[r],t[i.i],t[l.i]])}),e},e.x=function(t){return arguments.length?(o=xt(r=t),e):r},e.y=function(t){return arguments.length?(s=xt(i=t),e):i},e.clipExtent=function(t){return arguments.length?(a=null==t?Js:t,e):a===Js?null:a},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):a===Js?null:a&&a[1]},e)};var Js=[[-1e6,-1e6],[1e6,1e6]];Ji.geom.delaunay=function(t){return Ji.geom.voronoi().triangles(t)},Ji.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,s,a){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,l=t.y;if(null!=u)if(co(u-n)+co(l-r)<.01)c(t,e,n,r,i,o,s,a);else{var f=t.point;t.x=t.y=t.point=null,c(t,f,u,l,i,o,s,a),c(t,e,n,r,i,o,s,a)}else t.x=n,t.y=r,t.point=e}else c(t,e,n,r,i,o,s,a)}function c(t,e,n,r,i,s,a,u){var c=.5*(i+a),l=.5*(s+u),f=n>=c,d=r>=l,h=d<<1|f;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),f?i=c:a=c,d?s=l:u=l,o(t,e,n,r,i,s,a,u)}var l,f,d,h,p,v,g,m,y,b=xt(a),w=xt(u);if(null!=e)v=e,g=n,m=r,y=i;else if(m=y=-(v=g=1/0),f=[],d=[],p=t.length,s)for(h=0;h<p;++h)(l=t[h]).x<v&&(v=l.x),l.y<g&&(g=l.y),l.x>m&&(m=l.x),l.y>y&&(y=l.y),f.push(l.x),d.push(l.y);else for(h=0;h<p;++h){var x=+b(l=t[h],h),E=+w(l,h);x<v&&(v=x),E<g&&(g=E),x>m&&(m=x),E>y&&(y=E),f.push(x),d.push(E)}var _=m-v,S=y-g;_>S?y=g+_:m=v+S;var $={leaf:!0,nodes:[],point:null,x:null,y:null};if($.add=function(t){o($,t,+b(t,++h),+w(t,h),v,g,m,y)},$.visit=function(t){Dn(t,$,v,g,m,y)},$.find=function(t){return function(t,e,n,r,i,o,s){var a,u=1/0;return function t(c,l,f,d,h){if(!(l>o||f>s||d<r||h<i)){if(p=c.point){var p,v=e-c.x,g=n-c.y,m=v*v+g*g;if(m<u){var y=Math.sqrt(u=m);r=e-y,i=n-y,o=e+y,s=n+y,a=p}}for(var b=c.nodes,w=.5*(l+d),x=.5*(f+h),E=(n>=x)<<1|e>=w,_=E+4;E<_;++E)if(c=b[3&E])switch(3&E){case 0:t(c,l,f,w,x);break;case 1:t(c,w,f,d,x);break;case 2:t(c,l,x,w,h);break;case 3:t(c,w,x,d,h)}}}(t,r,i,o,s),a}($,t[0],t[1],v,g,m,y)},h=-1,null==e){for(;++h<p;)o($,t[h],f[h],d[h],v,g,m,y);--h}else t.forEach($.add);return f=d=t=l=null,$}var s,a=sn,u=an;return(s=arguments.length)?(a=Nn,u=Ln,3===s&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(a=t,o):a},o.y=function(t){return arguments.length?(u=t,o):u},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},Ji.interpolateRgb=Pn,Ji.interpolateObject=Vn,Ji.interpolateNumber=qn,Ji.interpolateString=Fn;var ta=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ea=new RegExp(ta.source,"g");Ji.interpolate=Un,Ji.interpolators=[function(t,e){var n=typeof e;return("string"===n?Go.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Pn:Fn:e instanceof et?Pn:Array.isArray(e)?Bn:"object"===n&&isNaN(e)?Vn:qn)(t,e)}],Ji.interpolateArray=Bn;var na=function(){return y},ra=Ji.map({linear:na,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return zn},cubic:function(){return Wn},sin:function(){return Gn},exp:function(){return Zn},circle:function(){return Yn},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Ro*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Ro/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return Xn}}),ia=Ji.map({in:y,out:jn,"in-out":Hn,"out-in":function(t){return Hn(jn(t))}});Ji.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=ra.get(n)||na,r=ia.get(r)||y,function(t){return function(e){return e<=0?0:e>=1?1:t(e)}}(r(n.apply(null,to.call(arguments,1))))},Ji.interpolateHcl=function(t,e){t=Ji.hcl(t),e=Ji.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,s=e.c-r,a=e.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(t){return ot(n+o*t,r+s*t,i+a*t)+""}},Ji.interpolateHsl=function(t,e){t=Ji.hsl(t),e=Ji.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,s=e.s-r,a=e.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(t){return rt(n+o*t,r+s*t,i+a*t)+""}},Ji.interpolateLab=function(t,e){t=Ji.lab(t),e=Ji.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,s=e.a-r,a=e.b-i;return function(t){return at(n+o*t,r+s*t,i+a*t)+""}},Ji.interpolateRound=Kn,Ji.transform=function(t){var e=no.createElementNS(Ji.ns.prefix.svg,"g");return(Ji.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Qn(n?n.matrix:oa)})(t)},Qn.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oa={a:1,b:0,c:0,d:1,e:0,f:0};Ji.interpolateTransform=nr,Ji.layout={},Ji.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(or(t[n]));return e}},Ji.layout.chord=function(){function t(){var t,c,f,d,h,p={},v=[],g=Ji.range(o),m=[];for(n=[],r=[],t=0,d=-1;++d<o;){for(c=0,h=-1;++h<o;)c+=i[d][h];v.push(c),m.push(Ji.range(o)),t+=c}for(s&&g.sort(function(t,e){return s(v[t],v[e])}),a&&m.forEach(function(t,e){t.sort(function(t,n){return a(i[e][t],i[e][n])})}),t=(Ro-l*o)/t,c=0,d=-1;++d<o;){for(f=c,h=-1;++h<o;){var y=g[d],b=m[y][h],w=i[y][b],x=c,E=c+=w*t;p[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:E,value:w}}r[y]={index:y,startAngle:f,endAngle:c,value:v[y]},c+=l}for(d=-1;++d<o;)for(h=d-1;++h<o;){var _=p[d+"-"+h],S=p[h+"-"+d];(_.value||S.value)&&n.push(_.value<S.value?{source:S,target:_}:{source:_,target:S})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,o,s,a,u,c={},l=0;return c.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,c):i},c.padding=function(t){return arguments.length?(l=t,n=r=null,c):l},c.sortGroups=function(t){return arguments.length?(s=t,n=r=null,c):s},c.sortSubgroups=function(t){return arguments.length?(a=t,n=null,c):a},c.sortChords=function(t){return arguments.length?(u=t,n&&e(),c):u},c.chords=function(){return n||t(),n},c.groups=function(){return r||t(),r},c},Ji.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,s=e.cy-t.y,a=i-n,u=o*o+s*s;if(a*a/m<u){if(u<v){var c=e.charge/u;t.px-=o*c,t.py-=s*c}return!0}if(e.point&&u&&u<v){c=e.pointCharge/u;t.px-=o*c,t.py-=s*c}}return!e.charge}}function e(t){t.px=Ji.event.x,t.py=Ji.event.y,u.resume()}var n,r,i,o,s,a,u={},c=Ji.dispatch("start","tick","end"),l=[1,1],f=.9,d=sa,h=aa,p=-30,v=ua,g=.1,m=.64,b=[],w=[];return u.tick=function(){if((i*=.99)<.005)return n=null,c.end({type:"end",alpha:i=0}),!0;var e,r,u,d,h,v,m,y,x,E=b.length,_=w.length;for(r=0;r<_;++r)d=(u=w[r]).source,(v=(y=(h=u.target).x-d.x)*y+(x=h.y-d.y)*x)&&(y*=v=i*s[r]*((v=Math.sqrt(v))-o[r])/v,x*=v,h.x-=y*(m=d.weight+h.weight?d.weight/(d.weight+h.weight):.5),h.y-=x*m,d.x+=y*(m=1-m),d.y+=x*m);if((m=i*g)&&(y=l[0]/2,x=l[1]/2,r=-1,m))for(;++r<E;)(u=b[r]).x+=(y-u.x)*m,u.y+=(x-u.y)*m;if(p)for(fr(e=Ji.geom.quadtree(b),i,a),r=-1;++r<E;)(u=b[r]).fixed||e.visit(t(u));for(r=-1;++r<E;)(u=b[r]).fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*f,u.y-=(u.py-(u.py=u.y))*f);c.tick({type:"tick",alpha:i})},u.nodes=function(t){return arguments.length?(b=t,u):b},u.links=function(t){return arguments.length?(w=t,u):w},u.size=function(t){return arguments.length?(l=t,u):l},u.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,u):d},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,u):h},u.friction=function(t){return arguments.length?(f=+t,u):f},u.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,u):p},u.chargeDistance=function(t){return arguments.length?(v=t*t,u):Math.sqrt(v)},u.gravity=function(t){return arguments.length?(g=+t,u):g},u.theta=function(t){return arguments.length?(m=t*t,u):Math.sqrt(m)},u.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(n.c=null,n.t=NaN,n=null,c.end({type:"end",alpha:i=0})):t>0&&(c.start({type:"start",alpha:i=t}),n=St(u.tick)),u):i},u.start=function(){function t(t,r){if(!n){for(n=new Array(i),u=0;u<i;++u)n[u]=[];for(u=0;u<c;++u){var o=w[u];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var s,a=n[e],u=-1,l=a.length;++u<l;)if(!isNaN(s=a[u][t]))return s;return Math.random()*r}var e,n,r,i=b.length,c=w.length,f=l[0],v=l[1];for(e=0;e<i;++e)(r=b[e]).index=e,r.weight=0;for(e=0;e<c;++e)"number"==typeof(r=w[e]).source&&(r.source=b[r.source]),"number"==typeof r.target&&(r.target=b[r.target]),++r.source.weight,++r.target.weight;for(e=0;e<i;++e)r=b[e],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof d)for(e=0;e<c;++e)o[e]=+d.call(this,w[e],e);else for(e=0;e<c;++e)o[e]=d;if(s=[],"function"==typeof h)for(e=0;e<c;++e)s[e]=+h.call(this,w[e],e);else for(e=0;e<c;++e)s[e]=h;if(a=[],"function"==typeof p)for(e=0;e<i;++e)a[e]=+p.call(this,b[e],e);else for(e=0;e<i;++e)a[e]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){if(r||(r=Ji.behavior.drag().origin(y).on("dragstart.force",ar).on("drag.force",e).on("dragend.force",ur)),!arguments.length)return r;this.on("mouseover.force",cr).on("mouseout.force",lr).call(r)},Ji.rebind(u,c,"on")};var sa=20,aa=1,ua=1/0;Ji.layout.hierarchy=function(){function t(i){var o,s=[i],a=[];for(i.depth=0;null!=(o=s.pop());)if(a.push(o),(c=n.call(t,o,o.depth))&&(u=c.length)){for(var u,c,l;--u>=0;)s.push(l=c[u]),l.parent=o,l.depth=o.depth+1;r&&(o.value=0),o.children=c}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return pr(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),a}var e=mr,n=vr,r=gr;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(hr(e,function(t){t.children&&(t.value=0)}),pr(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},Ji.layout.partition=function(){function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(s=o.length)){var s,a,u,c=-1;for(r=e.value?r/e.value:0;++c<s;)t(a=o[c],n,u=a.value*r,i),n+=u}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var s=r.call(this,n,o);return t(s[0],0,i[0],i[1]/e(s[0])),s}var r=Ji.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},dr(n,r)},Ji.layout.pie=function(){function t(s){var a,u=s.length,c=s.map(function(n,r){return+e.call(t,n,r)}),l=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-l,d=Math.min(Math.abs(f)/u,+("function"==typeof o?o.apply(this,arguments):o)),h=d*(f<0?-1:1),p=Ji.sum(c),v=p?(f-u*h)/p:0,g=Ji.range(u),m=[];return null!=n&&g.sort(n===ca?function(t,e){return c[e]-c[t]}:function(t,e){return n(s[t],s[e])}),g.forEach(function(t){m[t]={data:s[t],value:a=c[t],startAngle:l,endAngle:l+=a*v+h,padAngle:d}}),m}var e=Number,n=ca,r=0,i=Ro,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var ca={};Ji.layout.stack=function(){function t(a,u){if(!(d=a.length))return a;var c=a.map(function(n,r){return e.call(t,n,r)}),l=c.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),s.call(t,e,n)]})}),f=n.call(t,l,u);c=Ji.permute(c,f),l=Ji.permute(l,f);var d,h,p,v,g=r.call(t,l,u),m=c[0].length;for(p=0;p<m;++p)for(i.call(t,c[0][p],v=g[p],l[0][p][1]),h=1;h<d;++h)i.call(t,c[h][p],v+=l[h-1][p][1],l[h][p][1]);return a}var e=y,n=Er,r=_r,i=xr,o=br,s=wr;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:la.get(e)||Er,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:fa.get(e)||_r,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(i=e,t):i},t};var la=Ji.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(Sr),o=t.map($r),s=Ji.range(r).sort(function(t,e){return i[t]-i[e]}),a=0,u=0,c=[],l=[];for(e=0;e<r;++e)n=s[e],a<u?(a+=o[n],c.push(n)):(u+=o[n],l.push(n));return l.reverse().concat(c)},reverse:function(t){return Ji.range(t.length).reverse()},default:Er}),fa=Ji.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,s=[],a=0,u=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>a&&(a=r),s.push(r)}for(n=0;n<o;++n)u[n]=(a-s[n])/2;return u},wiggle:function(t){var e,n,r,i,o,s,a,u,c,l=t.length,f=t[0],d=f.length,h=[];for(h[0]=u=c=0,n=1;n<d;++n){for(e=0,i=0;e<l;++e)i+=t[e][n][1];for(e=0,o=0,a=f[n][0]-f[n-1][0];e<l;++e){for(r=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);r<e;++r)s+=(t[r][n][1]-t[r][n-1][1])/a;o+=s*t[e][n][1]}h[n]=u-=i?o/i*a:0,u<c&&(c=u)}for(n=0;n<d;++n)h[n]-=c;return h},expand:function(t){var e,n,r,i=t.length,o=t[0].length,s=1/i,a=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=s}for(n=0;n<o;++n)a[n]=0;return a},zero:_r});Ji.layout.histogram=function(){function t(t,o){for(var s,a,u=[],c=t.map(n,this),l=r.call(this,c,o),f=i.call(this,l,c,o),d=(o=-1,c.length),h=f.length-1,p=e?1:1/d;++o<h;)(s=u[o]=[]).dx=f[o+1]-(s.x=f[o]),s.y=0;if(h>0)for(o=-1;++o<d;)(a=c[o])>=l[0]&&a<=l[1]&&((s=u[Ji.bisect(f,a,1,h)-1]).y+=p,s.push(t[o]));return u}var e=!0,n=Number,r=Ar,i=kr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=xt(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return Cr(t,e)}:xt(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},Ji.layout.pack=function(){function t(t,o){var s=n.call(this,t,o),a=s[0],u=i[0],c=i[1],l=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(a.x=a.y=0,pr(a,function(t){t.r=+l(t.value)}),pr(a,Nr),r){var f=r*(e?1:Math.max(2*a.r/u,2*a.r/c))/2;pr(a,function(t){t.r+=f}),pr(a,Nr),pr(a,function(t){t.r-=f})}return Pr(a,u/2,c/2,e?1:1/Math.max(2*a.r/u,2*a.r/c)),s}var e,n=Ji.layout.hierarchy().sort(Rr),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},dr(t,n)},Ji.layout.tree=function(){function t(t,u){var c=i.call(this,t,u),l=c[0],f=function(t){var e,n={A:null,children:[t]},r=[n];for(;null!=(e=r.pop());)for(var i,o=e.children,s=0,a=o.length;s<a;++s)r.push((o[s]=i={_:o[s],parent:e,children:(i=o[s].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=i);return n.children[0]}(l);if(pr(f,e),f.parent.m=-f.z,hr(f,n),a)hr(l,r);else{var d=l,h=l,p=l;hr(l,function(t){t.x<d.x&&(d=t),t.x>h.x&&(h=t),t.depth>p.depth&&(p=t)});var v=o(d,h)/2-d.x,g=s[0]/(h.x+o(h,d)/2+v),m=s[1]/(p.depth||1);hr(l,function(t){t.x=(t.x+v)*g,t.y=t.depth*m})}return c}function e(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var i=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+o(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+o(t._,r._));t.parent.A=function(t,e,n){if(e){for(var r,i=t,s=t,a=e,u=i.parent.children[0],c=i.m,l=s.m,f=a.m,d=u.m;a=Ur(a),i=Fr(i),a&&i;)u=Fr(u),(s=Ur(s)).a=t,(r=a.z+f-i.z-c+o(a._,i._))>0&&(!function(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}(function(t,e,n){return t.a.parent===e.parent?t.a:n}(a,t,n),t,r),c+=r,l+=r),f+=a.m,c+=i.m,d+=u.m,l+=s.m;a&&!Ur(s)&&(s.t=a,s.m+=f-l),i&&!Fr(u)&&(u.t=i,u.m+=c-d,n=t)}return n}(t,r,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t){t.x*=s[0],t.y=t.depth*s[1]}var i=Ji.layout.hierarchy().sort(null).value(null),o=qr,s=[1,1],a=null;return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(a=null==(s=e)?r:null,t):a?null:s},t.nodeSize=function(e){return arguments.length?(a=null==(s=e)?null:r,t):a?s:null},dr(t,i)},Ji.layout.cluster=function(){function t(t,o){var s,a=e.call(this,t,o),u=a[0],c=0;pr(u,function(t){var e=t.children;e&&e.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(e),t.y=function(t){return 1+Ji.max(t,function(t){return t.y})}(e)):(t.x=s?c+=n(t,s):0,t.y=0,s=t)});var l=Br(u),f=jr(u),d=l.x-n(l,f)/2,h=f.x+n(f,l)/2;return pr(u,i?function(t){t.x=(t.x-u.x)*r[0],t.y=(u.y-t.y)*r[1]}:function(t){t.x=(t.x-d)/(h-d)*r[0],t.y=(1-(u.y?t.y/u.y:1))*r[1]}),a}var e=Ji.layout.hierarchy().sort(null).value(null),n=qr,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},dr(t,e)},Ji.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function e(n){var i=n.children;if(i&&i.length){var o,s,a,u=l(n),c=[],f=i.slice(),p=1/0,v="slice"===d?u.dx:"dice"===d?u.dy:"slice-dice"===d?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(f,u.dx*u.dy/n.value),c.area=0;(a=f.length)>0;)c.push(o=f[a-1]),c.area+=o.area,"squarify"!==d||(s=function(t,e){var n,r=t.area,i=0,o=1/0,s=-1,a=t.length;for(;++s<a;)(n=t[s].area)&&(n<o&&(o=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*h/r,r/(e*o*h)):1/0}(c,v))<=p?(f.pop(),p=s):(c.area-=c.pop().area,r(c,v,u,!1),v=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,v,u,!0),c.length=c.area=0),i.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var o,s=l(e),a=i.slice(),u=[];for(t(a,s.dx*s.dy/e.value),u.area=0;o=a.pop();)u.push(o),u.area+=o.area,null!=o.z&&(r(u,o.z?s.dx:s.dy,s,!a.length),u.length=u.area=0);i.forEach(n)}}function r(t,e,n,r){var i,o=-1,s=t.length,u=n.x,c=n.y,l=e?a(t.area/e):0;if(e==n.dx){for((r||l>n.dy)&&(l=n.dy);++o<s;)(i=t[o]).x=u,i.y=c,i.dy=l,u+=i.dx=Math.min(n.x+n.dx-u,l?a(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++o<s;)(i=t[o]).x=u,i.y=c,i.dx=l,c+=i.dy=Math.min(n.y+n.dy-c,l?a(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-c,n.x+=l,n.dx-=l}}function i(r){var i=o||s(r),a=i[0];return a.x=a.y=0,a.value?(a.dx=u[0],a.dy=u[1]):a.dx=a.dy=0,o&&s.revalue(a),t([a],a.dx*a.dy/a.value),(o?n:e)(a),f&&(o=i),i}var o,s=Ji.layout.hierarchy(),a=Math.round,u=[1,1],c=null,l=Hr,f=!1,d="squarify",h=.5*(1+Math.sqrt(5));return i.size=function(t){return arguments.length?(u=t,i):u},i.padding=function(t){function e(e){return zr(e,t)}if(!arguments.length)return c;var n;return l=null==(c=t)?Hr:"function"==(n=typeof t)?function(e){var n=t.call(i,e,e.depth);return null==n?Hr(e):zr(e,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,i},i.round=function(t){return arguments.length?(a=t?Math.round:Number,i):a!=Number},i.sticky=function(t){return arguments.length?(f=t,o=null,i):f},i.ratio=function(t){return arguments.length?(h=t,i):h},i.mode=function(t){return arguments.length?(d=t+"",i):d},dr(i,s)},Ji.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=Ji.random.normal.apply(Ji,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Ji.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},Ji.scale={};var da={floor:y,ceil:y};Ji.scale.linear=function(){return Qr([0,1],[0,1],Un,!1)};var ha={s:1,g:1,p:1,r:1,e:1};Ji.scale.log=function(){return oi(Ji.scale.linear().domain([0,1]),10,!0,[1,10])};var pa=Ji.format(".0e"),va={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Ji.scale.pow=function(){return si(Ji.scale.linear(),1,[0,1])},Ji.scale.sqrt=function(){return Ji.scale.pow().exponent(.5)},Ji.scale.ordinal=function(){return ui([],{t:"range",a:[[]]})},Ji.scale.category10=function(){return Ji.scale.ordinal().range(ga)},Ji.scale.category20=function(){return Ji.scale.ordinal().range(ma)},Ji.scale.category20b=function(){return Ji.scale.ordinal().range(ya)},Ji.scale.category20c=function(){return Ji.scale.ordinal().range(ba)};var ga=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(pt),ma=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(pt),ya=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(pt),ba=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(pt);Ji.scale.quantile=function(){return ci([],[])},Ji.scale.quantize=function(){return li(0,1,[0,1])},Ji.scale.threshold=function(){return fi([.5],[0,1])},Ji.scale.identity=function(){return di([0,1])},Ji.svg={},Ji.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),l=s.apply(this,arguments)-Io,f=a.apply(this,arguments)-Io,d=Math.abs(f-l),h=l>f?0:1;if(c<t&&(p=c,c=t,t=p),d>=Mo)return e(c,h)+(t?e(t,1-h):"")+"Z";var p,v,g,m,y,b,w,x,E,_,S,$,T=0,k=0,C=[];if((m=(+u.apply(this,arguments)||0)/2)&&(g=o===wa?Math.sqrt(t*t+c*c):+o.apply(this,arguments),h||(k*=-1),c&&(k=Q(g/c*Math.sin(m))),t&&(T=Q(g/t*Math.sin(m)))),c){y=c*Math.cos(l+k),b=c*Math.sin(l+k),w=c*Math.cos(f-k),x=c*Math.sin(f-k);var A=Math.abs(f-l-2*k)<=Ao?0:1;if(k&&bi(y,b,w,x)===h^A){var R=(l+f)/2;y=c*Math.cos(R),b=c*Math.sin(R),w=x=null}}else y=b=0;if(t){E=t*Math.cos(f-T),_=t*Math.sin(f-T),S=t*Math.cos(l+T),$=t*Math.sin(l+T);var M=Math.abs(l-f+2*T)<=Ao?0:1;if(T&&bi(E,_,S,$)===1-h^M){var I=(l+f)/2;E=t*Math.cos(I),_=t*Math.sin(I),S=$=null}}else E=_=0;if(d>ko&&(p=Math.min(Math.abs(c-t)/2,+i.apply(this,arguments)))>.001){v=t<c^h?0:1;var O=p,N=p;if(d<Ao){var L=null==S?[E,_]:null==w?[y,b]:fn([y,b],[S,$],[w,x],[E,_]),D=y-L[0],P=b-L[1],V=w-L[0],q=x-L[1],F=1/Math.sin(Math.acos((D*V+P*q)/(Math.sqrt(D*D+P*P)*Math.sqrt(V*V+q*q)))/2),U=Math.sqrt(L[0]*L[0]+L[1]*L[1]);N=Math.min(p,(t-U)/(F-1)),O=Math.min(p,(c-U)/(F+1))}if(null!=w){var B=wi(null==S?[E,_]:[S,$],[y,b],c,O,h),j=wi([w,x],[E,_],c,O,h);p===O?C.push("M",B[0],"A",O,",",O," 0 0,",v," ",B[1],"A",c,",",c," 0 ",1-h^bi(B[1][0],B[1][1],j[1][0],j[1][1]),",",h," ",j[1],"A",O,",",O," 0 0,",v," ",j[0]):C.push("M",B[0],"A",O,",",O," 0 1,",v," ",j[0])}else C.push("M",y,",",b);if(null!=S){var H=wi([y,b],[S,$],t,-N,h),z=wi([E,_],null==w?[y,b]:[w,x],t,-N,h);p===N?C.push("L",z[0],"A",N,",",N," 0 0,",v," ",z[1],"A",t,",",t," 0 ",h^bi(z[1][0],z[1][1],H[1][0],H[1][1]),",",1-h," ",H[1],"A",N,",",N," 0 0,",v," ",H[0]):C.push("L",z[0],"A",N,",",N," 0 0,",v," ",H[0])}else C.push("L",E,",",_)}else C.push("M",y,",",b),null!=w&&C.push("A",c,",",c," 0 ",A,",",h," ",w,",",x),C.push("L",E,",",_),null!=S&&C.push("A",t,",",t," 0 ",M,",",1-h," ",S,",",$);return C.push("Z"),C.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=pi,r=vi,i=hi,o=wa,s=gi,a=mi,u=yi;return t.innerRadius=function(e){return arguments.length?(n=xt(e),t):n},t.outerRadius=function(e){return arguments.length?(r=xt(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=xt(e),t):i},t.padRadius=function(e){return arguments.length?(o=e==wa?wa:xt(e),t):o},t.startAngle=function(e){return arguments.length?(s=xt(e),t):s},t.endAngle=function(e){return arguments.length?(a=xt(e),t):a},t.padAngle=function(e){return arguments.length?(u=xt(e),t):u},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-Io;return[Math.cos(e)*t,Math.sin(e)*t]},t};var wa="auto";Ji.svg.line=function(){return xi(y)};var xa=Ji.map({linear:Ei,"linear-closed":_i,step:function(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":Si,"step-after":$i,basis:Ci,"basis-open":function(t){if(t.length<4)return Ei(t);for(var e,n=[],r=-1,i=t.length,o=[0],s=[0];++r<3;)e=t[r],o.push(e[0]),s.push(e[1]);for(n.push(Ai(Sa,o)+","+Ai(Sa,s)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),s.shift(),s.push(e[1]),Ri(n,o,s);return n.join("")},"basis-closed":function(t){for(var e,n,r=-1,i=t.length,o=i+4,s=[],a=[];++r<4;)n=t[r%i],s.push(n[0]),a.push(n[1]);for(e=[Ai(Sa,s),",",Ai(Sa,a)],--r;++r<o;)n=t[r%i],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),Ri(e,s,a);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],s=t[0][1],a=t[n][0]-o,u=t[n][1]-s,c=-1;++c<=n;)i=c/n,(r=t[c])[0]=e*r[0]+(1-e)*(o+i*a),r[1]=e*r[1]+(1-e)*(s+i*u);return Ci(t)},cardinal:function(t,e){return t.length<3?Ei(t):t[0]+Ti(t,ki(t,e))},"cardinal-open":function(t,e){return t.length<4?Ei(t):t[1]+Ti(t.slice(1,-1),ki(t,e))},"cardinal-closed":function(t,e){return t.length<3?_i(t):t[0]+Ti((t.push(t[0]),t),ki([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Ei(t):t[0]+Ti(t,Ii(t))}});xa.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Ea=[0,2/3,1/3,0],_a=[0,1/3,2/3,0],Sa=[0,1/6,2/3,1/6];Ji.svg.line.radial=function(){var t=xi(Oi);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Si.reverse=$i,$i.reverse=Si,Ji.svg.area=function(){return Ni(y)},Ji.svg.area.radial=function(){var t=Ni(Oi);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Ji.svg.chord=function(){function t(t,s){var a=e(this,i,t,s),u=e(this,o,t,s);return"M"+a.p0+n(a.r,a.p1,a.a1-a.a0)+(function(t,e){return t.a0==e.a0&&t.a1==e.a1}(a,u)?r(a.r,a.p1,a.r,a.p0):r(a.r,a.p1,u.r,u.p0)+n(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,a.r,a.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=s.call(t,i,r),c=a.call(t,i,r)-Io,l=u.call(t,i,r)-Io;return{r:o,a0:c,a1:l,p0:[o*Math.cos(c),o*Math.sin(c)],p1:[o*Math.cos(l),o*Math.sin(l)]}}function n(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ao)+",1 "+e}function r(t,e,n,r){return"Q 0,0 "+r}var i=Ke,o=Qe,s=Li,a=gi,u=mi;return t.radius=function(e){return arguments.length?(s=xt(e),t):s},t.source=function(e){return arguments.length?(i=xt(e),t):i},t.target=function(e){return arguments.length?(o=xt(e),t):o},t.startAngle=function(e){return arguments.length?(a=xt(e),t):a},t.endAngle=function(e){return arguments.length?(u=xt(e),t):u},t},Ji.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),s=n.call(this,t,i),a=(o.y+s.y)/2,u=[o,{x:o.x,y:a},{x:s.x,y:a},s];return"M"+(u=u.map(r))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=Ke,n=Qe,r=Di;return t.source=function(n){return arguments.length?(e=xt(n),t):e},t.target=function(e){return arguments.length?(n=xt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},Ji.svg.diagonal.radial=function(){var t=Ji.svg.diagonal(),e=Di,n=t.projection;return t.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Io;return[n*Math.cos(r),n*Math.sin(r)]}}(e=t)):e},t},Ji.svg.symbol=function(){function t(t,r){return($a.get(e.call(this,t,r))||qi)(n.call(this,t,r))}var e=Vi,n=Pi;return t.type=function(n){return arguments.length?(e=xt(n),t):e},t.size=function(e){return arguments.length?(n=xt(e),t):n},t};var $a=Ji.map({circle:qi,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ka)),n=e*ka;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ta),n=e*Ta/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ta),n=e*Ta/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Ji.svg.symbolTypes=$a.keys();var Ta=Math.sqrt(3),ka=Math.tan(30*Oo);bo.transition=function(t){for(var e,n,r=Ca||++Ia,i=Hi(t),o=[],s=Aa||{time:Date.now(),ease:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},delay:0,duration:250},a=-1,u=this.length;++a<u;){o.push(e=[]);for(var c=this[a],l=-1,f=c.length;++l<f;)(n=c[l])&&zi(n,l,i,r,s),e.push(n)}return Ui(o,i,r)},bo.interrupt=function(t){return this.each(null==t?Ra:Fi(Hi(t)))};var Ca,Aa,Ra=Fi(Hi()),Ma=[],Ia=0;Ma.call=bo.call,Ma.empty=bo.empty,Ma.node=bo.node,Ma.size=bo.size,Ji.transition=function(t,e){return t&&t.transition?Ca?t.transition(e):t:Ji.selection().transition(t)},Ji.transition.prototype=Ma,Ma.select=function(t){var e,n,r,i=this.id,o=this.namespace,s=[];t=k(t);for(var a=-1,u=this.length;++a<u;){s.push(e=[]);for(var c=this[a],l=-1,f=c.length;++l<f;)(r=c[l])&&(n=t.call(r,r.__data__,l,a))?("__data__"in r&&(n.__data__=r.__data__),zi(n,l,o,i,r[o][i]),e.push(n)):e.push(null)}return Ui(s,o,i)},Ma.selectAll=function(t){var e,n,r,i,o,s=this.id,a=this.namespace,u=[];t=C(t);for(var c=-1,l=this.length;++c<l;)for(var f=this[c],d=-1,h=f.length;++d<h;)if(r=f[d]){o=r[a][s],n=t.call(r,r.__data__,d,c),u.push(e=[]);for(var p=-1,v=n.length;++p<v;)(i=n[p])&&zi(i,p,a,s,o),e.push(i)}return Ui(u,a,s)},Ma.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=F(t));for(var i=0,o=this.length;i<o;i++){r.push(e=[]);for(var s,a=0,u=(s=this[i]).length;a<u;a++)(n=s[a])&&t.call(n,n.__data__,a,i)&&e.push(n)}return Ui(r,this.namespace,this.id)},Ma.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):U(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Ma.attr=function(t,e){function n(){this.removeAttribute(o)}function r(){this.removeAttributeNS(o.space,o.local)}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i="transform"==t?nr:Un,o=Ji.ns.qualify(t);return Bi(this,"attr."+t,e,o.local?function(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(o.space,o.local);return n!==t&&(e=i(n,t),function(t){this.setAttributeNS(o.space,o.local,e(t))})})}:function(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(o);return n!==t&&(e=i(n,t),function(t){this.setAttribute(o,e(t))})})})},Ma.attrTween=function(t,e){var n=Ji.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,r){var i=e.call(this,t,r,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}:function(t,r){var i=e.call(this,t,r,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}})},Ma.style=function(t,e,r){function i(){this.style.removeProperty(t)}var o=arguments.length;if(o<3){if("string"!=typeof t){o<2&&(e="");for(r in t)this.style(r,t[r],e);return this}r=""}return Bi(this,"style."+t,e,function(e){return null==e?i:(e+="",function(){var i,o=n(this).getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(i=Un(o,e),function(e){this.style.setProperty(t,i(e),r)})})})},Ma.styleTween=function(t,e,r){return arguments.length<3&&(r=""),this.tween("style."+t,function(i,o){var s=e.call(this,i,o,n(this).getComputedStyle(this,null).getPropertyValue(t));return s&&function(e){this.style.setProperty(t,s(e),r)}})},Ma.text=function(t){return Bi(this,"text",t,ji)},Ma.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ma.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=Ji.ease.apply(Ji,arguments)),U(this,function(r){r[n][e].ease=t}))},Ma.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:U(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Ma.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:U(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Ma.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Aa,o=Ca;try{Ca=n,U(this,function(e,i,o){Aa=e[r][n],t.call(e,e.__data__,i,o)})}finally{Aa=i,Ca=o}}else U(this,function(i){var o=i[r][n];(o.event||(o.event=Ji.dispatch("start","end","interrupt"))).on(t,e)});return this},Ma.transition=function(){for(var t,e,n,r=this.id,i=++Ia,o=this.namespace,s=[],a=0,u=this.length;a<u;a++){s.push(t=[]);for(var c,l=0,f=(c=this[a]).length;l<f;l++)(e=c[l])&&zi(e,l,o,i,{time:(n=e[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return Ui(s,o,i)},Ji.svg.axis=function(){function t(t){t.each(function(){var t,c=Ji.select(this),l=this.__chart__||n,f=this.__chart__=n.copy(),d=null==u?f.ticks?f.ticks.apply(f,a):f.domain():u,h=null==e?f.tickFormat?f.tickFormat.apply(f,a):y:e,p=c.selectAll(".tick").data(d,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",ko),g=Ji.transition(p.exit()).style("opacity",ko).remove(),m=Ji.transition(p.order()).style("opacity",1),b=Math.max(i,0)+s,w=Gr(f),x=c.selectAll(".domain").data([0]),E=(x.enter().append("path").attr("class","domain"),Ji.transition(x));v.append("line"),v.append("text");var _,S,$,T,k=v.select("line"),C=m.select("line"),A=p.select("text").text(h),R=v.select("text"),M=m.select("text"),I="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=Wi,_="x",$="y",S="x2",T="y2",A.attr("dy",I<0?"0em":".71em").style("text-anchor","middle"),E.attr("d","M"+w[0]+","+I*o+"V0H"+w[1]+"V"+I*o)):(t=Gi,_="y",$="x",S="y2",T="x2",A.attr("dy",".32em").style("text-anchor",I<0?"end":"start"),E.attr("d","M"+I*o+","+w[0]+"H0V"+w[1]+"H"+I*o)),k.attr(T,I*i),R.attr($,I*b),C.attr(S,0).attr(T,I*i),M.attr(_,0).attr($,I*b),f.rangeBand){var O=f,N=O.rangeBand()/2;l=f=function(t){return O(t)+N}}else l.rangeBand?l=f:g.call(t,f,l);v.call(t,l,f),m.call(t,f,f)})}var e,n=Ji.scale.linear(),r=Oa,i=6,o=6,s=3,a=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Na?e+"":Oa,t):r},t.ticks=function(){return arguments.length?(a=eo(arguments),t):a},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,o=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(s=+e,t):s},t.tickSubdivide=function(){return arguments.length&&t},t};var Oa="bottom",Na={top:1,right:1,bottom:1,left:1};Ji.svg.brush=function(){function t(n){n.each(function(){var n=Ji.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),s=n.selectAll(".background").data([0]);s.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),n.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=n.selectAll(".resize").data(v,y);a.exit().remove(),a.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return La[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",t.empty()?"none":null);var u,f=Ji.transition(n),d=Ji.transition(s);c&&(u=Gr(c),d.attr("x",u[0]).attr("width",u[1]-u[0]),r(f)),l&&(u=Gr(l),d.attr("y",u[0]).attr("height",u[1]-u[0]),i(f)),e(f)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+d[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",d[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function o(){function o(){var t=Ji.mouse(b),n=!1;y&&(t[0]+=y[0],t[1]+=y[1]),k||(Ji.event.altKey?(m||(m=[(f[0]+f[1])/2,(d[0]+d[1])/2]),A[0]=f[+(t[0]<m[0])],A[1]=d[+(t[1]<m[1])]):m=null),$&&v(t,c,0)&&(r(E),n=!0),T&&v(t,l,1)&&(i(E),n=!0),n&&(e(E),x({type:"brush",mode:k?"move":"resize"}))}function v(t,e,n){var r,i,o=Gr(e),u=o[0],c=o[1],l=A[n],v=n?d:f,g=v[1]-v[0];if(k&&(u-=l,c-=g+l),r=(n?p:h)?Math.max(u,Math.min(c,t[n])):t[n],k?i=(r+=l)+g:(m&&(l=Math.max(u,Math.min(c,2*m[n]-r))),l<r?(i=r,r=l):i=l),v[0]!=r||v[1]!=i)return n?a=null:s=null,v[0]=r,v[1]=i,!0}function g(){o(),E.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Ji.select("body").style("cursor",null),R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),x({type:"brushend"})}var m,y,b=this,w=Ji.select(Ji.event.target),x=u.of(b,arguments),E=Ji.select(b),S=w.datum(),$=!/^(n|s)$/.test(S)&&c,T=!/^(e|w)$/.test(S)&&l,k=w.classed("extent"),C=W(b),A=Ji.mouse(b),R=Ji.select(n(b)).on("keydown.brush",function(){32==Ji.event.keyCode&&(k||(m=null,A[0]-=f[1],A[1]-=d[1],k=2),_())}).on("keyup.brush",function(){32==Ji.event.keyCode&&2==k&&(A[0]+=f[1],A[1]+=d[1],k=0,_())});if(Ji.event.changedTouches?R.on("touchmove.brush",o).on("touchend.brush",g):R.on("mousemove.brush",o).on("mouseup.brush",g),E.interrupt().selectAll("*").interrupt(),k)A[0]=f[0]-A[0],A[1]=d[0]-A[1];else if(S){var M=+/w$/.test(S),I=+/^n/.test(S);y=[f[1-M]-A[0],d[1-I]-A[1]],A[0]=f[M],A[1]=d[I]}else Ji.event.altKey&&(m=A.slice());E.style("pointer-events","none").selectAll(".resize").style("display",null),Ji.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),o()}var s,a,u=$(t,"brushstart","brush","brushend"),c=null,l=null,f=[0,0],d=[0,0],h=!0,p=!0,v=Da[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),e={x:f,y:d,i:s,j:a},n=this.__chart__||e;this.__chart__=e,Ca?Ji.select(this).transition().each("start.brush",function(){s=n.i,a=n.j,f=n.x,d=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=Bn(f,e.x),r=Bn(d,e.y);return s=a=null,function(i){f=e.x=n(i),d=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=e.i,a=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(c=e,v=Da[!c<<1|!l],t):c},t.y=function(e){return arguments.length?(l=e,v=Da[!c<<1|!l],t):l},t.clamp=function(e){return arguments.length?(c&&l?(h=!!e[0],p=!!e[1]):c?h=!!e:l&&(p=!!e),t):c&&l?[h,p]:c?h:l?p:null},t.extent=function(e){var n,r,i,o,u;return arguments.length?(c&&(n=e[0],r=e[1],l&&(n=n[0],r=r[0]),s=[n,r],c.invert&&(n=c(n),r=c(r)),r<n&&(u=n,n=r,r=u),n==f[0]&&r==f[1]||(f=[n,r])),l&&(i=e[0],o=e[1],c&&(i=i[1],o=o[1]),a=[i,o],l.invert&&(i=l(i),o=l(o)),o<i&&(u=i,i=o,o=u),i==d[0]&&o==d[1]||(d=[i,o])),t):(c&&(s?(n=s[0],r=s[1]):(n=f[0],r=f[1],c.invert&&(n=c.invert(n),r=c.invert(r)),r<n&&(u=n,n=r,r=u))),l&&(a?(i=a[0],o=a[1]):(i=d[0],o=d[1],l.invert&&(i=l.invert(i),o=l.invert(o)),o<i&&(u=i,i=o,o=u))),c&&l?[[n,i],[r,o]]:c?[n,r]:l&&[i,o])},t.clear=function(){return t.empty()||(f=[0,0],d=[0,0],s=a=null),t},t.empty=function(){return!!c&&f[0]==f[1]||!!l&&d[0]==d[1]},Ji.rebind(t,u,"on")};var La={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Da=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Pa=ns.format=us.timeFormat,Va=Pa.utc,qa=Va("%Y-%m-%dT%H:%M:%S.%LZ");Pa.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Zi:qa,Zi.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Zi.toString=qa.toString,ns.second=Rt(function(t){return new rs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ns.seconds=ns.second.range,ns.seconds.utc=ns.second.utc.range,ns.minute=Rt(function(t){return new rs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ns.minutes=ns.minute.range,ns.minutes.utc=ns.minute.utc.range,ns.hour=Rt(function(t){var e=t.getTimezoneOffset()/60;return new rs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ns.hours=ns.hour.range,ns.hours.utc=ns.hour.utc.range,ns.month=Rt(function(t){return(t=ns.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ns.months=ns.month.range,ns.months.utc=ns.month.utc.range;var Fa=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ua=[[ns.second,1],[ns.second,5],[ns.second,15],[ns.second,30],[ns.minute,1],[ns.minute,5],[ns.minute,15],[ns.minute,30],[ns.hour,1],[ns.hour,3],[ns.hour,6],[ns.hour,12],[ns.day,1],[ns.day,2],[ns.week,1],[ns.month,1],[ns.month,3],[ns.year,1]],Ba=Pa.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",me]]),ja={range:function(t,e,n){return Ji.range(Math.ceil(t/n)*n,+e,n).map(Xi)},floor:y,ceil:y};Ua.year=ns.year,ns.scale=function(){return Yi(Ji.scale.linear(),Ua,Ba)};var Ha=Ua.map(function(t){return[t[0].utc,t[1]]}),za=Va.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",me]]);Ha.year=ns.year.utc,ns.scale.utc=function(){return Yi(Ji.scale.linear(),Ha,za)},Ji.text=Et(function(t){return t.responseText}),Ji.json=function(t,e){return _t(t,"application/json",Ki,e)},Ji.html=function(t,e){return _t(t,"text/html",Qi,e)},Ji.xml=Et(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=Ji,define(Ji)):"object"==typeof e&&e.exports?e.exports=Ji:this.d3=Ji}()},{}],97:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],98:[function(t,e,n){e.exports.AddressType={GLOBAL:1,LOCAL:2,LOOPBACK:3,UNKNOWN:4}},{}],99:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("ClientSummary",["principal","clientType","transportType"]),e.exports.ClientType={JAVASCRIPT_BROWSER:0,JAVASCRIPT_FLASH:1,JAVASCRIPT_SILVERLIGHT:2,ANDROID:3,IOS:4,J2ME:5,FLASH:6,SILVERLIGHT:7,JAVA:8,DOTNET:9,C:10,INTERNAL:11,OTHER:12},e.exports.TransportType={WEBSOCKET:0,HTTP_LONG_POLL:1,IFRAME_LONG_POLL:2,IFRAME_STREAMING:3,DPT:4,HTTPC:5,HTTPC_DUPLEX:6,OTHER:7}},{"util/interface":448}],100:[function(t,e,n){var r=t("../node_modules/client/close-reason");e.exports={CLOSED_BY_CLIENT:new r(0,"The session was closed by the client",!1),CLOSED_BY_SERVER:new r(1,"The session was closed by the server",!1),RECONNECT_ABORTED:new r(2,"Client aborted a reconnect attempt",!1),CONNECTION_TIMEOUT:new r(3,"The connection attempt timed out",!1),HANDSHAKE_REJECTED:new r(4,"The connection handshake was rejected by the server",!1),HANDSHAKE_ERROR:new r(5,"There was an error parsing the handshake response",!1),TRANSPORT_ERROR:new r(6,"There was an unexpected error with the connection",!0),CONNECTION_ERROR:new r(7,"A connection to the server was unable to be established",!0),IDLE_CONNECTION:new r(8,"The activity monitor detected the connection was idle",!0),LOST_MESSAGES:new r(16,"Loss of messages has been detected",!1),ACCESS_DENIED:new r(99,"The connect attempt was rejected due to a security restraint",!1)}},{"../node_modules/client/close-reason":145}],101:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("SessionDetails",["available","connector","server","location","summary"]),e.exports.DetailType={SUMMARY:0,LOCATION:1,CONNECTOR_NAME:2,SERVER_NAME:3}},{"util/interface":448}],102:[function(t,e,n){var r=t("util/interface")._interface,i=r("RecordContent",["get","records","forEach"]);i.Record=r("Record",["get","fields","forEach"]),i.Builder=r("RecordContentBuilder",["add","set","build","addAndBuild","setAndBuild"]),i.Builder.Record=r("RecordContentRecordBuilder",["add","set"]),e.exports=i},{"util/interface":448}],103:[function(t,e,n){var r=t("util/interface")._interface,i=t("../datatype");e.exports=r("BinaryDataType",i,["from"])},{"../datatype":107,"util/interface":448}],104:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("BinaryDelta",["hasChanges"])},{"util/interface":448}],105:[function(t,e,n){var r=t("util/interface")._interface,i=t("../bytes");e.exports=r("Binary",i,["get","diff","apply"])},{"../bytes":106,"util/interface":448}],106:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("Bytes",["length","asBuffer","copyTo"])},{"util/interface":448}],107:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("DataType",["name","readValue","writeValue","canReadAs","readAs","deltaType"])},{"util/interface":448}],108:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("DataTypes",["binary","json","int64","string","double","recordv2","get","getByClass"])},{"util/interface":448}],109:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("DeltaType",["name","diff","apply","readDelta","writeDelta","noChange","isValueCheaper"])},{"util/interface":448}],110:[function(t,e,n){var r=t("util/interface")._interface,i=t("../datatype");e.exports=r("JSONDataType",i,["from","fromJsonString"])},{"../datatype":107,"util/interface":448}],111:[function(t,e,n){var r=t("util/interface")._interface,i=t("../bytes");e.exports=r("JSON",i,["get","diff","jsonDiff","apply"])},{"../bytes":106,"util/interface":448}],112:[function(t,e,n){var r=t("util/interface")._interface,i=t("../datatype");e.exports=r("DoubleDataType",i,[])},{"../datatype":107,"util/interface":448}],113:[function(t,e,n){var r=t("util/interface")._interface,i=t("../datatype");e.exports=r("Int64DataType",i,[])},{"../datatype":107,"util/interface":448}],114:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("Int64",["toString","toNumber"])},{"util/interface":448}],115:[function(t,e,n){var r=t("util/interface")._interface,i=t("../datatype");e.exports=r("StringDataType",i,[])},{"../datatype":107,"util/interface":448}],116:[function(t,e,n){var r=t("util/interface")._interface,i=t("../datatype");e.exports=r("RecordV2DataType",i,["withSchema","parseSchema","valueBuilder","schemaBuilder"])},{"../datatype":107,"util/interface":448}],117:[function(t,e,n){var r=t("util/interface")._interface,i=t("../bytes");e.exports=r("RecordV2",i,["diff","asModel","asValidatedModel","asRecords","asFields"])},{"../bytes":106,"util/interface":448}],118:[function(t,e,n){var r=t("client/internal-session-factory"),i=t("session/session-impl"),o=t("data/datatypes"),s=t("metadata/metadata"),a=t("./topics/topics"),u=t("./selectors/topic-selectors"),c=t("./errors/error-reason"),l=t("services/error-report"),f=t("./features/client-control-options"),d=t("util/logger");d.setLevel("SILENT");var h={version:"6.0.2",build:"2_01#52512",log:function(t){d.setLevel(t)},connect:function(t){return i.create(r,t)},datatypes:o,selectors:u,metadata:s,topics:a,errors:c,errorReport:l,clients:f};e.exports=h},{"./errors/error-reason":120,"./features/client-control-options":127,"./selectors/topic-selectors":465,"./topics/topics":468,"client/internal-session-factory":148,"data/datatypes":177,"metadata/metadata":240,"services/error-report":327,"session/session-impl":416,"util/logger":449}],119:[function(t,e,n){var r=(0,t("util/interface")._interface)("ErrorReport",["message","line","column"]);e.exports=r},{"util/interface":448}],120:[function(t,e,n){var r=t("../node_modules/client/error-reason");e.exports={COMMUNICATION_FAILURE:new r(100,"Communication with server failed"),SESSION_CLOSED:new r(101,"Session is closed"),REQUEST_TIME_OUT:new r(102,"Request time out"),ACCESS_DENIED:new r(103,"Access denied"),UNSUPPORTED:new r(104,"Unsupported service"),CALLBACK_EXCEPTION:new r(105,"An application callback threw an exception. Check logs for more information"),INVALID_DATA:new r(106,"Invalid data"),NO_SUCH_SESSION:new r(107,"A requested session could not be found"),INCOMPATIBLE_DATATYPE:new r(108,"Data type is incompatible"),UNHANDLED_MESSAGE:new r(109,"A message was not handled"),TOPIC_TREE_REGISTRATION_CONFLICT:new r(200,"A conflicting registration exists on the same branch of the topic tree"),HANDLER_CONFLICT:new r(201,"Conflict with an existing handler"),INVALID_PATH:new r(202,"Invalid path"),REJECTED_REQUEST:new r(9003,"A request has been rejected by the recipient session")}},{"../node_modules/client/error-reason":147}],121:[function(t,e,n){var r=t("util/interface")._interface,i=t("./stream");e.exports=r("FetchStream",i,[])},{"./stream":123,"util/interface":448}],122:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("Result",["then"])},{"util/interface":448}],123:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("Stream",["on","off","close"])},{"util/interface":448}],124:[function(t,e,n){var r=t("util/interface")._interface,i=t("./stream");e.exports=r("Subscription",i,["selector","asType","view","transform","close"])},{"./stream":123,"util/interface":448}],125:[function(t,e,n){var r=t("util/interface")._interface,i=t("./stream");e.exports=r("ValueStream",i,["selector","close"])},{"./stream":123,"util/interface":448}],126:[function(t,e,n){var r=t("util/interface")._interface,i=t("./stream");e.exports=r("View",i,["get"])},{"./stream":123,"util/interface":448}],127:[function(t,e,n){var r=t("../client/client-summary").TransportType,i=t("../client/client-summary").ClientType,o=t("../client/client-location").AddressType,s=t("../client/session-details").DetailType,a=t("../client/close-reason");e.exports={PropertyKeys:{ALL_FIXED_PROPERTIES:["*F"],ALL_USER_PROPERTIES:["*U"],ALL_PROPERTIES:["*F","*U"]},TransportType:r,AddressType:o,ClientType:i,DetailType:s,CloseReason:a,ANONYMOUS:""}},{"../client/client-location":98,"../client/client-summary":99,"../client/close-reason":100,"../client/session-details":101}],128:[function(t,e,n){var r=t("util/interface")._interface,i=r("ClientControl",["close","subscribe","unsubscribe","getSessionProperties","setSessionPropertiesListener"]);i.SessionPropertiesListener=r("SessionPropertiesListener",["onActive","onClose","onError","onSessionOpen","onSessionEvent","onSessionClose"]),i.SessionEventType={UPDATED:0,RECONNECTED:1,FAILED_OVER:2,DISCONNECTED:3},e.exports=i},{"util/interface":448}],129:[function(t,e,n){var r=t("util/interface")._interface,i=r("Messaging",["send","listen","addHandler","addRequestHandler","sendRequest","sendRequestToFilter","setRequestStream","removeRequestStream"]);i.MessageStream=r("MessageStream",[]),i.MessageHandler=r("MessageHandler",["onMessage","onActive","onClose"]),i.RequestStream=r("RequestStream",["onRequest","orError","onClose"]),i.RequestHandler=r("RequestHandler",["onRequest","onError","onClose"]),i.FilteredResponseHandler=r("FilteredResponseHandler",["onResponse","onResponseError","onError","onClose"]),i.Responder=r("Responder",["respond"]),i.Registration=r("Registration",["close"]),i.Priority={NORMAL:0,HIGH:1,LOW:2},i.Message={},i.SessionMessage={},e.exports=i},{"util/interface":448}],130:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("Pings",["pingServer"])},{"util/interface":448}],131:[function(t,e,n){var r=t("util/interface")._interface,i=r("SystemPrincipal",["name","roles"]),o=r("Role",["name","global","default","topic","inherits"]),s=r("SecurityConfiguration",["named","anonymous","roles"]),a=r("SystemAuthenticationConfiguration",["principals","anonymous"]),u=r("SecurityScriptBuilder",["build","setRolesForAnonymousSessions","setRolesForNamedSessions","setGlobalPermissions","setDefaultTopicPermissions","removeTopicPermissions","setTopicPermissions","setRoleIncludes"]),c=r("AuthenticationHandler",["onAuthenticate","onActive","onClose","onError"]);c.Callback=r("AuthenticationHandlerCallback",["allow","abstain","deny"]);var l=r("SystemAuthenticationScriptBuilder",["build","assignRoles","addPrincipal","setPassword","verifyPassword","removePrincipal","allowAnonymousConnections","denyAnonymousConnections","abstainAnonymousConnections"]),f=r("Security",["getPrincipal","changePrincipal","getSecurityConfiguration","getSystemAuthenticationConfiguration","updateSecurityStore","updateAuthenticationStore","securityScriptBuilder","authenticationScriptBuilder","setAuthenticationHandler"]);f.AuthenticationHandler=c,f.SecurityScriptBuilder=u,f.SystemAuthenticationScriptBuilder=l,f.SecurityConfiguration=s,f.SystemAuthenticationConfiguration=a,f.Role=o,f.SystemPrincipal=i,e.exports=f},{"util/interface":448}],132:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("TimeSeries",["append","edit","rangeQuery"]),e.exports.RangeQuery=r("RangeQuery",["forValues","forEdits","editRange","allEdits","latestEdits","from","fromStart","fromLast","fromLastMillis","to","toStart","next","nextMillis","previous","previousMillis","untilLast","untilLastMillis","limit","as","selectFrom"]),e.exports.EventMetadata=r("EventMetadata",["sequence","timestamp","author"]),e.exports.Event=r("Event",["value","originalEvent","isEditEvent"]),e.exports.QueryResult=r("QueryResult",["selectedCount","stream","isComplete","streamStructure","merge"])},{"util/interface":448}],133:[function(t,e,n){var r=t("util/interface")._interface;e.exports.TopicControl=r("TopicControl",["add","remove","removeSelector","removeWithSession","update","registerUpdateSource","addMissingTopicHandler"]),e.exports.MissingTopicHandler=r("MissingTopicHandler",["onMissingTopic","onRegister","onClose","onError"]),e.exports.MissingTopicNotification=r("MissingTopicNotification",["path","selector","sessionID","proceed","cancel"]),e.exports.TopicUpdateHandler=r("TopicUpdateHandler",["onRegister","onActive","onStandBy","onClose"]),e.exports.Updater=r("Updater",["update"])},{"util/interface":448}],134:[function(t,e,n){function r(t){this.id=t}var i=t("util/interface")._interface;e.exports.TopicNotifications=i("TopicNotifications",["addListener"]),e.exports.TopicNotificationListener=i("TopicNotificationListener",["onDescendantNotification","onTopicNotification","onClose","onError"]),e.exports.TopicNotificationRegistration=i("TopicNotificationRegistration",["select","deselect","close"]),e.exports.TopicNotificationType={ADDED:new r(0),SELECTED:new r(1),REMOVED:new r(2),DESELECTED:new r(3)}},{"util/interface":448}],135:[function(t,e,n){var r=(0,t("util/interface")._interface)("Topics",["subscribe","unsubscribe","stream","view","fetch"]);e.exports=r},{"util/interface":448}],136:[function(t,e,n){var r=t("util/interface")._interface,i=r("Metadata",["String","Integer","Decimal","Stateless","RecordContent"]);i.Stateless=r("Stateless",[]),i.String=r("String",["value"]),i.Integer=r("Integer",["value"]),i.Decimal=r("Decimal",["value","scale"]),i.RecordContent=r("RecordContent",["occurs","addRecord","getRecord","getRecords","string","integer","decimal","builder","parse"]),i.RecordContent.Record=r("Record",["name","occurs","addField","getField","getFields"]),i.RecordContent.Field=r("MField",["name","type","occurs"]),e.exports=i},{"util/interface":448}],137:[function(t,e,n){var r=t("./connection-activity-monitor"),i=2,o={onSystemPing:function(){},shutdown:function(){}};e.exports=function(t,e){if(e.systemPingPeriod>0){var n=e.systemPingPeriod*i;return new r(n,t)}return o}},{"./connection-activity-monitor":138}],138:[function(t,e,n){e.exports=function(t,e){var n=null;this.onSystemPing=function(){null!==n&&(clearTimeout(n),n=setTimeout(e.closeIdleConnection.bind(e),t))},this.shutdown=function(){null!==n&&(clearTimeout(n),n=null)},n=setTimeout(e.closeIdleConnection.bind(e),t)}},{}],139:[function(t,e,n){e.exports={NOOP:{onNewConnection:function(){},onConnectionClosed:function(){},onSystemPing:function(){}},create:function(t){return new function(t){var e=null;this.onNewConnection=function(n,r){e=t(n,r)},this.onConnectionClosed=function(){null!==e&&(e.shutdown(),e=null)},this.onSystemPing=function(){null!==e&&e.onSystemPing()}}(t)}}},{}],140:[function(t,e,n){e.exports.types={UINT:0,INT:1,BYTES:2,STRING:3,ARRAY:4,MAP:5,SEMANTIC:6,SIMPLE:7,FLOAT:7},e.exports.additional={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23,SIMPLE:24,HALF_PRECISION:25,SINGLE_PRECISION:26,DOUBLE_PRECISION:27,BREAK:31},e.exports.tokens={ARRAY_START:0,ARRAY_END:1,MAP_START:2,MAP_END:3,STRING_START:4,STRING_END:5,VALUE:6},e.exports.isStructStart=function(t){switch(t){case e.exports.tokens.ARRAY_START:case e.exports.tokens.MAP_START:case e.exports.tokens.STRING_START:return!0;default:return!1}},e.exports.isStructEnd=function(t){switch(t){case e.exports.tokens.ARRAY_END:case e.exports.tokens.MAP_END:case e.exports.tokens.STRING_END:return!0;default:return!1}}},{}],141:[function(t,e,n){e.exports=function(){var t={length:-1,type:"root",read:0},e=[],n=t;this.type=function(){return n.type},this.read=function(){return n.read},this.expected=function(){return n.length},this.push=function(t,r){n={length:r=void 0===r?-1:r,type:t,read:0},e.push(n)},this.pop=function(){var r=e.pop();return n=e.length?e[e.length-1]:t,r},this.next=function(){if(!this.hasRemaining())throw new Error("Exceeded expected collection limit");n.read++},this.break=function(){this.acceptsBreakMarker()&&(n.length=0,n.read=0)},this.hasRemaining=function(){return-1===n.length||n.length>n.read},this.acceptsBreakMarker=function(){return n!==t&&-1===n.length}}},{}],142:[function(t,e,n){(function(n){function r(t,e){switch(t.type){case s.VALUE:return t.value;case s.MAP_START:for(var i={};;){var o=e.nextToken();if(null===o)throw new Error("Unexpected EOF (reading: map key)");if(o.type===s.MAP_END)break;var u=e.nextToken();if(null===u||u.type===s.MAP_END)throw new Error("Unexpected EOF (reading: map value)");i[r(o,e)]=r(u,e)}return i;case s.ARRAY_START:for(var c=[];;){var l=e.nextToken();if(null===l)throw new Error("Unexpected EOF (reading: array value)");if(l.type===s.ARRAY_END)break;c.push(r(l,e))}return c;case s.STRING_START:for(var f=[];;){var d=e.nextToken();if(null===d)throw new Error("Unexpected EOF (reading: indefinite-length string");if(d.type===s.STRING_END)break;if(d.header.type!==t.header.type)throw new Error("Unexpected chunk type ("+d.header.type+") within string");f.push(d.value)}var h;return t.header.type===a.BYTES&&(h=n.concat(f)),t.header.type===a.STRING&&(h=f.join("")),h;default:throw new Error("Unexpected token: "+JSON.stringify(t))}}var i=t("cbor/tokeniser"),o=t("cbor/consts"),s=o.tokens,a=o.types;e.exports=function(t,e,o){var s=n.isBuffer(t)?new i(t,e,o):t;this.hasRemaining=s.hasRemaining,this.nextValue=function(){if(s.hasRemaining())return r(s.nextToken(),s);throw new Error("Token stream exhausted")}}}).call(this,t("buffer").Buffer)},{buffer:94,"cbor/consts":140,"cbor/tokeniser":144}],143:[function(t,e,n){(function(n){var r=t("io/buffer-output-stream"),i=t("data/primitive/int64-impl"),o=t("cbor/consts"),s=o.additional,a=o.types;e.exports=function(t){function e(t){h.write(t)}function o(t,e,n){e=e||0,n=void 0===n?t.length:n,h.writeMany(t,e,n)}function u(t){e(t>>8&255),e(255&t)}function c(t){u(t>>16&65535),u(65535&t)}function l(t){e(t<<5|s.BREAK)}function f(t,n){var r=t<<5;n<24?e(r|n):n<256?(e(24|r),e(n)):n<65536?(e(25|r),u(n)):n<4294967296?(e(26|r),c(n)):(e(27|r),function(t){c(Math.floor(t/4294967296)),c(t%4294967296)}(n))}function d(t){f(a.SIMPLE,t?s.TRUE:s.FALSE)}var h=t||new r,p=this;this.break=function(){return l(a.SIMPLE),p},this.startArray=function(t){return void 0===t?l(a.ARRAY):f(a.ARRAY,t),p},this.startObject=function(t){return void 0===t?l(a.MAP):f(a.MAP,t),p},this.writeInt64=function(t){return t.isNegative()?e(a.INT<<5|27):e(a.UINT<<5|27),o(t.toBuffer()),p},this.encode=function(t,r,u){if(null===t)f(a.SIMPLE,s.NULL);else if(void 0===t)f(a.SIMPLE,s.UNDEFINED);else if(!0===t)d(!0);else if(!1===t)d(!1);else if(i.isPrototypeOf(t))p.writeInt64(t);else switch(typeof t){case"string":!function(t){var e=new n(t,"utf-8");f(a.STRING,e.length),o(e)}(t);break;case"number":!function(t){if(t.toString().indexOf(".")>-1){var r=new n(8);r.writeDoubleBE(t,0),e(a.SIMPLE<<5|s.DOUBLE_PRECISION),o(r)}else t<0?f(a.INT,-1-t):f(a.UINT,t)}(t);break;case"object":n.isBuffer(t)?function(t,e,n){n=void 0===n?t.length:n,f(a.BYTES,n),o(t,e,n)}(t,r,u):Array.isArray(t)?function(t){p.startArray(t.length);for(var e=0;e<t.length;++e)p.encode(t[e])}(t):function(t){var e=Object.keys(t);p.startObject(e.length);for(var n=0;n<e.length;++n)p.encode(e[n]),p.encode(t[e[n]])}(t)}return p},this.flush=function(){var t=h.getBuffer();return h=new r,t}}}).call(this,t("buffer").Buffer)},{buffer:94,"cbor/consts":140,"data/primitive/int64-impl":187,"io/buffer-output-stream":235}],144:[function(t,e,n){(function(n){var r=t("data/primitive/int64-impl"),i=t("./context"),o=t("./consts"),s=o.additional,a=o.tokens,u=o.types,c=new Error,l=new n([]);e.exports=function(t,e,n){function o(e){switch(e.type){case u.UINT:return p(e);case u.INT:return p(e,!0);case u.BYTES:return d(p(e));case u.STRING:return d(p(e)).toString("utf-8");case u.SIMPLE:return function(e){switch(e){case s.TRUE:return!0;case s.FALSE:return!1;case s.NULL:return null;case s.BREAK:return c;case s.HALF_PRECISION:return function(){var t=h(),e=1023&t,n=(31744&t)>>10,r=(32768&t)>>15?-1:1;return 0===n?r*Math.pow(2,-14)*(e/Math.pow(2,10)):31===n?e?NaN:r*(1/0):r*Math.pow(2,n-15)*(1+e/Math.pow(2,10))}();case s.SINGLE_PRECISION:return function(){var e=t.readFloatBE(w);return w+=4,e}();case s.DOUBLE_PRECISION:return function(){var e=t.readDoubleBE(w);return w+=8,e}()}}(e.raw)}}function f(){if(w<t.length)return t[w++];throw new Error("Exhausted token stream")}function d(e){return t.slice(w,w+=e)}function h(){var e=t.readUInt16BE(w);return w+=2,e}function p(e,n){var i,o=e.raw;if(o<24)i=o;else if(o===s.SIMPLE)i=f();else if(o===s.HALF_PRECISION)i=h();else if(o===s.SINGLE_PRECISION)i=function(){var e=t.readUInt32BE(w);return w+=4,e}();else{if(o===s.DOUBLE_PRECISION)return function(t){var e=new r(d(8)),n=e.toNumber();return n<=9007199254740991&&n>=-9007199254740991?t?-1-n:n:e}(n);if(o===s.BREAK)return c}return n?-1-i:i}function v(t){var e=p(t);return e===c?-1:e}n=void 0===n?t.length:n,e=e||0;var g,m,y=new i,b=this,w=e;this.reset=function(){y=new i,g=void 0,m=void 0,w=e},this.hasRemaining=function(){var t=y.type();return w<e+("root"===t?n:n+1)},this.offset=function(){return w},this.getContext=function(){return y},this.getToken=function(){return g},this.nextToken=function(){if(!b.hasRemaining())return null;var e=y.type(),n=w;if("root"!==e&&!y.hasRemaining()){switch(e){case"object":m=a.MAP_END;break;case"array":m=a.ARRAY_END;break;case"string":m=a.STRING_END}return y.pop(),{pos:w,type:m,getBuffer:function(){return l}}}y.next();var r,i=function(){var t=f();return{type:t>>5,raw:31&t}}();switch(i.type){case u.INT:case u.UINT:case u.FLOAT:case u.SIMPLE:m=a.VALUE,r=o(i);break;case u.BYTES:case u.STRING:i.raw===s.BREAK?(y.push("string",-1),m=a.STRING_START):(m=a.VALUE,r=o(i));break;case u.ARRAY:y.push("array",v(i)),m=a.ARRAY_START;break;case u.MAP:var d=v(i);d>=0&&(d*=2),y.push("object",d),m=a.MAP_START;break;case u.SEMANTIC:return b.nextToken();default:throw new Error("Unknown CBOR header type: "+i.type)}if(r===c){if(y.acceptsBreakMarker())return y.break(),b.nextToken();throw new Error("Unexpected break flag outside of indefinite-length context")}return g={pos:n,type:m,value:r,header:i,length:w,getBuffer:function(){return t.slice(this.pos,this.length)}}}}}).call(this,t("buffer").Buffer)},{"./consts":140,"./context":141,buffer:94,"data/primitive/int64-impl":187}],145:[function(t,e,n){e.exports=function(t,e,n){this.id=t,this.message=e,this.canReconnect=n,this.toString=function(){return"id: "+e}}},{}],146:[function(t,e,n){var r=t("../../errors/error-reason");e.exports.create=function(t){return{onRequest:function(e,n,i){try{t(e,n,i)}catch(t){i.fail(r.CALLBACK_EXCEPTION,t.message)}}}}},{"../../errors/error-reason":120}],147:[function(t,e,n){function r(t,e){this.id=t,this.reason=e,this.toString=function(){return t+": "+e}}r.prototype=Error,e.exports=r},{}],148:[function(t,e,n){var r=t("client/internal-session"),i=t("client/service-registry"),o=t("v4-stack/connection-factory"),s=t("conversation/conversation-set"),a=t("services/services"),u=t("client/services/monitored-ping-service"),c=t("client/services/ping-service"),l=t("client/services/notify-subscription-service"),f=t("client/services/notify-unsubscription-service");e.exports=function(t){var e=new i;return e.add(a.USER_PING,c),e.add(a.SYSTEM_PING,u),e.add(a.NOTIFY_SUBSCRIPTION,l),e.add(a.UNSUBSCRIPTION_NOTIFICATION,f),new r(s,e,o,t)}},{"client/internal-session":149,"client/service-registry":152,"client/services/monitored-ping-service":153,"client/services/notify-subscription-service":154,"client/services/notify-unsubscription-service":155,"client/services/ping-service":156,"conversation/conversation-set":170,"services/services":358,"v4-stack/connection-factory":458}],149:[function(t,e,n){var r=t("events/emitter"),i=t("activity/session-activity-monitor"),o=t("client/service-adapter"),s=t("client/service-locator"),a=t("routing/stream-registry"),u=t("routing/topic-routing"),c=t("routing/topic-cache"),l=t("data/datatypes"),f=t("services/serialisers"),d=t("protocol/connection-request"),h=t("protocol/response-code"),p=t("../../client/close-reason"),v=t("transports/transports"),g=t("v4-stack/aliases"),m=t("util/logger").create("Internal Session"),y=t("util/function").curry,b=t("util/fsm"),w=t("activity/connection-activity-monitor-factory");e.exports=function(t,e,n,x){function E(t){A.change("closed")?(C.discardAll(t),T.close(t)):m.debug("Unable to handle session close, session state: ",A.state)}var _,S,$,T=r.assign(this),k="",C=t.create(),A=b.create("initialising",{initialising:["connecting"],connecting:["connected","closing"],connected:["disconnected","closing"],disconnected:["reconnecting","closing"],reconnecting:["connected","closing"],closing:["closed"],closed:[]});A.on("change",function(t,e){m.debug("State changed: "+t+" -> "+e)});var R=this;this.getState=function(){return A.state},this.getConversationSet=function(){return C},this.isConnected=function(){return"connected"===A.state},this.getServiceRegistry=function(){return e},this.getSessionId=function(){return _},this.setPrincipal=function(t){k=t},this.checkConnected=function(t){return!!R.isConnected()||(t.error(new Error("The session is not connected. Operations are not possible at this time.")),!1)};var M=v.create();M.on({"transport-selected":function(t){T.emit("transport-selected",t)},cascade:function(){T.emit("cascade")}});var I=n.create(g.create(),M,x.reconnect.timeout,256),O=new o(this,f,I.send),N=new s(this,f,O),L=new c(l),D=new a(L),P=new u(this,O,C,L,D);e.addListener(O.addService);var V=0,q=function(t){if(A.change("reconnecting")){m.info("Reconnect attempt ("+ ++V+")");var e=d.reconnect(S,I.getAvailableSequence(),I.lastReceivedSequence);I.connect(e,t,t.reconnect.timeout)}else m.debug("Unable to attempt reconnect, session state: ",A.state)},F=function(t){A.change("closing")?(m.debug("Aborting reconnect"),E(t||p.RECONNECT_ABORTED)):m.debug("Unable to abort reconnect, session state: ",A.state)};this.connect=function(){if(A.change("connecting")){var e,n=d.connect();I.on("data",P.route),I.on("close",E),$=x.activityMonitor?i.create(w):i.NOOP,I.on("disconnect",function(t){m.debug("Connection disconnected, reason: ",t),A.change("disconnected")||"reconnecting"===A.state?($.onConnectionClosed(),x.reconnect.timeout>0&&t.canReconnect?(x.token=S,"disconnected"===A.state&&(T.emit("disconnect",t),e=setTimeout(function(){"connected"!==A.state&&F(p.CONNECTION_TIMEOUT)},x.reconnect.timeout)),x.reconnect.strategy(y(q,x),F,t)):F(t)):A.change("closing")?E(t):($.onConnectionClosed(),m.debug("Unable to handle session disconnect, session state: ",A.state))}),I.on("connect",function(n){A.change("connected")?(S=n.token,n.response===h.OK?(_=n.identity,$.onNewConnection(I,n),T.emit("connect",n.identity)):n.response!==h.RECONNECTED&&n.response!==h.RECONNECTED_WITH_MESSAGE_LOSS||(V=0,clearTimeout(e),n.response===h.RECONNECTED_WITH_MESSAGE_LOSS?(I.resetSequences(),function(e){var n=C;C=t.create(),n.discardAll(e),m.debug("Replaced conversation set",e)}(new Error("Peer is disconnected")),L.notifyUnsubscriptionOfAllTopics(D),m.info("Reconnected session, but messages may have been lost")):m.info("Reconnected session"),$.onNewConnection(I,n),T.emit("reconnect"))):m.trace("Unknown connection response: ",n)}),m.debug("Connecting with options:",x),m.trace("Connecting with request:",n);try{I.connect(n,x)}catch(t){m.warn("Connection error",t),T.emit("error",t),A.change("closing")&&E(p.CONNECTION_ERROR)}x.principal&&(k=x.principal)}else m.warn("Unable to connect, session state: ",A.state),T.emit("error",new Error("Unable to connect, session state: "+A.state))},this.close=function(){A.change("closing")?($.onConnectionClosed(),I.close(p.CLOSED_BY_CLIENT)):m.debug("Unable to close, session state: ",A.state)},this.getErrorHandler=function(){return function(t){m.error("Session error:",t.message)}},this.getServiceLocator=function(){return N},this.getServiceAdapter=function(){return O},this.getPrincipal=function(){return k},this.getStreamRegistry=function(){return D},this.getRouting=function(){return P},this.onSystemPing=function(){$.onSystemPing()}}},{"../../client/close-reason":100,"activity/connection-activity-monitor-factory":137,"activity/session-activity-monitor":139,"client/service-adapter":150,"client/service-locator":151,"data/datatypes":177,"events/emitter":206,"protocol/connection-request":246,"protocol/response-code":249,"routing/stream-registry":250,"routing/topic-cache":256,"routing/topic-routing":257,"services/serialisers":357,"transports/transports":440,"util/fsm":446,"util/function":447,"util/logger":449,"v4-stack/aliases":457}],150:[function(t,e,n){var r=t("../../errors/error-reason").COMMUNICATION_FAILURE,i=t("client/error-reason"),o=t("conversation/conversation-id"),s=t("services/command-header"),a=t("v4-stack/message"),u=t("io/codec"),c=t("util/logger").create("Service Adapter");e.exports=function(t,e,n){function l(t,e,r){var i=a.create({type:a.types.SERVICE_RESPONSE});h.write(i,t),r.write(i,e),c.debug("Sending command response: "+t,e),n(i)}function f(t,e,r){var i=a.create({type:a.types.SERVICE_ERROR});h.write(i,t),u.writeString(i,r),u.writeInt32(i,e.id),c.debug("Sending command error: "+e.id,r),n(i)}var d={respond:function(){},fail:function(){}},h=e.get(s),p={};this.sendRequest=function(t,e,r){var i=a.create({type:a.types.SERVICE_REQUEST});h.write(i,t),r.write(i,e),c.debug("Sending command request: "+t,e),n(i)},this.sendResponse=l,this.sendError=f,this.addService=function(n,r){if(void 0!==p[n.id])throw new Error("Service already exists for "+n);var i=e.get(n.request),s=e.get(n.response);p[n.id]=function(e,a){var u=i.read(a),h=e.cid.equals(o.ONEWAY_CID)?d:{respond:function(t){l(e.createResponseHeader(),t,s)},fail:function(t,n){f(e.createErrorHeader(),t,n)}};try{r.onRequest(t,u,h)}catch(t){throw c.error(t),new Error("Unable to handle request for "+n.name)}}},this.onMessage=function(e,n){var o=h.read(n);switch(e){case a.types.SERVICE_REQUEST:!function(t,e){var n=p[t.service];n?(c.debug("Received command request for service: "+t),n(t,e)):(c.error("Received command request for unknown service: "+t),f(t.createErrorHeader(),r,"Unknown client service: "+t.service))}(o,n);break;case a.types.SERVICE_RESPONSE:!function(e,n){c.debug("Received command response: "+e),t.getConversationSet().respondIfPresent(e.cid,n)}(o,n);break;case a.types.SERVICE_ERROR:!function(e,n){var r=u.readString(n),o=u.readInt32(n),s=new i(o,r);c.warn("Received command error",s),t.getConversationSet().discard(e.cid,s)}(o,n);break;default:throw new Error("Unknown Command Service message "+e)}}}},{"../../errors/error-reason":120,"client/error-reason":147,"conversation/conversation-id":169,"io/codec":236,"services/command-header":280,"util/logger":449,"v4-stack/message":462}],151:[function(t,e,n){var r=t("services/command-header"),i=t("util/logger").create("ServiceLocator");e.exports=function(t,e,n){var o=t.getConversationSet();this.obtain=function(t){var s=e.get(t.request),a=e.get(t.response);return{send:function(e,u){u=u||function(){};var c={onOpen:function(i){var o=new r(t.id,i);try{n.sendRequest(o,e,s)}catch(t){throw u(t),t}},onResponse:function(e,n){var r;try{r=a.read(n)}catch(e){return i.debug("Failed to deserialise response from "+t.name,e.stack),u(e),!0}try{u(null,r)}catch(e){i.debug("Request callback for service '"+t.name+"' threw an error",e.stack);try{u(e)}catch(e){i.debug("Failed to notify callback error for service '"+t.name+"'",e)}}return!0},onDiscard:function(t,e){u(e)}},l=o.newConversation(c,u);return function(){o.discard(l,new Error("Cancelled"))}}}}}},{"services/command-header":280,"util/logger":449}],152:[function(t,e,n){var r=t("hashmap");e.exports=function(){var t=new r,e=[];this.get=function(e){return t.get(e)},this.add=function(n,r){if(t.has(n))throw new Error("Service already exists for "+n);t.set(n,r),e.forEach(function(t){t(n,r)})},this.addListener=function(n){e.push(n),t.forEach(function(t,e){n(e,t)})}}},{hashmap:470}],153:[function(t,e,n){e.exports={onRequest:function(t,e,n){n.respond(),t.onSystemPing()}}},{}],154:[function(t,e,n){e.exports={onRequest:function(t,e,n){n.respond(),t.getRouting().subscribe(e)}}},{}],155:[function(t,e,n){e.exports={onRequest:function(t,e,n){n.respond(),t.getRouting().unsubscribe(e.id,e.reason)}}},{}],156:[function(t,e,n){e.exports={onRequest:function(t,e,n){n.respond()}}},{}],157:[function(t,e,n){e.exports={RECORD_DELIMITER:1,FIELD_DELIMITER:2,EMPTY_FIELD:3,RECORD_MU:4,FIELD_MU:5}},{}],158:[function(t,e,n){var r=t("io/buffer-input-stream"),i=t("./record-content"),o=t("content/consts");e.exports=function(t){var e=[];if(1===t.length&&t[0]===o.RECORD_MU)e.push(new i.Record([]));else if(t.length>0){for(var n=new r(t);n.hasRemaining();){for(var s=new r(n.readUntil(o.RECORD_DELIMITER)),a=[];s.hasRemaining();){var u=s.readUntil(o.FIELD_DELIMITER);0===u.length||1===u.length&&(0===a.length&&u[0]===o.FIELD_MU||u[0]===o.EMPTY_FIELD)?a.push(void 0):a.push(u.toString())}var c=s.buffer;c[c.length-1]===o.FIELD_DELIMITER&&a.push(void 0),e.push(new i.Record(a))}t[t.length-1]===o.RECORD_DELIMITER&&e.push(new i.Record([]))}return new i(e)}},{"./record-content":159,"content/consts":157,"io/buffer-input-stream":234}],159:[function(t,e,n){var r=t("content/consts"),i=function(t){this.length=t.length,this.get=function(e){return e=e||0,t[e]},this.records=function(){return t.concat([])},this.forEach=function(e){t.forEach(e)},this.toString=function(){return t.join(r.RECORD_DELIMITER)}};i.Record=function(t){this.length=t.length,this.get=function(e){return e=e||0,t[e]},this.fields=function(){return t.concat([])},this.forEach=function(e){t.forEach(e)},this.toString=function(){return t.join(r.FIELD_DELIMITER)}},e.exports=i},{"content/consts":157}],160:[function(t,e,n){var r=t("serialisers/byte-encoded-enum-serialiser"),i=t("io/codec"),o=t("content/util"),s={NONE:0,ENCRYPTED:1,COMPRESSED:2};e.exports={read:function(t){var e=r.read(t,s),n=i.readBytes(t);switch(e){case s.NONE:return n;default:throw new Error("Unable to handle encoding type "+e)}},write:function(t,e){r.write(t,s.NONE),i.writeBytes(t,o.getBytes(e))}}},{"content/util":164,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263}],161:[function(t,e,n){function r(t,e,n){if(n)for(var r in n){var i=n[r];if(i instanceof Array)for(var o=0;o<i.length;++o)e.call(t,r,i[o],o);else e.call(t,r,i)}}var i=t("util/interface")._implements,o=t("../../../content/record-content"),s=t("content/structured-record-content/record-content"),a=i(o.Builder.Record,function(t){var e={};this.add=function(n,r){var i=t.getField(n);if(!i)throw new Error("Invalid field name  '"+n+"'");if(void 0===e[n]&&(e[n]=[]),!(-1===i.occurs.max||e[n].length<i.occurs.max))throw new Error("Field '"+n+"' can only occur up to "+i.occurs.max+" times");return e[n].push(r),this},this.set=function(n,r,i){if(!t.getField(n))throw new Error("Invalid field name '"+n+"'");if(void 0===e[n]&&(e[n]=[]),i=i||0,void 0===e[n][i])throw new Error("Cannot set nonexistent field '"+n+'" ('+i+")");return e[n][i]=r,this},this.build=function(){var n={};return t.getFields().forEach(function(t){var r=t.name;n[r]=[],void 0===e[r]&&(e[r]=[]);for(var i=e[r].length;i<t.occurs.min;++i)e[r].push(t.type.value);n[r]=e[r]}),new s.Record(n)}}),u=i(o.Builder,function(t){var e={};this.add=function(n,i){var o=t.getRecord(n);if(o){if(void 0===e[n]&&(e[n]=[]),-1===o.occurs.max||e[n].length<o.occurs.max){var s=new a(o);return e[n].push(s),r(s,s.add,i),s}throw new Error("Record '"+n+"' can only occur up to "+o.occurs.max+" times")}throw new Error("Invalid record name '"+n+"'")},this.set=function(n,i,o){if(t.getRecord(n)){if(void 0===e[n]&&(e[n]=[]),o=o||0,void 0!==e[n][o]){var s=e[n][o];return r(s,s.set,i),s}throw new Error("Cannot set nonexistent record "+n+'" ('+o+")")}throw new Error("Invalid record name '"+n+"'")},this.build=function(){var n={};return t.getRecords().forEach(function(t){var r=t.name;n[r]=[],void 0===e[r]&&(e[r]=[]);for(var i=e[r].length;i<t.occurs.min;++i)e[r].push(new a(t));for(var o=0;o<e[r].length;++o)n[r].push(e[r][o].build())}),new s(n)},this.addAndBuild=function(t,e){return this.add(t,e),this.build()},this.setAndBuild=function(t,e,n){return this.set(t,e,n),this.build()}});e.exports=u},{"../../../content/record-content":102,"content/structured-record-content/record-content":163,"util/interface":448}],162:[function(t,e,n){function r(t){var e=0;this.readUpTo=function(n,r){var i=Math.min(e+(-1===n.max?t.length:n.max),t.length);if(0!==t.length){if(n.min>t.length-e)throw new Error("Data exhaused while parsing");for(var o=e;o<i;++o)r(t[o]);e=i}}}var i=t("content/record-content/parser"),o=t("content/structured-record-content/record-content");e.exports=function(t){this.parse=function(e){var n=new r(i(e).records()),s={};return t.getRecords().forEach(function(t){var e=[];n.readUpTo(t.occurs,function(n){var i=new r(n.fields()),s={};t.getFields().forEach(function(t){var e=[];i.readUpTo(t.occurs,function(n){n?e.push(t.type.parse(n)):e.push(n)}),s[t.name]=e}),e.push(new o.Record(s))}),s[t.name]=e}),new o(s)}}},{"content/record-content/parser":158,"content/structured-record-content/record-content":163}],163:[function(t,e,n){var r=t("util/interface")._implements,i=t("../../../content/record-content"),o=r(i,function(t){var e=[];for(var n in t)e=e.concat(t[n]);this.get=function(e,n){if(n=n||0,t[e])return t[e][n]},this.records=function(n){return t[n]?t[n].concat([]):e.concat([])},this.forEach=function(t){e.forEach(t)}});o.Record=r(i.Record,function(t){var e=[];for(var n in t)e=e.concat(t[n]);this.get=function(e,n){if(n=n||0,t[e])return t[e][n]},this.fields=function(n){return t[n]?t[n].concat([]):e.concat([])},this.forEach=function(t){e.forEach(t)}}),e.exports=o},{"../../../content/record-content":102,"util/interface":448}],164:[function(t,e,n){(function(n){function r(t){return o.isPrototypeOf(t)||s.isPrototypeOf(t)}var i=t("io/buffer-output-stream"),o=t("content/record-content/record-content"),s=t("content/structured-record-content/record-content"),a=t("content/consts");e.exports={getBytes:function(t){return t.$buffer?t.$buffer.slice(t.$offset,t.$length):r(t)?function(t){var e=new i,n=!1;return t.forEach(function(t){var r=!1;n?e.writeInt8(a.RECORD_DELIMITER):n=!0,t.forEach(function(t){r?e.writeInt8(a.FIELD_DELIMITER):r=!0,e.writeString(t.toString())})}),e.getBuffer()}(t):function(t){return new n(t.toString())}(t)},isRecordContent:r}}).call(this,t("buffer").Buffer)},{buffer:94,"content/consts":157,"content/record-content/record-content":159,"content/structured-record-content/record-content":163,"io/buffer-output-stream":235}],165:[function(t,e,n){var r=t("control/control-group"),i=t("io/codec"),o={read:function(t){var e=i.readString(t);return new r(e)},write:function(t,e){i.writeString(t,e.name)}};e.exports=o},{"control/control-group":166,"io/codec":236}],166:[function(t,e,n){function r(t){this.name=t}r.DEFAULT=new r("default"),e.exports=r},{}],167:[function(t,e,n){function r(t,e,n){var r,i=l.REGISTERING;return{onDiscard:function(t,n){n instanceof c?e.close():e.close(n),i=l.CLOSED},onOpen:function(e){r=function(){var r=new a,o=new u(r);return i!==l.CLOSED?n(e,function(n){n?(t.getConversationSet().discard(e,n),r.error(n)):(t.getConversationSet().respondIfPresent(e,l.CLOSED),r.emit("complete"))}):r.error(new Error("Handler already closed")),o}},onResponse:function(t,n){switch(n){case l.ACTIVE:return e.active(r,t),i=n,!1;case l.CLOSED:return e.close(),i=n,!0;default:return e.respond(n)}}}}function i(t,e,n){return function(r){r?(t.discard(e,r),n.error(r)):(t.respondIfPresent(e,l.ACTIVE),n.emit("complete"))}}function o(t,e,n,o,s){var c=t.getConversationSet(),l=t.getServiceLocator(),f=l.obtain(o),d=l.obtain(s),h=c.newConversation(r(t,n,function(t,n){d.send(e,n)})),p=new a,v=new u(p);return f.send({params:e,cid:h},i(c,h,p)),v}var s=t("services/services"),a=t("events/emitter"),u=t("events/result"),c=t("client/close-reason"),l={REGISTERING:0,ACTIVE:1,CLOSED:2};e.exports.responseHandler=r,e.exports.registrationCallback=i,e.exports.registerHandler=o,e.exports.registerMessageHandler=function(t,e,n){return o(t,e,n,s.MESSAGE_RECEIVER_CONTROL_REGISTRATION,s.MESSAGE_RECEIVER_CONTROL_DEREGISTRATION)},e.exports.registerRequestHandler=function(t,e,n){return o(t,e,n,s.MESSAGING_RECEIVER_CONTROL_REGISTRATION,s.MESSAGING_RECEIVER_CONTROL_DEREGISTRATION)},e.exports.registerServerHandler=function(t,e,n){return o(t,e,n,s.SERVER_CONTROL_REGISTRATION,s.SERVER_CONTROL_DEREGISTRATION)},e.exports.registerTopicHandler=function(t,e,n){return o(t,e,n,s.TOPIC_CONTROL_REGISTRATION,s.TOPIC_CONTROL_DEREGISTRATION)},e.exports.ResponseHandlerState=l},{"client/close-reason":145,"events/emitter":206,"events/result":207,"services/services":358}],168:[function(t,e,n){var r=t("io/codec"),i=t("conversation/conversation-id"),o={read:function(t){return new i(r.readInt64(t))},write:function(t,e){r.writeInt64(t,e.val)}};e.exports=o},{"conversation/conversation-id":169,"io/codec":236}],169:[function(t,e,n){function r(t){this.val=t}var i=t("long");r.prototype.toString=function(){return this.val.toString(10)},r.prototype.toValue=function(){return this.toString()},r.prototype.equals=function(t){return t.val&&this.val.equals(t.val)},r.fromString=function(t){return new r(i.fromString(t,!1))},r.ONEWAY_CID=new r(i.fromNumber(0)),e.exports=r},{long:476}],170:[function(t,e,n){function r(t){function e(t,e,n){c.debug("Application handler threw exception [cid="+t+"]",n.stack),e.close(),delete o[t]}var n,r=t,o={},s=this;this.newConversation=function(t){var i=new function(t){function n(e,n){if(!o){o=!0;try{t.onDiscard(e,n)}catch(t){throw c.error("Application handler threw exception [cid="+e+"]",t.stack),t}}}var r,i=!1,o=!1;this.open=function(e){t.onOpen(e)},this.respond=function(s,a){if(o)return u.ALREADY_FINISHED;var l=i;i=!0;var f;try{f=t.onResponse(s,a)}catch(t){throw e(s,this,t),t}return o?(c.debug("Conversation already closed",s),u.HANDLED_AND_FINISHED):f?(c.debug("Response handler closed conversation",s),o=!0,u.HANDLED_AND_FINISHED):r?(c.debug("Conversation closed with pending reason",s),n(s,r),u.HANDLED_AND_FINISHED):(i=l,u.HANDLED_AND_ACTIVE)},this.discard=function(t,e){i?r=e:n(t,e)},this.close=function(){o=!0}}(t),a=r();o[a.toString()]=i;try{i.open(a)}catch(t){throw e(a,i,t),t}return n&&s.discard(a,n),a},this.respond=function(t,e){var n=o[t];if(void 0===n)throw c.debug("No conversation for cid: "+t+", response: ",e),new Error("No such conversation");switch(n.respond(t,e)){case u.ALREADY_FINISHED:throw new Error("No such conversation");case u.HANDLED_AND_ACTIVE:break;default:delete o[t]}},this.respondIfPresent=function(t,e){try{s.respond(t,e)}catch(t){}},this.discard=function(t,e){var n=o[t];delete o[t],n&&n.discard(t,e)},this.discardAll=function(t){if(void 0===n){n=t;for(var e in o)s.discard(i.fromString(e),t)}},this.size=function(){return Object.keys(o).length},this.toString=function(){return"ConversationSet cids=["+Object.keys(o)+"]"}}var i=t("conversation/conversation-id"),o=t("util/logger"),s=t("long"),a=function(){var t=new s(0);return function(){return t=t.add(1),new i(t)}}(),u={ALREADY_FINISHED:0,HANDLED_AND_ACTIVE:1,HANDLED_AND_FINISHED:2},c=o.create("Conversation Set");e.exports=r,e.exports.create=function(){return new r(a)},e.exports.Result=u,e.exports.ConversationIdGenerator=a},{"conversation/conversation-id":169,long:476,"util/logger":449}],171:[function(t,e,n){var r=t("data/binary/binary-delta-type-impl"),i=t("data/binary/binary-delta-impl"),o=t("data/bytes-impl");e.exports=function(t,e,n,s,a,u,c){var l=c?new r(n,s,a):null,f={};u.forEach(function(t){f[t.toString()]=function(e,n,r){return new t(e,n,r)}}),this.valueClass=e,this.name=function(){return t},this.toString=function(){return t+" data type"},this.writeValue=function(t){var e=s(t);if(null===e)throw new Error(this+" cannot write "+t);return e.asBuffer()},this.toBytes=function(t){var e=s(t);if(e)return e;throw new Error(this+" cannot convert value to Bytes: "+t)},this.readValue=function(t,e,r){return t.$buffer?a(t):a(new n(t,e,r))},f[o.toString()]=function(t,e,n){return new o(t,e,n)},f[e.toString()]=this.readValue,this.canReadAs=function(t){return void 0!==f[t]},this.readAs=function(t,e,r,i){if(e.$buffer)return e instanceof n?e:this.readAs(t,e.$buffer,e.$offset,e.$length);if(f[t])return f[t](e,r,i);throw new Error(this+" is incompatible with values of "+t)},this.deltaType=function(t){if(!t||"binary"===t||i.isPrototypeOf(t))return this.binaryDeltaType();throw new Error(this+" has no '"+t+"' delta type")},this.binaryDeltaType=function(){if(l)return l;throw new Error(this+" has no binary delta type")}}},{"data/binary/binary-delta-impl":173,"data/binary/binary-delta-type-impl":174,"data/bytes-impl":176}],172:[function(t,e,n){var r=t("util/interface")._implements,i=t("../../../data/binary/binary-datatype"),o=t("data/abstract-datatype"),s=t("data/binary/binary-impl"),a=t("util/function").identity;e.exports=r(i,function(){o.call(this,"binary",s,s,s.from,a,[],!0),this.from=s.from,this.Binary=s})},{"../../../data/binary/binary-datatype":103,"data/abstract-datatype":171,"data/binary/binary-impl":175,"util/function":447,"util/interface":448}],173:[function(t,e,n){(function(n){var r=t("util/interface")._implements,i=t("cbor/tokeniser"),o=t("../../../data/binary/binary-delta"),s=t("data/util");e.exports=r(o,function(t,e,r){s.assignInternals(this,t,e,r),this.visit=function(o){if(this.hasChanges()){for(var s=new i(t,e,r);s.hasRemaining();){var a=s.nextToken(),u=!1;if(n.isBuffer(a.value))u=!o.insert(a.value);else{var c=a.value,l=s.nextToken().value;u=!o.match(c,l)}if(u)return void o.end()}o.end()}else o.noChange()},this.hasChanges=function(){return 1!==r},this.equals=function(t){return!!t&&(this.$offset===t.$offset&&this.$length===t.$length&&this.$buffer.equals(t.$buffer))}})}).call(this,{isBuffer:t("../../../../../is-buffer/index.js")})},{"../../../../../is-buffer/index.js":473,"../../../data/binary/binary-delta":104,"cbor/tokeniser":144,"data/util":205,"util/interface":448}],174:[function(t,e,n){(function(n){function r(t){return t<24?1:t<255?2:t<=65535?3:5}function i(t,e,n){var i=r(t)+1;return r(e+n)-r(n)+e<=i}function o(t,e,n,o){function s(){return-1===f?l.SUCCESS:u?function(i,s){if(o(s+r(s)))return l.REPLACE;return t.encode(e,n+i,s),f=-1,l.SUCCESS}(f,c):function(e,n){if(o(r(e)+r(n)))return l.REPLACE;return t.encode(e),t.encode(n),f=-1,l.SUCCESS}(f,c)}function a(t,e,n){var r=s();return r!==l.SUCCESS?r:(u=t,f=e,c=n,l.SUCCESS)}var u,c,f=-1;this.insert=function(t,e){return!u&&-1!==f&&i(f,c,e)?(f=t-c,c+=e,u=!0,l.SUCCESS):a(!0,t,e)},this.match=function(t,e){return u&&-1!==f&&i(t,e,c)?(c+=e,l.SUCCESS):a(!1,t,e)},this.close=function(){return s()}}var s=t("util/interface")._implements,a=t("../../../data/delta-type"),u=t("io/buffer-output-stream"),c=t("data/binary/binary-delta-impl"),l=t("data/diff/myers-binary-diff"),f=t("cbor/decoder"),d=new(t("cbor/encoder")),h=new c(new n([-10]),0,1);e.exports=s(a,function(t,e,r){var i=new l,s=this;this.name=function(){return"binary"},this.diff=function(t,n){t=e(t);var r=(n=e(n)).$buffer,a=n.$offset,u=n.$length,f=u,p=new o(d,r,a,function(t){return(f-=t)<=0}),v=i.diff(t.$buffer,t.$offset,t.$length,r,a,u,p),g=d.flush();switch(v){case l.REPLACE:return function(t){return d.encode(t.$buffer,t.$offset,t.$length),new c(d.flush())}(n);case l.NO_CHANGE:return h;default:return s.readDelta(g)}},this.apply=function(i,o){if(!o||!o.hasChanges())return i;i=e(i);for(var s=new f(o.$buffer),a=new u;s.hasRemaining();){var c=s.nextValue();n.isBuffer(c)?a.writeMany(c):"number"==typeof c&&a.writeMany(i.$buffer,i.$offset+c,s.nextValue())}return r(new t(a.getBuffer()))},this.readDelta=function(t,e,n){var r=new c(t,e,n);return 1===r.$length&&t[r.$offset]===h.$buffer[0]?h:r},this.writeDelta=function(t){return t.$buffer.slice(t.$offset,t.$offset+t.$length)},this.noChange=function(){return h},this.isValueCheaper=function(t,e){return t.$length<=e.$length}}),e.exports.NO_CHANGE=h}).call(this,t("buffer").Buffer)},{"../../../data/delta-type":109,buffer:94,"cbor/decoder":142,"cbor/encoder":143,"data/binary/binary-delta-impl":173,"data/diff/myers-binary-diff":178,"io/buffer-output-stream":235,"util/interface":448}],175:[function(t,e,n){(function(n){function r(t){if(t instanceof i)return t;if(n.isBuffer(t))return new i(t);throw new Error("Unable to read Binary value from: "+t)}function i(t,e,n){u.__constructor.call(this,t,e,n);var r=this;this.get=function(){return r.asBuffer()},this.diff=function(t){return c.diff(t,r)},this.apply=function(t){return c.apply(r,t)},this.toString=function(){return"Binary <"+r.$length+" bytes> "+r.get().toString()}}var o=t("util/interface")._implements,s=t("../../../data/binary/binary"),a=t("data/binary/binary-delta-type-impl"),u=t("data/bytes-impl"),c=new a(i,r,t("util/function").identity);e.exports=o(s,i),e.exports.from=r,e.exports.toString=function(){return"BinaryImpl"}}).call(this,{isBuffer:t("../../../../../is-buffer/index.js")})},{"../../../../../is-buffer/index.js":473,"../../../data/binary/binary":105,"data/binary/binary-delta-type-impl":174,"data/bytes-impl":176,"util/function":447,"util/interface":448}],176:[function(t,e,n){var r=t("util/interface")._implements,i=t("../../data/bytes"),o=t("data/util");e.exports=r(i,function(t,e,n){o.assignInternals(this,t,e,n);var r=this;this.length=function(){return r.$length},this.asBuffer=function(){return t.slice(r.$offset,r.$offset+r.$length)},this.copyTo=function(e,n){n=n||0,t.copy(e,n,r.$offset,r.$offset+r.$length)},this.equals=function(t){return this.equalBytes(t.$buffer,t.$offset,t.$length)},this.equalBytes=function(t,e,n){if(this.$length!==n)return!1;var r=this.$buffer,i=this.$offset;if(r===t&&i===e)return!0;for(var o=0;o<n;++o)if(r[i+o]!==t[e+o])return!1;return!0}}),e.exports.toString=function(){return"BytesImpl"}},{"../../data/bytes":106,"data/util":205,"util/interface":448}],177:[function(t,e,n){(function(n){var r=t("util/interface")._implements,i=t("../../data/datatypes"),o=t("../../topics/topics").TopicType,s=t("data/binary/binary-datatype-impl"),a=t("data/binary/binary-impl"),u=t("data/json/json-datatype-impl"),c=t("data/json/json-impl"),l=t("data/primitive/int64-datatype-impl"),f=t("data/primitive/int64-impl"),d=t("data/primitive/string-datatype-impl"),h=t("data/primitive/double-datatype-impl"),p=t("data/record/recordv2-datatype-impl"),v=t("data/record/recordv2-impl"),g=r(i,function(){var t=new p,e=new s,r=new d,i=new h,g=new l,m=new u,y=this;this.binary=function(){return e},this.string=function(){return r},this.double=function(){return i},this.int64=function(){return g},this.json=function(){return m},this.recordv2=function(){return t},this.getByName=function(t){switch(t.toLowerCase()){case"json":return y.json();case"int64":return y.int64();case"binary":return y.binary();case"string":return y.string();case"double":return y.double();case"recordv2":return y.recordv2()}},this.getByValue=function(t){return t===o.BINARY||a.isPrototypeOf(t)||n.isBuffer(t)?y.binary():t===o.JSON||c.isPrototypeOf(t)||t.constructor===Object?y.json():t===o.STRING||"string"==typeof t?y.string():t===o.DOUBLE||"number"==typeof t?y.double():t===o.INT64||f.isPrototypeOf(t)?y.int64():t===o.RECORD_V2||v.isPrototypeOf(t)?y.recordv2():void 0},this.get=function(t){var e;return"string"==typeof t&&(e=this.getByName(t)),e||(e=this.getByValue(t)),e||(e=this.getByClassSafely(t)),e||null},this.getChecked=function(t){if(!t)throw new Error("No data type for "+t);if(p.isPrototypeOf(t)||s.isPrototypeOf(t)||d.isPrototypeOf(t)||h.isPrototypeOf(t)||l.isPrototypeOf(t)||u.isPrototypeOf(t))return t;var e=this.get(t);if(null===e)throw new Error("No data type for "+t);return e},this.getValueClassChecked=function(n){var o=this.getChecked(n);return o===m?c:o===e?a:o===r?String:o===i?Number:o===g?f:o===t?v:void 0},this.getByClassSafely=function(n){switch(n){case c:return m;case a:return e;case String:return r;case Number:return i;case f:return g;case v:return t}},this.getByClass=function(t){var e=this.getByClassSafely(t);if(e)return e;throw new Error("No data type for "+t)}});e.exports=new g}).call(this,{isBuffer:t("../../../../is-buffer/index.js")})},{"../../../../is-buffer/index.js":473,"../../data/datatypes":108,"../../topics/topics":468,"data/binary/binary-datatype-impl":172,"data/binary/binary-impl":175,"data/json/json-datatype-impl":179,"data/json/json-impl":181,"data/primitive/double-datatype-impl":185,"data/primitive/int64-datatype-impl":186,"data/primitive/int64-impl":187,"data/primitive/string-datatype-impl":189,"data/record/recordv2-datatype-impl":194,"data/record/recordv2-impl":196,"util/interface":448}],178:[function(t,e,n){function r(t){return t<0?-4*t-1:4*t}function i(t){return r(t)+2}function o(t,e){var n=t[r(e)];return void 0===n?0:n}function s(t,e){var n=t[i(e)];return void 0===n?0:n}function a(t,e,n){t[r(e)]=n}function u(t,e,n){t[i(e)]=n}function c(t,e){var n=o(t,e+1),r=o(t,e-1);return n<r?r:n+1}function l(t,e){var n=s(t,e+1),r=s(t,e-1);return n<r?n:r-1}function f(t,e){return t<=e?t:2*e-t}function d(t,e,n){if(e<0)throw new Error("offset "+e+" < 0");if(n<0)throw new Error("length "+n+" < 0");if(e+n>t.length||e+n<0)throw new Error("offset "+e+" + "+n+" > "+t.length)}function h(t,e,n,r,i){function h(t,e,n,r,i,o){if(e*r>=(1<<24)+i*o/2){var s=e/2,a=r/2,u=p.diff(t,s,n,a);return u!==v?u:p.diff(t+s,e-s,n+a,r-a)}return p.diff(t,e,n,r)}var p=this;this.diff=function(t,i,o,s){d(e,t,i),d(n,o,s);for(var a=0,u=0;a<i&&u<s&&e[t+a]===n[o+u];)++a,++u;for(var c=i,l=s;c>a&&l>u&&e[t+c-1]===n[o+l-1];)--c,--l;var f=r.match(t,a);if(f!==v)return f;var h;return(h=a===c?r.insert(o+u,l-u):u===l?r.delete(t+a,c-a):p.middleSnake(t+a,c-a,o+u,l-u))!==v?h:r.match(t+c,i-c)},this.middleSnake=function(r,d,m,y){var b=d-y,w=1&b,x=t.initialise(1);a(x,-1,0),u(x,1,d);for(var E=0;;){for(var _=-f(E,d);_<=f(E,y);_+=2){for(var S=c(x,_),$=S;$<d&&$+_<y&&e[r+$]===n[m+$+_];)++$;if(a(x,_,$),w&&E>1&&Math.abs(_+b)<=E-1&&$>=s(x,_+b))return p.recurse(r,d,m,y,S,$,_)}for(var T=-f(E,y);T<=f(E,d);T+=2){for(var k=l(x,T),C=k,A=T-b;C>0&&C+A>0&&e[r+C-1]===n[m+C+A-1];)--C;if(u(x,T,C),!w&&E>0&&Math.abs(A)<=E&&C<=o(x,A))return p.recurse(r,d,m,y,C,k,A)}if(E>i)return function(t,e,n,r,i,a){for(var u,c,l=0,d=0,p=-f(e,r);p<=f(e,a);p+=2){var g=Math.min(o(t,p),r);(u=g+p>a?a-p:g)+(c=u+p)>l+d&&(l=u,d=c)}for(var m=-f(e,a);m<=f(e,r);m+=2){var y=Math.max(s(t,m),0),b=m-(r-a);r+a-(u=y+b<0?-b:y)-(c=u+b)>l+d&&(l=u,d=c);var w=h(n,l,i,d,r,a);return w!==v?w:h(n+l,r-l,i+d,a-d,r,a)}}(x,E,r,d,m,y);if(++E,null===(x=t.extend(E)))return g}},this.recurse=function(t,e,n,i,o,s,a){var u=p.diff(t,o,n,o+a);if(u!==v)return u;var c=r.match(t+o,s-o);return c!==v?c:p.diff(t+s,e-s,n+s+a,i-s-a)}}var p=t("util/math").approximateCubeRoot,v=0,g=1,m=2,y=function(t,e,n){return t.insert(e,n)},b=function(t,e,n){return t.match(e,n)},w=function(){return v};e.exports=function(t,e){void 0===t&&(t=2147483647),void 0===e&&(e=1e4);var n=new function(t){function e(t){for(var e=t;e<i;e+=4)o[e+0]=-1,o[e+1]=-1,o[e+2]=2147483647,o[e+3]=2147483647}function n(t){var e=4*(t+1)+3;i<e&&(i=e)}var r=(t-3)/4,i=15,o=[];this.initialise=function(t){return n(t),e(3),o},this.extend=function(t){if(t>r)return null;var s=i;return n(t),e(s),o}}(t);this.diff=function(t,r,i,o,s,a,u){var c=function(t,e,n){function r(){return o&=u===w,u(t,a,s)}function i(t,e,n){if(n>0)if(u!==t){var i=r();if(i!==v)return i;u=t,a=e,s=n}else s+=n;return v}var o=!0,s=0,a=0,u=w;return{insert:function(t,e){return i(y,t-n,e)},match:function(t,n){return i(b,t-e,n)},delete:function(t,e){if(u===y)return v;var n=r();return u=w,n},close:function(e,n){if(o){if(u===y)return g;if(0===a&&s===e)return m}var i=r();return i!==v?i:t.close()}}}(u,r,s),l=new h(n,t,o,c,function(t,e,n){var r=n*p(t+e);return Math.max(256,r/100)}(i,a,e)).diff(r,i,s,a);return l!==v?l:c.close(i,a)}},e.exports.SUCCESS=v,e.exports.REPLACE=g,e.exports.NO_CHANGE=m},{"util/math":450}],179:[function(t,e,n){var r=t("util/interface")._implements,i=t("../../../data/json/json-datatype"),o=t("data/abstract-datatype"),s=t("data/json/json-impl"),a=t("util/function").identity;e.exports=r(i,function(){o.call(this,"json",s,s,s.from,a,[],!0),this.fromJsonString=function(t){return this.readValue(s.from(JSON.parse(t)))},this.from=s.from,this.JSON=s})},{"../../../data/json/json-datatype":110,"data/abstract-datatype":171,"data/json/json-impl":181,"util/function":447,"util/interface":448}],180:[function(t,e,n){(function(n){function r(t,e,n,r){return t.equalBytes(e.$buffer,e.$offset+n,r)}function i(t,e,n,i,s,u){function l(t,e){h();var n=t+e;y.nextByte()<n&&(0!==y.spanTo(n,$)||y.nextByte()>n)&&b.spanToNext(x+1,S)}function f(t,e){null!==_&&n.put(_,v),_=t,v=e}function d(t,e){null!==E&&i.put(E,p),E=t,p=e}function h(){if(y.nextByte()<w||b.nextByte()<x)throw new Error("Invalid binary delta")}var p,v,g=new a,m=new a,y=new c(t),b=new c(e),w=0,x=0,E=null,_=null;this.match=function(t,e){return l(w,t-w),function(t,e){h();var n=x,r=t+e;x+=e,w=r;var i=y.nextByte(),s=b.nextByte();s>n&&i===t?y.spanToNext(t+1,$):i>t&&s===n&&b.spanToNext(n+1,S);var a=new o(g),u=new o(m);y.spanTo(r,a),b.spanTo(x,u);var c=a.foundLast()&&y.nextByte()>r,l=u.foundLast()&&b.nextByte()>x;c&&l&&(a.consumeLast($),u.consumeLast(S))}(t,e),!0},this.insert=function(t){return h(),x+=t.length,b.nextByte()<x&&(0!==b.spanTo(x,S)||b.nextByte()>x)&&y.spanToNext(w+1,$),!0},this.end=function(){l(w,t.$length-w),f(null,null),d(null,null),function(){for(var e=g.postOrder();e.hasNext();){var n=e.next(),r=n.value,o=i.getEntry(n.pointer);null!==o&&o.numberOfChildren()===r.elements&&(o.setValue(u(t,r.start,r.length)),o.removeDescendants())}}(),function(){for(var t=m.postOrder();t.hasNext();){var r=t.next(),i=r.value,o=n.getEntry(r.pointer);null!==o&&o.numberOfChildren()===i.elements&&(o.setValue(s(e,i.start,i.length)),o.removeDescendants())}}()},this.noChange=function(){};var S={accept:function(t,n,i){null!==E&&E.equalIgnoringIndexes(t)&&r(p,e,n,i)?(E=null,p=null):(f(t,s(e,n,i)),d(null,null))},splitStructureEnd:function(t,e,n,r){m.put(t,{start:n,length:r,elements:e})}},$={accept:function(e,n,i){null!==_&&_.equalIgnoringIndexes(e)&&r(v,t,n,i)?(_=null,v=null):(d(e,u(t,n,i)),f(null,null))},splitStructureEnd:function(t,e,n,r){g.put(t,{start:n,length:r,elements:e})}}}function o(t){var e,n,r;this.accept=function(t,i,o){e=t,n=i,r=o},this.foundLast=function(){return!!e},this.consumeLast=function(t){t.accept(e,n,r)},this.splitStructureEnd=function(e,n,r,i){t.put(e,{start:r,length:i,elements:n})}}function s(t){for(var e=[],n=t.iterator();n.hasNext();){var r=n.next();e.push({key:r.pointer.toString(),value:r.value.get()})}this.length=e.length,this.get=function(e){return t.get(u.parse(e)).get()},this.entrySet=function(){return e},this.containsKey=function(e){return t.contains(u.parse(e))},this.descendants=function(e){return new s(t.descendants(u.parse(e)))},this.intersection=function(e){return new s(t.intersection(u.parse(e)))}}var a=t("data/json/json-pointer-map"),u=t("data/json/json-pointer"),c=t("data/json/span-parser");e.exports=function(t,e,r,o){var c=new a,l=new a;void 0!==o?o.visit(new i(e,r,c,l,function(e,n,r){return new t(e.$buffer,e.$offset+n,r)},function(e,r,i){var o=e.$offset+r,s=new n(i);return e.$buffer.copy(s,0,o,o+i),new t(s,0,i)})):(c.put(u.ROOT,e),l.put(u.ROOT,r)),this.removed=function(){return new s(l)},this.inserted=function(){return new s(c)},this.hasChanges=function(){return 0!==l.size||0!==c.size},this.toString=function(){return["REMOVE ",l," INSERT ",c].join("")}}}).call(this,t("buffer").Buffer)},{buffer:94,"data/json/json-pointer":183,"data/json/json-pointer-map":182,"data/json/span-parser":184}],181:[function(t,e,n){function r(t){return t instanceof o?t:new o(v.encode(t).flush())}function i(t,e){return l.isPrototypeOf(e)?e.toString():e}function o(t,e,n){a.__constructor.call(this,t,e,n);var r=this;this.get=function(){return new p(t,e,n).nextValue()},this.diff=function(t,e){var n=r.binaryDiff(t);return"json"===e?new c(o,t,r,n):n},this.binaryDiff=function(t){return g.diff(t,r)},this.jsonDiff=function(t){return r.diff(t,"json")},this.apply=function(t){return g.apply(r,t)},this.toString=function(){return JSON.stringify(r.get())},this.toJsonString=function(){return JSON.stringify(r.get(),i)}}var s=t("util/interface")._implements,a=t("data/bytes-impl"),u=t("data/binary/binary-delta-type-impl"),c=t("data/json/json-delta-impl"),l=t("data/primitive/int64-impl"),f=t("../../../data/json/json"),d=t("util/function").identity,h=t("cbor/encoder"),p=t("cbor/decoder"),v=new h,g=new u(o,r,d);e.exports=s(f,o),e.exports.from=r,e.exports.toString=function(){return"JSONImpl"}},{"../../../data/json/json":111,"cbor/decoder":142,"cbor/encoder":143,"data/binary/binary-delta-type-impl":174,"data/bytes-impl":176,"data/json/json-delta-impl":180,"data/primitive/int64-impl":187,"util/function":447,"util/interface":448}],182:[function(t,e,n){function r(){function t(n,r){this.segment=n,this.pointer=r,this.children=[],this.value=null,this.count=function(){for(var t=this.value?1:0,e=0;e<this.children.length;++e)t+=this.children[e].count();return t},this.addChild=function(e){var n=new t(e,r.withSegment(e));return this.children.push(n),n},this.findChild=function(t){for(var e=0;e<this.children.length;++e)if(t.equals(this.children[e].segment))return this.children[e];return null},this.setValue=function(t){var n=this.value;return null===n&&e.size++,this.value=t,n},this.removeDescendants=function(){for(var t=0,n=0;n<this.children.length;++n)t+=this.children[n].count();return this.children=[],e.size-=t,t},this.numberOfChildren=function(){for(var t=0,e=0;e<this.children.length;++e)t+=this.children[e].value?1:0;return t},this.toString=function(){return r+"="+this.value}}this.root=new t(null,a.ROOT),this.size=0;var e=this;this.put=function(t,n){s(n,"value");for(var r=e.root,i=0;i<t.segments.length;){var o=t.segments[i++],a=r.findChild(o);if(null===a){r=r.addChild(o);break}r=a}for(;i<t.segments.length;i++)r=r.addChild(t.segments[i]);return r.setValue(n)},this.contains=function(t){return null!==e.get(t)},this.get=function(t){var n=e.getEntry(t);return n?n.value:null},this.getEntry=function(t){for(var n=e.root,r=0;r<t.segments.length;++r)if(null===(n=n.findChild(t.segments[r])))return null;return n},this.descendants=function(t){var n=new r,i=e.root,o=n.root,s=t.segments,a=s.length;if(0===a)return this;for(var c=0;c<a-1;++c){var l=s[c];if(null===(i=i.findChild(l)))return u;o=o.addChild(l)}var f=i.findChild(s[a-1]);return null===f?u:(o.children.push(f),n.size=f.count(),n)},this.intersection=function(t){var n=new r,i=e.root,o=n.root,s=t.segments,a=s.length;if(0===a)return this;null!==i.value&&o.setValue(i.value);for(var u=0;u<a-1;++u){var c=s[u];if(null===(i=i.findChild(c)))return n;o=o.addChild(c),null!==i.value&&o.setValue(i.value)}var l=i.findChild(s[a-1]);return null===l?n:(o.children.push(l),n.size+=l.count(),n)},this.iterator=function(){var t=[e.root];return new o(function(){for(;;){var e=t.shift();if(void 0===e)return null;for(var n=e.children.length;n>0;--n)t.unshift(e.children[n-1]);if(null!==e.value)return e}})},this.postOrder=function(){var t=[new i(e.root)];return new o(function(){for(;;){var e=t[0];if(void 0===e)return null;var n=e.nextChild();if(null===n){if(t.shift(),null!==e.node.value)return e.node}else{if(0===n.children.length)return n;t.unshift(new i(n))}}})},this.toString=function(){for(var t=["{"],n=e.iterator();n.hasNext();)t.length>1&&t.push(", "),t.push(n.next());return t.push("}"),t.join("")}}function i(t){this.node=t;var e=0;this.nextChild=function(){var n=t.children;return e>=n.length?null:n[e++]}}function o(t){var e=t();this.hasNext=function(){return null!==e},this.next=function(){if(null===e)throw new Error("No such element");var n=e;return e=t(),n}}var s=t("util/require-non-null"),a=t("data/json/json-pointer"),u=new r;e.exports=r},{"data/json/json-pointer":183,"util/require-non-null":455}],183:[function(t,e,n){function r(t){this.segments=t}function i(t){this.index=t}function o(t){this.expression="/"+function(t){for(var e=0;e<t.length;++e){var n=t.charAt(e);if("/"===n||"~"===n){var r=t.length,i=[];i.push(t.substring(0,e));for(var o=e;o<r;++o){var s=t.charAt(o);"/"===s?i.push("~1"):"~"===s?i.push("~0"):i.push(s)}return i.join("")}}return t}(t)}function s(t){var e=0;if(""!==t&&"/"!==t.charAt(0))throw new Error("JSON Pointer expression must be empty or start with '/' : "+t);this.next=function(){if(e===t.length)return null;++e;var n=function(){for(var n=e;e<t.length;++e){var r=t[e];if("/"===r)break;if("~"===r){for(var i=[t.substring(n,e)],o=t.length;e<o;++e){var s=t.charAt(e);if("/"===s)break;if("~"===s&&e!==o-1){++e;var a=t.charAt(e);"0"===a?i.push("~"):"1"===a?i.push("/"):(i.push("~"),i.push(a))}else i.push(s)}return i.join("")}}return t.substring(n,e)}(),r=function(t){var e=t.length;if(0===e||e>10)return null;for(var n=0;n<e;++n){var r=t.charAt(n);if(r<"0"||r>"9")return null;if("0"===r&&0===n)return 1===e?a:null}var o=parseInt(t,10);return o>2147483647?null:new i(o)}(n);return null!==r?r:new o(n)}}r.prototype.withKey=function(t){return this.withSegment(new o(t))},r.prototype.withIndex=function(t){return this.withSegment(new i(t))},r.prototype.withSegment=function(t){return new r(this.segments.concat(t))},r.prototype.equalIgnoringIndexes=function(t){if(t===this)return!0;var e=this.segments.length;if(e!==t.segments.length)return!1;for(var n=0;n<e;++n){var r=this.segments[n],s=t.segments[n];if(r instanceof i){if(s instanceof o)return!1}else if(!r.equals(s))return!1}return!0},r.prototype.toString=function(){for(var t=[],e=0;e<this.segments.length;++e)t.push(this.segments[e].toString());return t.join("")},r.prototype.equals=function(t){if(t===this)return!0;if(!(t&&t instanceof r))return!1;if(this.segments.length!==t.segments.length)return!1;for(var e=this.segments.length,n=0;n<e;++n){var i=this.segments[n],o=t.segments[n];if(!i.equals(o))return!1}return!0},r.ROOT=new r([]),r.parse=function(t){if(t instanceof r)return t;for(var e=r.ROOT,n=new s(t);;){var i=n.next();if(null===i)return e;e=e.withSegment(i)}},e.exports=r;var a=new i(0);i.prototype.equals=function(t){return t===this||!!(t&&t instanceof i)&&t.index===this.index},i.prototype.toString=function(){return"/"+this.index},o.prototype.equals=function(t){return t===this||!!(t&&t instanceof o)&&t.expression===this.expression},o.prototype.toString=function(){return this.expression}},{}],184:[function(t,e,n){function r(t,e,n,i){var o=[],s=0,a=0,u=n,c=i,l=this;this.total=function(){return a},this.accumulated=function(){return s},this.newArray=function(n,i){return new function(t,e,n,i){r.call(this,t,e,n,i),this.take=function(t,e,n,r,i,o){t.accept(e.withIndex(r),i,o)},this.currentPointer=function(t,e){return t.withIndex(e)}}(t,l.currentPointer(e,a),n,i)},this.newObject=function(n,i){return new function(t,e,n,i){r.call(this,t,e,n,i);var o=this.add,s="",a=!0,u=[];this.add=function(e){return a?(this.setNextStart(e),s=t.getToken().value,a=!1):(u[this.accumulated()]=s,a=!0,o(e)),!a},this.take=function(t,e,n,r,i,o){t.accept(e.withKey(u[r-n]),i,o)},this.currentPointer=function(t){return t.withKey(s)}}(t,l.currentPointer(e,a),n,i)},this.notEmptyAndSplitBy=function(t){return u<t&&0!==a},this.add=function(t){return o[s]=[c,t],c=t,++s,++a,!1},this.setNextStart=function(t){c=t},this.skip=function(){++a,s=0},this.takeAll=function(t){for(var n=a-s,r=0;r<s;++r){var i=o[r],u=i[0],c=i[1];l.take(t,e,n,n+r,u,c-u)}s=0},this.splitStructureEnd=function(t){t.splitStructureEnd(e,a,u,c+1-u)},this.toString=function(){return e.toString()}}var i=t("data/json/json-pointer"),o=t("cbor/tokeniser"),s=t("cbor/consts");e.exports=function(t){var e=new o(t.$buffer,t.$offset,t.$length),n=new function(t){r.call(this,t,i.ROOT,-1,0),this.take=function(t,e,n,r,i,o){if(this.total()>1)throw new Error("Invalid JSON: multiple values found");t.accept(e,i,o)},this.currentPointer=function(t){return t}}(e),a=[],u=e.offset(),c=this;this.spanToNext=function(t,e){return c.spanTo(t,e,!0)},this.spanTo=function(t,r,i){var o=c.nextByte();if(o>=t)return 0;var u,l=a.length,f=i,d=o;do{u=e.nextToken();var h=d;if(d=c.nextByte(),null===u){if(0!==a.length)throw new Error("Invalid structure");break}if(u.type===s.tokens.VALUE)f=n.add(d);else if(u.type===s.tokens.ARRAY_START)a.push(n),n=n.newArray(h,d);else if(u.type===s.tokens.MAP_START)a.push(n),n=n.newObject(h,d);else if(s.isStructEnd(u.type)){var p=a.pop();n.notEmptyAndSplitBy(o)?(n.takeAll(r),n.splitStructureEnd(r),p.skip(),p.setNextStart(d)):p.add(d),n=p,f=!1}}while(f||d<t||c.nextTokenIsStructEnd(u,d));for(var v=0;v<a.length;++v)a[v].takeAll(r);return n.takeAll(r),a.length-l},this.nextTokenIsStructEnd=function(n,r){var i=e.getContext();return s.isStructStart(n.type)?0===i.expected():i.acceptsBreakMarker()&&r<t.$length&&(31&t.$buffer[t.$offset+r])===s.additional.BREAK||!i.hasRemaining()},this.nextByte=function(){return e.offset()-u},this.toString=function(){var t=["SpanParser"," next=",c.nextByte()," ["];return a.forEach(function(e){t.push(e),t.push(", ")}),t.push(n),t.push("]"),t.join("")}}},{"cbor/consts":140,"cbor/tokeniser":144,"data/json/json-pointer":183}],185:[function(t,e,n){function r(t,e){e.encode(t)}var i=t("util/interface")._implements,o=t("../../../data/primitive/double-datatype"),s=t("data/primitive/primitive-datatype");e.exports=i(o,function(){s.call(this,"double",Number,r,!1)})},{"../../../data/primitive/double-datatype":112,"data/primitive/primitive-datatype":188,"util/interface":448}],186:[function(t,e,n){function r(t,e){e.writeInt64(new a(t))}var i=t("util/interface")._implements,o=t("../../../data/primitive/int64-datatype"),s=t("data/primitive/primitive-datatype"),a=t("data/primitive/int64-impl");e.exports=i(o,function(){s.call(this,"int64",a,r,!1),this.Int64=a})},{"../../../data/primitive/int64-datatype":113,"data/primitive/int64-impl":187,"data/primitive/primitive-datatype":188,"util/interface":448}],187:[function(t,e,n){(function(n){function r(t,e,n){for(var r=n?0:4,i=3;i>=0;--i)e[r+i]=255&t,t>>=8}function i(t,e){var n=e?0:4;return t[n]*a+(t[n+1]<<16)+(t[n+2]<<8)+t[n+3]}var o=t("util/interface")._implements,s=t("../../../data/primitive/int64"),a=1<<24,u=4294967296;e.exports=o(s,function t(e,o){var s=new n([0,0,0,0,0,0,0,0]);n.isBuffer(e)&&(s=e),"string"==typeof e&&function(t,e,n){e=e||10;var i="-"===t[0];i?t=t.substring(1):"0x"===t.substring(0,2)&&(t=t.substring(2),e=16);for(var o=0,s=0,a=0;a<t.length;++a)s=s*e+parseInt(t[a],e),o=o*e+Math.floor(s/u),s%=u;i&&(o=~o,s?s=u-s:o++),r(o,n,!0),r(s,n,!1)}(e,o,s),"number"==typeof e&&("number"==typeof o?(r(e,s,!0),r(o,s,!1)):e>=0?function(t,e){for(var n=7;n>=0;--n)e[n]=255&t,t/=256}(e,s):function(t,e){t++;for(var n=7;n>=0;--n)e[n]=255&-t^255,t/=256}(e,s)),e instanceof t&&(r(e.getHighBits(),s,!0),r(e.getLowBits(),s,!1)),this.getHighBits=function(){return i(s,!0)},this.getLowBits=function(){return i(s,!1)},this.toBuffer=function(){return s},this.toNumber=function(){var t=0|this.getHighBits(),e=this.getLowBits();return t?t*u+e:e},this.isNegative=function(){return 2147483648&this.getHighBits()},this.toString=function(t){t=t||10;var e=this.getHighBits(),n=this.getLowBits(),r=this.isNegative();if(r&&(e=~e,n=u-n),0===e&&0===n)return"0";for(var i="";e||n;){var o=e%t*u+n;e=Math.floor(e/t),n=Math.floor(o/t),i=(o%t).toString(t)+i}return r&&(i="-"+i),i},this.equals=function(e){return!!(e&&e instanceof t)&&(this.getHighBits()===e.getHighBits()&&this.getLowBits()===e.getLowBits())}}),e.exports.toString=function(){return"Int64Impl"}}).call(this,t("buffer").Buffer)},{"../../../data/primitive/int64":114,buffer:94,"util/interface":448}],188:[function(t,e,n){(function(n){var r=t("data/abstract-datatype"),i=t("data/bytes-impl"),o=t("data/json/json-impl"),s=t("cbor/encoder"),a=t("cbor/decoder"),u=new s,c=new i(new n([246]));e.exports=function(t,e,n,s){function l(t){return n(t,u),new i(u.flush())}r.call(this,t,e,i,l,function(t){return c.equals(t)?null:new a(t.$buffer,t.$offset,t.$length).nextValue()},[o],s),this.writeValue=function(t){return null===t||void 0===t?c.asBuffer():(n(t,u),u.flush())},this.validate=function(){},this.from=function(t){return t.$buffer?t:l(t)}}}).call(this,t("buffer").Buffer)},{buffer:94,"cbor/decoder":142,"cbor/encoder":143,"data/abstract-datatype":171,"data/bytes-impl":176,"data/json/json-impl":181}],189:[function(t,e,n){function r(t,e){e.encode(t.toString())}var i=t("util/interface")._implements,o=t("../../../data/primitive/string-datatype"),s=t("data/primitive/primitive-datatype");e.exports=i(o,function(){s.call(this,"string",String,r,!0)})},{"../../../data/primitive/string-datatype":115,"data/primitive/primitive-datatype":188,"util/interface":448}],190:[function(t,e,n){var r=t("data/record/recordv2-writer");e.exports=function(t,e){function n(t,e){var n=o.model();return n[function(t,e,n){var r=t.getAbsoluteIndex(n);if(r>e.length-1)throw new Error("Index '"+n+"' does not have a matching entry for variable occurence record: '"+t.name+"'");return r}(t,n,e)]}function i(t){if(0===t.length)throw new Error("No name specified");var e=t.indexOf("(");if(-1===e)return[t,0];if(0===e)throw new Error("No name specified");var n=t.indexOf(")");if(-1===n||n<e)throw new Error("'(' found without closing ')");if(n<t.length-1)throw new Error("Characters found after closing ')");return[t.substring(0,e),parseInt(t.substring(e+1,n),10)]}var o=this;this.schema=function(){return e},this.asValue=function(){return new t(r.toBuffer(o.model()))},this.get=function(t,r,o,s){if(arguments.length<4&&(s=0),2===arguments.length&&(o=r,r=0),1===arguments.length){var a=function(t){var n,r,o,s=t.split(".",2);if(1===s.length)n=e.firstRecord().name,r=0,o=s[0];else{var a=i(s[0].trim());n=a[0],r=a[1],o=s[1]}var u=i(o);return{recordName:n,recordIndex:r,fieldName:u[0],fieldIndex:u[1]}}(t);t=a.recordName,r=a.recordIndex,o=a.fieldName,s=a.fieldIndex}var u=e.getRecord(t),c=u.getField(o),l=n(u,r);return l[function(t,e,n){var r=t.getAbsoluteIndex(n);if(r>e.length-1)throw new Error("Index '"+n+"' does not have a matching entry for variable occurence field: '"+t.name+"'");return r}(c,l,s)]},this.recordCount=function(t){var n=e.getRecord(t);return n.isVariable?o.model().length-n.getIndex():n.min},this.fieldCount=function(t,r,i){var o=e.getRecord(t),s=o.getField(i);if(s.isVariable){return n(o,r).length-s.getIndex()}return s.min}}},{"data/record/recordv2-writer":199}],191:[function(t,e,n){function r(t,e,n){var r=t.getAbsoluteIndex(n);if(r>e.length-1)throw new Error("Index '"+n+"' does not have a matching entry for variable occurence record: '"+t.name+"'");return r}function i(t,e,n){var r=t.getAbsoluteIndex(n);if(r>e.length-1)throw new Error("Index '"+n+"' does not have a matching entry for variable occurence field: '"+t.name+"'");return r}var o=t("data/record/model/abstract-record-model"),s=t("data/record/schema/field-impl"),a=t("util/array").argumentsToArray;e.exports=function(t,e){function n(t,e){return c[r(t,c,e)]}function u(t){if(0===t.length)throw new Error("No name specified");var e=t.indexOf("(");if(-1===e)return[t,0];if(0===e)throw new Error("No name specified");var n=t.indexOf(")");if(-1===n||n<e)throw new Error("'(' found without closing ')");if(n<t.length-1)throw new Error("Characters found after closing ')");return[t.substring(0,e),parseInt(t.substring(e+1,n),10)]}o.call(this,t,e);var c=e.createModel();this.model=function(){return c},this.set=function(t,r,o,a,c){if(arguments.length<5&&(a=0),3===arguments.length&&(c=o,o=r,r=0),2===arguments.length){c=r;var l=function(t){var n,r,i,o=t.split(".",2);if(1===o.length)n=e.firstRecord().name,r=0,i=o[0];else{var s=u(o[0].trim());n=s[0],r=s[1],i=o[1]}var a=u(i);return{recordName:n,recordIndex:r,fieldName:a[0],fieldIndex:a[1]}}(t);t=l.recordName,r=l.recordIndex,o=l.fieldName,a=l.fieldIndex}var f=e.getRecord(t),d=n(f,r),h=f.getField(o);return d[i(h,d,a)]=s.normalise(h,c),this},this.add=function(t,r){var i,o,u=a(arguments);if(arguments.length>2&&"number"==typeof r)u=u.slice(2),o=n(i=e.getRecord(t),r);else{if(i=e.lastRecord(),!(c.length>i.index))throw new Error("Variable record '"+i.name+"' has no occurrences to add a field to");o=c[c.length-1]}return function(t,e,n){var r=t.lastField();if(!r.isVariable)throw new Error("Final field of record '"+t.name+"' is not variable");var i=r.max;if(-1!==i&&e.length-r.index+n.length>i)throw new Error("Adding values would exceed maximum number of field occurrences");n.forEach(function(t){e.push(s.normalise(r,t))})}(i,o,u),this},this.addRecord=function(){var t=e.lastRecord();if(!t.isVariable)throw new Error("Record '"+t.name+"' is not variable");var n=t.max;if(-1!==n&&c.length-t.index>=n)throw new Error("Record '"+t.name+"' already has maximum number of occurrences");return c.push(t.createModel()),this},this.removeRecord=function(t){var n=e.lastRecord();if(!n.isVariable)throw new Error("Record '"+n.name+"' is not variable");var i=r(n,c,t);if(c.length-n.index-1<n.min)throw new Error("Removing an occurrence of record '"+n.name+"' would violate the minimum number of occurrences");return c.splice(i,1),this},this.removeField=function(t,r,o){var s=e.getRecord(t),a=n(s,r),u=s.lastField();if(!u.isVariable)throw new Error("Field '"+u.name+"' is not a variable field");var c=i(u,a,o);if(a.length-u.index-1<u.min)throw new Error("Removing an occurrence of field '"+u.name+"' would violate the minimum number of occurrences");return a.splice(c,1),this},this.clearVariableRecords=function(){var t=e.lastRecord();return c.length=t.index+t.min,this},this.clearVariableFields=function(t,r){var i=e.getRecord(t),o=n(i,r),s=i.lastField();return o.length=s.index+s.min,this}}},{"data/record/model/abstract-record-model":190,"data/record/schema/field-impl":200,"util/array":445}],192:[function(t,e,n){function r(t,e,n){var r=n.length,o=t.lastField(),s=o.max,a=o.index;if(-1!==s&&r>a+s)throw new Error("Too many occurrences of field '"+t.name+"("+e+")."+o.name+"'");if(r<a+o.min)throw new Error("Too few field occurrences in record '"+t.name+"("+e+")'");for(var u=t.fields(),c=0;c<u.length;++c){for(var l=u[c],f=l.index,d=l.min,h=f;h<f+d;++h)i(t,e,l,h-f,n[h]);if(l.isVariable)for(var p=f+d;p<r;p++){i(t,e,l,p-f,n[p])}}}function i(t,e,n,r,i){try{s.normalise(n,i)}catch(i){throw new Error("Invalid value for field '"+t.name+"("+e+")."+n.name+"("+r+")")}}var o=t("./abstract-record-model"),s=t("data/record/schema/field-impl");e.exports=function(t,e,n,i){o.call(this,t,e),i&&function(t,e){var n=e.length,i=t.lastRecord(),o=i.index,s=i.max;if(-1!==s&&n>o+s)throw new Error("Too many occurrences of record '"+i.name+"'");if(n<o+i.min)throw new Error("Too few record occurrences");for(var a=t.records(),u=0;u<a.length;++u){for(var c=a[u],l=c.index,f=c.min,d=l;d<l+f;++d)r(c,d-l,e[d]);if(c.isVariable)for(var h=l+f;h<n;++h)r(c,h-l,e[h])}}(e,n),this.model=function(){return n}}},{"./abstract-record-model":190,"data/record/schema/field-impl":200}],193:[function(t,e,n){var r=t("data/record/recordv2-writer"),i=t("data/record/recordv2-impl"),o=t("util/array").argumentsToArray;e.exports=function(){var t=[];this.addFields=function(e){if(arguments.length>1&&(e=o(arguments)),e){var n=t.length?t[t.length-1]:[];t[Math.max(t.length-1,0)]=n.concat(e)}return this},this.addRecord=function(e){return arguments.length>1&&(e=o(arguments)),e?t.push([].concat(e)):t.push([]),this},this.clear=function(){return t=[],this},this.build=function(){return new i(r.toBuffer(t))}}},{"data/record/recordv2-impl":196,"data/record/recordv2-writer":199,"util/array":445}],194:[function(t,e,n){var r=t("util/interface")._implements,i=t("../../../data/record/record-datatype"),o=t("data/abstract-datatype"),s=t("data/record/schema/schema-builder-impl"),a=t("data/record/schema/schema-parser-impl"),u=t("data/record/recordv2-builder-impl"),c=t("data/record/recordv2-impl"),l=t("util/require-non-null"),f=t("util/function").identity;e.exports=r(i,function t(e){o.call(this,"record_v2",c,c,c.from,f,[],!0),e=e||function(){},this.from=c.from,this.validate=function(t){e(l(t,"RecordV2 instance"))},this.parseSchema=function(t){return new a(c).parse(t)},this.schemaBuilder=function(){return new s(c)},this.valueBuilder=function(){return new u},this.withSchema=function(e){return new t(function(t){return t.asValidatedModel(e)})},this.RecordV2=c})},{"../../../data/record/record-datatype":116,"data/abstract-datatype":171,"data/record/recordv2-builder-impl":193,"data/record/recordv2-impl":196,"data/record/schema/schema-builder-impl":202,"data/record/schema/schema-parser-impl":204,"util/function":447,"util/interface":448,"util/require-non-null":455}],195:[function(t,e,n){(function(n){function r(t,e,n,r,i){this.type=t,this.recordName=e,this.recordIndex=n,this.fieldName=r,this.fieldIndex=i;var o=e+"("+n+")";t!==c.RECORDS_REMOVED&&t!==c.RECORDS_ADDED&&(o+="."+r+"("+i+")"),this.key=o,this.toString=function(){return t+" "+o}}function i(t,e,n,i,u){function l(t,e,n,i,o){var s=0;e.fields().forEach(function(a){s=a.isVariable?function(t,e,n,i,o,s,a){var l=s.length,f=o;if(l<f+i.min)throw new Error("Insufficient fields of type "+i.name+" in delta for schema record "+t.name);var d,h=u[n];d=h?h[1]:l;for(var p=0;f<d;f++)""!==s[f]&&a.push(new r(c.FIELD_CHANGED,t.name,e,i.name,p)),p++;h&&a.push(new r(h[0]?c.FIELDS_ADDED:c.FIELDS_REMOVED,t.name,e,i.name,h[1]));return f}(e,n,t,a,s,i,o):function(t,e,n,i,o,s){for(var a=o.length,u=i,l=0;l<n.min;++l){if(u>=a)throw new Error("Insufficient fields of type "+n.name+" in delta for schema record "+t.name);""!==o[u]&&s.push(new r(c.FIELD_CHANGED,t.name,e,n.name,l)),u++}return u}(e,n,a,s,i,o)})}s.__constructor.call(this,t,e,n);var f=this;this.changes=function(s){var a=o.parse(t,e,n),u=0,f=[];return s.records().forEach(function(t){if(a.length<u+t.min)throw new Error("Insufficient records of type "+t.name+" in delta for schema");u=t.isVariable?function(t,e,n,o){var s=n.length,a=t.max;if(-1!==a&&s>e+a)throw new Error("Too many records of type "+t.name+" in delta for schema");var u,f=e;u=i&&i[0]?i[1]:s;for(var d=0;f<u;f++)l(f,t,d,n[f],o),d++;return i&&o.push(new r(i[0]?c.RECORDS_ADDED:c.RECORDS_REMOVED,t.name,i[1]-e,"",0)),f}(t,u,a,f):function(t,e,n,r){for(var i=e,o=0;o<t.min;++o)l(i,t,o,n[i],r),i++;return i}(t,u,a,f)}),f},this.toString=function(){return a.bytesToString(f.$buffer,f.$offset,f.$length)}}var o=t("data/record/recordv2-parser"),s=t("data/bytes-impl"),a=t("data/record/recordv2-utils"),u=new i(new n([]));u.changes=function(){return[]};var c={FIELD_CHANGED:"FIELD_CHANGED",FIELDS_ADDED:"FIELDS_ADDED",FIELDS_REMOVED:"FIELDS_REMOVED",RECORDS_ADDED:"RECORDS_ADDED",RECORDS_REMOVED:"RECORDS_REMOVED"};e.exports=i,e.exports.NO_CHANGE=u}).call(this,t("buffer").Buffer)},{buffer:94,"data/bytes-impl":176,"data/record/recordv2-parser":197,"data/record/recordv2-utils":198}],196:[function(t,e,n){(function(n){function r(t){return t instanceof i?t:new i(t)}function i(t,e,r){c.__constructor.call(this,t,e,r);var o=this;this.apply=function(t){return f.apply(o,t)},this.toString=function(){return JSON.stringify(o.asRecords())},this.asRecords=function(){return d.parse(o.$buffer,o.$offset,o.$length)},this.asFields=function(){return o.asRecords().reduce(function(t,e){return t.concat(e)},[])},this.asModel=function(t){return new h(i,t,o.asRecords(),!1)},this.asValidatedModel=function(t){return new h(i,t,o.asRecords(),!0)},this.binaryDiff=function(t){return f.diff(t,o)},this.diff=function(t){var e=t.$buffer,r=t.$offset,i=t.$length,s=o.$buffer,u=o.$offset,c=o.$length;if(0===c)return 0===i?p.NO_CHANGE:new p(new n([]),0,0,[!1,0],{});if(v.isSingleEmptyRecord(s,u,c))return v.isSingleEmptyRecord(e,r,i)?p.NO_CHANGE:function(t){switch(t){case 0:return new p(new n([v.RECORD_MU]),0,1,[!0,0],{});case 1:return new p(new n([v.RECORD_MU]),0,1,null,{0:[!1,0]});default:return new p(new n([v.RECORD_MU]),0,1,[!1,1],{0:[!1,0]})}}(v.recordCount(e,r,i));if(0===i)return function(t,e,n){return new p(t,e,n,[!0,0],{})}(s,u,c);if(v.isSingleEmptyRecord(e,r,i))return function(t,e,n){var r=v.recordCount(t,e,n);return new p(t,e,n,1===r?null:[!0,0],{0:[!0,0]})}(s,u,c);var l=function(t,e,n,r,i,o){for(var s=new function(){var t=new a,e=!1,n=null,r={};this.write=function(e,n,r){void 0!==n&&void 0!==r?t.writeMany(e,n,r):t.write(e)},this.getDelta=function(){return t.getBuffer()},this.size=function(){return t.count},this.hasChanges=function(){return e},this.setChanged=function(){e=!0},this.setRecordsChanged=function(t,r){n=[t,r],e=!0},this.getRecordChanges=function(){return n},this.setFieldsAdded=function(t,n){r[t]=[!0,n],e=!0},this.setFieldsRemoved=function(t,n){r[t]=[!1,n],e=!0},this.getFieldChanges=function(){return r}},u=v.recordCount(t,e,n),c=v.recordCount(r,i,o),l=Math.min(u,c),f=e,d=e,h=i,p=i,g=!1,m=0;m<l;++m)d=v.findDelimiter(t,d,e+n,v.RECORD_DELIMITER),p=v.findDelimiter(r,p,i+o,v.RECORD_DELIMITER),g?s.write(v.RECORD_DELIMITER):g=!0,function(t,e,n,r,i,o,s,a){if(0===s)return void(0!==r&&a.setFieldsRemoved(t,0));if(v.recordIsSingleEmptyField(i,o,s))return void function(t,e,n,r,i){if(v.recordIsSingleEmptyField(e,n,r))i.write(v.FIELD_MU);else{var o=v.fieldCount(e,n,r);o>1&&i.setFieldsRemoved(t,1),i.write(v.EMPTY_FIELD),i.setChanged()}}(t,e,n,r,a);if(0===r)return a.write(i,o,s),void a.setFieldsAdded(t,0);if(v.recordIsSingleEmptyField(e,n,r))return void function(t,e,n,r,i){var o=e[n];o===v.EMPTY_FIELD?i.write(e,n+1,r-1):(i.write(e,n,r),o!==v.FIELD_DELIMITER&&i.setChanged());v.fieldCount(e,n,r)>1&&i.setFieldsAdded(t,1)}(t,i,o,s,a);!function(t,e,n,r,i,o,s,a){for(var u=v.fieldCount(e,n,r),c=v.fieldCount(i,o,s),l=Math.min(u,c),f=n,d=n,h=o,p=o,g=a.size(),m=!1,y=0;y<l;++y)d=v.findDelimiter(e,d,n+r,v.FIELD_DELIMITER),p=v.findDelimiter(i,p,o+s,v.FIELD_DELIMITER),m?a.write(v.FIELD_DELIMITER):m=!0,function(t,e,n,r,i,o,s){if(function(t,e,n,r,i,o){if(n===o){if(0===n||function(t,e,n,r,i){for(var o=0;o<i;++o)if(t[e+o]!==n[r+o])return!1;return!0}(t,e,r,i,n))return!0}else{if(1===n&&t[e]===v.EMPTY_FIELD&&0===o)return!0;if(1===o&&r[i]===v.EMPTY_FIELD&&0===n)return!0}return!1}(t,e,n,r,i,o))return;0===o?s.write(v.EMPTY_FIELD):s.write(r,i,o);s.setChanged()}(e,f,d-f,i,h,p-h,a),f=++d,h=++p;c!==u&&(c>u?(a.write(i,h-1,o+s-h+1),a.setFieldsAdded(t,l)):a.setFieldsRemoved(t,l));1===c&&g===a.size()&&a.write(v.FIELD_MU)}(t,e,n,r,i,o,s,a)}(m,t,f,d-f,r,h,p-h,s),f=++d,h=++p;c!==u&&(c>u&&s.write(r,h-1,i+o-h+1),s.setRecordsChanged(c>u,l));return s}(e,r,i,s,u,c);if(l.hasChanges()){var f=l.getDelta();return new p(f,0,f.length,l.getRecordChanges(),l.getFieldChanges())}return p.NO_CHANGE}}var o=t("util/interface")._implements,s=t("util/function").identity,a=t("io/buffer-output-stream"),u=t("data/binary/binary-delta-type-impl"),c=t("data/bytes-impl"),l=t("../../../data/record/record"),f=new u(i,r,s),d=t("data/record/recordv2-parser"),h=t("data/record/model/record-model-impl"),p=t("data/record/recordv2-delta-impl"),v=t("data/record/recordv2-utils");e.exports=o(l,i),e.exports.from=r,e.exports.toString=function(){return"RecordV2Impl"}}).call(this,t("buffer").Buffer)},{"../../../data/record/record":117,buffer:94,"data/binary/binary-delta-type-impl":174,"data/bytes-impl":176,"data/record/model/record-model-impl":192,"data/record/recordv2-delta-impl":195,"data/record/recordv2-parser":197,"data/record/recordv2-utils":198,"io/buffer-output-stream":235,"util/function":447,"util/interface":448}],197:[function(t,e,n){function r(t,e,n,r,i){var o=r-n;if(0===i.length&&1===o&&t[n]===s)return e.push([""]),!0;i.push(t.toString("utf8",n,r))}var i=1,o=2,s=5;e.exports.parse=function(t,e,n){if(e=e||0,0===(n=n||t.length))return[];if(1===n&&4===t[e])return[[]];for(var s=[],a=[],u=e,c=e;c<n;++c)t[c]===i?(!function(t,e,n,i,s){var a=!1;n<i?a=r(t,e,n,i,s):n>0&&t[n-1]===o&&s.push(""),a||e.push([].concat(s)),s.length=0}(t,s,u,c,a),u=c+1):t[c]===o&&(r(t,s,u,c,a),u=c+1);return function(t,e,n,s,a){if(s>n)r(t,e,n,s,a);else{var u=t[s-1];u===i?e.push([]):u===o&&a.push("")}a.length&&e.push([].concat(a))}(t,s,u,n,a),s}},{}],198:[function(t,e,n){e.exports.bytesToString=function(t,e,n){for(var r="",i=e;i<e+n;++i)switch(t[i]){case 2:r+="<FD>";break;case 1:r+="<RD>";break;case 3:r+="<EF>";break;case 5:r+="<FM>";break;case 4:r+="<RM>";break;default:r+=String.fromCharCode(t[i])}return r},e.exports.recordCount=function(t,e,n){if(0===n)return 0;if(4===t[0])return 1;for(var r=1,i=e;i<e+n;i++)1===t[i]&&r++;return r},e.exports.fieldCount=function(t,e,n){if(0===n)return 0;if(5===t[0])return 1;for(var r=1,i=e;i<e+n;i++)2===t[i]&&r++;return r},e.exports.findDelimiter=function(t,e,n,r){for(var i=e;i<n&&t[i]!==r;i++);return i},e.exports.isSingleEmptyRecord=function(t,e,n){return 1===n&&4===t[e]},e.exports.recordIsSingleEmptyField=function(t,e,n){return 1===n&&(5===t[e]||3===t[e])},e.exports.RECORD_DELIMITER=1,e.exports.RECORD_DELIMITER_STRING=String.fromCharCode(1),e.exports.FIELD_DELIMITER=2,e.exports.FIELD_DELIMITER_STRING=String.fromCharCode(2),e.exports.EMPTY_FIELD=3,e.exports.EMPTY_FIELD_STRING=String.fromCharCode(3),e.exports.RECORD_MU=4,e.exports.RECORD_MU_STRING=String.fromCharCode(4),e.exports.FIELD_MU=5,e.exports.FIELD_MU_STRING=String.fromCharCode(5)},{}],199:[function(t,e,n){(function(n){function r(t,e){if(0!==t.length)if(1!==t.length||0!==t[0].length){var r=!1;t.forEach(function(t){if(r?e.write(o.RECORD_DELIMITER):r=!0,1===t.length&&""===t[0])e.write(o.FIELD_MU);else{var i=!1;t.forEach(function(t){i?e.write(o.FIELD_DELIMITER):i=!0,void 0!==t&&null!==t&&e.writeMany(new n(t))})}})}else e.write(o.RECORD_MU)}var i=t("io/buffer-output-stream"),o=t("data/record/recordv2-utils");e.exports.write=r,e.exports.toBuffer=function(t){var e=new i;return r(t,e),e.getBuffer()}}).call(this,t("buffer").Buffer)},{buffer:94,"data/record/recordv2-utils":198,"io/buffer-output-stream":235}],200:[function(t,e,n){var r={DECIMAL:"DECIMAL",INTEGER:"INTEGER",STRING:"STRING"};e.exports=function(t,e,n,i,o,s){this.name=t,this.type=e,this.min=n,this.max=i,void 0!==s&&(this.scale=s),this.index=o,this.isVariable=n!==i,this.getAbsoluteIndex=function(e){if(e<0||-1!==i&&e>i-1)throw new Error("Invalid index '"+e+"' for field '"+t+"'");return o+e},this.toString=function(){var o="Field [Name="+t+", Type="+e;return n===i?o+=", Occurs="+n:(o+=", Min="+n+", Max=",o+=-1===i?"Unlimited":i),e===r.DECIMAL&&(o+=", Scale="+s),o+"]"}},e.exports.normalise=function(t,e){switch(t.type){case r.DECIMAL:var n=parseFloat(e);if(Number.isNaN(n))throw new Error("Invalid decimal value: '"+e+"'");return n.toFixed(t.scale);case r.INTEGER:var i=parseInt(e),o=i.toString();if(Number.isNaN(i)||o.indexOf(".")>-1)throw new Error("Invalid integer value: '"+e);return o;case r.STRING:return e;default:return""}},e.exports.toJSON=function(t){var e={name:t.name,type:t.type,min:t.min,max:t.max};return t.type===r.DECIMAL&&(e.scale=t.scale),e},e.exports.modelValue=function(t){switch(t.type){case r.DECIMAL:return function(t){switch(t.scale){case 1:return"0.0";case 2:case 3:return"0.000";default:for(var e="0.",n=0;n<t.scale;++n)e+="0";return e}}(t);case r.INTEGER:return"0";case r.STRING:default:return""}},e.exports.Type=r},{}],201:[function(t,e,n){var r=t("data/record/schema/field-impl");e.exports=function(t,e,n,i,o){this.name=t,this.min=e,this.max=n,this.index=i,this.isVariable=e!==n;var s={};o.forEach(function(t){s[t.name]=t}),this.fields=function(){return o},this.getFields=function(){return[].concat(o)},this.getField=function(e){var n=s[e];if(n)return n;throw new Error("Record '"+t+"' has no field named '"+e+"'")},this.lastField=function(){return o[o.length-1]},this.createModel=function(){var t=[];return o.forEach(function(e){for(var n=0;n<e.min;++n)t.push(r.modelValue(e))}),t},this.getAbsoluteIndex=function(e){if(e<0||-1!==n&&e>n-1)throw new Error("Invalid index '"+e+"' for record '"+t+"'");return i+e},this.toString=function(){var r="Record [Name="+t;return e===n?r+=", Occurs="+e:(r+=", Min="+e+", Max=",r+=-1===n?"Unlimited":n),r+=", Fields="+o+"]"}},e.exports.toJSON=function(t){var e={};return t.fields().forEach(function(t){e[t.name]=r.toJSON(t)},{}),{fields:t.fields().map(r.toJSON),name:t.name,min:t.min,max:t.max}}},{"data/record/schema/field-impl":200}],202:[function(t,e,n){function r(t,e,n){if(e<0)throw new Error("'"+t+"' has invalid 'min' value '"+e+"'");if(-1!==n&&(n<1||n<e))throw new Error("'"+t+"' has invalid 'max' value '"+n+"'")}var i=t("util/require-non-null"),o=t("data/record/schema/schema-impl"),s=t("data/record/schema/record-impl"),a=t("data/record/schema/field-impl");e.exports=function(t){function e(){if(0===l.length)return 0;var t=l[l.length-1];return t.index+t.max}function n(){if(0===l.length)throw new Error("No fields specified for record: '"+c+"'");var t;if(0===h.length)t=0;else{var e=h[h.length-1];t=e.index+e.max}h.push(new s(c,f,d,t,l))}function u(t){if(i(t,"name"),void 0===l)throw new Error("Cannot add field '"+t+"' as there is no current record");if(l.length){for(var e=0;e<l.length;++e)if(t===l[e].name)throw new Error("Duplicate field name: '"+t+"'");var n=l[l.length-1];if(n.isVariable)throw new Error("Field '"+t+"' is not allowed after variable multiplicity field '"+n.name+"'")}}var c,l,f,d,h=[];this.record=function(t,e,o){return e="number"==typeof e?e:1,o="number"==typeof o?o:e,r(t,e,o),function(t){if(i(t,"name"),t===c)throw new Error("Duplicate record name: '"+t+"'");if(h.length)for(var e=0;e<h.length;++e)if(t===h[e].name)throw new Error("Duplicate record name: '"+t+"'");if(void 0!==l&&f!==d)throw new Error("Record '"+t+"' not allowed after variable multiplicity record: '"+c+"'")}(t),void 0!==l&&n(),c=t,f=e,d=o,l=[],this},this.string=function(t,n,i){return n="number"==typeof n?n:1,i="number"==typeof i?i:n,r(t,n,i),u(t),l.push(new a(t,a.Type.STRING,n,i,e())),this},this.integer=function(t,n,i){return n="number"==typeof n?n:1,i="number"==typeof i?i:n,r(t,n,i),u(t),l.push(new a(t,a.Type.INTEGER,n,i,e())),this},this.decimal=function(t,n,i,o){return i="number"==typeof i?i:1,o="number"==typeof o?o:i,r(t,i,o),function(t,e){if(e<1)throw new Error("'"+t+"' has invalid 'scale' value '"+e+"'")}(t,n),u(t),l.push(new a(t,a.Type.DECIMAL,i,o,e(),n)),this},this.build=function(){if(void 0!==l&&n(),0===h.length)throw new Error("Schema has no records");return new o(t,h)}}},{"data/record/schema/field-impl":200,"data/record/schema/record-impl":201,"data/record/schema/schema-impl":203,"util/require-non-null":455}],203:[function(t,e,n){var r=t("data/record/model/mutable-record-model-impl"),i=t("data/record/schema/record-impl");e.exports=function t(e,n){var o={},s=this;n.forEach(function(t){o[t.name]=t}),this.getRecord=function(t){var e=o[t];if(e)return e;throw new Error("Record '"+t+"' is not known")},this.getRecords=function(){return[].concat(n)},this.records=function(){return n},this.firstRecord=function(){return n[0]},this.lastRecord=function(){return n[n.length-1]},this.createMutableModel=function(){return new r(e,this)},this.createModel=function(){var t=[];return n.forEach(function(e){var n=e.createModel();if(e.min>0)for(var r=0;r<e.min;++r)t.push([].concat(n))}),t},this.asJSONString=function(){return JSON.stringify({records:n.map(i.toJSON)})},this.equals=function(e){if(e&&e instanceof t){return s.asJSONString()===e.asJSONString()}return!1},this.toString=function(){return"Schema [Records="+n+"]"}}},{"data/record/model/mutable-record-model-impl":191,"data/record/schema/record-impl":201}],204:[function(t,e,n){var r=t("data/record/schema/schema-builder-impl");e.exports=function(t){this.parse=function(e){var n,i=new r(t);try{n=JSON.parse(e)}catch(t){throw new Error("Invalid Schema JSON string")}if(void 0===n.records)throw new Error("Schema has no records");return n.records.forEach(function(t){void 0!==t.occurs?i.record(t.name,t.occurs):i.record(t.name,t.min,t.max),t.fields&&t.fields.forEach(function(t){var e,n;void 0!==t.occurs?(e=t.occurs,n=t.occurs):(e=t.min,n=t.max);var r=t.type||"STRING";switch(r.toUpperCase()){case"STRING":i.string(t.name,e,n);break;case"INTEGER":i.integer(t.name,e,n);break;case"DECIMAL":var o=t.scale||2;i.decimal(t.name,o,e,n);break;default:throw new Error("Invalid field type value '"+r+"'")}})}),i.build()}}},{"data/record/schema/schema-builder-impl":202}],205:[function(t,e,n){e.exports.assignInternals=function(t,e,n,r){t.$buffer=e,t.$offset=n||0,t.$length=void 0===r?e.length:r}},{}],206:[function(t,e,n){(function(n){function r(t,e,r){var a={},u=function(){},c=!1,l=function(t,e){e=e||[];var r=function(t){i.callWithArguments(t,e)};n.nextTick(function(){a[t]&&a[t].forEach(r)}),u(t,e)},f=function(t){l("error",[t]),d()},d=function(t){c||(c=!0,l("close",[t]))},h=new s(a,f,d,r);void 0!==t&&h.on(t,e),this.listen=function(t){u=t},this.get=function(){return h},this.close=d,this.error=f,this.emit=function(t){if(!c&&t){var e=o.argumentsToArray(arguments);e.shift(),l(t,e)}},this.assign=function(t){for(var e in h)t[e]=h[e]}}var i=t("util/function"),o=t("util/array"),s=t("events/stream");r.assign=function(t){var e=new r,n=e.get();for(var i in n)t[i]=n[i];return e},e.exports=r}).call(this,t("_process"))},{_process:490,"events/stream":208,"util/array":445,"util/function":447}],207:[function(t,e,n){var r=t("util/interface")._implements,i=t("../../events/result"),o=t("when");e.exports=r(i,function(t){var e=o.promise(function(e,n){t.listen(function(t,r){"error"===t?n(r[0]):e(r[0])})});this.then=function(t,n,r){return e=e.then(t,n,r)}})},{"../../events/result":122,"util/interface":448,when:529}],208:[function(t,e,n){function r(t,e,n,i){if("object"==typeof e)for(var o in e)r(t,o,e[o],i);else if(n){if(void 0===t[e]){if(i&&-1===i.indexOf(e))throw new Error("Event "+e+" not emitted on this stream, allowed events are "+i);t[e]=[]}t[e].push(n)}return t}function i(t,e,n){if("object"==typeof e)for(var r in e)i(t,r,e[r]);else t[e]&&(t[e]=n?t[e].filter(function(t){return t!==n}):[]);return t}var o=t("util/interface")._implements,s=t("../../events/stream");e.exports=o(s,function(t,e,n,o){var s;o&&(s=["close","error","complete"].concat(o)),this.on=function(e,n){return r(t,e,n,s),this},this.off=function(e,n){return i(t,e,n),this},this.close=function(t){return n(t),this},this.error=function(t){return e(t),this}})},{"../../events/stream":123,"util/interface":448}],209:[function(t,e,n){var r=t("util/interface")._implements,i=t("services/services"),o=t("events/emitter"),s=t("events/result"),a=t("session/session-id"),u=t("topics/topic-selector-parser"),c=t("control/registration").responseHandler,l=t("control/registration").registrationCallback,f=t("../../features/client-control"),d=t("services/control/session-properties-event-type"),h=t("util/require-non-null"),p=t("util/logger").create("Session.Clients");e.exports=r(f,function(t){var e=t.getServiceLocator(),n=e.obtain(i.GET_SESSION_PROPERTIES),r=e.obtain(i.SESSION_PROPERTIES_REGISTRATION_2);t.getServiceRegistry().add(i.SESSION_PROPERTIES_EVENT_2,{onRequest:function(t,e,n){try{t.getConversationSet().respond(e.cid,e),n.respond()}catch(t){n.fail(t)}}}),this.SessionEventType={UPDATED:0,RECONNECTED:1,FAILED_OVER:2,DISCONNECTED:3},this.close=function(n){var r=new o,u=new s(r);try{h(n,"SessionID")}catch(t){return r.error(t),u}if(t.checkConnected(r)){var c=a.validate(n);c?e.obtain(i.CLOSE_CLIENT).send({sessionID:c},function(t,e){t?r.error(t):r.emit("complete",e)}):r.error(new Error("Invalid SessionID: "+n))}return u},this.subscribe=function(n,r){var c=new o,l=new s(c);try{h(n,"SessionID or Session Filter"),h(r,"Topic Selector")}catch(t){return c.error(t),l}if(t.checkConnected(c)){var f;try{f=u(r)}catch(t){return c.error(t),l}var d=a.validate(n);d?e.obtain(i.SUBSCRIBE_CLIENT).send({sessionID:d,selector:f},function(t){t?c.error(t):c.emit("complete")}):e.obtain(i.FILTER_SUBSCRIBE).send({filter:n,selector:f},function(t,e){t?c.error(t):e.isSuccess()?c.emit("complete",e.selected):c.error(e.errors)})}return l},this.unsubscribe=function(n,r){var c=new o,l=new s(c);try{h(n,"SessionID or Session Filter"),h(r,"Topic Selector")}catch(t){return c.error(t),l}if(t.checkConnected(c)){var f;try{f=u(r)}catch(t){return c.error(t),l}var d=a.validate(n);d?e.obtain(i.UNSUBSCRIBE_CLIENT).send({sessionID:d,selector:f},function(t){t?c.error(t):c.emit("complete")}):e.obtain(i.FILTER_UNSUBSCRIBE).send({filter:n,selector:f},function(t,e){t?c.error(t):e.isSuccess()?c.emit("complete",e.selected):c.error(e.errors)})}return l},this.getSessionProperties=function(e,r){var i=new o,u=new s(i);return"string"==typeof e&&(e=a.fromString(e)),t.checkConnected(i)&&n.send({sessionID:e,propertyKeys:r},function(t,e){t?i.error(t):null===e?i.error(new Error("Invalid session ID")):i.emit("complete",e.properties)}),u},this.setSessionPropertiesListener=function(e,n){var i=new o,a=new s(i);if(n||i.error(new Error("Session Properties listener is null or undefined")),t.checkConnected(i)){p.debug("Adding Session Properties Listener");var u={active:function(t){p.debug("Session Properties Listener active"),n.onActive(t)},respond:function(t){for(var e=0;e<t.events.length;++e){var r=t.events[e];switch(r.type){case d.OPEN:n.onSessionOpen(r.sessionId,r.oldProperties);break;case d.UPDATE:n.onSessionEvent(r.sessionId,r.updateType,r.newProperties,r.oldProperties);break;case d.CLOSE:n.onSessionClose(r.sessionId,r.oldProperties,r.closeReason);break;default:p.debug("Unknown event type received for session properties listener",r.type)}}},close:function(t){p.debug("Session Properties Listener closed"),t?n.onError(t):n.onClose()}},f=t.getConversationSet(),h=f.newConversation(c(t,u,function(t,e){r.send({cid:t},e)}));r.send({cid:h,properties:e},l(f,h,i))}return a}})},{"../../features/client-control":128,"control/registration":167,"events/emitter":206,"events/result":207,"services/control/session-properties-event-type":317,"services/services":358,"session/session-id":415,"topics/topic-selector-parser":436,"util/interface":448,"util/logger":449,"util/require-non-null":455}],210:[function(t,e,n){function r(t){return t=t||{},t.headers=t.headers||[],t.priority=t.priority||0,t}function i(t){try{return c.fromString(t)}catch(t){return!1}}var o=t("topics/topic-selector-parser"),s=t("util/interface")._implements,a=t("services/services"),u=t("conversation/conversation-id"),c=t("session/session-id"),l=t("client/command-service"),f=t("control/control-group"),d=t("control/registration"),h=t("data/datatypes"),p=t("events/emitter"),v=t("events/result"),g=t("../../errors/error-reason"),m=t("../../features/messages"),y=t("util/array"),b=t("util/logger").create("Session.Messages"),w=t("util/require-non-null"),x=u.fromString("0");e.exports=s(m,function(t){function e(t,e,n,r,i){try{w(e,"Message path"),w(n,"Request")}catch(e){return void t.error(e)}var o;try{o=r?h.getChecked(r):h.getByValue(n)}catch(e){return void t.error(e)}b.debug("Sending request to server",n),_.send({path:e,type:o.name(),request:o.writeValue(n)},function(n,r){var o;if(n)b.debug("Request failed",e),t.error(n);else{b.debug("Request complete",e);try{o=h.getChecked(i||r.responseDataType)}catch(e){return void t.error(e)}t.emit("complete",o.readValue(r.data))}})}function n(t,e,n,r,i,o){try{w(r,"Session ID"),w(e,"Message path"),w(n,"Request")}catch(e){return void t.error(e)}var s;try{s=i?h.getChecked(i):h.getByValue(n)}catch(e){return void t.error(e)}b.debug("Sending request to session",r,n),$.send({sessionId:r,path:e,type:s.name(),request:s.writeValue(n)},function(n,r){var i;if(n)b.debug("Request failed",e),t.error(n);else{b.debug("Request complete",e);try{i=h.getChecked(o||r.responseDataType)}catch(e){return void t.error(e)}t.emit("complete",i.readValue(r.data))}})}var s=t.getServiceLocator(),u=s.obtain(a.SEND),m=s.obtain(a.SEND_TO_SESSION),E=s.obtain(a.SEND_TO_FILTER),_=s.obtain(a.MESSAGING_SEND),S=s.obtain(a.MESSAGING_FILTER_SEND),$=s.obtain(a.MESSAGING_RECEIVER_SERVER),T=s.obtain(a.MESSAGING_RECEIVER_CONTROL_DEREGISTRATION),k={},C=[],A=t.getServiceRegistry();A.add(a.SEND,l.create(function(t,e,n){var r=!1;C.forEach(function(t){t.l.selector.selects(e.path)&&(t.e.emit("message",e),r=!0)}),r?n.respond():(b.info("No messaging streams registered for message on path: "+e.path),n.fail(new Error("Session "+t.getSessionId()+" has no registered streams for message sent to: "+e.path)))})),A.add(a.MESSAGING_SEND,l.create(function(t,e,n){var r=k[e.path];if(void 0!==r){var i=new function(t,e){this.respond=function(){if(0===arguments.length)throw new Error("No argument provided to the responder");var n=arguments[0];if((null===n||void 0===n)&&!e)throw new Error("No response type has been provided and the value provided is null. Unable to determine the response type.");var r=e?h.getChecked(e):h.getByValue(n),i=r.writeValue(n);t.respond({responseDataType:r.name(),data:i})},this.reject=function(e){t.fail(g.REJECTED_REQUEST,e)}}(n,r.resType),o=e.dataType,s=r.reqType?r.reqType:o.valueClass;if(o.canReadAs(s)){var a;try{a=o.readAs(s,e.request)}catch(t){return b.error("Failed to convert "+o.name()+" datatype to "+s),r.stream.onError(g.INVALID_DATA),void delete k[e.path]}try{r.stream.onRequest(e.path,a,i)}catch(t){b.error("Messaging request stream threw an error",t),n.fail(g.CALLBACK_EXCEPTION,t.stack)}}else{var u="Messaging request for path "+e.path+" with "+o.name()+" datatype is incompatible for stream ("+s+")";b.debug(u),n.fail(g.INCOMPATIBLE_DATATYPE,u)}}else n.fail(g.UNHANDLED_MESSAGE,"Session "+t.getSessionId()+" has no registered streams for message sent to path '"+e.path+"'")})),A.add(a.FILTER_RESPONSE,l.create(function(t,e,n){n.respond(),t.getConversationSet().respond(e.cid,e)})),A.add(a.SEND_RECEIVER_CLIENT,l.create(function(t,e,n){n.respond(),t.getConversationSet().respond(e.cid,e)})),A.add(a.MESSAGING_RECEIVER_CLIENT,l.create(function(t,e,n){t.getConversationSet().respond(e.cid,{request:e,callback:n.respond})})),this.addHandler=function(e,n,r){var i=new p,o=new v(i);if(!e)return i.error(new Error("Message Handler path is null or undefined")),o;if(!n)return i.error(new Error("Message Handler is null or undefined")),o;if(t.checkConnected(i)){b.debug("Adding message handler",e);var s={definition:a.SEND_RECEIVER_CLIENT,group:f.DEFAULT,path:e,keys:void 0!==r?r:{}},u={active:function(t){b.debug("Message handler active",e),n.onActive(t)},respond:function(t){b.debug("Message handler response",e);var r={session:t.sender.toString(),content:t.message,options:t.options,path:t.path},i=t.sessionProperties;return i&&Object.keys(i).length>0&&(r.properties=i),n.onMessage(r),!1},close:function(){b.debug("Message handler closed",e),n.onClose()}};return d.registerMessageHandler(t,s,u)}return o},this.listen=function(t,e){var n=new p(void 0,void 0,["message"]),r=new function(t,e){this.selector=e,t.assign(this)}(n,o(t)),i={l:r,e:n};return r.on("close",function(){y.remove(C,i)}),e&&e instanceof Function&&r.on("message",e),C.push(i),r},this.send=function(e,n,o,s){var a=new p,l=new v(a),f=function(t,n){t?(b.debug("Message send failed",e),a.error(t)):(b.debug("Message send complete",e),n?a.emit("complete",{path:e,recipient:s,sent:n.sent,errors:n.errors}):a.emit("complete",{path:e,recipient:s}))};if(o&&("string"==typeof o||o instanceof c)?(s=o,o=r()):o=r(o),t.checkConnected(a)){if(!e)return a.error(new Error("Message path is null or undefined")),l;if(void 0===n||null===n)return a.error(new Error("Message content is null or undefined")),l;var d;if(s){var h="string"==typeof s?i(s):s;h?(d={path:e,content:n,session:h,options:o,cid:x},b.debug("Sending message to session",d),m.send(d,f)):(d={path:e,content:n,filter:s,options:o,cid:x},b.debug("Sending message to filter",d),E.send(d,f))}else d={path:e,content:n,options:o},b.debug("Sending message to server",d),u.send(d,f)}return l},this.addRequestHandler=function(e,n,r,i){var o=new p,s=new v(o);if(t.checkConnected(o)){try{w(e,"Message path"),w(n,"Request handler")}catch(t){return o.error(t),s}b.debug("Adding request handler",e);var u={definition:a.MESSAGING_RECEIVER_CLIENT,group:f.DEFAULT,path:e,keys:void 0!==r?r:{}},c={active:function(r,i){b.debug("Request handler active",e);var s={close:function(){T.send(u,function(e,r){e?(t.getConversationSet().discard(i,e),b.debug("Error with request handler deregistration: ",e)):(n.onClose(),t.getConversationSet().respondIfPresent(i,r))})}};o.emit("complete",s)},respond:function(t){b.debug("Request handler pair.request",e);var r,o={sessionId:t.request.sessionID,path:t.request.path,properties:t.request.properties};try{r=(i||h.getChecked(t.request.dataType)).readValue(t.request.content)}catch(e){return b.info("An exception has occurred whilst reading the request:",e),n.onError(e),void t.callback.fail(e.message)}var s={respond:function(e,n){var r=h.getChecked(n?n.name():e);t.callback({responseDataType:r.name(),data:r.writeValue(e)})}};n.onRequest(r,o,s)},close:function(){b.debug("Request handler closed",e),n.onClose()}};d.registerRequestHandler(t,u,c).then(null,function(t){o.error(t)})}return s},this.sendRequest=function(r,o,s,a,u){var l=new p,f=new v(l);if(t.checkConnected(l))if(s instanceof c)n(l,r,o,s,a,u);else if("string"==typeof s){var d=i(s);d?n(l,r,o,d,a,u):e(l,r,o,s,a)}else e(l,r,o,s,a);return f},this.sendRequestToFilter=function(e,n,r,i,o,s){var a=new p,u=new v(a);if(t.checkConnected(a)){try{w(n,"Message path"),w(e,"Session filter"),w(r,"Request"),w(i,"Response callback")}catch(t){return a.error(t),u}var c;try{c=o?h.getChecked(o):h.getByValue(r)}catch(t){return void a.error(t)}var l=t.getConversationSet().newConversation({onOpen:function(){},onResponse:function(t,e){if(null===e)return!0;var n=e.sessionID;if(e.errorReason)i.onResponseError(n,e.errorReason);else{var r,o=h.getByName(e.response.responseDataType);try{r=h.getChecked(s||e.response.responseDataType)}catch(t){return void a.error(t)}if(o.canReadAs(r.valueClass)){var u;try{u=o.readAs(r.valueClass,e.response.data)}catch(t){return i.onResponseError(n,t),!1}try{i.onResponse(n,u)}catch(t){b.error("Exception within messaging filter callback",t)}}else i.onResponseError(n,new Error("The received response was a "+o+", which cannot be read as: "+r))}return!1},onDiscard:function(t,e){i.onError(e)}});b.debug("Sending filter request to server",r),S.send({cid:l,path:n,filter:e,dataType:c,request:c.writeValue(r)},function(e,r){e?(b.debug("Request failed",n),a.error(e)):r.isSuccess?(b.debug("Request complete",n),t.getConversationSet().respondIfPresent(l,null),a.emit("complete",r.numberSent)):(b.debug("Request failed",n),a.error(r.errors))})}return u},this.setRequestStream=function(t,e,n,r){var i=new function(t,e,n){this.reqType=t,this.resType=e,this.stream=n}(n?h.getValueClassChecked(n):null,r?h.getValueClassChecked(r):null,e),o=k[t];if(k[t]=i,o)return o.stream},this.removeRequestStream=function(t){var e=k[t];if(delete k[t],e)return e.stream}})},{"../../errors/error-reason":120,"../../features/messages":129,"client/command-service":146,"control/control-group":166,"control/registration":167,"conversation/conversation-id":169,"data/datatypes":177,"events/emitter":206,"events/result":207,"services/services":358,"session/session-id":415,"topics/topic-selector-parser":436,"util/array":445,"util/interface":448,"util/logger":449,"util/require-non-null":455}],211:[function(t,e,n){var r=t("util/interface")._implements,i=t("../../features/ping"),o=t("services/services"),s=t("events/emitter"),a=t("events/result");e.exports=r(i,function(t,e){e=e||Date.now;var n=t.getServiceLocator().obtain(o.USER_PING);this.pingServer=function(){var r=new s,i=new a(r);if(t.checkConnected(r)){var o=e();n.send(null,function(t){if(t)r.error(t);else{var n=e()-o;r.emit("complete",{timestamp:o,rtt:n})}})}return i}})},{"../../features/ping":130,"events/emitter":206,"events/result":207,"services/services":358,"util/interface":448}],212:[function(t,e,n){var r=t("services/services"),i=t("services/services").CHANGE_PRINCIPAL,o=t("services/services").GET_SECURITY_CONFIGURATION,s=t("services/services").UPDATE_SECURITY_CONFIGURATION,a=t("services/services").GET_SYSTEM_AUTHENTICATION,u=t("services/services").UPDATE_SYSTEM_AUTHENTICATION,c=t("events/emitter"),l=t("events/result"),f=t("control/registration").registerHandler,d=t("control/control-group"),h=t("client/command-service"),p=t("services/security/authentication-response"),v=t("services/authentication/security-command-script"),g=t("features/security/security-script-builder"),m=t("features/security/system-authentication-script-builder"),y=t("util/interface")._implements,b=t("../../features/security"),w=t("util/require-non-null"),x=t("util/logger").create("Session.Security"),E=y(b.SecurityConfiguration,{__constructor:function(t,e,n){this.anonymous=t,this.named=e,this.roles=n},toString:function(){return"SecurityConfiguration [anonymous="+this.anonymous+", named="+this.named+", roles="+this.roles+"]"}}),_=y(b.SystemAuthenticationConfiguration,{__constructor:function(t,e,n){this.principals=t||[],this.anonymous={action:e,roles:n||[]}},toString:function(){return"SystemAuthenticationConfiguration [principals="+this.principals+", anonymous="+this.anonymous+"]"}});_.CONNECTION_ACTION={ALLOW:{id:0,value:"allow"},DENY:{id:1,value:"deny"},ABSTAIN:{id:2,value:"abstain"},fromString:function(t){return this[t.toUpperCase()]}};var S=y(b.SystemPrincipal,{__constructor:function(t,e){this.name=w(t),this.roles=e||[]},toString:function(){return"SystemPrincipal ["+this.name+", "+this.roles+"]"}}),$=y(b,function(t){var e=t.getServiceLocator(),n=e.obtain(i),y=e.obtain(o),b=e.obtain(a),w=e.obtain(u),E=e.obtain(s);t.getServiceRegistry().add(r.AUTHENTICATION,h.create(function(t,e,n){t.getConversationSet().respond(e.cid,{req:e,callback:n})})),this.getPrincipal=function(){return t.getPrincipal()},this.changePrincipal=function(e,r){var i=new c,o=new l(i);return t.checkConnected(i)&&(x.debug("Changing principal",e),n.send({principal:e,credentials:r},function(n,r){n?i.error(n):r?(t.setPrincipal(e),i.emit("complete")):i.error(new Error("Unable to change principal due to authentication failure"))})),o},this.getSecurityConfiguration=function(){var e=new c,n=new l(e);return t.checkConnected(e)&&(x.debug("Getting security configuration"),y.send(null,function(t,n){t?e.error(t):e.emit("complete",n)})),n},this.getSystemAuthenticationConfiguration=function(){var e=new c,n=new l(e);return t.checkConnected(e)&&(x.debug("Getting system authentication"),b.send(null,function(t,n){t?e.error(t):e.emit("complete",n)})),n},this.setAuthenticationHandler=function(e,n,i){var o=new c,s=new l(o);if(t.checkConnected(o)){x.debug('Setting Authentication Handler for "'+e+'"');var a={active:function(t){x.debug('Authentication Handler active for "'+e+'"'),i.onActive(t)},respond:function(t){var e=t.req,n=t.callback;i.onAuthenticate(e.principal,e.credentials,e.details,{allow:function(t){t?n.respond(p.allow(t)):n.respond(p.ALLOW)},abstain:function(){n.respond(p.ABSTAIN)},deny:function(){n.respond(p.DENY)}})},close:function(t){t?(x.debug('Authentication Handler closed with error for "'+e+'"'),i.onError(t)):(x.debug('Authentication Handler closed for "'+e+'"'),i.onClose())}},u={definition:r.AUTHENTICATION,group:d.DEFAULT,details:n,name:e};return f(t,u,a,r.AUTHENTICATION_CONTROL_REGISTRATION,r.AUTHENTICATION_CONTROL_DEREGISTRATION)}return s};var _=function(e,n){var r=new c,i=new l(r);return""===n?r.emit("complete"):n&&"string"==typeof n?t.checkConnected(r)&&e.send(new v(n),function(t,e){!function(t,e,n){t?n.error(t):e.errors.length>0?n.error(e.errors):n.emit("complete")}(t,e,r)}):r.error(new Error("Invalid argument for script:"+n)),i};this.updateSecurityStore=function(t){return x.debug("Updating security store"),_(E,t)},this.updateAuthenticationStore=function(t){return x.debug("Updating authentication store"),_(w,t)},this.securityScriptBuilder=function(t){return new g(t)},this.authenticationScriptBuilder=function(t){return new m(t)}});e.exports.GlobalPermission={AUTHENTICATE:0,VIEW_SESSION:1,MODIFY_SESSION:2,REGISTER_HANDLER:3,VIEW_SERVER:4,CONTROL_SERVER:5,VIEW_SECURITY:6,MODIFY_SECURITY:7},e.exports.TopicPermission={READ_TOPIC:0,UPDATE_TOPIC:1,MODIFY_TOPIC:2,SEND_TO_MESSAGE_HANDLER:3,SEND_TO_SESSION:4,SELECT_TOPIC:5,QUERY_OBSOLETE_TIME_SERIES_EVENTS:6,EDIT_TIME_SERIES_EVENTS:7,EDIT_OWN_TIME_SERIES_EVENTS:8},e.exports.Security=$,e.exports.SystemPrincipal=S,e.exports.Configuration=E,e.exports.SystemAuthentication=_},{"../../features/security":131,"client/command-service":146,"control/control-group":166,"control/registration":167,"events/emitter":206,"events/result":207,"features/security/security-script-builder":213,"features/security/system-authentication-script-builder":214,"services/authentication/security-command-script":271,"services/security/authentication-response":343,"services/services":358,"util/interface":448,"util/logger":449,"util/require-non-null":455}],213:[function(t,e,n){var r=t("util/interface")._implements,i=t("features/security/util"),o=t("../../../features/security"),s=t("util/require-non-null"),a=i.permissionsToString,u=i.quoteAndEscape,c=i.rolesToString,l=r(o.SecurityScriptBuilder,function(t){t=t||"";var e=function(e){return new l(t?t+"\n"+e:e)};this.build=function(){return t},this.toString=function(){return"ConfigurationScriptBuilder ["+t+"]"},this.setRolesForAnonymousSessions=function(t){return e("set roles for anonymous sessions "+c(s(t,"roles")))},this.setRolesForNamedSessions=function(t){return e("set roles for named sessions "+c(s(t,"roles")))},this.setGlobalPermissions=function(t,n){return e("set "+u(s(t,"role"))+" permissions "+a(s(n,"permissions")))},this.setDefaultTopicPermissions=function(t,n){return e("set "+u(s(t,"role"))+" default topic permissions "+a(s(n,"permissions")))},this.removeTopicPermissions=function(t,n){return e("remove "+u(s(t,"role"))+" permissions for topic "+u(s(n,"path")))},this.setTopicPermissions=function(t,n,r){return e("set "+u(s(t,"role"))+" topic "+u(s(n,"path"))+" permissions "+a(s(r,"permissions")))},this.setRoleIncludes=function(t,n){return e("set "+u(s(t,"role"))+" includes "+c(s(n,"included roles")))}});e.exports=l},{"../../../features/security":131,"features/security/util":215,"util/interface":448,"util/require-non-null":455}],214:[function(t,e,n){var r=t("util/interface")._implements,i=t("features/security/util"),o=t("../../../features/security"),s=t("util/require-non-null"),a=i.quoteAndEscape,u=i.rolesToString,c=r(o.SystemAuthenticationScriptBuilder,function(t){t=t||"";var e=function(e){return new c(t?t+"\n"+e:e)};this.build=function(){return t},this.toString=function(){return"SystemAuthenticationScriptBuilder ["+t+"]"},this.assignRoles=function(t,n){return e("assign roles "+a(s(t,"principal"))+" "+u(s(n,"roles")))},this.addPrincipal=function(t,n,r){return r=r||[],e("add principal "+a(s(t,"principal"))+" "+a(s(n,"password"))+(r.length?" "+u(r):""))},this.setPassword=function(t,n){return e("set password "+a(s(t,"principal"))+" "+a(s(n,"password")))},this.verifyPassword=function(t,n){return e("verify password "+a(s(t,"principal"))+" "+a(s(n,"password")))},this.removePrincipal=function(t){return e("remove principal "+a(s(t,"principal")))},this.allowAnonymousConnections=function(t){return t=t||[],e("allow anonymous connections "+u(t))},this.denyAnonymousConnections=function(){return e("deny anonymous connections")},this.abstainAnonymousConnections=function(){return e("abstain anonymous connections")}});e.exports=c},{"../../../features/security":131,"features/security/util":215,"util/interface":448,"util/require-non-null":455}],215:[function(t,e,n){function r(t){var e="'",n=0;if(t.indexOf("'")<0&&t.indexOf("\\")<0)e+=t;else for(;n<t.length;++n){var r=t[n];"'"!==r&&"\\"!==r||(e+="\\"),e+=r}return e+="'"}e.exports.permissionsToString=function(t){return"["+t.join(" ")+"]"},e.exports.quoteAndEscape=r,e.exports.rolesToString=function(t){return"["+t.map(r).join(" ")+"]"}},{}],216:[function(t,e,n){function r(t,e){if(t<0||void 0===t||null===t)throw new Error(e+" is negative: "+t);return t}function i(t,e,n,r){this.id=t,this.anchorOperator=e,this.spanOperator=n,this.unitsSuffix=r}function o(t,e){function n(n){var r="."+n+"(";return e!==a.ABSOLUTE_START&&(r+=t+e.unitsSuffix),r+=")"}this.value=t,this.type=e,this.isAbsolute=function(){return this.type.anchorOperator},this.equals=function(t){return!!(t&&t instanceof o)&&(this.value===t.value&&this.type===t.type)},this.toAnchorDescription=function(){return n(e.anchorOperator)},this.toSpanDescription=function(){return n(e.spanOperator)}}var s=t("util/require-non-null"),a={ABSOLUTE_START:new i(0,"fromStart","toStart",""),ABSOLUTE_SEQUENCE:new i(1,"from","to",""),ABSOLUTE_TIME:new i(2,"from","to"," ms"),OFFSET_SEQUENCE:new i(3,"fromLast","untilLast",""),OFFSET_TIME:new i(4,"fromLast","untilLast"," ms"),NEXT_COUNT:new i(5,null,"next",""),NEXT_TIME:new i(6,null,"next"," ms"),PREVIOUS_COUNT:new i(7,null,"previous",""),PREVIOUS_TIME:new i(8,null,"previous"," ms")};o.prototype.equals=function(t){return!!(t&&t instanceof o)&&(this.value===t.value&&this.type===t.type)};var u=new o(0,a.ABSOLUTE_START);o.at=function(t){return t instanceof Date?new o(s(t,"Date").getTime(),a.ABSOLUTE_TIME):new o(r(t,"Sequence"),a.ABSOLUTE_SEQUENCE)},o.atStart=function(){return u},o.offset=function(t){return new o(r(t,"Count"),a.OFFSET_SEQUENCE)},o.offsetMillis=function(t){return new o(r(t,"Timespan"),a.OFFSET_TIME)},o.next=function(t){return new o(r(t,"Count"),a.NEXT_COUNT)},o.nextMillis=function(t){return new o(r(t,"Timespan"),a.NEXT_TIME)},o.previous=function(t){return new o(r(t,"Count"),a.PREVIOUS_COUNT)},o.previousMillis=function(t){return new o(r(t,"Timespan"),a.PREVIOUS_TIME)},o.Type=a,e.exports=o},{"util/require-non-null":455}],217:[function(t,e,n){function r(t){return!!t}function i(t,e){return t.originalEvent.sequence.toNumber()>e.sequence.toNumber()?1:-1}function o(t,e,n,u){this.events=u,this.selectedCount=t.toNumber(),this.isComplete=t.equals(e),this.streamStructure=n,this.merge=function(t){var e=u.concat(t.events).sort(i).map(function(t){var e={};return t.forEach(function(t){var n=t.originalEvent.sequence;(!e[n]||e[n].sequence.toNumber()<t.sequence.toNumber())&&(e[n]=t)}),function(t){var n=t.originalEvent.sequence,r=e[n];return r?t.isEditEvent?t.sequence.equals(r.sequence)?(delete e[n],t):null:(delete e[n],r):null}}(u.concat(t.events))).filter(r),n=a.fromNumber(e.length);return new o(n,n,s.StreamStructure.VALUE_EVENT_STREAM,e)}}var s=t("features/time-series/range-query-parameters"),a=t("long");e.exports=o},{"features/time-series/range-query-parameters":219,long:476}],218:[function(t,e,n){function r(t,e){return t.withViewRange(e(t.viewRange))}function i(t,e){return t.withEditRange(e(t.editRange))}function o(t,e,n,s){function c(r){return new o(t,e,s(n,r),s)}this.valueType=e,this.parameters=n,this.mode=s,this.selectFrom=function(r){var i=new l,o=new f(i);if(!r)return i.error(new Error("Topic path is null")),o;var s={topicPath:r,parameters:n};return t.send(s,function(t,r){t?i.error(t):i.emit("complete",r.createQueryResult(e,n.queryType.streamStructure))}),o},this.forValues=function(){return new o(t,e,n.withQueryType(u.VALUES).withViewRange(a.DEFAULT_RANGE),r)},this.forEdits=function(){return new o(t,e,n.withQueryType(u.ALL_EDITS).withViewRange(a.DEFAULT_RANGE),r)},this.editRange=function(){if(n.queryType!==u.VALUES)throw new Error(".editRange() cannot be applied to this edit range query");return new o(t,e,n,i)},this.allEdits=function(){if(n.queryType===u.VALUES)throw new Error(".allEdits() cannot be applied to this value range query");return new o(t,e,n.withQueryType(u.ALL_EDITS),i)},this.latestEdits=function(){if(n.queryType===u.VALUES)throw new Error(".latestEdits() cannot be applied to this value range query");return new o(t,e,n.withQueryType(u.LATEST_EDITS),i)},this.limit=function(r){return new o(t,e,n.withLimit(r),s)},this.as=function(e){if(e&&e.valueClass)return new o(t,e.valueClass,n,s);if(e instanceof Function)return new o(t,e,n,s);throw new Error("Invalid value type: "+e)},this.from=function(t){return c(function(e){return e.from(t)})},this.fromStart=function(){return c(function(t){return t.fromStart()})},this.fromLast=function(t){return c(function(e){return e.fromLast(t)})},this.fromLastMillis=function(t){return c(function(e){return e.fromLastMillis(t)})},this.to=function(t){return c(function(e){return e.to(t)})},this.toStart=function(){return c(function(t){return t.toStart()})},this.untilLast=function(t){return c(function(e){return e.untilLast(t)})},this.untilLastMillis=function(t){return c(function(e){return e.untilLastMillis(t)})},this.next=function(t){return c(function(e){return e.next(t)})},this.nextMillis=function(t){return c(function(e){return e.nextMillis(t)})},this.previous=function(t){return c(function(e){return e.previous(t)})},this.previousMillis=function(t){return c(function(e){return e.previousMillis(t)})},this.equals=function(t){return!!(t&&t instanceof o)&&n.equals(t.parameters)}}var s=t("features/time-series/range-query-parameters"),a=t("features/time-series/range"),u=s.QueryType,c=t("data/bytes-impl"),l=t("events/emitter"),f=t("events/result");o.prototype.toString=function(){return this.parameters.toString()},o.createDefault=function(t){return new o(t,c,s.DEFAULT_RANGE_QUERY,r)},e.exports=o},{"data/bytes-impl":176,"events/emitter":206,"events/result":207,"features/time-series/range":220,"features/time-series/range-query-parameters":219}],219:[function(t,e,n){function r(t,e){this.id=t,this.name=e,this.toString=function(){return e}}function i(t,e,n,r){this.id=t,this.primaryOperator=e,this.editRangeOperator=n,this.streamStructure=r}function o(t,e,n,r){this.queryType=t,this.viewRange=e,this.editRange=n,this.limit=r,this.withViewRange=function(t){return new o(this.queryType,t,this.editRange,this.limit)},this.withEditRange=function(t){return new o(this.queryType,this.viewRange,t,this.limit)},this.withLimit=function(t){return new o(this.queryType,this.viewRange,this.editRange,function(t,e){if(t<0)throw new Error(e+" is negative: "+t);return t}(t,"limit"))},this.withQueryType=function(t){return new o(t,this.viewRange,this.editRange,this.limit)}}var s=t("features/time-series/range"),a={VALUE_EVENT_STREAM:new r(1,"VALUE_EVENT_STREAM"),EDIT_EVENT_STREAM:new r(2,"EDIT_EVENT_STREAM")},u={VALUES:new i(0,".forValues()",".editRange()",a.VALUE_EVENT_STREAM),ALL_EDITS:new i(1,".forEdits()",".allEdits()",a.EDIT_EVENT_STREAM),LATEST_EDITS:new i(2,".forEdits()",".latestEdits()",a.EDIT_EVENT_STREAM)};o.prototype.equals=function(t){return!!(t&&t instanceof o)&&(this.queryType===t.queryType&&this.viewRange.equals(t.viewRange)&&this.editRange.equals(t.editRange)&&this.limit===t.limit)},o.QueryType=u,o.StreamStructure=a,o.DEFAULT_RANGE_QUERY=new o(u.VALUES,s.DEFAULT_RANGE,s.DEFAULT_RANGE,9007199254740991),o.prototype.toString=function(){var t="rangeQuery()";return this.queryType!==u.VALUES&&(t+=this.queryType.primaryOperator),this.viewRange.equals(o.DEFAULT_RANGE_QUERY.viewRange)||(t+=this.viewRange),this.editRange.equals(o.DEFAULT_RANGE_QUERY.editRange)?this.queryType===u.LATEST_EDITS&&(t+=u.LATEST_EDITS.editRangeOperator):t+=this.queryType.editRangeOperator+this.editRange,this.limit!==o.DEFAULT_RANGE_QUERY.limit&&(t+=".limit("+this.limit+")"),t},e.exports=o},{"features/time-series/range":220}],220:[function(t,e,n){function r(t,e){this.anchor=t,this.span=e,this.equals=function(t){return!!(t&&t instanceof r)&&(this.anchor.equals(t.anchor)&&this.span.equals(t.span))},this.from=function(t){return new r(i.at(t),this.span)},this.fromStart=function(){return new r(i.atStart(),this.span)},this.fromLast=function(t){return new r(i.offset(t),this.span)},this.fromLastMillis=function(t){return new r(i.offsetMillis(t),this.span)},this.to=function(t){return new r(this.anchor,i.at(t))},this.toStart=function(){return new r(this.anchor,i.atStart())},this.untilLast=function(t){return new r(this.anchor,i.offset(t))},this.untilLastMillis=function(t){return new r(this.anchor,i.offsetMillis(t))},this.next=function(e){return new r(t,i.next(e))},this.nextMillis=function(t){return new r(this.anchor,i.nextMillis(t))},this.previous=function(t){return new r(this.anchor,i.previous(t))},this.previousMillis=function(t){return new r(this.anchor,i.previousMillis(t))}}var i=t("features/time-series/point");r.DEFAULT_RANGE=new r(i.atStart(),i.offset(0)),r.prototype.toString=function(){var t="";return this.anchor.equals(r.DEFAULT_RANGE.anchor)||(t+=this.anchor.toAnchorDescription()),this.span.equals(r.DEFAULT_RANGE.span)||(t+=this.span.toSpanDescription()),t},e.exports=r},{"features/time-series/point":216}],221:[function(t,e,n){var r=t("util/interface")._implements,i=t("../../../features/timeseries"),o=t("features/time-series/range-query-impl"),s=t("data/datatypes"),a=t("services/services"),u=t("events/emitter"),c=t("events/result"),l=t("util/require-non-null");e.exports=r(i,function(t){var e=t.getServiceLocator(),n=o.createDefault(e.obtain(a.RANGE_QUERY)),r=e.obtain(a.TIME_SERIES_APPEND),i=e.obtain(a.TIME_SERIES_EDIT);this.rangeQuery=function(){return n},this.edit=function(t,e,n,r){var o,a=new u,f=new c(a);try{o=r?s.getByClass(r):s.getByValue(n),l(t,"Path"),l(n,"Value"),l(e,"Sequence"),l(o,"Data type")}catch(t){return a.error(t),f}return i.send({path:t,sequence:e,dataType:o,value:o.writeValue(n)},function(t,e){t?a.error(t):a.emit("complete",e)}),f},this.append=function(t,e,n){var i,o=new u,a=new c(o);try{i=n?s.getByClass(n):s.getByValue(e),l(t,"Path"),l(e,"Value"),l(i,"Data type")}catch(t){return o.error(t),a}return r.send({path:t,value:i.writeValue(e),dataType:i},function(t,e){t?o.error(t):o.emit("complete",e)}),a}})},{"../../../features/timeseries":132,"data/datatypes":177,"events/emitter":206,"events/result":207,"features/time-series/range-query-impl":218,"services/services":358,"util/interface":448,"util/require-non-null":455}],222:[function(t,e,n){var r=t("util/interface")._implements,i=t("services/services"),o=t("events/emitter"),s=t("events/result"),a=t("client/command-service"),u=t("control/control-group"),c=t("control/registration").registerTopicHandler,l=t("features/update-response-handler"),f=t("../../topics/topics").TopicAddFailReason,d=t("services/wills/will-registration-result"),h=t("services/wills/topic-will-parameters"),p=t("update/update").Update,v=t("features/topic-control/universal-updater"),g=t("features/topic-control/value-cache"),m=t("topics/topic-selector-parser"),y=t("topics/details/topic-details"),b=t("metadata/util"),w=t("../../features/topic-control"),x=t("util/logger").create("Session.Topics");e.exports=r(w.TopicControl,function(t){var e=t.getServiceLocator(),n=e.obtain(i.ADD_TOPIC),r=e.obtain(i.REMOVE_TOPIC),w=e.obtain(i.UPDATE_TOPIC),E=e.obtain(i.TOPIC_REMOVAL),_=e.obtain(i.TOPIC_SCOPED_WILL_REGISTRATION),S=e.obtain(i.TOPIC_SCOPED_WILL_DEREGISTRATION),$=e.obtain(i.UPDATE_SOURCE_REGISTRATION),T=new g,k=new v(t),C=t.getServiceRegistry();C.add(i.UPDATE_SOURCE_STATE,a.create(function(t,e,n){n.respond(),t.getConversationSet().respondIfPresent(e.cid,{old:e.old,current:e.current})})),C.add(i.MISSING_TOPIC,a.create(function(t,e,n){t.getConversationSet().respond(e.cid,{request:e,callback:function(t){n.respond(t)}})})),this.add=function(e,r,i){var a=new o,u=new s(a);if(!e)return a.error({id:0,reason:"Path cannot be empty or null"}),u;void 0===i&&(i=r);var c=y.deriveDetails(r),l=y.deriveValue(c.type,i);return t.checkConnected(a)&&(x.debug("Adding topic",e),n.send({path:e,details:c,content:l},function(t,n){if(t)a.error(t);else switch(n.status){case 0:case 1:x.debug("Topic add complete",e),T.put(e,l),a.emit("complete",{topic:e,added:!0});break;case 2:n.reason===f.EXISTS?(x.debug("Topic add complete (already exists)",e),T.put(e,l),a.emit("complete",{topic:e,added:!1})):(x.debug("Topic add failed",e),a.error(n.reason));break;case 3:a.error({id:0,reason:"Cache failure"})}})),u},this.remove=function(e){var n=new o,i=new s(n);if(t.checkConnected(n)){x.debug("Removing topic",e);try{r.send({selector:m(e)},function(t){t?(x.debug("Topic removal failed",e),n.error(t)):(x.debug("Topic removal complete",e),n.emit("complete"))})}catch(t){x.debug("Error parsing selector",e),n.error(t)}}return i},this.removeSelector=function(e){var n=new o,r=new s(n);if(t.checkConnected(n)){x.debug("Removing topics",e);try{E.send({selector:m(e)},function(t){t?(x.debug("Topic removal failed",e),n.error(t)):(x.debug("Topic removal complete",e),n.emit("complete"))})}catch(t){x.debug("Error parsing selector",e),n.error(t)}}return r},this.removeWithSession=function(e){var n=new o,r=new s(n);if(t.checkConnected(n)){x.debug("Registering removeWithSession",e);var i=new h(e,h.Will.REMOVE_TOPICS);_.send(i,function(r,a){if(r)x.debug("removeWithSession registration failed",e),n.error(r);else if(a===d.SUCCESS){x.debug("removeWithSession registration complete",e);var u=!0,c=new o,l=new s(c);n.emit("complete",{deregister:function(){return u&&t.checkConnected(c)&&(x.debug("Deregistering removeWithSession",e),S.send(i,function(t){t?c.error(t):(u=!1,c.emit("complete",{topic:e}))})),l}})}else x.debug("removeWithSession registration failed",e),n.error(new Error("REGISTRATION_CONFLICT"))})}return r},this.update=function(e,n){var r=new o,i=new s(r);if(t.checkConnected(r)){x.debug("Updating topic",e);var a=function(t,n){t?(x.debug("Update failed",e),r.error(t)):n.isError?(x.debug("Update failed",e),r.error(n.reason)):(x.debug("Update complete",e),r.emit("complete",e))};b.isMetadataValue(n)?w.send({path:e,update:new p(n)},a):k.update(e,n,a)}return i},this.registerUpdateSource=function(e,n){var r=new o,i=new s(r),a=t.getConversationSet(),u=a.newConversation(l(t,T,e,n));return t.checkConnected(r)&&$.send({cid:u,path:e},function(t,e){t||"closed"===e?(a.discard(u,t),r.error(t)):(a.respond(u,{old:"init",current:e}),r.emit("complete"))}),i},this.addMissingTopicHandler=function(e,n){var r=new o,a=new s(r);if(!n)return r.error(new Error("Missing Topic handler is null or undefined")),a;if(t.checkConnected(r)){var l={active:function(t){x.debug("Missing Topic Handler registered for "+e),n.onRegister(e,t)},respond:function(t){x.debug("Missing Topic Handler notification for "+t.request.sessionID+" using "+t.request.selector),n.onMissingTopic({path:t.request.selector.prefix,selector:t.request.selector,sessionID:t.request.sessionID,proceed:function(){t.callback(!0)},cancel:function(){t.callback(!1)}})},close:function(t){x.debug("Missing Topic Handler closed for "+e),t?n.onError(e,t):n.onClose(e)}},f={definition:i.MISSING_TOPIC,group:u.DEFAULT,path:e};return c(t,f,l)}return a}})},{"../../features/topic-control":133,"../../topics/topics":468,"client/command-service":146,"control/control-group":166,"control/registration":167,"events/emitter":206,"events/result":207,"features/topic-control/universal-updater":223,"features/topic-control/value-cache":224,"features/update-response-handler":233,"metadata/util":245,"services/services":358,"services/wills/topic-will-parameters":411,"services/wills/will-registration-result":413,"topics/details/topic-details":424,"topics/topic-selector-parser":436,"update/update":444,"util/interface":448,"util/logger":449}],223:[function(t,e,n){var r=t("services/services"),i=t("data/datatypes"),o=t("../../../topics/topics").UpdateFailReason;e.exports=function(t){var e=t.getServiceLocator().obtain(r.UPDATE_TOPIC_SET);this.update=function(t,n,r){var s=i.get(n);if(s){var a=s.from(n);e.send({path:t,bytes:function(t){return t.$buffer.slice(t.$offset,t.$length)}(a)},r)}else r(o.INCOMPATIBLE_UPDATE)}}},{"../../../topics/topics":468,"data/datatypes":177,"services/services":358}],224:[function(t,e,n){var r=t("topics/topic-path-utils").canonicalise;e.exports=function(){var t={};this.get=function(e){return t[r(e)]},this.put=function(e,n){t[r(e)]=n},this.remove=function(e){for(var n in t)e.selects(n)&&delete t[n]}}},{"topics/topic-path-utils":435}],225:[function(t,e,n){var r=t("util/interface")._implements,i=t("services/services"),o=t("events/emitter"),s=t("events/result"),a=t("client/command-service"),u=t("control/registration"),c=t("../../features/topic-notifications"),l=t("util/logger").create("Session.Notifications"),f=t("topics/topic-selector-parser"),d=t("../../selectors/topic-selector");e.exports=r(c.TopicNotifications,function(t){var e=t.getServiceLocator(),n=t.getConversationSet(),r=e.obtain(i.TOPIC_NOTIFICATION_SELECTION),h=e.obtain(i.TOPIC_NOTIFICATION_DESELECTION),p=e.obtain(i.TOPIC_NOTIFICATION_DEREGISTRATION),v=t.getServiceRegistry();this.TopicNotificationType=c.TopicNotificationType;var g=a.create(function(t,e,n){n.respond(),t.getConversationSet().respond(e.cid,e)});v.add(i.TOPIC_NOTIFICATION_EVENTS,g),v.add(i.TOPIC_DESCENDANT_EVENTS,g),this.addListener=function(e){var i=new o,a=new s(i);if(!e)return i.error(new Error("Topic Notification Listener is null or undefined")),a;if(t.checkConnected(i)){l.debug("Adding Topic Notification Listener");var c={active:function(t,a){l.debug("Topic Notification Listener active");var u={select:function(t){var e,i=new o,u=new s(i);if(!t)return i.error(new Error("No topic selector provided")),u;if("string"==typeof t)try{e=f(t)}catch(t){return i.error(t),u}else{if(!(t instanceof d))return i.error(new Error("Invalid topic selector")),u;e=t}return r.send({cid:a,selector:e},function(t){t?(n.discard(a,t),i.error(t)):i.emit("complete")}),u},deselect:function(t){var e,r=new o,i=new s(r);if(!t)return r.error(new Error("No topic selector provided")),i;if("string"==typeof t)try{e=f(t)}catch(t){return r.error(t),i}else{if(!(t instanceof d))return r.error(new Error("Invalid topic selector")),i;e=t}return h.send({cid:a,selector:e},function(t){t?(n.discard(a,t),r.error(t)):r.emit("complete")}),i},close:function(){p.send({cid:a},function(t,r){t?(n.discard(a,t),l.debug("Error with topic notification deregistration: ",t)):(e.onClose(),n.respondIfPresent(a,r))})}};i.emit("complete",u)},respond:function(t){t.isDescendantEvent?e.onDescendantNotification(t.path,t.type):e.onTopicNotification(t.path,t.specification,t.type)},close:function(t){l.debug("Topic Notification Listener closed"),t?e.onError(t):e.onClose()}},v=n.newConversation(u.responseHandler(t,c,p.send));u.registrationCallback(n,v,{emit:function(){}})()}return a}})},{"../../features/topic-notifications":134,"../../selectors/topic-selector":464,"client/command-service":146,"control/registration":167,"events/emitter":206,"events/result":207,"services/services":358,"topics/topic-selector-parser":436,"util/interface":448,"util/logger":449}],226:[function(t,e,n){var r=t("util/interface")._implements,i=t("events/emitter"),o=t("events/result"),s=t("features/topics/view"),a=t("services/services"),u=t("topics/topic-selector-parser"),c=t("features/topics/subscription-proxy"),l=t("features/topics/fetch-stream"),f=t("../../features/topics"),d=t("client/close-reason"),h=t("util/require-non-null"),p=t("util/logger").create("Session");e.exports=r(f,function(t){var e=t.getServiceLocator().obtain(a.UNSUBSCRIBE),n=t.getServiceLocator().obtain(a.SUBSCRIBE),r=t.getServiceLocator().obtain(a.FETCH),f=t.getStreamRegistry();this.subscribe=function(e,r){p.debug("Subscribing",e);var i=u(e),o=new c(f,i,!1,r);return t.checkConnected(o.emitter)&&n.send(i,function(t){t&&o.onSubscriptionError(t)}),o.subscription},this.unsubscribe=function(n){var r,s=new i,a=new o(s);try{r=u(n)}catch(t){return s.error(t),a}if(t.checkConnected(s)){p.debug("Unsubscribing",n),e.send(r,function(t){t?(p.debug("Unsubscribe failed",n),s.error(t)):(p.debug("Unsubscribe complete",n),s.emit("complete"))})}return a},this.stream=function(t,e){p.debug("Establishing topic stream",t);var n=!1,r="";t&&"function"!=typeof t?r=u(t):(e=t,n=!0);return new c(f,r,n,e).subscription},this.fetch=function(e){p.debug("Fetch request for: ",e),h(e,"Selector"),e=u(e);var n=new i,o=new l(n);if(t.checkConnected(n)){var s=t.getConversationSet().newConversation({onOpen:function(){n.emit("open")},onResponse:function(t,e){var r=e.data,i=e.topic;return i?(n.emit("value",r,i),!1):1===r.length&&1===r[0]?(n.close(),!0):(n.error(new Error("Unexpected end of fetch stream")),!0)},onDiscard:function(t,e){e instanceof d?n.close():n.error(e)}});r.send({cid:s,selector:e},function(t){t&&n.error(t)})}return o},this.view=function(t,e){var n=this.subscribe(t);return new s(n,e)}})},{"../../features/topics":135,"client/close-reason":145,"events/emitter":206,"events/result":207,"features/topics/fetch-stream":227,"features/topics/subscription-proxy":228,"features/topics/view":232,"services/services":358,"topics/topic-selector-parser":436,"util/interface":448,"util/logger":449,"util/require-non-null":455}],227:[function(t,e,n){var r=t("util/interface")._implements,i=t("../../../events/fetch-stream");e.exports=r(i,function(t){t.assign(this)})},{"../../../events/fetch-stream":121,"util/interface":448}],228:[function(t,e,n){var r=t("features/topics/subscription"),i=t("events/emitter");e.exports=function(t,e,n,o){var s=new i,a=s.get(),u=this,c=new r(t,a,n,e),l=!0;a.on("close",function(){t.remove(u)}),this.subscription=c,this.emitter=s,this.selects=function(){return!0},this.onOpen=function(){s.emit("open",c)},this.onDelta=function(t,e,n,r){s.emit("update",r,t)},this.onValue=function(t,e,n,r){s.emit("update",r,t)},this.onSubscription=function(t,e){s.emit("subscribe",e,t)},this.onUnsubscription=function(t,e,n,r){s.emit("unsubscribe",r,t)},this.onSubscriptionError=function(e){s.error(e),t.remove(u)},o?(c.on("update",o),n?t.addFallback(u):t.add(e,u)):c.on=function(r,i){return l&&(n?t.addFallback(u):t.add(e,u),l=!1),a.on.call(c,r,i)}}},{"events/emitter":206,"features/topics/subscription":229}],229:[function(t,e,n){var r=t("util/interface")._implements,i=t("../../../events/subscription"),o=t("features/topics/value-stream-proxy"),s=t("features/topics/view"),a=t("events/emitter"),u=t("metadata/util");e.exports=r(i,function t(e,n,r,i){for(var c in n)this[c]=n[c];this.selector=i;var l=this;this.view=function(){return new s(l)},this.asType=function(t,n){var s=new o(e,i,t,r,n);return l.on("error",function(t){s.onSubscriptionError(t)}),s.subscription},this.transform=function(n){var r=new a;return n=u.isMetadata(n)?n.parse.bind(n):n,l.on("open",function(t){r.emit("open",t,l)}),l.on("close",function(){r.emit("close")}),l.on("update",function(t,e){r.emit("update",n(t),e)}),l.on("subscribe",function(t){r.emit("subscribe",t)}),l.on("unsubscribe",function(t,e){r.emit("unsubscribe",t,e)}),l.on("error",function(t){r.error(t)}),new t(e,r.get(),i)}})},{"../../../events/subscription":124,"events/emitter":206,"features/topics/value-stream-proxy":230,"features/topics/view":232,"metadata/util":245,"util/interface":448}],230:[function(t,e,n){var r=t("features/topics/value-stream"),i=t("data/datatypes"),o=t("../../../topics/topics").TopicType,s=t("events/emitter");e.exports=function(t,e,n,a,u){var c=new s,l=c.get(),f=this,d=new r(t,l,e),h=!0;l.on("close",function(){t.remove(f)}),this.subscription=d,this.emitter=c,this.selects=function(t){if(t){if(t.type===o.TIME_SERIES){var e=i.get(t.properties.TIME_SERIES_EVENT_VALUE_TYPE);return e&&e.canReadAs(n.valueClass)}return t.type===o[n.name().toUpperCase()]}return!1},this.onOpen=function(){c.emit("open",d)},this.onDelta=function(t,e,n,r,i,o,s){c.emit("value",t,n,s,o)},this.onValue=function(t,e,n,r,i,o){c.emit("value",t,n,o,i)},this.onSubscription=function(t,e,n){c.emit("subscribe",t,n)},this.onUnsubscription=function(t,e,n,r){c.emit("unsubscribe",t,n,r)},this.onSubscriptionError=function(e){c.error(e),t.remove(f)},u?(d.on("value",u),a?t.addFallback(f):t.add(e,f)):d.on=function(n,r){return h&&(a?t.addFallback(f):t.add(e,f),h=!1),l.on.call(d,n,r)}}},{"../../../topics/topics":468,"data/datatypes":177,"events/emitter":206,"features/topics/value-stream":231}],231:[function(t,e,n){var r=t("util/interface")._implements,i=t("../../../events/value-stream");e.exports=r(i,function(t,e,n){for(var r in e)this[r]=e[r];this.selector=n})},{"../../../events/value-stream":125,"util/interface":448}],232:[function(t,e,n){var r=t("util/interface")._implements,i=t("events/emitter"),o=t("../../../events/view");e.exports=r(o,function(t){var e=i.assign(this),n={};t.on("update",function(t,r){for(var i=r.split("/"),o=n,s=0;s<i.length-1;s++)void 0===o[i[s]]&&(o[i[s]]={}),o=o[i[s]];o[i[s]]=t,e.emit("update",n)}),t.on("unsubscribe",function(t,r){if(2===t.id){for(var i=r.split("/"),o=n,s=0;s<i.length-1&&void 0!==o[i[s]];s++)o=o[i[s]];delete o[i[s]],e.emit("update",n)}}),t.on("close",e.close),this.get=function(){return n}})},{"../../../events/view":126,"events/emitter":206,"util/interface":448}],233:[function(t,e,n){function r(t){return t.$buffer.slice(t.$offset,t.$length)}function i(t,e){var n=o("?"+s(e)+"//");t.remove(n)}var o=t("topics/topic-selector-parser"),s=t("topics/topic-path-utils").canonicalise,a=t("services/services"),u=t("data/datatypes"),c=t("events/emitter"),l=t("events/result"),f=t("update/update"),d=t("../../topics/topics").UpdateFailReason,h=t("client/close-reason"),p=t("metadata/util");e.exports=function(t,e,n,o){var s,v,g=t.getServiceLocator().obtain(a.UPDATE_SOURCE_DEREGISTRATION),m=t.getServiceLocator().obtain(a.UPDATE_SOURCE_UPDATE),y=t.getServiceLocator().obtain(a.UPDATE_SOURCE_DELTA),b=t.getServiceLocator().obtain(a.UPDATE_SOURCE_SET),w=function(n,i,o,s){var a=function(t,e){t?n.error(t):e.error?n.error(new Error("Topic update error for topic "+o+" : "+e.error)):n.emit("complete")};if(t.checkConnected(n))if(p.isMetadataValue(s))m.send({cid:i,path:o,update:new f.Update(s)},a);else{var c=u.get(s);if(!c)return void n.error(d.INCOMPATIBLE_UPDATE);var l=c.from(s),h=e.get(o);if(h){var v=c.deltaType("binary"),g=v.diff(h,l);if(g===v.noChange())return void a(null,{});y.send({id:0,cid:i,path:o,bytes:r(g)},a)}else b.send({cid:i,path:o,bytes:r(l)},a);e.put(o,l)}},x="init";return{onOpen:function(e){s=function(){var n=new c,r=new l(n);return g.send({cid:e},function(r){r?(t.getConversationSet().discard(e,r),n.error(r)):(t.getConversationSet().respond(e,{old:x,current:"closed"}),n.emit("complete"))}),r}},onResponse:function(r,a){if(a.old!==x)return t.getConversationSet().discard(r,new Error("Inconsistent server/client update source state. Current: "+x+", expected: "+a.old)),!1;switch("init"===x&&"closed"!==a.current&&o.onRegister(n,s),v&&(v.isClosed=!0),x=a.current){case"active":return v=new function(t,e){var n=this;this.isClosed=!1,this.update=function(r,i){var o=new c,s=new l(o);return n.isClosed?o.error(new Error("Updater is closed")):r?void 0===i||null===i?o.error(new Error("Update cannot be null")):e(o,t,r,i):o.error(new Error("Topic can not be null or empty")),s}}(r,w),i(e,n),o.onActive(n,v),!1;case"standby":return o.onStandBy(n),!1;default:return i(e,n),o.onClose(n),!0}},onDiscard:function(t,r){x="closed",v&&(v.isClosed=!0),i(e,n),r instanceof h?o.onClose(n):o.onClose(n,r)}}}},{"../../topics/topics":468,"client/close-reason":145,"data/datatypes":177,"events/emitter":206,"events/result":207,"metadata/util":245,"services/services":358,"topics/topic-path-utils":435,"topics/topic-selector-parser":436,"update/update":444}],234:[function(t,e,n){function r(t){if(null===t||void 0===t)throw new Error("Undefined buffer for InputStream");this.buffer=t,this.count=t.length,this.mark=0,this.pos=0}var i=t("long");r.prototype.read=function(){return this.pos<this.count?255&this.buffer[this.pos++]:-1},r.prototype.readMany=function(t){if((t=Math.min(t,this.count-this.pos))<0)throw new Error("Length out of bounds");var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e},r.prototype.readUntil=function(t){for(var e=this.count,n=this.pos;n<this.count;n++)if(this.buffer[n]===t){e=n;break}var r=this.buffer.slice(this.pos,e);return e===this.count?this.pos=e:this.pos=e+1,r},r.prototype.readInt8=function(){return this.buffer.readInt8(this.pos++)},r.prototype.readInt32=function(){var t=this.buffer.readInt32BE(this.pos);return this.pos+=4,t},r.prototype.readInt64=function(){var t=this.buffer.readInt32BE(this.pos);this.pos+=4;var e=this.buffer.readInt32BE(this.pos);return this.pos+=4,i.fromBits(e,t,!1)},r.prototype.readUInt64=function(){var t=this.buffer.readInt32BE(this.pos);this.pos+=4;var e=this.buffer.readInt32BE(this.pos);return this.pos+=4,i.fromBits(e,t,!0)},r.prototype.hasRemaining=function(){return this.pos<this.buffer.length},e.exports=r},{long:476}],235:[function(t,e,n){(function(t){function n(e,n){n-e.buffer.length>0&&function(e,n){var r=e.buffer.length<<1;r-n<0&&(r=n);try{var i=new t(r);e.buffer.copy(i),e.buffer=i}catch(t){throw new Error("Unable to resize BufferOutputStream to "+r)}}(e,n)}function r(e){t.isBuffer(e)?(this.buffer=e,this.count=e.length):(this.buffer=new t(e||32),this.count=0)}r.prototype.write=function(t){n(this,this.count+1),this.buffer[this.count++]=t},r.prototype.writeMany=function(t,e,r){0!==r&&(e=e||0,r=r||t.length,n(this,this.count+r),t.copy(this.buffer,this.count,e,e+r),this.count+=r)},r.prototype.writeString=function(e){var r=t.byteLength(e);n(this,this.count+r),this.buffer.write(e,this.count,r),this.count+=r},r.prototype.writeInt8=function(t){n(this,this.count+1),this.buffer.writeInt8(t,this.count++)},r.prototype.writeInt32=function(t){n(this,this.count+4),this.buffer.writeInt32BE(t,this.count),this.count+=4},r.prototype.writeInt64=function(t){n(this,this.count+8),this.buffer.writeInt32BE(t.getHighBits(),this.count),this.buffer.writeInt32BE(t.getLowBits(),this.count+4),this.count+=8},r.prototype.getBuffer=function(){return this.buffer.slice(0,this.count)},r.prototype.getBase64=function(){return this.getBuffer().toString("base64")},e.exports=r}).call(this,t("buffer").Buffer)},{buffer:94}],236:[function(t,e,n){(function(n){var r=t("long"),i=r.fromNumber(128),o=r.fromNumber(127),s=o.not(),a=function(t){var e=t.read();if(-1===e)throw new Error("End of stream");return e},u={};u.readInt64=function(t){for(var e=r.fromNumber(0),n=0;n<64;){var s=a(t),u=r.fromNumber(s);if(e=e.or(u.and(o).shiftLeft(n)),u.and(i).equals(0))return e;n+=7}throw"Malformed int64"},u.writeInt64=function(t,e){for(var n=e instanceof r?e:r.fromNumber(e,!1);;){if(n.and(s).equals(0))return void t.write(n.toInt());t.write(n.and(o).or(i).toInt()),n=n.shiftRightUnsigned(7)}},u.readInt32=function(t){for(var e=0,n=0;e<32;){var r=a(t);if(n|=(127&r)<<e,0==(128&r))return n;e+=7}throw"Malformed int32"},u.writeInt32=function(t,e){for(;;){if(0==(-128&e))return void t.write(e);t.write(127&e|128),e>>>=7}},u.writeByte=function(t,e){t.writeInt8(e),0!=(-128&e)&&t.write(1)},u.readByte=function(t){var e=t.readInt8();if(0==(-128&e))return e;if(1!==a(t))throw"Malformed byte";return 128|e},u.readBytes=function(t){var e=u.readInt32(t);return t.readMany(e)},u.writeBytes=function(t,e){u.writeInt32(t,e.length),t.writeMany(e)},u.readString=function(t){var e=u.readBytes(t);return e?e.toString("utf8"):""},u.writeString=function(t,e){u.writeBytes(t,new n(e,"utf8"))},u.writeCollection=function(t,e,n){u.writeInt32(t,e.length);for(var r=0;r<e.length;++r)n(t,e[r])},u.readCollection=function(t,e){for(var n=u.readInt32(t),r=[],i=0;i<n;++i)r.push(e(t));return r},u.readDictionary=function(t,e){return u.readMap(t,u.readString,e)},u.writeDictionary=function(t,e,n){u.writeMap(t,e,u.writeString,n)},u.writeMap=function(t,e,n,r){u.writeInt32(t,Object.keys(e).length);for(var i in e)n(t,i),r(t,e[i])},u.readMap=function(t,e,n){for(var r=u.readInt32(t),i={},o=0;o<r;++o){i[e(t)]=n(t)}return i},u.readBoolean=function(t){return 0!==t.readInt8()},u.writeBoolean=function(t,e){e?t.writeInt8(1):t.writeInt8(0)},e.exports=u}).call(this,t("buffer").Buffer)},{buffer:94,long:476}],237:[function(t,e,n){function r(t){return t>>c}function i(t,e){return t&e-1}var o=t("util/math").findNextPowerOfTwo,s=t("util/function").curryR,a=t("util/array").ofSize,u=t("util/array").fill,c=10;e.exports=function(t,e){function n(t){var e,n=f(y-b);n<t?(u(h,null,n,t),e=b-t+n):n>t?(u(h,null,n,c),u(h,null,0,t),e=b-n+t):(u(h,null),e=0),b=e}var c=o(t),l=o(e),f=s(i,c),d=s(i,l),h=a(c),p=a(l,-1),v=a(l),g=0,m=0,y=f(0),b=0;this.size=function(){return b},this.put=function(t){if(h[y]=t,y=f(y+1),b<c)b+=1;else for(;p[g]===y;)p[g]=-1,g=d(g+1)},this.recover=function(t,e){if(t<0||t>b)return!1;for(var n=t;n>=1;--n)e(h[f(y-n)]);return!0},this.clear=function(){u(h,null),u(p,-1),g=0,m=0,b=0},this.markTime=function(t){if(b>0){var e=g,i=m,o=p[e],s=r(t);if(o>=0){var a=d(i-1);if(p[a]===y)return;if(v[a]===s)return void(p[a]=y)}m=d(i+1),v[i]=s,p[i]=y,e===i&&o>=0&&(n(o),g=m)}},this.flush=function(t){if(!(0===b||p[g]<0)){var e=m,i=r(t);do{var o=e;if(e=d(e-1),v[e]<=i)return n(p[e]),g<=o?u(p,-1,g,o):(u(p,-1,g,l),u(p,-1,0,o)),void(g=o)}while(e!==g)}}}},{"util/array":445,"util/function":447,"util/math":450}],238:[function(t,e,n){e.exports=function(t,e){var n=this;if(void 0!==t&&"number"!=typeof t)throw new Error("Decimal metadata must be given a numeric default value");if(void 0!==e&&"number"!=typeof e)throw new Error("Decimal metadata must be given a numeric scale");if(this.value=t||0,void 0===e){var r=this.value+"",i=r.indexOf(".");this.scale=i>-1?r.length-(i+1):2}else this.scale=e;this.getDetails=function(){return{type:"decimalString",name:"decimalString",default:n.value,scale:n.scale}},this.parse=function(t){var e=t.toString(),n=e.indexOf(".");return+e.substr(0,n+this.scale+1)}}},{}],239:[function(t,e,n){e.exports=function(t){var e=this;if(void 0!==t&&"number"!=typeof t)throw new Error("Integer metadata must be given a numeric default value");this.value=parseInt(t,10)||0,this.getDetails=function(){return{type:"integerString",name:"integerString",default:e.value}},this.parse=function(t){return parseInt(t.toString(),10)}}},{}],240:[function(t,e,n){var r=t("./record-content"),i=t("./stateless"),o=t("./decimal"),s=t("./integer"),a=t("./string");e.exports={RecordContent:r,Stateless:i,Decimal:o,Integer:s,String:a}},{"./decimal":238,"./integer":239,"./record-content":241,"./stateless":242,"./string":243}],241:[function(t,e,n){function r(t,e){var n=1,r=1;if(void 0!==t){if("string"==typeof t){var i=t.indexOf(".");if(-1!==i){var o=t.lastIndexOf(".");n=t.substring(0,i),"*"===(r=t.substring(o+1))&&(r=-1)}else n=t,r=t}else"number"==typeof t?(n=t,r=void 0!==e&&"number"==typeof e?e:t):void 0!==t.min&&(n=t.min,r=t.max);void 0===r&&(r=n),n=parseInt(n,10),r=parseInt(r,10)}return{min:n,max:r,toString:function(){var t=this.min,e=this.max>-1?this.max:"*";return t===e?""+t:t+".."+e}}}var i=t("util/interface")._implements,o=t("../../metadata/metadata"),s=t("content/structured-record-content/parser"),a=t("content/structured-record-content/builder"),u=t("./decimal"),c=t("./integer"),l=t("./string"),f=t("./util-single-value"),d=0,h=i(o.RecordContent.Field,function(t,e,n){if(this.name=t,this.occurs=n,e){var r=f.deriveMetadata(e);if(f.getType(r)!==f.Type.SINGLE_VALUE)throw new Error("Record fields can only have single values (string, integer or decimal)");this.type=r}else this.type=new l;this.getDetails=function(){var e=this.type.getDetails();return e.name=t,e.multiplicity=n.toString(),e}}),p=i(o.RecordContent.Record,function(t,e){var n={},i=[];this.name=t,this.occurs=e,this.getField=function(t){switch(typeof t){case"string":return n[t];case"number":return n[i[t]]}},this.getFields=function(){return i.map(function(t){return n[t]})},this.addField=function(t,e,o){if(n[t])throw new Error("Field metadata already exists for: "+t);var s=n[i[i.length-1]];if(s&&s.occurs.min!==s.occurs.max)throw new Error("Fields cannot be added after a repeating field");var a=new h(t,e,r(o));return n[t]=a,i.push(t),a},this.getDetails=function(){return{name:t,multiplicity:e.toString()}}}),v=i(o.RecordContent,function(t){var e=new s(this),n=this,i={},o=[];t=t||"MRecordData"+d++,this.addRecord=function(t,e,n){if(i[t])throw new Error("Record metadata already exists for: "+t);var s=i[o[o.length-1]];if(s&&s.occurs.min!==s.occurs.max)throw new Error("Records cannot be added after a repeating record");var a=new p(t,r(e));if(i[t]=a,o.push(t),void 0!==n)for(var u in n)a.addField(u,n[u]);return a},this.getRecord=function(t){switch(typeof t){case"string":return i[t];case"number":return i[o[t]]}},this.getRecords=function(){return o.map(function(t){return i[t]})},this.occurs=r,this.name=t,this.string=function(t){return new l(t)},this.integer=function(t){return new c(t)},this.decimal=function(t,e){return new u(t,e)},this.getDetails=function(){return{name:t}},this.builder=function(){return new a(n)},this.parse=function(t){return e.parse(t)}});e.exports=v},{"../../metadata/metadata":136,"./decimal":238,"./integer":239,"./string":243,"./util-single-value":244,"content/structured-record-content/builder":161,"content/structured-record-content/parser":162,"util/interface":448}],242:[function(t,e,n){var r={type:"stateless",name:"stateless"};e.exports=function(){this.getDetails=function(){return r},this.parse=function(t){return t}}},{}],243:[function(t,e,n){e.exports=function(t){var e=this;this.value=void 0===t?"":""+t,this.getDetails=function(){return{type:"string",name:"string",default:e.value}},this.parse=function(t){return t.toString()}}},{}],244:[function(t,e,n){function r(t){return t instanceof i||t instanceof o||t instanceof s||t instanceof a}var i=t("./stateless"),o=t("./decimal"),s=t("./integer"),a=t("./string"),u=t("../../topics/topics").TopicType;e.exports={Type:u,getType:function(t){if(t instanceof o||t instanceof s||t instanceof a)return u.SINGLE_VALUE;if(t instanceof i)return u.STATELESS;throw new Error("Unknown metadata type")},isMetadata:r,isMetadataValue:function(t){return r(t)},deriveMetadata:function(t){return void 0===t?new i:r(t)?t:function(t){switch(typeof t){case"string":return new a(t);case"number":var e=""+t,n=e.indexOf(".");return n>-1?new o(t,e.length-(n+1)):new s(t)}throw new Error("Invalid Single Value type",t)}(t)}}},{"../../topics/topics":468,"./decimal":238,"./integer":239,"./stateless":242,"./string":243}],245:[function(t,e,n){function r(t){return a.isPrototypeOf(t)||s.isMetadata(t)}var i=t("../../topics/topics").TopicType,o=t("content/util"),s=t("./util-single-value"),a=t("./record-content");e.exports={Type:i,getType:function(t){return a.isPrototypeOf(t)?i.RECORD:s.getType(t)},isMetadata:r,isMetadataValue:function(t){return a.isPrototypeOf(t)||s.isMetadataValue(t)||o.isRecordContent(t)},deriveMetadata:function(t){return r(t)?t:s.deriveMetadata(t)}}},{"../../topics/topics":468,"./record-content":241,"./util-single-value":244,"content/util":164}],246:[function(t,e,n){function r(){return{type:i.TYPE,version:i.CURRENT_VERSION,capabilities:i.CAPABILITIES}}var i=t("protocol/consts");e.exports={connect:r,reconnect:function(t,e,n){var i=r();return i.token=t,i.availableClientSequence=e,i.lastServerSequence=n,i}}},{"protocol/consts":248}],247:[function(t,e,n){var r=t("io/buffer-input-stream"),i=t("serialisers/byte-encoded-enum-serialiser"),o=t("session/session-id"),s=t("session/session-token-deserialiser"),a=t("protocol/response-code"),u=t("protocol/consts");e.exports=function(t){var e=new r(t),n=e.read();if(n!==u.PROTOCOL_BYTE)throw new Error("Unrecognised protocol byte: "+n);var c=e.read();if(c<u.CURRENT_VERSION)throw new Error("Unrecognised protocol version: "+c);if(c>u.CURRENT_VERSION)throw new Error("Unsupported protocol version: "+c);var l=i.read(e,a);if(a.isSuccess(l)){var f=new o(e.readUInt64(),e.readUInt64()),d=s(e),h=e.readInt64(),p=0;return l===a.RECONNECTED&&(p=e.readInt32()),{response:l,identity:f,token:d,systemPingPeriod:h,version:c,success:!0,sequence:p}}return{response:l,version:c,identity:null,token:null,systemPingPeriod:null,success:!1,sequence:0}}},{"io/buffer-input-stream":234,"protocol/consts":248,"protocol/response-code":249,"serialisers/byte-encoded-enum-serialiser":263,"session/session-id":415,"session/session-token-deserialiser":417}],248:[function(t,e,n){e.exports={TYPE:"WB",CAPABILITIES:10,PROTOCOL_BYTE:35,CURRENT_VERSION:12}},{}],249:[function(t,e,n){function r(t,e){return{id:t,message:e}}var i={OK:r(100,"Connected successfully"),DOWNGRADE:r(102,"Server does not support the requested protocol level"),RECONNECTED:r(105,"Reconnected successfully"),RECONNECTED_WITH_MESSAGE_LOSS:r(106,"Reconnected with message loss"),REJECTED:r(111,"Connection rejected"),CONNECTION_UNSUPPORTED:r(112,"Connection type not supported by connector"),LICENSE_EXCEEDED:r(113,"Connection rejected due to license limit"),RECONNECTION_UNSUPPORTED:r(114,"Reconnection not supported by connector"),CONNECTION_PROTOCOL_ERROR:r(115,"Connection failed - protocol error"),AUTHENTICATION_FAILED:r(116,"Connection failed - authentication failed"),UNKNOWN_SESSION:r(117,"Reconnection failed - the session is unknown"),RECONNECTION_FAILED_MESSAGE_LOSS:r(118,"Reconnection failed due to message loss"),ERROR:r(127,"Connection failed due to server error")};i.isSuccess=function(t){switch(t){case i.OK:case i.RECONNECTED:case i.RECONNECTED_WITH_MESSAGE_LOSS:return!0;default:return!1}},e.exports=i},{}],250:[function(t,e,n){var r=t("hashmap"),i=t("util/array");e.exports=function(t){var e=new r,n=[],o=this;this.add=function(n,r){var i=e.get(n);i?i.push(r):e.set(n,[r]),t.newStream(n,r,o),r.onOpen()},this.addFallback=function(t){n.push(t)},this.getFallbacks=function(t){return n.filter(function(e){return e.selects(t)})},this.remove=function(r){i.remove(n,r),e.forEach(function(n,s){i.remove(n,r)&&t.removeStream(r,o),0===n.length&&e.remove(s)})},this.streamsFor=function(t,n){var r=[];return e.count()>0&&e.forEach(function(e,i){i.selects(t)&&(r=r.concat(e.filter(function(t){return t.selects(n)})))}),r}}},{hashmap:470,"util/array":445}],251:[function(t,e,n){var r=t("routing/topic-cache-entry");e.exports=function(t,e,n,i,o){r.call(this,t,e,n,i);var s,a;this.handleValue=function(t,e,n){var r=s;try{s=o.readValue(t),a=t,this.notifyValue(t,r,s,e)}catch(t){n(t)}},this.handleDelta=function(t,e,n){var r,i=s;try{var u=(r=o.deltaType("binary")).readDelta(t);s=r.apply(i,u),a=o.writeValue(s),this.notifyDelta(t,u,i,s,e)}catch(t){n(t)}},this.notifyValueToNewStream=function(t,e,n,r){a&&r.onValue(t,e,n,a,null,s)}}},{"routing/topic-cache-entry":252}],252:[function(t,e,n){var r=t("../../topics/topics").UnsubscribeReason,i=t("util/array");e.exports=function(t,e,n,o){function s(e,n){var r=t;return 0===r.length&&(r=n.getFallbacks(e)),r}var a=this;this.getTopicPath=function(){return e},this.getTopicDetails=function(){return n},this.getTopicSpecification=function(){return o},this.notifyInitialSubscription=function(t){s(o,t).forEach(function(t){t.onSubscription(e,n,o)})},this.notifySubscription=function(t){t.onSubscription(e,n,o),a.notifyValueToNewStream(e,n,o,t)},this.notifyUnsubscription=function(t,r){s(o,r).forEach(function(r){r.onUnsubscription(e,n,o,t)})},this.notifyValue=function(t,r,i,a){s(o,a).forEach(function(s){s.onValue(e,n,o,t,r,i)})},this.notifyDelta=function(t,r,i,a,u){s(o,u).forEach(function(s){s.onDelta(e,n,o,t,r,i,a)})},this.addStream=function(i,s){0===t.length&&s.getFallbacks(o).forEach(function(t){t.onUnsubscription(e,n,o,r.STREAM_CHANGE)}),t.indexOf(i)<0&&(t.push(i),a.notifySubscription(i))},this.removeStream=function(e,n){i.remove(t,e),0===t.length&&n.getFallbacks(o).forEach(function(t){a.notifySubscription(t)})},this.removeAllStreams=function(){t.length=0}}},{"../../topics/topics":468,"util/array":445}],253:[function(t,e,n){var r=t("routing/topic-cache-entry");e.exports=function(t,e,n,i){r.call(this,t,e,n,i),this.handleValue=function(t,e){this.notifyValue(t,null,t,e)},this.handleDelta=function(t,e){this.notifyDelta(t,null,null,t,e)},this.notifyValueToNewStream=function(){}}},{"routing/topic-cache-entry":252}],254:[function(t,e,n){var r=t("routing/topic-cache-entry");e.exports=function(t,e,n,i){r.call(this,t,e,n,i);var o;this.handleValue=function(t,e){this.notifyValue(t,o,t,e),o=t},this.handleDelta=function(t,e){this.notifyDelta(t,null,o,t,e),o=t},this.notifyValueToNewStream=function(t,e,n,r){o&&r.onValue(t,e,n,o,null,o)}}},{"routing/topic-cache-entry":252}],255:[function(t,e,n){var r=t("timeseries/time-series-event-datatype"),i=t("routing/topic-cache-datatype-entry");e.exports=function(t,e,n,o,s){i.call(this,t,e,n,o,r.create(s))}},{"routing/topic-cache-datatype-entry":251,"timeseries/time-series-event-datatype":419}],256:[function(t,e,n){var r=t("routing/topic-cache-time-series-entry"),i=t("routing/topic-cache-no-value-entry"),o=t("routing/topic-cache-datatype-entry"),s=t("routing/topic-cache-single-value-entry"),a=t("../../topics/topics").UnsubscribeReason,u=t("../../topics/topics").TopicType,c=t("topics/details/topic-details");e.exports=function(t){var e={},n={};this.handleSubscription=function(a,l){var f,d=a.path,h=l.streamsFor(d,a.specification),p=c.detailsFromSpecification(a.specification);switch(a.specification.type){case u.JSON:case u.BINARY:case u.STRING:case u.DOUBLE:case u.INT64:case u.RECORD_V2:var v=t.get(a.specification.type);f=new o(h,d,p,a.specification,v);break;case u.TIME_SERIES:var g=t.get(a.specification.properties.TIME_SERIES_EVENT_VALUE_TYPE);f=new r(h,d,p,a.specification,g);break;case u.SINGLE_VALUE:f=new s(h,d,p,a.specification);break;default:f=new i(h,d,p,a.specification)}var m=e[d];if(e[d]=f,m)throw new Error("Existing cache entry for "+d);var y=n[a.id];if(n[a.id]=f,y)throw new Error("Existing cache entry for "+a.id);f.notifyInitialSubscription(l)},this.notifyUnsubscriptionOfAllTopics=function(t){for(var r in n)n[r].notifyUnsubscription(a.SUBSCRIPTION_REFRESH,t);e={},n={}},this.handleValue=function(t,e,r,i){var o=t.getErrorHandler(),s=n[e];s?s.handleValue(r,i,o):o(new Error("Data loss on topic with ID: "+e+" - possibly due to reconnection"))},this.handleDelta=function(t,e,r,i){var o=t.getErrorHandler(),s=n[e];s?s.handleDelta(r,i,o):o(new Error("Data loss on topic with ID: "+e+" - possibly due to reconnection"))},this.handleUnsubscription=function(t,r,i){var o=n[t];if(delete n[t],o){var s=o.getTopicPath();delete e[s],o.notifyUnsubscription(r,i)}},this.newStream=function(t,n,r){for(var i in e){var o=e[i];t.selects(i)&&n.selects(o.getTopicSpecification())&&o.addStream(n,r)}},this.removeStream=function(t,n){for(var r in e)e[r].removeStream(t,n)},this.removeAllStreams=function(){for(var t in e)e[t].removeAllStreams()},this.clear=function(){e={},n={}}}},{"../../topics/topics":468,"routing/topic-cache-datatype-entry":251,"routing/topic-cache-no-value-entry":253,"routing/topic-cache-single-value-entry":254,"routing/topic-cache-time-series-entry":255,"topics/details/topic-details":424}],257:[function(t,e,n){var r=t("v4-stack/headers-tunnel"),i=t("v4-stack/message"),o=t("util/logger").create("V4 Client Routing");e.exports=function(t,e,n,s,a){this.route=function(u){switch(u.type){case i.types.FETCH_REPLY:var c=r.cidFromHeaders(u.headers);n.respondIfPresent(c,u);break;case i.types.SERVICE_REQUEST:case i.types.SERVICE_RESPONSE:case i.types.SERVICE_ERROR:e.onMessage(u.type,u.getInputStream());break;case i.types.TOPIC_VALUE:s.handleValue(t,u.id,u.data,a);break;case i.types.TOPIC_DELTA:s.handleDelta(t,u.id,u.data,a);break;default:o.debug("Unhandled V4 message: "+u.type,u)}},this.subscribe=function(t){s.handleSubscription(t,a)},this.unsubscribe=function(t,e){s.handleUnsubscription(t,e,a)}}},{"util/logger":449,"v4-stack/headers-tunnel":461,"v4-stack/message":462}],258:[function(t,e,n){e.exports={ATTR:"$",CHAR:"_"}},{}],259:[function(t,e,n){function r(t){var e={field:{}};return e.field[o]=t.getDetails(),e}var i=t("metadata/util"),o=t("schema/consts").ATTR;e.exports=function(t){if(!t)return null;switch(i.getType(t)){case i.Type.RECORD:return function(t){if(0===t.getRecords().length)return null;var e={message:{record:[]}};return e.message[o]={topicDataType:"record",name:t.name},t.getRecords().forEach(function(t){var n={field:[]};n[o]=t.getDetails(),t.getFields().forEach(function(t){n.field.push(r(t).field)}),e.message.record.push(n)}),e}(t);case i.Type.SINGLE_VALUE:return r(t)}return null}},{"metadata/util":245,"schema/consts":258}],260:[function(t,e,n){var r=t("./xmljson"),i=t("io/codec"),o={read:function(t){return r.xml2json(i.readString(t))},write:function(t,e){e&&(e.field||e.message)&&i.writeString(t,r.json2xml(e))}};e.exports=o},{"./xmljson":261,"io/codec":236}],261:[function(t,e,n){function r(t){for(var e={},n=t.split(" "),r=0;r<n.length;r++){var i=n[r].split("=");e[i[0]]=i[1].match(/"(.*)"/)[1]}return e}function i(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function o(t){var e=[];if("object"==typeof t)for(var n in t)e.push(n+'="'+i(t[n])+'"');return e}function s(t,e){var n={};if(void 0===e){e={idx:0,isRoot:!0};var i=t.match(/<\?.*?\?>/);i&&(t=t.substr(i[0].length))}for(var o=null;o=t.substr(e.idx).match(/<.*?>/);){e.idx+=o[0].length;var a=o[0].trim();if("</"===a.substr(0,2))return n;var c=a.match(/\b(.+?)\b/)[0],l=a.match(/<.+?\b(.*)\/?>/),f="";l&&(f=l[1].trim());var d,h=r(f);"/>"===a.substr(-2)?e.isRoot?(e.isRoot=!1,n[c]=s(t,e),n[c][u]=h):(n[c]||(n[c]=[]),d=n[c].push({}),n[c][d-1][u]=h):e.isRoot?(e.isRoot=!1,n[c]=s(t,e),n[c][u]=h):(n[c]||(n[c]=[]),d=n[c].push(s(t,e)),n[c][d-1][u]=h)}return n}function a(t,e){var n="";e||(n='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>');for(var r in t)if(r!==u){var i=t[r];i instanceof Array||(i=Array(i));for(var s=0;s<i.length;s++){var c=o(i[s][u]);n+="<"+r,c&&c.length>0&&(n+=" ",n+=c.join(" "));var l=a(i[s],!0);l&&l.length>0?(n+=">",n+=l,n+="</"+r+">"):n+="/>"}}return n}var u=t("../schema/consts").ATTR;e.exports={xml2json:s,json2xml:a}},{"../schema/consts":258}],262:[function(t,e,n){var r=t("io/codec"),i={read:function(t){return 1===r.readByte(t)},write:function(t,e){r.writeByte(t,e?1:0)}};e.exports=i},{"io/codec":236}],263:[function(t,e,n){var r={read:function(t,e){var n,r=t.read();for(n in e){var i=e[n];if(i===r||void 0!==i.id&&i.id===r)return i}throw new Error("Unable to decode enum value "+r)},write:function(t,e){e.id?t.write(e.id):t.write(e)}};e.exports=r},{}],264:[function(t,e,n){var r=t("io/codec"),i={read:function(t,e){var n=r.readByte(t);for(var i in e)if(e[i]===n||void 0!==e[i].id&&e[i].id===n)return i;throw new Error("Unknown id ("+n+") for enum")},write:function(t,e){r.writeByte(t,e)}};e.exports=i},{"io/codec":236}],265:[function(t,e,n){var r=t("io/codec"),i=t("content/serialiser"),o=t("serialisers/byte-encoded-enum-serialiser"),s=t("../../../topics/topics").TopicAddFailReason,a=t("topics/details/topic-details-serialiser"),u=2,c={read:function(t){var e=r.readByte(t),n="";return e===u&&(n=o.read(t,s)),{status:e,reason:n}},write:function(t,e){r.writeString(t,e.path),r.writeInt32(t,0),a.write(t,e.details),e.content?(r.writeBoolean(t,!0),i.write(t,e.content)):r.writeBoolean(t,!1)}};e.exports=c},{"../../../topics/topics":468,"content/serialiser":160,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263,"topics/details/topic-details-serialiser":423}],266:[function(t,e,n){e.exports=function(){}},{}],267:[function(t,e,n){var r=t("serialisers/byte-encoded-enum-serialiser"),i=t("io/codec"),o={NONE:0,PLAIN:1,CUSTOM:2},s={read:function(t){switch(r.read(t,o)){case o.NONE:return i.readBytes(t),null;case o.PLAIN:return i.readString(t);case o.CUSTOM:return i.readBytes(t)}},write:function(t,e){e?"string"==typeof e?(r.write(t,o.PLAIN),i.writeString(t,e)):(r.write(t,o.CUSTOM),i.writeBytes(t,e)):(r.write(t,o.NONE),i.writeInt32(t,0))}};e.exports=s},{"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263}],268:[function(t,e,n){var r=t("io/codec"),i=t("../error-report-serialiser"),o=t("./security-command-script-result"),s={read:function(t){var e=r.readCollection(t,i.read);return new o(e)},write:function(t,e){r.writeCollection(t,e.errors,i.write)}};e.exports=s},{"../error-report-serialiser":326,"./security-command-script-result":269,"io/codec":236}],269:[function(t,e,n){function r(t){this.errors=i(t)}var i=t("util/require-non-null");r.prototype.toString=function(){return"SecurityCommandScriptResult ["+this.errors+"]"},e.exports=r},{"util/require-non-null":455}],270:[function(t,e,n){var r=t("./security-command-script"),i=t("io/codec"),o={read:function(t){var e=i.readString(t);return new r(e)},write:function(t,e){i.writeString(t,e.script)}};e.exports=o},{"./security-command-script":271,"io/codec":236}],271:[function(t,e,n){function r(t){this.script=i(t,"script")}var i=t("util/require-non-null");r.prototype.toString=function(){return"SecurityCommandScript ["+this.script+"]"},e.exports=r},{"util/require-non-null":455}],272:[function(t,e,n){var r=t("io/codec"),i=t("features/security").SystemAuthentication,o=t("serialisers/byte-encoded-enum-serialiser"),s=t("./system-principal-serialiser"),a={read:function(t){var e=r.readCollection(t,s.read),n=o.read(t,i.CONNECTION_ACTION),a=r.readCollection(t,r.readString);return new i(e,n.value,a)},write:function(t,e){r.writeCollection(t,e.principals,s.write);var n=i.CONNECTION_ACTION.fromString(e.anonymous.action);r.writeByte(t,n.id),r.writeCollection(t,e.anonymous.roles,r.writeString)}};e.exports=a},{"./system-principal-serialiser":273,"features/security":212,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263}],273:[function(t,e,n){var r=t("io/codec"),i=t("features/security").SystemPrincipal,o={read:function(t){var e=r.readString(t),n=r.readCollection(t,r.readString);return new i(e,n)},write:function(t,e){r.writeString(t,e.name),r.writeCollection(t,e.roles,r.writeString)}};e.exports=o},{"features/security":212,"io/codec":236}],274:[function(t,e,n){var r=t("services/authentication/credentials-serialiser"),i=t("io/codec"),o={read:function(t){i.readString(t),r.read(t)},write:function(t,e){i.writeString(t,e.principal),r.write(t,e.credentials)}};e.exports=o},{"io/codec":236,"services/authentication/credentials-serialiser":267}],275:[function(t,e,n){e.exports=function(t,e){this.principal=t,this.credentials=e}},{}],276:[function(t,e,n){var r=t("../../../client/client-location").AddressType,i=t("serialisers/byte-encoded-enum-serialiser"),o=t("io/codec"),s=t("util/math").intBitsToFloat;e.exports={read:function(t){var e=o.readString(t),n=o.readString(t);0===n.length&&(n=e);var a=o.readString(t);0===a.length&&(a=n);return{type:i.read(t,r),address:e,hostname:n,resolved:a,details:{country:o.readString(t),language:o.readString(t)},coordinates:{latitude:s(o.readInt32(t)),longitude:s(o.readInt32(t))}}}}},{"../../../client/client-location":98,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263,"util/math":450}],277:[function(t,e,n){var r=t("../../../client/client-summary").TransportType,i=t("../../../client/client-summary").ClientType,o=t("serialisers/byte-encoded-enum-serialiser"),s=t("io/codec");e.exports={read:function(t){return{principal:s.readString(t),clientType:o.read(t,i),transportType:o.read(t,r)}}}},{"../../../client/client-summary":99,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263}],278:[function(t,e,n){function r(t){var e=a.readByte(t);if(1===e)return!0;if(0===e)return!1;throw new Error("Invalid option byte: "+e)}var i=t("../../../client/session-details").DetailType,o=t("./client-location-serialiser"),s=t("./client-summary-serialiser"),a=t("io/codec");e.exports={read:function(t){var e={available:[]};return r(t)?(r(t)&&(e.available.push(i.SUMMARY),e.summary=s.read(t)),r(t)&&(e.available.push(i.LOCATION),e.location=o.read(t)),r(t)&&(e.available.push(i.CONNECTOR_NAME),e.connector=a.readString(t)),r(t)&&(e.available.push(i.SERVER_NAME),e.server=a.readString(t)),e):e}}},{"../../../client/session-details":101,"./client-location-serialiser":276,"./client-summary-serialiser":277,"io/codec":236}],279:[function(t,e,n){var r=t("conversation/conversation-id-serialiser"),i=t("./command-header"),o=t("io/codec"),s={read:function(t){var e=o.readInt32(t),n=r.read(t);return new i(e,n)},write:function(t,e){o.writeInt32(t,e.service),r.write(t,e.cid)}};e.exports=s},{"./command-header":280,"conversation/conversation-id-serialiser":168,"io/codec":236}],280:[function(t,e,n){function r(t,e){this.service=t,this.cid=e}r.prototype.toString=function(){return"<"+this.service+", "+this.cid.toString()+">"},r.createRequestHeader=function(t,e){return new r(t,e)},r.prototype.createResponseHeader=function(){return new r(this.service,this.cid)},r.prototype.createErrorHeader=function(){return new r(this.service,this.cid)},e.exports=r},{}],281:[function(t,e,n){var r=t("services/control-client/client-filter-subscribe-request"),i=t("topics/topic-selector-serialiser"),o=t("io/codec");e.exports={read:function(t){var e=o.readString(t),n=i.read(t);return new r(e,n)},write:function(t,e){o.writeString(t,e.filter),i.write(t,e.selector)}}},{"io/codec":236,"services/control-client/client-filter-subscribe-request":282,"topics/topic-selector-serialiser":437}],282:[function(t,e,n){e.exports=function(t,e){this.filter=t,this.selector=e}},{}],283:[function(t,e,n){var r=t("services/control-client/client-filter-subscribe-response"),i=t("services/error-report-serialiser"),o=t("io/codec");e.exports={read:function(t){if(o.readByte(t)){var e=o.readCollection(t,i.read);return new r(0,e)}var n=o.readInt32(t);return new r(n,[])},write:function(t,e){e.isSuccess()?(o.writeByte(t,0),o.writeInt32(t,e.selected)):(o.writeByte(t,1),o.writeCollection(t,e.errors,i.write))}}},{"io/codec":236,"services/control-client/client-filter-subscribe-response":284,"services/error-report-serialiser":326}],284:[function(t,e,n){e.exports=function(t,e){this.selected=t,this.errors=e,this.isSuccess=function(){return 0===e.length}}},{}],285:[function(t,e,n){var r=t("services/control-client/client-subscribe-request"),i=t("topics/topic-selector-serialiser"),o=t("session/session-id-serialiser");e.exports={read:function(t){var e=o.read(t),n=i.read(t);return new r(e,n)},write:function(t,e){o.write(t,e.sessionID),i.write(t,e.selector)}}},{"services/control-client/client-subscribe-request":286,"session/session-id-serialiser":414,"topics/topic-selector-serialiser":437}],286:[function(t,e,n){e.exports=function(t,e){this.sessionID=t,this.selector=e}},{}],287:[function(t,e,n){var r=t("session/session-id-serialiser"),i=t("services/control/close-client-request");e.exports={read:function(t){var e=r.read(t);return new i(e)},write:function(t,e){r.write(t,e.sessionID)}}},{"services/control/close-client-request":288,"session/session-id-serialiser":414}],288:[function(t,e,n){e.exports=function(t){this.sessionID=t}},{}],289:[function(t,e,n){var r=t("control/control-group-serialiser"),i=t("serialisers/byte-encoded-enum-serialiser"),o=t("services/services"),s=t("io/codec"),a={read:function(t){return{definition:i.read(t,o),group:r.read(t)}},write:function(t,e){s.writeInt32(t,e.definition.id),r.write(t,e.group)}};e.exports=a},{"control/control-group-serialiser":165,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263,"services/services":358}],290:[function(t,e,n){e.exports=function(t,e){this.definition=t,this.group=e}},{}],291:[function(t,e,n){var r=t("services/control/control-registration-params-serialiser"),i=t("conversation/conversation-id-serialiser"),o={read:function(t){return{params:r.read(t),cid:i.read(t)}},write:function(t,e){r.write(t,e.params),i.write(t,e.cid)}};e.exports=o},{"conversation/conversation-id-serialiser":168,"services/control/control-registration-params-serialiser":289}],292:[function(t,e,n){e.exports=function(t,e){this.params=t,this.cid=e}},{}],293:[function(t,e,n){var r=t("io/codec"),i=t("session/session-id-serialiser"),o={read:function(t){return r.readBoolean(t)?{properties:r.readDictionary(t,r.readString)}:null},write:function(t,e){if(void 0===e.sessionID||null===e.sessionID)throw new Error("session ID is null or undefined");i.write(t,e.sessionID),void 0!==e.propertyKeys&&null!==e.propertyKeys?r.writeCollection(t,e.propertyKeys,r.writeString):r.writeCollection(t,[],r.writeString)}};e.exports=o},{"io/codec":236,"session/session-id-serialiser":414}],294:[function(t,e,n){e.exports=function(){}},{}],295:[function(t,e,n){var r=t("control/control-group-serialiser"),i=t("serialisers/byte-encoded-enum-serialiser"),o=t("services/services"),s=t("io/codec"),a={read:function(t){return{definition:i.read(t,o),group:r.read(t),path:s.readString(t),keys:s.readCollection(t,s.readString)}},write:function(t,e){s.writeInt32(t,e.definition.id),r.write(t,e.group),s.writeString(t,e.path),s.writeCollection(t,e.keys,s.writeString)}};e.exports=a},{"control/control-group-serialiser":165,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263,"services/services":358}],296:[function(t,e,n){e.exports=function(t,e,n,r){this.definition=t,this.group=e,this.path=n,this.keys=r}},{}],297:[function(t,e,n){var r=t("services/control/message-receiver-control-registration-params-serialiser"),i=t("conversation/conversation-id-serialiser"),o={read:function(t){return{params:r.read(t),cid:i.read(t)}},write:function(t,e){r.write(t,e.params),i.write(t,e.cid)}};e.exports=o},{"conversation/conversation-id-serialiser":168,"services/control/message-receiver-control-registration-params-serialiser":295}],298:[function(t,e,n){e.exports=function(){}},{}],299:[function(t,e,n){var r=t("conversation/conversation-id-serialiser"),i=t("session/session-id-serialiser"),o=t("io/codec"),s={read:function(t){return{cid:r.read(t),sessionID:i.read(t),path:o.readString(t),properties:o.readDictionary(t,o.readString),dataType:o.readString(t),content:o.readBytes(t)}},write:function(){}};e.exports=s},{"conversation/conversation-id-serialiser":168,"io/codec":236,"session/session-id-serialiser":414}],300:[function(t,e,n){e.exports=function(){}},{}],301:[function(t,e,n){var r=t("services/control/messaging-client-send-request"),i=t("session/session-id-serialiser"),o=t("data/datatypes"),s=t("io/codec");e.exports={read:function(t){var e=i.read(t),n=s.readString(t),a=o.get(s.readString(t)),u=s.readBytes(t);return new r(e,n,a,u)},write:function(t,e){i.write(t,e.sessionId),s.writeString(t,e.path),s.writeString(t,e.type),s.writeBytes(t,e.request)}}},{"data/datatypes":177,"io/codec":236,"services/control/messaging-client-send-request":302,"session/session-id-serialiser":414}],302:[function(t,e,n){e.exports=function(t,e,n,r){this.sessionId=t,this.path=e,this.dataType=n,this.request=r}},{}],303:[function(t,e,n){var r=t("services/control/messaging-response-serialiser"),i=t("conversation/conversation-id-serialiser"),o=t("services/error-reason-serialiser"),s=t("session/session-id-serialiser"),a=t("io/codec"),u=t("services/control/messaging-filter-response");e.exports={read:function(t){var e=i.read(t),n=s.read(t);switch(a.readByte(t)){case 0:var c=r.read(t);return new u(e,n,c);default:var l=o.read(t);return new u(e,n,null,l)}},write:function(){}}},{"conversation/conversation-id-serialiser":168,"io/codec":236,"services/control/messaging-filter-response":304,"services/control/messaging-response-serialiser":309,"services/error-reason-serialiser":325,"session/session-id-serialiser":414}],304:[function(t,e,n){e.exports=function(t,e,n,r){this.cid=t,this.sessionID=e,this.response=n,this.errorReason=r}},{}],305:[function(t,e,n){var r=t("conversation/conversation-id-serialiser"),i=t("io/codec");e.exports={read:function(){},write:function(t,e){r.write(t,e.cid),i.writeString(t,e.filter),i.writeString(t,e.path),i.writeString(t,e.dataType.name()),i.writeBytes(t,e.request)}}},{"conversation/conversation-id-serialiser":168,"io/codec":236}],306:[function(t,e,n){e.exports=function(t,e,n,r,i){this.cid=t,this.filter=e,this.path=n,this.dataType=r,this.request=i}},{}],307:[function(t,e,n){var r=t("services/control/messaging-filter-send-response"),i=t("services/error-report-serialiser"),o=t("io/codec");e.exports={read:function(t){if(0===o.readByte(t)){var e=o.readInt32(t);return new r(e,[])}var n=o.readCollection(t,i.read);return new r(0,n)},write:function(){}}},{"io/codec":236,"services/control/messaging-filter-send-response":308,"services/error-report-serialiser":326}],308:[function(t,e,n){e.exports=function(t,e){this.numberSent=t,this.errors=e,this.isSuccess=0===e.length}},{}],309:[function(t,e,n){var r=t("io/codec"),i={read:function(t){return{responseDataType:r.readString(t),data:r.readBytes(t)}},write:function(t,e){r.writeString(t,e.responseDataType),r.writeBytes(t,e.data)}};e.exports=i},{"io/codec":236}],310:[function(t,e,n){e.exports=function(t,e){this.responseDataType=t,this.data=e}},{}],311:[function(t,e,n){var r=t("services/control/messaging-send-request"),i=t("data/datatypes"),o=t("io/codec");e.exports={read:function(t){var e=o.readString(t),n=i.get(o.readString(t)),s=o.readBytes(t);return new r(e,n,s)},write:function(t,e){o.writeString(t,e.path),o.writeString(t,e.type),o.writeBytes(t,e.request)}}},{"data/datatypes":177,"io/codec":236,"services/control/messaging-send-request":312}],312:[function(t,e,n){e.exports=function(t,e,n){this.path=t,this.dataType=e,this.request=n}},{}],313:[function(t,e,n){e.exports={CONNECTION_LOST:0,IO_EXCEPTION:1,CLIENT_UNRESPONSIVE:2,MESSAGE_QUEUE_LIMIT_REACHED:3,CLOSED_BY_CLIENT:4,MESSAGE_TOO_LARGE:5,INTERNAL_ERROR:6,INVALID_INBOUND_MESSAGE:7,ABORT:8,LOST_MESSAGES:9,SERVER_CLOSING:10,CLOSED_BY_CONTROLLER:11}},{}],314:[function(t,e,n){var r=t("services/control/session-properties-event-serialiser"),i=t("conversation/conversation-id-serialiser"),o=t("io/codec");e.exports={read:function(t){return{cid:i.read(t),events:o.readCollection(t,r.read)}},write:function(t,e){i.write(t,e.cid),o.writeCollection(t,e.events)}}},{"conversation/conversation-id-serialiser":168,"io/codec":236,"services/control/session-properties-event-serialiser":316}],315:[function(t,e,n){e.exports=function(t,e){this.cid=t,this.events=e}},{}],316:[function(t,e,n){var r=t("session/session-id-serialiser"),i=t("services/control/session-properties-event-type"),o=t("services/control/session-close-reason"),s=t("io/codec"),a=t("serialisers/byte-encoded-enum-serialiser"),u={read:function(t){var e={sessionId:r.read(t),type:a.read(t,i)};switch(e.type){case i.OPEN:e.oldProperties=s.readDictionary(t,s.readString);break;case i.UPDATE:e.updateType=s.readByte(t),e.oldProperties=s.readDictionary(t,s.readString),e.newProperties=s.readDictionary(t,s.readString);break;case i.CLOSE:e.closeReason=a.read(t,o),e.oldProperties=s.readDictionary(t,s.readString);break;default:throw new Error("Unknown session properties event type: "+e.type)}return e},write:function(){}};e.exports=u},{"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263,"services/control/session-close-reason":313,"services/control/session-properties-event-type":317,"session/session-id-serialiser":414}],317:[function(t,e,n){e.exports={OPEN:0,UPDATE:1,CLOSE:2}},{}],318:[function(t,e,n){e.exports=function(){}},{}],319:[function(t,e,n){var r=t("conversation/conversation-id-serialiser"),i=t("io/codec"),o={read:function(){},write:function(t,e){e.properties?(i.writeInt32(t,0),i.writeCollection(t,e.properties,i.writeString)):i.writeInt32(t,1),r.write(t,e.cid)}};e.exports=o},{"conversation/conversation-id-serialiser":168,"io/codec":236}],320:[function(t,e,n){e.exports=function(){}},{}],321:[function(t,e,n){var r=t("control/control-group-serialiser"),i=t("serialisers/byte-encoded-enum-serialiser"),o=t("services/services"),s=t("io/codec"),a={read:function(t){return{definition:i.read(t,o),group:r.read(t),path:s.readString(t)}},write:function(t,e){s.writeInt32(t,e.definition.id),r.write(t,e.group),s.writeString(t,e.path)}};e.exports=a},{"control/control-group-serialiser":165,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263,"services/services":358}],322:[function(t,e,n){e.exports=function(t,e,n){this.definition=t,this.group=e,this.path=n}},{}],323:[function(t,e,n){var r=t("services/control/topic-control-registration-params-serialiser"),i=t("conversation/conversation-id-serialiser"),o={read:function(t){return{params:r.read(t),cid:i.read(t)}},write:function(t,e){r.write(t,e.params),i.write(t,e.cid)}};e.exports=o},{"conversation/conversation-id-serialiser":168,"services/control/topic-control-registration-params-serialiser":321}],324:[function(t,e,n){e.exports=function(){}},{}],325:[function(t,e,n){var r=t("client/error-reason"),i=t("io/codec");e.exports={read:function(t){var e=i.readInt32(t),n=i.readString(t);return new r(e,n)},write:function(t,e){i.writeInt32(t,e.id),i.writeString(t,e.reason)}}},{"client/error-reason":147,"io/codec":236}],326:[function(t,e,n){var r=t("io/codec"),i=t("services/error-report"),o={read:function(t){var e=r.readString(t),n=r.readInt32(t),o=r.readInt32(t);return new i(e,n,o)},write:function(t,e){r.writeString(t,e.message),r.writeInt32(t,e.line),r.writeInt32(t,e.column)}};e.exports=o},{"io/codec":236,"services/error-report":327}],327:[function(t,e,n){var r=t("util/interface")._implements,i=t("util/require-non-null"),o=t("../../error-report");e.exports=r(o,function(t,e,n){this.message=i(t),this.line=e||0,this.column=n||0,this.toString=function(){return"ErrorReport ["+this.message+" at ["+this.line+":"+this.column+"]]"}})},{"../../error-report":119,"util/interface":448,"util/require-non-null":455}],328:[function(t,e,n){var r=t("topics/topic-selector-serialiser"),i=t("conversation/conversation-id-serialiser"),o=t("services/fetch/fetch-request");e.exports={read:function(t){var e=r.read(t),n=i.read(t);return new o(n,e)},write:function(t,e){r.write(t,e.selector),i.write(t,e.cid)}}},{"conversation/conversation-id-serialiser":168,"services/fetch/fetch-request":329,"topics/topic-selector-serialiser":437}],329:[function(t,e,n){e.exports=function(t,e){this.cid=t,this.selector=e}},{}],330:[function(t,e,n){var r=t("io/codec"),i=t("topics/details/topic-details-serialiser"),o={read:function(t){return i.read(t)},write:function(t,e){r.writeString(t,e.topic_name),r.writeByte(t,e.level)}};e.exports=o},{"io/codec":236,"topics/details/topic-details-serialiser":423}],331:[function(t,e,n){e.exports=function(){}},{}],332:[function(t,e,n){var r=t("topics/topic-selector-serialiser"),i=t("conversation/conversation-id-serialiser"),o=t("session/session-id-serialiser");e.exports={read:function(t){return{sessionID:o.read(t),selector:r.read(t),cid:i.read(t)}},write:function(t,e){o.write(t,e.sessionID),r.write(t,e.selector),i.write(t,e.cid)}}},{"conversation/conversation-id-serialiser":168,"session/session-id-serialiser":414,"topics/topic-selector-serialiser":437}],333:[function(t,e,n){e.exports=function(t,e){this.sessionID=t,this.selector=e}},{}],334:[function(t,e,n){var r=t("io/codec"),i={read:function(){},write:function(t,e){r.writeString(t,e.selector.expression)}};e.exports=i},{"io/codec":236}],335:[function(t,e,n){e.exports=function(){}},{}],336:[function(t,e,n){function r(t){return s.read(t,o)}var i=t("services/control/control-registration-params-serialiser"),o=t("../../../client/session-details").DetailType,s=t("serialisers/byte-encoded-enum-serialiser"),a=t("io/codec");e.exports={write:function(t,e){i.write(t,e),a.writeString(t,e.name),a.writeByte(t,e.details.length);for(var n=0;n<e.details.length;++n)a.writeByte(t,e.details[n])},read:function(t){var e=i.read(t);return e.name=a.readString(t),e.details=a.readCollection(t,r),e}}},{"../../../client/session-details":101,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263,"services/control/control-registration-params-serialiser":289}],337:[function(t,e,n){e.exports=function(){}},{}],338:[function(t,e,n){var r=t("./authentication-control-registration-parameters-serialiser"),i=t("conversation/conversation-id-serialiser");e.exports={write:function(t,e){r.write(t,e.params),i.write(t,e.cid)},read:function(t){return{params:r.read(t),cid:i.read(t)}}}},{"./authentication-control-registration-parameters-serialiser":336,"conversation/conversation-id-serialiser":168}],339:[function(t,e,n){e.exports=function(){}},{}],340:[function(t,e,n){var r=t("services/client/session-details-serialiser"),i=t("conversation/conversation-id-serialiser"),o=t("services/authentication/credentials-serialiser"),s=t("io/codec");e.exports={read:function(t){return{principal:s.readString(t),credentials:o.read(t),details:r.read(t),cid:i.read(t)}},write:function(t,e){s.writeString(t,e.principal),o.write(t,e.credentials),r.write(t,e.details),i.write(t,e.cid)}}},{"conversation/conversation-id-serialiser":168,"io/codec":236,"services/authentication/credentials-serialiser":267,"services/client/session-details-serialiser":278}],341:[function(t,e,n){e.exports=function(){}},{}],342:[function(t,e,n){var r=t("services/security/authentication-response"),i=t("services/security/authentication-response").TypeCode,o=t("serialisers/byte-encoded-enum-serialiser"),s=t("io/codec");e.exports={read:function(t){switch(o.read(t,i)){case i.ABSTAIN:return r.ABSTAIN;case i.ALLOW:return r.ALLOW;case i.ALLOW_WITH_RESULT:return r.allow({roles:s.readCollection(t,s.readString),properties:s.readDictionary(t,s.readString)});default:return r.DENY}},write:function(t,e){o.write(t,e.type),e.type===i.ALLOW_WITH_RESULT&&(s.writeCollection(t,e.result.roles,s.writeString),s.writeDictionary(t,e.result.properties,s.writeString))}}},{"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263,"services/security/authentication-response":343}],343:[function(t,e,n){function r(t,e){this.type=t,this.result=e}var i={DENY:0,ABSTAIN:1,ALLOW:2,ALLOW_WITH_RESULT:3};e.exports=r,e.exports.allow=function(t){return new r(i.ALLOW_WITH_RESULT,function(t){return{roles:t.roles||[],properties:t.properties||{}}}(t))},e.exports.TypeCode=i,e.exports.DENY=new r(i.DENY),e.exports.ALLOW=new r(i.ALLOW),e.exports.ABSTAIN=new r(i.ABSTAIN)},{}],344:[function(t,e,n){var r=t("features/security").TopicPermission,i=t("features/security").GlobalPermission,o=t("serialisers/enum-converter"),s=t("util/function").curryR,a=t("io/codec"),u=s(o.write,i),c=s(o.write,r),l=s(o.read,i),f=s(o.read,r),d=s(a.writeCollection,c),h=s(a.readCollection,f),p={read:function(t){return{name:a.readString(t),global:a.readCollection(t,l),default:a.readCollection(t,f),topic:a.readDictionary(t,h),roles:a.readCollection(t,a.readString)}},write:function(t,e){a.writeString(t,e.name),a.writeCollection(t,e.global,u),a.writeCollection(t,e.default,c),a.writeDictionary(t,e.topic,d),a.writeCollection(t,e.roles,a.writeString)}};e.exports=p},{"features/security":212,"io/codec":236,"serialisers/enum-converter":264,"util/function":447}],345:[function(t,e,n){var r=t("features/security").Configuration,i=t("services/security/role-serialiser"),o=t("io/codec"),s={read:function(t){var e=o.readCollection(t,o.readString),n=o.readCollection(t,o.readString),s=o.readCollection(t,i.read);return new r(e,n,s)},write:function(t,e){o.writeCollection(t,e.anonymous,o.writeString),o.writeCollection(t,e.named,o.writeString),o.writeCollection(t,e.roles,i.write)}};e.exports=s},{"features/security":212,"io/codec":236,"services/security/role-serialiser":344}],346:[function(t,e,n){var r=t("./send-options-serialiser"),i=t("content/serialiser"),o=t("conversation/conversation-id-serialiser"),s=t("io/codec"),a={read:function(t){var e=s.readString(t),n=s.readString(t),a=i.read(t),u=r.read(t);return{cid:o.read(t),path:n,filter:e,message:a,options:u}},write:function(t,e){s.writeString(t,e.filter),s.writeString(t,e.path),i.write(t,e.content),r.write(t,e.options),o.write(t,e.cid)}};e.exports=a},{"./send-options-serialiser":350,"content/serialiser":160,"conversation/conversation-id-serialiser":168,"io/codec":236}],347:[function(t,e,n){e.exports=function(t,e,n){this.path=t,this.message=e,this.filter=n}},{}],348:[function(t,e,n){var r=t("io/codec"),i=t("../error-report-serialiser"),o=t("./filter-send-result"),s={read:function(t){var e=r.readInt32(t),n=r.readCollection(t,i.read);return new o(e,n)},write:function(t,e){r.writeInt32(t,e.sent),r.writeCollection(t,e.errors,i.write)}};e.exports=s},{"../error-report-serialiser":326,"./filter-send-result":349,"io/codec":236}],349:[function(t,e,n){function r(t,e){this.sent=i(t),this.errors=i(e)}var i=t("util/require-non-null");r.prototype.toString=function(){return"FilterSendResult ["+this.sent+" sent, errors="+this.errors+"]"},e.exports=r},{"util/require-non-null":455}],350:[function(t,e,n){var r=t("serialisers/byte-encoded-enum-serialiser"),i=t("io/codec"),o=t("../../../features/messages").Priority,s={read:function(t){return{priority:r.read(t,o),headers:i.readCollection(t,i.readString)}},write:function(t,e){r.write(t,e.priority),i.writeCollection(t,e.headers,i.writeString)}};e.exports=s},{"../../../features/messages":129,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263}],351:[function(t,e,n){var r=t("./send-options-serialiser"),i=t("content/serialiser"),o=t("io/codec"),s={read:function(t){return{path:o.readString(t),content:i.read(t),options:r.read(t)}},write:function(t,e){o.writeString(t,e.path),i.write(t,e.content),r.write(t,e.options)}};e.exports=s},{"./send-options-serialiser":350,"content/serialiser":160,"io/codec":236}],352:[function(t,e,n){e.exports=function(t,e){this.path=t,this.message=e}},{}],353:[function(t,e,n){var r=t("./send-options-serialiser"),i=t("content/serialiser"),o=t("session/session-id-serialiser"),s=t("conversation/conversation-id-serialiser"),a=t("io/codec"),u={read:function(t){var e=a.readString(t),n=i.read(t),u=o.read(t),c=r.read(t),l=a.readDictionary(t,a.readString);return{cid:s.read(t),path:e,sender:u,message:n,options:c,sessionProperties:l}},write:function(t,e){a.writeString(t,e.path),i.write(t,e.content),o.write(t,e.session),r.write(t,e.options),a.writeDictionary(t,e.sessionProperties,a.writeString),s.write(t,e.cid)}};e.exports=u},{"./send-options-serialiser":350,"content/serialiser":160,"conversation/conversation-id-serialiser":168,"io/codec":236,"session/session-id-serialiser":414}],354:[function(t,e,n){e.exports=function(t,e,n,r){this.path=t,this.message=e,this.recipient=n,this.sessionProperties=r}},{}],355:[function(t,e,n){var r=t("./send-options-serialiser"),i=t("content/serialiser"),o=t("session/session-id-serialiser"),s=t("conversation/conversation-id-serialiser"),a=t("io/codec"),u={read:function(t){var e=a.readString(t),n=i.read(t),u=o.read(t),c=r.read(t);return{cid:s.read(t),path:e,sender:u,message:n,options:c}},write:function(t,e){a.writeString(t,e.path),i.write(t,e.content),o.write(t,e.session),r.write(t,e.options),s.write(t,e.cid)}};e.exports=u},{"./send-options-serialiser":350,"content/serialiser":160,"conversation/conversation-id-serialiser":168,"io/codec":236,"session/session-id-serialiser":414}],356:[function(t,e,n){e.exports=function(t,e,n){this.path=t,this.message=e,this.recipient=n}},{}],357:[function(t,e,n){var r=t("hashmap"),i=t("services/command-header"),o=t("services/command-header-serialiser"),s=t("../../selectors/topic-selector"),a=t("topics/topic-selector-serialiser"),u=t("services/error-report"),c=t("services/error-report-serialiser.js"),l=new r;l.set(i,o),l.set(s,a),l.set(u,c),l.set(null,{read:function(){return null},write:function(){}}),l.set(Boolean,t("serialisers/boolean-serialiser")),l.set(t("services/fetch/fetch-request"),t("services/fetch/fetch-request-serialiser")),l.set(t("./subscription-notification/subscription-notification"),t("./subscription-notification/subscription-notification-serialiser")),l.set(t("./unsubscription-notification/unsubscription-notification"),t("./unsubscription-notification/unsubscription-notification-serialiser")),l.set(t("./get-topic-details/get-topic-details"),t("./get-topic-details/get-topic-details-serialiser")),l.set(t("./add-topic/add-topic"),t("./add-topic/add-topic-serialiser")),l.set(t("./remove-topic/remove-topic"),t("./remove-topic/remove-topic-serialiser")),l.set(t("./update-topic/update-topic-request"),t("./update-topic/update-topic-request-serialiser")),l.set(t("./update-topic/update-topic-response"),t("./update-topic/update-topic-response-serialiser")),l.set(t("./wills/topic-will-parameters"),t("./wills/topic-will-parameters-serialiser")),l.set(t("./wills/will-registration-result"),t("./wills/will-registration-result-serialiser")),l.set(t("./send/send-request"),t("./send/send-request-serialiser")),l.set(t("./send/session-send-request"),t("./send/session-send-request-serialiser"));var f=t("../../features/security");l.set(f.SystemAuthenticationConfiguration,t("./authentication/system-authentication-configuration-serialiser")),l.set(f.SecurityConfiguration,t("./security/security-configuration-serialiser")),l.set(f.SystemPrincipal,t("./authentication/system-principal-serialiser")),l.set(t("./authentication/security-command-script"),t("./authentication/security-command-script-serialiser")),l.set(t("./authentication/security-command-script-result"),t("./authentication/security-command-script-result-serialiser")),l.set(t("session/session-id"),t("session/session-id-serialiser")),l.set(t("services/control/topic-control-registration-request"),t("services/control/topic-control-registration-request-serialiser")),l.set(t("services/control/topic-control-registration-params"),t("services/control/topic-control-registration-params-serialiser")),l.set(t("services/control/control-registration-request"),t("services/control/control-registration-request-serialiser")),l.set(t("services/control/control-registration-request"),t("services/control/control-registration-request-serialiser")),l.set(t("services/change-principal/change-principal-request"),t("services/change-principal/change-principal-request-serialiser")),l.set(t("./send/session-forward-send-request"),t("./send/session-forward-send-request-serialiser")),l.set(t("services/control/message-receiver-control-registration-request"),t("services/control/message-receiver-control-registration-request-serialiser")),l.set(t("services/control/message-receiver-control-registration-params"),t("services/control/message-receiver-control-registration-params-serialiser")),l.set(t("./send/filter-send-request"),t("./send/filter-send-request-serialiser")),l.set(t("./send/filter-send-result"),t("./send/filter-send-result-serialiser")),l.set(t("services/control/get-session-properties"),t("services/control/get-session-properties-serialiser")),l.set(t("services/control/set-session-properties-listener"),t("services/control/set-session-properties-listener-serialiser")),l.set(t("services/control/session-properties-event"),t("services/control/session-properties-event-serialiser")),l.set(t("services/control/session-properties-event-batch"),t("services/control/session-properties-event-batch-serialiser")),l.set(t("services/topic-notifications/topic-notification-deregistration-request"),t("services/topic-notifications/topic-notification-deregistration-request-serialiser")),l.set(t("services/topic-notifications/topic-notification-event"),t("services/topic-notifications/topic-notification-event-serialiser")),l.set(t("services/topic-notifications/topic-notification-descendant-event"),t("services/topic-notifications/topic-notification-descendant-event-serialiser")),l.set(t("services/topic-notifications/topic-notification-selection"),t("services/topic-notifications/topic-notification-selection-serialiser")),l.set(t("services/topic-notifications/topic-notification-deselection"),t("services/topic-notifications/topic-notification-deselection-serialiser")),l.set(t("services/control/messaging-send-request"),t("services/control/messaging-send-request-serialiser")),l.set(t("services/control/messaging-response"),t("services/control/messaging-response-serialiser")),l.set(t("services/control/messaging-client-forward-send-request"),t("services/control/messaging-client-forward-send-request-serialiser")),l.set(t("services/control/messaging-filter-send-request"),t("services/control/messaging-filter-send-request-serialiser")),l.set(t("services/control/messaging-filter-send-response"),t("services/control/messaging-filter-send-response-serialiser")),l.set(t("services/topic-update/update-source-registration-request"),t("services/topic-update/update-source-registration-request-serialiser")),l.set(t("services/topic-update/update-source-deregistration-request"),t("services/topic-update/update-source-deregistration-request-serialiser")),l.set(t("services/topic-update/update-source-state-request"),t("services/topic-update/update-source-state-request-serialiser")),l.set(t("services/topic-update/update-source-state"),t("services/topic-update/update-source-state-serialiser")),l.set(t("services/topic-update/update-source-update"),t("services/topic-update/update-source-update-serialiser")),l.set(t("services/topic-update/update-source-update-response"),t("services/topic-update/update-source-update-response-serialiser")),l.set(t("services/update-topic/update-topic-set-request"),t("services/update-topic/update-topic-set-request-serialiser")),l.set(t("services/update-topic/update-topic-delta-request"),t("services/update-topic/update-topic-delta-request-serialiser")),l.set(t("services/topic-update/update-source-set-request"),t("services/topic-update/update-source-set-request-serialiser")),l.set(t("services/topic-update/update-source-delta-request"),t("services/topic-update/update-source-delta-request-serialiser")),l.set(t("services/missing-topic/missing-topic-request"),t("services/missing-topic/missing-topic-request-serialiser")),l.set(t("services/control-client/client-subscribe-request"),t("services/control-client/client-subscribe-request-serialiser")),l.set(t("services/control-client/client-filter-subscribe-request"),t("services/control-client/client-filter-subscribe-request-serialiser")),l.set(t("services/control-client/client-filter-subscribe-response"),t("services/control-client/client-filter-subscribe-response-serialiser")),l.set(t("services/security/authentication-request"),t("services/security/authentication-request-serialiser")),l.set(t("services/security/authentication-response"),t("services/security/authentication-response-serialiser")),l.set(t("services/security/authentication-control-registration-request"),t("services/security/authentication-control-registration-request-serialiser")),l.set(t("services/security/authentication-control-registration-parameters"),t("services/security/authentication-control-registration-parameters-serialiser")),l.set(t("services/timeseries/range-query-request"),t("services/timeseries/range-query-request-serialiser")),l.set(t("services/timeseries/range-query-result"),t("services/timeseries/range-query-result-serialiser")),l.set(t("services/timeseries/time-series-append-request"),t("services/timeseries/time-series-append-request-serialiser")),l.set(t("services/timeseries/time-series-edit-request"),t("services/timeseries/time-series-edit-request-serialiser")),l.set(t("services/timeseries/time-series-event-metadata"),t("services/timeseries/time-series-event-metadata-serialiser")),l.set(t("topics/details/topic-specification-info"),t("topics/details/topic-specification-info-serialiser")),l.set(t("services/control/close-client-request"),t("services/control/close-client-request-serialiser")),l.set(t("services/control/messaging-filter-response"),t("services/control/messaging-filter-response-serialiser")),l.set(t("services/control/messaging-client-send-request"),t("services/control/messaging-client-send-request-serialiser")),e.exports=l},{"../../features/security":131,"../../selectors/topic-selector":464,"./add-topic/add-topic":266,"./add-topic/add-topic-serialiser":265,"./authentication/security-command-script":271,"./authentication/security-command-script-result":269,"./authentication/security-command-script-result-serialiser":268,"./authentication/security-command-script-serialiser":270,"./authentication/system-authentication-configuration-serialiser":272,"./authentication/system-principal-serialiser":273,"./get-topic-details/get-topic-details":331,"./get-topic-details/get-topic-details-serialiser":330,"./remove-topic/remove-topic":335,"./remove-topic/remove-topic-serialiser":334,"./security/security-configuration-serialiser":345,"./send/filter-send-request":347,"./send/filter-send-request-serialiser":346,"./send/filter-send-result":349,"./send/filter-send-result-serialiser":348,"./send/send-request":352,"./send/send-request-serialiser":351,"./send/session-forward-send-request":354,"./send/session-forward-send-request-serialiser":353,"./send/session-send-request":356,"./send/session-send-request-serialiser":355,"./subscription-notification/subscription-notification":360,"./subscription-notification/subscription-notification-serialiser":359,"./unsubscription-notification/unsubscription-notification":401,"./unsubscription-notification/unsubscription-notification-serialiser":400,"./update-topic/update-topic-request":405,"./update-topic/update-topic-request-serialiser":404,"./update-topic/update-topic-response":407,"./update-topic/update-topic-response-serialiser":406,"./wills/topic-will-parameters":411,"./wills/topic-will-parameters-serialiser":410,"./wills/will-registration-result":413,"./wills/will-registration-result-serialiser":412,hashmap:470,"serialisers/boolean-serialiser":262,"services/change-principal/change-principal-request":275,"services/change-principal/change-principal-request-serialiser":274,"services/command-header":280,"services/command-header-serialiser":279,"services/control-client/client-filter-subscribe-request":282,"services/control-client/client-filter-subscribe-request-serialiser":281,"services/control-client/client-filter-subscribe-response":284,"services/control-client/client-filter-subscribe-response-serialiser":283,"services/control-client/client-subscribe-request":286,"services/control-client/client-subscribe-request-serialiser":285,"services/control/close-client-request":288,"services/control/close-client-request-serialiser":287,"services/control/control-registration-request":292,"services/control/control-registration-request-serialiser":291,"services/control/get-session-properties":294,"services/control/get-session-properties-serialiser":293,"services/control/message-receiver-control-registration-params":296,"services/control/message-receiver-control-registration-params-serialiser":295,"services/control/message-receiver-control-registration-request":298,"services/control/message-receiver-control-registration-request-serialiser":297,"services/control/messaging-client-forward-send-request":300,"services/control/messaging-client-forward-send-request-serialiser":299,"services/control/messaging-client-send-request":302,"services/control/messaging-client-send-request-serialiser":301,"services/control/messaging-filter-response":304,"services/control/messaging-filter-response-serialiser":303,"services/control/messaging-filter-send-request":306,"services/control/messaging-filter-send-request-serialiser":305,"services/control/messaging-filter-send-response":308,"services/control/messaging-filter-send-response-serialiser":307,"services/control/messaging-response":310,"services/control/messaging-response-serialiser":309,"services/control/messaging-send-request":312,"services/control/messaging-send-request-serialiser":311,"services/control/session-properties-event":318,"services/control/session-properties-event-batch":315,"services/control/session-properties-event-batch-serialiser":314,"services/control/session-properties-event-serialiser":316,"services/control/set-session-properties-listener":320,"services/control/set-session-properties-listener-serialiser":319,"services/control/topic-control-registration-params":322,"services/control/topic-control-registration-params-serialiser":321,"services/control/topic-control-registration-request":324,"services/control/topic-control-registration-request-serialiser":323,"services/error-report":327,"services/error-report-serialiser.js":326,"services/fetch/fetch-request":329,"services/fetch/fetch-request-serialiser":328,"services/missing-topic/missing-topic-request":333,"services/missing-topic/missing-topic-request-serialiser":332,"services/security/authentication-control-registration-parameters":337,"services/security/authentication-control-registration-parameters-serialiser":336,"services/security/authentication-control-registration-request":339,"services/security/authentication-control-registration-request-serialiser":338,"services/security/authentication-request":341,"services/security/authentication-request-serialiser":340,"services/security/authentication-response":343,"services/security/authentication-response-serialiser":342,"services/timeseries/range-query-request":363,"services/timeseries/range-query-request-serialiser":362,"services/timeseries/range-query-result":365,"services/timeseries/range-query-result-serialiser":364,"services/timeseries/time-series-append-request":367,"services/timeseries/time-series-append-request-serialiser":366,"services/timeseries/time-series-edit-request":369,"services/timeseries/time-series-edit-request-serialiser":368,"services/timeseries/time-series-event-metadata":371,"services/timeseries/time-series-event-metadata-serialiser":370,"services/topic-notifications/topic-notification-deregistration-request":374,"services/topic-notifications/topic-notification-deregistration-request-serialiser":373,"services/topic-notifications/topic-notification-descendant-event":376,"services/topic-notifications/topic-notification-descendant-event-serialiser":375,"services/topic-notifications/topic-notification-deselection":378,"services/topic-notifications/topic-notification-deselection-serialiser":377,"services/topic-notifications/topic-notification-event":380,"services/topic-notifications/topic-notification-event-serialiser":379,"services/topic-notifications/topic-notification-selection":382,"services/topic-notifications/topic-notification-selection-serialiser":381,"services/topic-update/update-source-delta-request":385,"services/topic-update/update-source-delta-request-serialiser":384,"services/topic-update/update-source-deregistration-request":387,"services/topic-update/update-source-deregistration-request-serialiser":386,"services/topic-update/update-source-registration-request":389,"services/topic-update/update-source-registration-request-serialiser":388,"services/topic-update/update-source-set-request":391,"services/topic-update/update-source-set-request-serialiser":390,"services/topic-update/update-source-state":395,"services/topic-update/update-source-state-request":393,"services/topic-update/update-source-state-request-serialiser":392,"services/topic-update/update-source-state-serialiser":394,"services/topic-update/update-source-update":399,"services/topic-update/update-source-update-response":397,"services/topic-update/update-source-update-response-serialiser":396,"services/topic-update/update-source-update-serialiser":398,"services/update-topic/update-topic-delta-request":403,"services/update-topic/update-topic-delta-request-serialiser":402,"services/update-topic/update-topic-set-request":409,"services/update-topic/update-topic-set-request-serialiser":408,"session/session-id":415,"session/session-id-serialiser":414,"topics/details/topic-specification-info":429,"topics/details/topic-specification-info-serialiser":428,"topics/topic-selector-serialiser":437}],358:[function(t,e,n){var r=t("../../selectors/topic-selector"),i=t("services/fetch/fetch-request"),o=t("services/subscription-notification/subscription-notification"),s=t("services/unsubscription-notification/unsubscription-notification"),a=t("services/get-topic-details/get-topic-details"),u=t("services/add-topic/add-topic"),c=t("services/remove-topic/remove-topic"),l=t("services/update-topic/update-topic-request"),f=t("services/update-topic/update-topic-set-request"),d=t("services/update-topic/update-topic-delta-request"),h=t("services/update-topic/update-topic-response"),p=t("services/control/close-client-request"),v=t("services/control-client/client-subscribe-request"),g=t("services/control-client/client-filter-subscribe-request"),m=t("services/control-client/client-filter-subscribe-response"),y=t("services/security/authentication-control-registration-request"),b=t("services/security/authentication-control-registration-parameters"),w=t("services/security/authentication-request"),x=t("services/security/authentication-response"),E=t("services/authentication/security-command-script"),_=t("services/authentication/security-command-script-result"),S=t("../../features/security").SecurityConfiguration,$=t("../../features/security").SystemAuthenticationConfiguration,T=t("services/wills/topic-will-parameters"),k=t("services/wills/will-registration-result"),C=t("services/send/send-request"),A=t("services/send/session-send-request"),R=t("services/control/topic-control-registration-request"),M=t("services/control/topic-control-registration-params"),I=t("services/topic-update/update-source-registration-request"),O=t("services/topic-update/update-source-deregistration-request"),N=t("services/topic-update/update-source-update"),L=t("services/topic-update/update-source-set-request"),D=t("services/topic-update/update-source-delta-request"),P=t("services/topic-update/update-source-update-response"),V=t("services/topic-update/update-source-state-request"),q=t("services/topic-update/update-source-state"),F=t("services/control/control-registration-request"),U=t("services/control/control-registration-params"),B=t("services/change-principal/change-principal-request"),j=t("services/send/session-forward-send-request"),H=t("services/control/message-receiver-control-registration-request"),z=t("services/control/message-receiver-control-registration-params"),W=t("services/send/filter-send-request"),G=t("services/send/filter-send-result"),Z=t("services/control/get-session-properties"),Y=t("services/control/set-session-properties-listener"),X=t("services/control/session-properties-event"),K=t("services/control/session-properties-event-batch"),Q=t("services/control/messaging-client-forward-send-request"),J=t("services/control/messaging-send-request"),tt=t("services/control/messaging-client-send-request"),et=t("services/control/messaging-response"),nt=t("services/control/messaging-filter-send-request"),rt=t("services/control/messaging-filter-send-response"),it=t("services/control/messaging-filter-response"),ot=t("topics/details/topic-specification-info"),st=t("services/topic-notifications/topic-notification-deregistration-request"),at=t("services/topic-notifications/topic-notification-event"),ut=t("services/topic-notifications/topic-notification-descendant-event"),ct=t("services/topic-notifications/topic-notification-selection"),lt=t("services/topic-notifications/topic-notification-deselection"),ft=t("services/missing-topic/missing-topic-request"),dt=t("services/timeseries/time-series-append-request"),ht=t("services/timeseries/time-series-edit-request"),pt=t("services/timeseries/time-series-event-metadata"),vt=t("services/timeseries/range-query-request"),gt=t("services/timeseries/range-query-result");e.exports={FETCH:{id:2,name:"Fetch",request:i,response:null},SUBSCRIBE:{id:3,name:"Subscribe",request:r,response:null},UNSUBSCRIBE:{id:4,name:"Unsubscribe",request:r,response:null},SUBSCRIBE_CLIENT:{id:10,name:"Subscribe session",request:v,response:null},UNSUBSCRIBE_CLIENT:{id:11,name:"Unsubscribe session",request:v,response:null},CLOSE_CLIENT:{id:14,name:"Close client",request:p,response:null},SEND:{id:6,name:"Send",request:C,response:null},SEND_TO_SESSION:{id:28,name:"Send to session",request:A,response:null},SUBSCRIPTION_NOTIFICATION:{id:40,name:"Subscription Notification",request:o,response:null},GET_TOPIC_DETAILS:{id:41,name:"Get Topic Details",request:a,response:a},UNSUBSCRIPTION_NOTIFICATION:{id:42,name:"Unsubscription Notification",request:s,response:null},ADD_TOPIC:{id:46,name:"Add Topic",request:u,response:u},REMOVE_TOPIC:{id:47,name:"Remove Topic",request:c,response:null},MISSING_TOPIC:{id:50,name:"Missing topic",request:ft,response:Boolean},TOPIC_SCOPED_WILL_REGISTRATION:{id:53,name:"Topic Will Registration",request:T,response:k},TOPIC_SCOPED_WILL_DEREGISTRATION:{id:54,name:"Topic Will Deregistration",request:T,response:null},SYSTEM_PING:{id:55,name:"System Ping",request:null,response:null},USER_PING:{id:56,name:"User Ping",request:null,response:null},CHANGE_PRINCIPAL:{id:5,name:"Change Principal",request:B,response:Boolean},GET_SYSTEM_AUTHENTICATION:{id:57,name:"Get System Authentication",request:null,response:$},UPDATE_SYSTEM_AUTHENTICATION:{id:58,name:"Update System Authentication",request:E,response:_},GET_SECURITY_CONFIGURATION:{id:59,name:"Get Security Configuration",request:null,response:S},UPDATE_SECURITY_CONFIGURATION:{id:60,name:"Update Security Configuration",request:E,response:_},UPDATE_TOPIC:{id:61,name:"Update Topic",request:l,response:h},SERVER_CONTROL_REGISTRATION:{id:18,name:"Server Control Registration",request:F,response:null},SERVER_CONTROL_DEREGISTRATION:{id:19,name:"Server Control Deregistration",request:U,response:null},TOPIC_CONTROL_REGISTRATION:{id:20,name:"Topic Control Registration",request:R,response:null},TOPIC_CONTROL_DEREGISTRATION:{id:21,name:"Topic Control Deregistration",request:M,response:null},AUTHENTICATION_CONTROL_REGISTRATION:{id:22,name:"Authentication Control Registration",request:y,response:null},AUTHENTICATION_CONTROL_DEREGISTRATION:{id:23,name:"Authentication Control Deregistration",request:b,response:null},AUTHENTICATION:{id:24,name:"Authentication Control",request:w,response:x},UPDATE_SOURCE_REGISTRATION:{id:30,name:"Update Source Registration",request:I,response:q},UPDATE_SOURCE_DEREGISTRATION:{id:31,name:"Update Source Deregistration",request:O,response:null},UPDATE_SOURCE_STATE:{id:32,name:"Update Source State",request:V,response:null},UPDATE_SOURCE_UPDATE:{id:35,name:"Update Source Update",request:N,response:P},SEND_RECEIVER_CLIENT:{id:62,name:"Control Client Send Service",request:j,response:null},MESSAGE_RECEIVER_CONTROL_REGISTRATION:{id:63,name:"Message Receiver Control Registration",request:H,response:null},MESSAGE_RECEIVER_CONTROL_DEREGISTRATION:{id:64,name:"Message Receiver Control Deregistration",request:z,response:null},FILTER_SUBSCRIBE:{id:65,name:"Subscribe to filter",request:g,response:m},FILTER_UNSUBSCRIBE:{id:66,name:"Unsubscribe from filter",request:g,response:m},SEND_TO_FILTER:{id:29,name:"Send to filter",request:W,response:G},GET_SESSION_PROPERTIES:{id:67,name:"Get session properties",request:Z,response:Z},SESSION_PROPERTIES_REGISTRATION:{id:69,name:"Set session properties listener - legacy, see SESSION_PROPERTIES_REGISTRATION_2",request:Y,response:null},SESSION_PROPERTIES_EVENT:{id:70,name:"Session properties event - legacy, see SESSION_PROPERTIES_EVENT_2",request:X,response:null},MESSAGING_SEND:{id:85,name:"Send request",request:J,response:et},MESSAGING_RECEIVER_SERVER:{id:86,name:"Send request to session",request:tt,response:et},NOTIFY_SUBSCRIPTION:{id:87,name:"TopicSpecification Subscription Notification",request:ot,response:null},MESSAGING_RECEIVER_CLIENT:{id:88,name:"Receive requests from other clients",request:Q,response:et},MESSAGING_FILTER_SEND:{id:102,name:"Message Filter send",request:nt,response:rt},FILTER_RESPONSE:{id:103,name:"Messaging Filter response",request:it,response:null},TOPIC_NOTIFICATION_DEREGISTRATION:{id:91,name:"Topic notification deregistration",request:st,response:null},TOPIC_NOTIFICATION_EVENTS:{id:92,name:"Topic notification events",request:at,response:null},TOPIC_DESCENDANT_EVENTS:{id:93,name:"Topic descendant events",request:ut,response:null},TOPIC_NOTIFICATION_SELECTION:{id:94,name:"Topic notification selection",request:ct,response:null},TOPIC_NOTIFICATION_DESELECTION:{id:95,name:"Topic notification deselection",request:lt,response:null},MESSAGING_RECEIVER_CONTROL_REGISTRATION:{id:97,name:"Request handler registration",request:H,response:null},MESSAGING_RECEIVER_CONTROL_DEREGISTRATION:{id:98,name:"Request handler deregistration",request:z,response:null},UPDATE_SOURCE_SET:{id:77,name:"Update source set",request:L,response:P},UPDATE_SOURCE_DELTA:{id:78,name:"Update source delta",request:D,response:P},UPDATE_TOPIC_SET:{id:79,name:"Update topic set",request:f,response:h},UPDATE_TOPIC_DELTA:{id:80,name:"Update topic delta",request:d,response:h},SESSION_PROPERTIES_REGISTRATION_2:{id:81,name:"Session Properties registration 2",request:Y,response:null},SESSION_PROPERTIES_EVENT_2:{id:82,name:"Session Properties event 2",request:K,response:null},TOPIC_REMOVAL:{id:83,name:"Topic removal",request:c,response:null},RANGE_QUERY:{id:84,name:"Time series range query",request:vt,response:gt},TIME_SERIES_APPEND:{id:99,name:"Append an event to a time series",request:dt,response:pt},TIME_SERIES_EDIT:{id:100,name:"Edit an event in a time series",request:ht,response:pt}}},{"../../features/security":131,"../../selectors/topic-selector":464,"services/add-topic/add-topic":266,"services/authentication/security-command-script":271,"services/authentication/security-command-script-result":269,"services/change-principal/change-principal-request":275,"services/control-client/client-filter-subscribe-request":282,"services/control-client/client-filter-subscribe-response":284,"services/control-client/client-subscribe-request":286,"services/control/close-client-request":288,"services/control/control-registration-params":290,"services/control/control-registration-request":292,"services/control/get-session-properties":294,"services/control/message-receiver-control-registration-params":296,"services/control/message-receiver-control-registration-request":298,"services/control/messaging-client-forward-send-request":300,"services/control/messaging-client-send-request":302,"services/control/messaging-filter-response":304,"services/control/messaging-filter-send-request":306,"services/control/messaging-filter-send-response":308,"services/control/messaging-response":310,"services/control/messaging-send-request":312,"services/control/session-properties-event":318,"services/control/session-properties-event-batch":315,"services/control/set-session-properties-listener":320,"services/control/topic-control-registration-params":322,"services/control/topic-control-registration-request":324,"services/fetch/fetch-request":329,"services/get-topic-details/get-topic-details":331,"services/missing-topic/missing-topic-request":333,"services/remove-topic/remove-topic":335,"services/security/authentication-control-registration-parameters":337,"services/security/authentication-control-registration-request":339,"services/security/authentication-request":341,"services/security/authentication-response":343,"services/send/filter-send-request":347,"services/send/filter-send-result":349,"services/send/send-request":352,"services/send/session-forward-send-request":354,"services/send/session-send-request":356,"services/subscription-notification/subscription-notification":360,"services/timeseries/range-query-request":363,"services/timeseries/range-query-result":365,"services/timeseries/time-series-append-request":367,"services/timeseries/time-series-edit-request":369,"services/timeseries/time-series-event-metadata":371,"services/topic-notifications/topic-notification-deregistration-request":374,"services/topic-notifications/topic-notification-descendant-event":376,"services/topic-notifications/topic-notification-deselection":378,"services/topic-notifications/topic-notification-event":380,"services/topic-notifications/topic-notification-selection":382,"services/topic-update/update-source-delta-request":385,"services/topic-update/update-source-deregistration-request":387,"services/topic-update/update-source-registration-request":389,"services/topic-update/update-source-set-request":391,"services/topic-update/update-source-state":395,"services/topic-update/update-source-state-request":393,"services/topic-update/update-source-update":399,"services/topic-update/update-source-update-response":397,"services/unsubscription-notification/unsubscription-notification":401,"services/update-topic/update-topic-delta-request":403,"services/update-topic/update-topic-request":405,"services/update-topic/update-topic-response":407,"services/update-topic/update-topic-set-request":409,"services/wills/topic-will-parameters":411,"services/wills/will-registration-result":413,"topics/details/topic-specification-info":429}],359:[function(t,e,n){var r=t("topics/details/topic-info-serialiser"),i=t("./subscription-notification");e.exports={read:function(t){var e=r.read(t);return new i(e)},write:function(t,e){r.write(t,e.info)}}},{"./subscription-notification":360,"topics/details/topic-info-serialiser":426}],360:[function(t,e,n){e.exports=function(t){this.info=t}},{}],361:[function(t,e,n){function r(t,e){f.writeInt64(t,e.value),l.write(t,e.type)}function i(t,e){r(t,e.anchor),r(t,e.span)}function o(t){var e=f.readInt64(t),n=l.read(t,u.Type);return new u(e,n)}function s(t){var e=o(t),n=o(t);return new c(e,n)}var a=t("features/time-series/range-query-parameters"),u=t("features/time-series/point"),c=t("features/time-series/range"),l=t("serialisers/byte-encoded-enum-serialiser"),f=t("io/codec");e.exports={read:function(t){var e=l.read(t,a.QueryType),n=s(t),r=s(t),i=f.readInt64(t);return new a(e,n,r,i)},write:function(t,e){l.write(t,e.queryType),i(t,e.viewRange),i(t,e.editRange),f.writeInt64(t,e.limit)}}},{"features/time-series/point":216,"features/time-series/range":220,"features/time-series/range-query-parameters":219,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263}],362:[function(t,e,n){var r=t("services/timeseries/range-query-parameters-serialiser"),i=t("./range-query-request"),o=t("io/codec");e.exports={read:function(t){var e=o.readString(t),n=r.read(t);return new i(e,n)},write:function(t,e){o.writeString(t,e.topicPath),r.write(t,e.parameters)}}},{"./range-query-request":363,"io/codec":236,"services/timeseries/range-query-parameters-serialiser":361}],363:[function(t,e,n){e.exports=function(t,e){this.topicPath=t,this.parameters=e}},{}],364:[function(t,e,n){function r(t,e){this.sequence=t,this.timestamp=e,this.with=function(n,i){return t.equals(n)&&e.equals(i)?this:new r(t,e)},this.equals=function(n){return!!(n&&n instanceof r)&&(t.equals(n.sequence)&&e.equals(n.timestamp))}}function i(t,e,n){var r=h.readInt64(t).add(e.sequence),i=h.readInt64(t).add(e.timestamp),o=h.readBytes(t),s=n[o],a=s||o.toString("utf-8");return new l(r.toNumber(),i.toNumber(),a)}function o(t,e,n){var r=i(t,e,n);return f.create(r,r,h.readBytes(t))}function s(t,e,n){var r=i(t,e,n),o=i(t,e,n);return f.create(o,r,h.readBytes(t))}function a(t){return new r(h.readInt64(t),h.readInt64(t))}function u(t,e){e[h.readBytes(t)]=h.readString(t)}var c=t("./range-query-result"),l=t("./time-series-event-metadata"),f=t("./time-series-event"),d=t("data/datatypes"),h=t("io/codec"),p=t("long");r.IDENTITY=new r(p.MAX_VALUE,p.MAX_VALUE),e.exports={read:function(t){for(var e=d.get(h.readString(t)),n=h.readInt64(t),i=new r(p.ZERO,p.ZERO),l={},f=[],v=h.readInt32(t),g=0;g<v;++g)switch(h.readByte(t)){case 0:f.push(o(t,i,l));break;case 1:f.push(s(t,i,l));break;case 2:i=a(t);break;case 3:u(t,l);break;default:u(t,l)}return new c(e,n,f)},write:function(){}}},{"./range-query-result":365,"./time-series-event":372,"./time-series-event-metadata":371,"data/datatypes":177,"io/codec":236,long:476}],365:[function(t,e,n){var r=t("features/time-series/query-result"),i=t("long");e.exports=function(t,e,n){this.createQueryResult=function(o,s){if(!t.canReadAs(o))throw new Error("Time series topic has an incompatible event data type: "+t);return new r(e,i.fromNumber(n.length),s,n.map(function(e){return e.withValue(t.readAs(o,e.value))}))}}},{"features/time-series/query-result":217,long:476}],366:[function(t,e,n){var r=t("./time-series-append-request"),i=t("data/datatypes"),o=t("io/codec");e.exports={read:function(t){var e=o.readString(t),n=i.get(o.readString(t)),s=o.readBytes(t);return new r(e,n,s)},write:function(t,e){o.writeString(t,e.path),o.writeString(t,e.dataType.name()),o.writeBytes(t,e.value)}}},{"./time-series-append-request":367,"data/datatypes":177,"io/codec":236}],367:[function(t,e,n){e.exports=function(t,e,n){this.path=t,this.dataType=e,this.value=n}},{}],368:[function(t,e,n){var r=t("./time-series-edit-request"),i=t("data/datatypes"),o=t("io/codec");e.exports={read:function(t){var e=o.readString(t),n=i.get(o.readString(t)),s=o.readInt64(t),a=o.readBytes(t);return new r(e,n,s,a)},write:function(t,e){o.writeString(t,e.path),o.writeString(t,e.dataType.name()),o.writeInt64(t,e.sequence),o.writeBytes(t,e.value)}}},{"./time-series-edit-request":369,"data/datatypes":177,"io/codec":236}],369:[function(t,e,n){e.exports=function(t,e,n,r){this.path=t,this.dataType=e,this.sequence=n,this.value=r}},{}],370:[function(t,e,n){var r=t("services/timeseries/time-series-event-metadata"),i=t("io/codec");e.exports={read:function(t){var e=i.readInt64(t),n=i.readInt64(t),o=i.readString(t);return new r(e.toNumber(),n.toNumber(),o)},write:function(t,e){i.writeInt64(t,e.sequence),i.writeInt64(t,e.timestamp),i.writeString(t,e.author)}}},{"io/codec":236,"services/timeseries/time-series-event-metadata":371}],371:[function(t,e,n){function r(t,e,n){this.sequence=t,this.timestamp=e,this.author=n}r.prototype.equals=function(t){return!!(t&&t instanceof r)&&(this.sequence===t.sequence&&this.timestamp===t.timestamp&&this.author===t.author)},r.prototype.toString=function(){return"sequence="+this.sequence+" timestamp="+this.timestamp+" author="+this.author},e.exports=r},{}],372:[function(t,e,n){function r(t,e,n){this.metadata=t,this.originalEvent=e,this.value=n,this.sequence=t.sequence,this.timestamp=t.timestamp,this.author=t.author,this.isEditEvent=!t.equals(e),this.isOriginalEvent=!this.isEditEvent}r.prototype.withValue=function(t){return new r(this.metadata,this.originalEvent,t)},r.prototype.equals=function(t){return!!(t&&t instanceof r)&&(this.metadata.equals(t.metadata)&&this.originalEvent.equals(t.originalEvent)&&this.value===t.value)},r.prototype.toString=function(){return(this.isEditEvent?"Edit of ["+this.originalEvent+"] ":"")+"["+this.metadata+"] "+this.value},r.create=function(t,e,n){return new r(t,e,n)},e.exports=r},{}],373:[function(t,e,n){var r=t("conversation/conversation-id-serialiser"),i={write:function(t,e){r.write(t,e.cid)}};e.exports=i},{"conversation/conversation-id-serialiser":168}],374:[function(t,e,n){e.exports=function(t){this.cid=t}},{}],375:[function(t,e,n){var r=t("serialisers/byte-encoded-enum-serialiser"),i=t("io/codec"),o=t("conversation/conversation-id-serialiser"),s=t("../../../features/topic-notifications").TopicNotificationType,a=t("services/topic-notifications/topic-notification-descendant-event"),u={read:function(t){var e=o.read(t),n=i.readString(t),u=r.read(t,s);return new a(e,n,u)}};e.exports=u},{"../../../features/topic-notifications":134,"conversation/conversation-id-serialiser":168,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263,"services/topic-notifications/topic-notification-descendant-event":376}],376:[function(t,e,n){e.exports=function(t,e,n){this.cid=t,this.path=e,this.type=n,this.isDescendantEvent=!0}},{}],377:[function(t,e,n){var r=t("conversation/conversation-id-serialiser"),i=t("io/codec"),o=t("services/topic-notifications/topic-notification-deselection"),s=t("topics/topic-selector-serialiser"),a={read:function(t){var e=r.read(t),n=i.readString(t);return new o(e,n)},write:function(t,e){r.write(t,e.cid),s.write(t,e.selector)}};e.exports=a},{"conversation/conversation-id-serialiser":168,"io/codec":236,"services/topic-notifications/topic-notification-deselection":378,"topics/topic-selector-serialiser":437}],378:[function(t,e,n){e.exports=function(t,e){this.cid=t,this.selector=e}},{}],379:[function(t,e,n){var r=t("io/codec"),i=t("conversation/conversation-id-serialiser"),o=t("services/topic-notifications/topic-specification-serialiser"),s=t("serialisers/byte-encoded-enum-serialiser"),a=t("../../../features/topic-notifications").TopicNotificationType,u=t("services/topic-notifications/topic-notification-event"),c={read:function(t){var e=i.read(t),n=r.readString(t),c=s.read(t,a),l=o.read(t);return new u(e,n,c,l)}};e.exports=c},{"../../../features/topic-notifications":134,"conversation/conversation-id-serialiser":168,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263,"services/topic-notifications/topic-notification-event":380,"services/topic-notifications/topic-specification-serialiser":383}],380:[function(t,e,n){e.exports=function(t,e,n,r){this.cid=t,this.path=e,this.type=n,this.specification=r,this.isDescendantEvent=!1}},{}],381:[function(t,e,n){var r=t("conversation/conversation-id-serialiser"),i=t("io/codec"),o=t("services/topic-notifications/topic-notification-selection"),s=t("topics/topic-selector-serialiser"),a={read:function(t){var e=r.read(t),n=i.readString(t);return new o(e,n)},write:function(t,e){r.write(t,e.cid),s.write(t,e.selector)}};e.exports=a},{"conversation/conversation-id-serialiser":168,"io/codec":236,"services/topic-notifications/topic-notification-selection":382,"topics/topic-selector-serialiser":437}],382:[function(t,e,n){e.exports=function(t,e){this.cid=t,this.selector=e}},{}],383:[function(t,e,n){var r=t("io/codec"),i=t("conversation/conversation-id-serialiser"),o={read:function(t){return{type:i.read(t),properties:r.readDictionary(t,r.readString)}}};e.exports=o},{"conversation/conversation-id-serialiser":168,"io/codec":236}],384:[function(t,e,n){var r=t("conversation/conversation-id-serialiser"),i=t("io/codec");e.exports={read:function(t){return{cid:r.read(t),path:t.readString(),id:t.readInt32(),bytes:t.readBytes()}},write:function(t,e){r.write(t,e.cid),i.writeString(t,e.path),i.writeInt32(t,e.id),i.writeBytes(t,e.bytes)}}},{"conversation/conversation-id-serialiser":168,"io/codec":236}],385:[function(t,e,n){e.exports=function(t,e,n,r){this.cid=t,this.path=e,this.id=n,this.bytes=r}},{}],386:[function(t,e,n){var r=t("conversation/conversation-id-serialiser");e.exports={read:function(t){return{cid:r.read(t)}},write:function(t,e){r.write(t,e.cid)}}},{"conversation/conversation-id-serialiser":168}],387:[function(t,e,n){e.exports=function(t){this.cid=t}},{}],388:[function(t,e,n){var r=t("conversation/conversation-id-serialiser"),i=t("io/codec");e.exports={read:function(t){return{cid:r.read(t),path:i.readString(t)}},write:function(t,e){r.write(t,e.cid),i.writeString(t,e.path)}}},{"conversation/conversation-id-serialiser":168,"io/codec":236}],389:[function(t,e,n){e.exports=function(t,e){this.cid=t,this.path=e}},{}],390:[function(t,e,n){var r=t("conversation/conversation-id-serialiser"),i=t("io/codec");e.exports={read:function(t){return{cid:r.read(t),path:t.readString(),bytes:t.readBytes()}},write:function(t,e){r.write(t,e.cid),i.writeString(t,e.path),i.writeBytes(t,e.bytes)}}},{"conversation/conversation-id-serialiser":168,"io/codec":236}],391:[function(t,e,n){e.exports=function(t,e,n){this.cid=t,this.path=e,this.bytes=n}},{}],392:[function(t,e,n){var r=t("services/topic-update/update-source-state-serialiser"),i=t("conversation/conversation-id-serialiser");e.exports={read:function(t){return{cid:i.read(t),old:r.read(t),current:r.read(t)}},write:function(t,e){i.write(t,e.cid),r.write(t,e.old),r.write(t,e.current)}}},{"conversation/conversation-id-serialiser":168,"services/topic-update/update-source-state-serialiser":394}],393:[function(t,e,n){e.exports=function(t,e,n){this.cid=t,this.old=e,this.current=n}},{}],394:[function(t,e,n){var r=t("serialisers/enum-converter"),i={init:0,active:1,closed:2,standby:3};e.exports={read:function(t){return r.read(t,i)},write:function(t,e){r.write(t,e,i)}}},{"serialisers/enum-converter":264}],395:[function(t,e,n){e.exports=function(t){this.state=t}},{}],396:[function(t,e,n){var r=t("services/topic-update/update-source-update-response"),i=t("serialisers/enum-converter"),o=t("io/codec"),s={SUCCESS:0,INCOMPATIBLE_UPDATE:1,UPDATE_FAILED:2,INVALID_UPDATER:3,MISSING_TOPIC:4,INVALID_ADDRESS:5,DUPLICATES:6,EXCLUSIVE_UPDATER_CONFLICT:7,DELTA_WITHOUT_VALUE:8,CLUSTER_REPARTITION:9,INCOMPATIBLE_STATE:10};e.exports={read:function(t){var e=i.read(t,s);return new r("SUCCESS"===e?null:e)},write:function(t,e){e.error?i.write(t,e.error,s):o.writeByte(t,0)}}},{"io/codec":236,"serialisers/enum-converter":264,"services/topic-update/update-source-update-response":397}],397:[function(t,e,n){e.exports=function(t){this.error=t}},{}],398:[function(t,e,n){var r=t("conversation/conversation-id-serialiser"),i=t("update/serialiser"),o=t("io/codec");e.exports={read:function(t){return{cid:r.read(t),path:o.readString(t),update:i.read(t)}},write:function(t,e){r.write(t,e.cid),o.writeString(t,e.path),i.write(t,e.update)}}},{"conversation/conversation-id-serialiser":168,"io/codec":236,"update/serialiser":443}],399:[function(t,e,n){e.exports=function(t,e,n){this.cid=t,this.path=e,this.update=n}},{}],400:[function(t,e,n){var r=t("../../../topics/topics").UnsubscribeReason,i=t("topics/details/topic-id-serialiser"),o=t("./unsubscription-notification"),s=t("serialisers/byte-encoded-enum-serialiser");e.exports={read:function(t){var e=i.read(t),n=s.read(t,r);return new o(e,n)},write:function(t,e){i.write(t,e.id),s.write(t,e.reason)}}},{"../../../topics/topics":468,"./unsubscription-notification":401,"serialisers/byte-encoded-enum-serialiser":263,"topics/details/topic-id-serialiser":425}],401:[function(t,e,n){e.exports=function(t,e){this.id=t,this.reason=e}},{}],402:[function(t,e,n){var r=t("io/codec");e.exports={read:function(t){return{path:t.readString(),id:t.readInt32(),bytes:t.readBytes()}},write:function(t,e){r.writeString(t,e.path),r.writeInt32(t,e.id),r.writeBytes(t,e.bytes)}}},{"io/codec":236}],403:[function(t,e,n){e.exports=function(t,e,n){this.path=t,this.id=e,this.bytes=n}},{}],404:[function(t,e,n){var r=t("../../update/serialiser"),i=t("io/codec");e.exports={read:function(t){return{path:i.readString(t),update:r.read(t)}},write:function(t,e){i.writeString(t,e.path),r.write(t,e.update)}}},{"../../update/serialiser":443,"io/codec":236}],405:[function(t,e,n){e.exports=function(t,e){this.path=t,this.update=e}},{}],406:[function(t,e,n){var r=t("serialisers/byte-encoded-enum-serialiser"),i=t("./update-topic-response");e.exports={read:function(t){var e=r.read(t,i);return{reason:e.reason,isError:e!==i.SUCCESS}},write:function(t,e){r.write(t,e.response)}}},{"./update-topic-response":407,"serialisers/byte-encoded-enum-serialiser":263}],407:[function(t,e,n){var r=t("../../../topics/topics").UpdateFailReason;e.exports={SUCCESS:{id:0,reason:null},INCOMPATIBLE_UPDATE:{id:1,reason:r.INCOMPATIBLE_UPDATE},UPDATE_FAILED:{id:2,reason:r.UPDATE_FAILED},INVALID_UPDATER:{id:3,reason:r.INVALID_UPDATER},MISSING_TOPIC:{id:4,reason:r.MISSING_TOPIC},INVALID_ADDRESS:{id:5,reason:r.INVALID_ADDRESS},DUPLICATES:{id:6,reason:r.DUPLICATES},EXCLUSIVE_UPDATER_CONFLICT:{id:7,reason:r.EXCLUSIVE_UPDATER_CONFLICT},DELTA_WITHOUT_VALUE:{id:8,reason:r.DELTA_WITHOUT_VALUE},CLUSTER_REPARTITION:{id:9,reason:r.CLUSTER_REPARTITION}}},{"../../../topics/topics":468}],408:[function(t,e,n){var r=t("io/codec");e.exports={read:function(t){return{path:t.readString(),bytes:t.readBytes()}},write:function(t,e){r.writeString(t,e.path),r.writeBytes(t,e.bytes)}}},{"io/codec":236}],409:[function(t,e,n){e.exports=function(t,e){this.path=t,this.bytes=e}},{}],410:[function(t,e,n){var r=t("serialisers/byte-encoded-enum-serialiser"),i=t("./topic-will-parameters"),o=t("io/codec"),s={read:function(t){var e=o.readString(t),n=r.read(t,i.Will);return new i(e,n)},write:function(t,e){o.writeString(t,e.path),r.write(t,e.will)}};e.exports=s},{"./topic-will-parameters":411,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263}],411:[function(t,e,n){function r(t,e){this.path=t,this.will=e}r.prototype.toString=function(){return"TopicWillParams ["+this.will+", "+this.path+"]"},r.Will={REMOVE_TOPICS:0},e.exports=r},{}],412:[function(t,e,n){var r=t("serialisers/byte-encoded-enum-serialiser"),i=t("./will-registration-result"),o={read:function(t){return r.read(t,i)},write:function(t,e){r.write(t,e)}};e.exports=o},{"./will-registration-result":413,"serialisers/byte-encoded-enum-serialiser":263}],413:[function(t,e,n){var r={SUCCESS:0,GROUP_CONFLICT:1,TOPIC_TREE_CONFLICT:2};r.toString=function(){return"WillRegistrationResult"},e.exports=r},{}],414:[function(t,e,n){var r=t("session/session-id"),i=t("io/codec"),o={read:function(t){var e=i.readInt64(t),n=i.readInt64(t);return new r(e,n)},write:function(t,e){i.writeInt64(t,e.server),i.writeInt64(t,e.value)}};e.exports=o},{"io/codec":236,"session/session-id":415}],415:[function(t,e,n){function r(t,e){this.server=t,this.value=e}var i=t("long");r.prototype.toString=function(){var t="0000000000000000"+this.server.toUnsigned().toString(16),e="0000000000000000"+this.value.toUnsigned().toString(16);return(t.substr(t.length-16)+"-"+e.substr(e.length-16)).toLowerCase()},r.prototype.toValue=function(){return this.toString()},r.fromString=function(t){var e,n=t.split("-");try{e=new r(i.fromString(n[0],!1,16),i.fromString(n[1],!1,16))}catch(t){throw new Error("SessionId must consist of two hexadecimal parts, joined with a '-'")}return e},r.prototype.equals=function(t){return t instanceof r&&t.server instanceof i&&t.value instanceof i&&(0===this.server.compare(t.server)&&0===this.value.compare(t.value))},r.validate=function(t){if(t instanceof r)return t;if(0===t.length||t.indexOf("-")<0||t.indexOf(" ")>=0)return!1;try{return r.fromString(t)}catch(t){return!1}},e.exports=r},{long:476}],416:[function(t,e,n){var r=t("util/interface")._implements,i=t("events/emitter"),o=t("events/result"),s=t("features/messages"),a=t("features/topic-notifications"),u=t("features/security").Security,c=t("features/topic-control"),l=t("features/client-control"),f=t("features/time-series/time-series-impl"),d=[t("features/topics"),t("features/ping")],h=t("../../options"),p=r(t("../../session"),function(t,e,n){var r=i.assign(this),o=this;n.on({reconnect:function(){r.emit("reconnect")},disconnect:function(t){r.emit("disconnect",t)},error:function(t){r.emit("error",t)},close:function(t){r.emit("close",t)}}),d.forEach(function(t){var e=new t(n);for(var r in e)o[r]=e[r]}),this.topics=new c(n,this),this.clients=new l(n,this),this.messages=new s(n,this),this.notifications=new a(n,this),this.security=new u(n,this),this.timeseries=new f(n,this),this.sessionID=t.toString(),this.options=e.with({credentials:void 0}),this.close=function(){return n.close(),o},this.isClosed=function(){var t=n.getState();return"closing"===t||"closed"===t},this.isConnected=function(){return n.isConnected()},this.toString=function(){return"Session<"+o.sessionID+" "+n.getState()+">"},this.getPrincipal=function(){return e.principal||""}});e.exports=p,e.exports.create=function(t,e){function n(t){u.off("connect",n),u.off("close",r),u.off("error",r),s.emit("complete",new p(t,e,u))}function r(t){u.off("connect",n),u.off("close",r),u.off("error",r),s.error(t)}e=new h("string"==typeof e?{host:e}:e);var s=new i,a=new o(s),u=t(e);return u.on("connect",n),u.on("close",r),u.on("error",r),u.connect(),a}},{"../../options":463,"../../session":466,"events/emitter":206,"events/result":207,"features/client-control":209,"features/messages":210,"features/ping":211,"features/security":212,"features/time-series/time-series-impl":221,"features/topic-control":222,"features/topic-notifications":225,"features/topics":226,"util/interface":448}],417:[function(t,e,n){var r=t("session/session-token");e.exports=function(t){return new r(t.readMany(r.TOKEN_LENGTH))}},{"session/session-token":418}],418:[function(t,e,n){(function(t){function n(t){this.put=function(e){e.writeBytes(t)},this.toString=function(){return t.toString("ascii")}}n.fromExternalString=function(e){return new n(new t(e,"ascii"))},n.TOKEN_LENGTH=24,e.exports=n}).call(this,t("buffer").Buffer)},{buffer:94}],419:[function(t,e,n){function r(t,e){var n=new c;e.isEditEvent?(f.writeByte(n,v),d.write(n,e.originalEvent)):f.writeByte(n,p),d.write(n,e);var r=t(e.value);return f.writeBytes(n,r.$buffer),new u(n.getBuffer())}function i(t,e){var n=new l(e.$buffer),r=f.readByte(n);switch(r){case p:return function(t,e){var n=d.read(e),r=t(f.readBytes(e));return h.create(n,n,r)}(t,n);case v:return function(t,e){var n=d.read(e),r=d.read(e),i=t(f.readBytes(e));return h.create(r,n,i)}(t,n);default:throw new Error("Unrecognised event type: "+r)}}function o(t,e,n){return new u(t,e,n)}function s(t,e,n){a.call(this,t,h,o,function(t){return function(t,e){if(!e)throw new Error("Cannot convert null event to Bytes");return r(t,e)}(n,t)},function(t){return i(e,t)},[],!0),this.writeValue=function(t){return r(n,t)},this.validate=function(){}}var a=t("data/abstract-datatype"),u=t("data/bytes-impl"),c=t("io/buffer-output-stream"),l=t("io/buffer-input-stream"),f=t("io/codec"),d=t("services/timeseries/time-series-event-metadata-serialiser"),h=t("services/timeseries/time-series-event"),p=0,v=1;e.exports=s,e.exports.create=function(t){return new s("timeseriesevent-"+t.name(),t.readValue,t.toBytes)}},{"data/abstract-datatype":171,"data/bytes-impl":176,"io/buffer-input-stream":234,"io/buffer-output-stream":235,"io/codec":236,"services/timeseries/time-series-event":372,"services/timeseries/time-series-event-metadata-serialiser":370}],420:[function(t,e,n){var r=t("io/codec");e.exports={write:function(t,e){r.writeString(t,e.emptyFieldValue)},read:function(t){return{emptyFieldValue:r.readString(t)}}}},{"io/codec":236}],421:[function(t,e,n){var r=t("io/codec");e.exports={write:function(t,e){r.writeString(t,e.handler)},read:function(t){return{handler:r.readString(t)}}}},{"io/codec":236}],422:[function(t,e,n){var r=t("io/codec");e.exports={write:function(t,e){r.writeString(t,e.slaveMasterTopic)},read:function(t){return{slaveMasterTopic:r.readString(t)}}}},{"io/codec":236}],423:[function(t,e,n){function r(t){switch(t){case s.RECORD:return c;case s.ROUTING:return l;case s.SLAVE:return f}return null}var i=t("io/codec"),o=t("serialisers/byte-encoded-enum-serialiser"),s=t("../../../topics/topics").TopicType,a=t("schema/serialiser"),u=t("./topic-properties-serialiser"),c=t("./record-topic-details-serialiser"),l=t("./routing-topic-details-serialiser"),f=t("./slave-topic-details-serialiser");e.exports={read:function(t){var e={};if(i.readBoolean(t)){if(e.type=o.read(t,s),!1===i.readBoolean(t))return e;if(e.schema=a.read(t),!1===i.readBoolean(t))return e;i.readBoolean(t);var n=i.readBoolean(t),c=i.readString(t),l=u.read(t),f=r(e.type),d={};f&&(d=f.read(t)),d.tidyOnUnsubscribe=n,d.properties=l,d.reference=c,e.attributes=d}return e},write:function(t,e){if(e){i.writeBoolean(t,!0),o.write(t,e.type),i.writeBoolean(t,!0),e.schema&&a.write(t,e.schema),i.writeBoolean(t,!0),i.writeBoolean(t,!0),i.writeBoolean(t,e.attributes.tidyOnUnsubscribe),i.writeString(t,e.attributes.reference),u.write(t,e.attributes.properties);var n=r(e.type);n&&n.write(t,e.attributes)}else i.writeBoolean(t,!1)}}},{"../../../topics/topics":468,"./record-topic-details-serialiser":420,"./routing-topic-details-serialiser":421,"./slave-topic-details-serialiser":422,"./topic-properties-serialiser":427,"io/codec":236,"schema/serialiser":260,"serialisers/byte-encoded-enum-serialiser":263}],424:[function(t,e,n){function r(t){for(var e in o)if(o[e]===t)return!0;return!1}function i(t,e,n){var r={};for(var i in f)r[i]=f[i];if(n){var o={};for(var s in n)switch(s){case"TIDY_ON_UNSUBSCRIBE":r.tidyOnUnsubscribe="true"===n.TIDY_ON_UNSUBSCRIBE;break;case"SLAVE_MASTER_TOPIC":r.slaveMasterTopic=n.SLAVE_MASTER_TOPIC;break;default:o[s]=n[s]}r.properties=o}return{type:t,schema:e,attributes:r}}var o=t("../../../topics/topics").TopicType,s=t("data/datatypes"),a=t("schema/schema"),u=t("metadata/string"),c=t("metadata/util"),l=t("content/util"),f={slaveMasterTopic:"",emptyFieldValue:"",handler:"",tidyOnUnsubscribe:!1,properties:{},reference:""};e.exports.deriveDetails=function(t){var e,n={};if(void 0===t)return i(o.STATELESS);if(r(t))return t===o.SINGLE_VALUE&&(e=new u),i(t,a(e));if(c.isMetadata(t))e=t,n=i(c.getType(e),a(e));else if(l.isRecordContent(t))e=c.deriveMetadata(t),n=i(c.getType(e),a(e));else if(r(t.type))n=i(t.type,null,t.properties);else{var f=s.get(t);if(!f)throw new Error("Invalid topic specification / details: "+t.toString());n=i(o[f.name().toUpperCase()],null)}return n},e.exports.deriveValue=function(t,e){if(void 0!==e&&!(c.isMetadata(e)||r(e)||r(e.type))){if(l.isRecordContent(e))return e;var n=s.get(t);return n?n.from(e):void 0}},e.exports.detailsFromSpecification=function(t){return i(t.type,{},t.properties)}},{"../../../topics/topics":468,"content/util":164,"data/datatypes":177,"metadata/string":243,"metadata/util":245,"schema/schema":259}],425:[function(t,e,n){var r=t("io/codec"),i={read:function(t){return r.readInt32(t)},write:function(t,e){r.writeInt32(t,e)}};e.exports=i},{"io/codec":236}],426:[function(t,e,n){var r=t("io/codec"),i=t("./topic-id-serialiser"),o=t("./topic-details-serialiser"),s={read:function(t){return{id:i.read(t),path:r.readString(t),details:o.read(t)}},write:function(t,e){i.write(t,e.id),r.writeString(t,e.path),o.write(t,e.details)}};e.exports=s},{"./topic-details-serialiser":423,"./topic-id-serialiser":425,"io/codec":236}],427:[function(t,e,n){var r=t("io/codec"),i={PUBLISH_VALUES_ONLY:30,VALIDATE_VALUES:31,TIME_SERIES_EVENT_VALUE_TYPE:2,TIME_SERIES_RETAINED_RANGE:3,TIME_SERIES_SUBSCRIPTION_RANGE:4,SCHEMA:5,DONT_RETAIN_VALUE:6};e.exports={read:function(t){return r.readMap(t,function(t){return function(t){for(var e in i)if(i[e]===t)return e}(r.readByte(t))},r.readString)},write:function(t,e){r.writeMap(t,e,function(t,e){r.writeByte(t,i[e])},r.writeString)}}},{"io/codec":236}],428:[function(t,e,n){var r=t("topics/details/topic-specification-serialiser"),i=t("topics/details/topic-specification-info"),o=t("io/codec");e.exports={read:function(t){var e=o.readInt32(t),n=o.readString(t),s=r.read(t);return new i(e,n,s)},write:function(t,e){o.writeInt32(t,e.id),o.writeString(t,e.path),r.write(t,e.specification)}}},{"io/codec":236,"topics/details/topic-specification-info":429,"topics/details/topic-specification-serialiser":430}],429:[function(t,e,n){e.exports=function(t,e,n){this.id=t,this.path=e,this.specification=n}},{}],430:[function(t,e,n){var r=t("../../../topics/topic-specification"),i=t("../../../topics/topics").TopicType,o=t("serialisers/byte-encoded-enum-serialiser"),s=t("io/codec");e.exports={read:function(t){var e=o.read(t,i),n=s.readDictionary(t,s.readString);return new r(e,n)},write:function(t,e){o.write(t,e.type),s.writeDictionary(t,e.properties,s.writeString)}}},{"../../../topics/topic-specification":467,"../../../topics/topics":468,"io/codec":236,"serialisers/byte-encoded-enum-serialiser":263}],431:[function(t,e,n){function r(t){switch(t.qualifier){case u.MATCH:this.regex=o(t.base);break;case u.DESCENDANTS_OF_MATCH:this.regex=o(t.base+"/.+");break;case u.MATCH_AND_DESCENDANTS:this.regex=o(t.base+"(?:$|/.+)")}a.call(this,t.type,t.prefix,t.expression)}var i=t("inherits"),o=t("util/regex"),s=t("topics/topic-path-utils"),a=t("../../selectors/topic-selector"),u=s.DescendantQualifier;i(r,a),r.prototype.doSelects=function(t){return this.regex(t)},e.exports=r},{"../../selectors/topic-selector":464,inherits:97,"topics/topic-path-utils":435,"util/regex":454}],432:[function(t,e,n){function r(t){var e=t.remainder;if(t.type===s.Type.PATH){if(""===t.prefix)throw new Error("Topic path must have at least one part: "+e);if(t.prefix.indexOf("//")>-1)throw new Error("Topic path contains empty part: "+e)}this.qualifier=t.qualifier,this.path=t.prefix,s.call(this,t.type,t.prefix,t.expression)}var i=t("inherits"),o=t("topics/topic-path-utils"),s=t("../../selectors/topic-selector"),a=o.DescendantQualifier;i(r,s),r.prototype.doSelects=function(t){var e=this.path===t,n=0===t.indexOf(this.path+"/");switch(this.qualifier){case a.MATCH:return e;case a.DESCENDANTS_OF_MATCH:return n;case a.MATCH_AND_DESCENDANTS:return e||n;default:return!1}},e.exports=r},{"../../selectors/topic-selector":464,inherits:97,"topics/topic-path-utils":435}],433:[function(t,e,n){function r(t){var e=[];t.forEach(function(t){t instanceof r?t.selectors.forEach(function(t){e.push(t)}):e.push(t)}),this.selectors=e;var n=e.join(a),i=function(t){if(0===t.length)return"";var e=2147483647,n=[],r=0;t.forEach(function(t){var i=o.split(t.prefix);e=Math.min(e,i.length),n[r++]=i});var i=[];t:for(var s=0;s<e;++s){for(var a=n[0][s],u=0;u<n.length;++u)if(a!==n[u][s])break t;i.push(a),i.push(o.PATH_SEPARATOR)}return o.canonicalise(i.join(""))}(e);s.call(this,s.Type.SELECTOR_SET,i,s.Prefix.SELECTOR_SET+n)}var i=t("inherits"),o=t("topics/topic-path-utils"),s=t("../../selectors/topic-selector"),a="////";r.DELIMITER=a,i(r,s),r.prototype.selects=function(t){for(var e=0;e<this.selectors.length;++e)if(this.selectors[e].selects(t))return!0;return!1},e.exports=r},{"../../selectors/topic-selector":464,inherits:97,"topics/topic-path-utils":435}],434:[function(t,e,n){function r(t){this.qualifier=t.qualifier,this.patterns=[];s.split(t.base).forEach(function(t){this.patterns.push(o(t))}.bind(this)),a.call(this,t.type,t.prefix,t.expression)}var i=t("inherits"),o=t("util/regex"),s=t("topics/topic-path-utils"),a=t("../../selectors/topic-selector"),u=s.DescendantQualifier;i(r,a),r.prototype.doSelects=function(t){var e=this.patterns.length,n=t.split(s.PATH_SEPARATOR);switch(this.qualifier){case u.MATCH:if(n.length!==e)return!1;break;case u.DESCENDANTS_OF_MATCH:if(n.length<=e)return!1;break;case u.MATCH_AND_DESCENDANTS:if(n.length<e)return!1}for(var r=0;r<e;++r)if(!this.patterns[r](n[r]))return!1;return!0},e.exports=r},{"../../selectors/topic-selector":464,inherits:97,"topics/topic-path-utils":435,"util/regex":454}],435:[function(t,e,n){function r(t){this.includesDescendants=t}var i="/",o={MATCH:new r(!1),DESCENDANTS_OF_MATCH:new r(!0),MATCH_AND_DESCENDANTS:new r(!0)};e.exports={split:function(t){return t.split(i)},canonicalise:function(t){if(!t)return"";var e=t.length,n=e>0&&t.charAt(0)===i?1:0,r=e>1&&t.charAt(e-1)===i?1:0;return t.substring(n,e-r)},PATH_SEPARATOR:i,DescendantQualifier:o}},{}],436:[function(t,e,n){function r(t){if(!t)throw new Error("Empty topic selector expression");if(arguments.length>1&&(t=s.argumentsToArray(arguments)),t instanceof Array){var e=[];return t.forEach(function(t){t instanceof a?e.push(t):e.push(r(t))}),new d(e)}if("string"==typeof t){var n=function(t){var e=function(t){switch(t[0]){case p.PATH:return h.PATH;case p.SPLIT_PATH_PATTERN:return h.SPLIT_PATH_PATTERN;case p.FULL_PATH_PATTERN:return h.FULL_PATH_PATTERN;case p.SELECTOR_SET:return h.SELECTOR_SET;case"$":case"%":case"&":case"<":throw new Error("Invalid expression type: "+t);default:return null}}(t);null===e&&(t=p.PATH+t,e=h.PATH);var n,r,i,o=t.substring(1);e===h.PATH?(i=o,n=v.MATCH):"/"===o[o.length-1]?"/"===o[o.length-2]?(n=v.MATCH_AND_DESCENDANTS,i=u.canonicalise(o.substring(0,o.length-2))):(n=v.DESCENDANTS_OF_MATCH,i=u.canonicalise(o.substring(0,o.length-1))):(i=u.canonicalise(o),n=v.MATCH);r=e===h.PATH?u.canonicalise(o):function(t){for(var e=[],n=[],r=m,i=0,o=t.length;i<o;++i){var s=t[i];if("\\"===s&&i<o-1){var a=t[i+1];if(r===m&&"Q"===a)r=y;else if(r===y&&"E"===a)r=m;else{if(!(a<"a"||a>"z")||!(a<"A"||a>"Z")){e.length=0;break}e.push(a)}i++}else{if(!r(s)){e.length=0;break}s===u.PATH_SEPARATOR&&(n.push(e.join("")),e.length=0),e.push(s)}}return n.push(e.join("")),u.canonicalise(n.join(""))}(i);return{type:e,base:i,prefix:r,remainder:o,qualifier:n,expression:e+o}}(t);if(function(t){if(t.type===h.PATH)return!0;if(t.type===h.SELECTOR_SET||""===t.prefix)return!1;return t.prefix===t.base}(n))return new c(n);switch(n.type){case h.SPLIT_PATH_PATTERN:return new l(n);case h.FULL_PATH_PATTERN:return new f(n);case h.SELECTOR_SET:var o=[];return i(n.remainder,d.DELIMITER).forEach(function(t){o.push(r(t))}),new d(o)}}throw new Error("Topic selector expression must be a string or array")}var i=t("util/string").split,o=t("util/memoize"),s=t("util/array"),a=t("../../selectors/topic-selector"),u=t("topics/topic-path-utils"),c=t("topics/path-selector"),l=t("topics/split-path-selector"),f=t("topics/full-path-selector"),d=t("topics/selector-set"),h=a.Type,p=a.Prefix,v=u.DescendantQualifier,g=["*",".","+","?","^","$","{","}","(",")","[","]","\\"],m=function(t){return-1===g.indexOf(t)},y=function(){return!0};e.exports=o(r)},{"../../selectors/topic-selector":464,"topics/full-path-selector":431,"topics/path-selector":432,"topics/selector-set":433,"topics/split-path-selector":434,"topics/topic-path-utils":435,"util/array":445,"util/memoize":451,"util/string":456}],437:[function(t,e,n){var r=t("io/codec"),i=t("./topic-selector-parser"),o={read:function(t){return i(r.readString(t))},write:function(t,e){r.writeString(t,e.expression)}};e.exports=o},{"./topic-selector-parser":436,"io/codec":236}],438:[function(t,e,n){var r=t("protocol/connection-response-deserialiser"),i=t("util/logger").create("Parsing");e.exports={connectionResponse:function(t,e,n){i.trace("Received connection handshake response");var o;try{o=r(n)}catch(t){return e(t),null}return t(o)}}},{"protocol/connection-response-deserialiser":247,"util/logger":449}],439:[function(t,e,n){function r(){return"function"==typeof WebSocket?(s.debug("Using native websocket"),{constructor:WebSocket,enabled:!0}):"function"==typeof o?(s.debug("Using Node WS library"),{constructor:o,enabled:!0}):(s.debug("Websocket transport not available"),{enabled:!1})}function i(){return"function"==typeof XMLHttpRequest?(s.debug("Using native XHR"),{constructor:XMLHttpRequest,enabled:!0}):(s.debug("XHR transport not available"),{enabled:!1})}var o=t("ws"),s=t("util/logger").create("Transports");e.exports={WS:r(),XHR:i(),WEBSOCKET:r(),HTTP_POLLING:i()}},{"util/logger":449,ws:91}],440:[function(t,e,n){function r(t,e,n,r){function i(t){m.emit("data",t)}function o(t){!E&&g(!0)||m.emit("close",t)}function s(t){m.emit("error",t)}function c(t){if(E=!0,!function(t){return t===u.ERROR}(t.response)||!g())return w(t)}function h(t){if(E=!0,!g())return x(t)}function p(t){return 0===n.length?(y.name=null,S=null,f.debug("Transports exhausted"),r.emit("transports-exhausted"),t||m.emit("close"),null):(y.name=n.shift(),S=_(y.name),f.debug("Selecting transport",y.name),r.emit("transport-selected",y.name),S)}function v(){E=!1,f.debug("Attempting to connect"),r.emit("cascading-connect"),S.on("data",i),S.on("close",o),S.on("error",s);try{S.connect(b,l.connectionResponse.bind(null,c,h))}catch(t){if(!g())throw t}return!0}function g(t){return S&&(S.off("data",i),S.off("close",o),S.off("error",s),S.close(),S=null),!!p(t)&&(r.emit("cascade"),v())}var m=a.assign(this),y=this;this.name=null;var b=null,w=null,x=null,E=!1,_=function(t,e,n){var r=d[n],i=t[n];if(r&&i&&i.enabled)return new r(e,i.constructor);throw new Error("Unknown transport name: "+n)}.bind(null,t,e),S=p();this.connect=function(t,e,n){b=t,w=e,x=n,v()},this.dispatch=function(t){if(null===S)throw new Error("Unable to send message when no transport is set");S.dispatch(t)},this.close=function(){null!==S&&(E=!0,S.close(),S=null)}}function i(t){var e=a.assign(this);this.get=function(n){var i=function(t,e){return t.filter(function(t){return t&&d.hasOwnProperty(t)}).filter(function(t){return e[t].enabled})}(n.transports,t);return 0===i.length?(f.warn("No valid transports found"),null):new r(t,n,i,e)}}var o=t("transports/ws"),s=t("transports/xhr"),a=t("events/emitter"),u=t("protocol/response-code"),c=t("transports/subtransports"),l=t("transports/parsing"),f=t("util/logger").create("Cascading"),d={WS:o,XHR:s,WEBSOCKET:o,HTTP_POLLING:s};i.create=function(t){return new i(t||c)},e.exports=i},{"events/emitter":206,"protocol/response-code":249,"transports/parsing":438,"transports/subtransports":439,"transports/ws":441,"transports/xhr":442,"util/logger":449}],441:[function(t,e,n){(function(n){var r=t("v4-stack/credential-tunnel").encodeAsString,i=t("events/emitter"),o=t("util/logger").create("Websocket transport");e.exports=function(t,e){var s,a=i.assign(this),u=function(e){e.data.length>t.maxMessageSize?a.error(new Error("Received message of size: "+e.data.length+", exceeding max message size: "+t.maxMessageSize)):a.emit("data",new n(new Uint8Array(e.data)))};this.connect=function(i,c){try{var l=function(t,e){var n=(e.secure?"wss":"ws")+"://"+e.host+":"+e.port+e.path;return n+="?ty="+t.type,n+="&v="+t.version,n+="&ca="+t.capabilities,n+="&r="+e.reconnect.timeout,t.token&&(n+="&c="+encodeURIComponent(t.token),n+="&cs="+t.availableClientSequence,n+="&ss="+t.lastServerSequence),e.principal&&(n+="&username="+encodeURIComponent(e.principal),n+="&password="+encodeURIComponent(r(e.credentials))),n}(i,t);s=new e(l),o.debug("Created websocket",l)}catch(t){throw new Error("Unable to construct WebSocket",t)}s.binaryType="arraybuffer",s.onmessage=function(t){s.onmessage=u,s.onerror=a.error,c(new n(new Uint8Array(t.data)))},s.onclose=a.close,s.onerror=a.close},this.dispatch=function(t){o.debug("Sending websocket message",t);try{return s.send(t),!0}catch(t){return o.error("Websocket send error",t),!1}},this.close=function(){o.debug("Closing websocket"),s.close()}}}).call(this,t("buffer").Buffer)},{buffer:94,"events/emitter":206,"util/logger":449,"v4-stack/credential-tunnel":460}],442:[function(t,e,n){(function(n){var r=t("v4-stack/credential-tunnel").encodeAsString,i=t("events/emitter"),o=t("util/queue"),s=t("protocol/response-code"),a=t("io/buffer-input-stream"),u=t("io/buffer-output-stream"),c=t("util/logger").create("XHR transport");e.exports=function(t,e){var l,f,d=i.assign(this),h=0,p=0,v=null,g=!1,m=!1,y=null,b=this,w=o.create(),x=e;this.connect=function(e,i){try{var o=function(t,e){var n=(e.secure?"https":"http")+"://"+e.host+":"+e.port+e.path,i={m:"0",ty:"B",ca:t.capabilities,r:e.reconnect.timeout,v:t.version};return t.token&&(i.c=t.token,i.cs=t.availableClientSequence,i.ss=t.lastServerSequence),e.principal&&(i.username=encodeURIComponent(e.principal),i.password=encodeURIComponent(r(e.credentials))),{uri:n,headers:i}}(e,t);y=o.headers.v,f=o.uri;var a=this.createRequest(o.headers,o.uri);c.debug("Created XHR",o.uri),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var t=a.responseText,e=i(new n(t,"binary"));if(!e)return;l=e.token;var r=e.response;s.isSuccess(r)?b.poll():(c.debug(r.id+" - "+r.message),d.close())}else d.close()},a.send(null)}catch(t){throw new Error("Unable to create polling transport",t)}},this.close=function(){c.trace("Closing XHR transport"),v&&(g=!0,v.abort()),w=o.create(),d.close()},this.createRequest=function(t,e){var n=new x;n.open("POST",e,!0),n.overrideMimeType("text/plain; charset=x-user-defined");for(var r in t)try{n.setRequestHeader(r,t[r])}catch(e){c.warn("Can't set header "+r+":"+t.join(":"))}return n},this.poll=function(){var e=this.createRequest({m:"1",c:l,s:h++,v:y},f);e.onreadystatechange=function(){if(4===e.readyState)if("reconnect"===e.getResponseHeader("diffusion-connection"))d.close();else if(200===e.status){for(var r=e.responseText,i=new a(new n(r,"base64"));i.pos!==i.count;){var o=i.readInt32();if(o>t.maxMessageSize)return void d.error(new Error("Received message of size: "+o+", exceeding max message size: "+t.maxMessageSize));var s=i.read(),u=i.readMany(o),c=new n(u.length+1);c.writeUInt8(s),u.copy(c,1),d.emit("data",c)}b.poll()}else d.close()},v=e,e.send(null)},this.dispatch=function(t){return!g&&(w.add(t),!!m||void b.flush())},this.flush=function(){if(!w.isEmpty()){var t=function(t){for(var e=new u,n=0;n<t.length;n++){var r=t[n];e.writeInt32(r.length-1),e.writeMany(r,0,r.length)}return e.getBuffer()}(w.drain()),e=this.createRequest({m:"2",c:l,s:p++,v:y},f);e.onreadystatechange=function(){4===e.readyState&&("reconnect"===e.getResponseHeader("diffusion-connection")?d.close():200===e.status?(m=!1,b.flush()):d.close())},m=!0,e.send(t.toString("base64"))}}}}).call(this,t("buffer").Buffer)},{buffer:94,"events/emitter":206,"io/buffer-input-stream":234,"io/buffer-output-stream":235,"protocol/response-code":249,"util/logger":449,"util/queue":453,"v4-stack/credential-tunnel":460}],443:[function(t,e,n){var r=t("./update"),i=t("serialisers/byte-encoded-enum-serialiser"),o=t("../content/serialiser");e.exports={read:function(t){var e=i.read(r.Type,t);switch(e){case r.Type.CONTENT:var n=o.read(t);return new r(n);default:throw new Error("Received unimplemented update type "+e)}},write:function(t,e){switch(t.write(e.type),e.type){case r.Type.CONTENT:t.write(t,e.action),o.write(t,e.data);break;default:throw new Error("Trying to write unimplemented update type "+e.type)}}}},{"../content/serialiser":160,"./update":444,"serialisers/byte-encoded-enum-serialiser":263}],444:[function(t,e,n){var r={CONTENT:0,PAGED_RECORD_ORDERED:1,PAGED_STRING_ORDERED:2,PAGED_RECORD_UNORDERED:3,PAGED_STRING_UNORDERED:4},i=0;e.exports={Type:r,Update:function(t,e,n){this.data=t,this.type=void 0!==e?e:r.CONTENT,this.action=void 0!==n?n:i}}},{}],445:[function(t,e,n){function r(t,e,n,r){n=n||0,r=r||t.length;for(var i=n;i<r;++i)t[i]=e}var i=Array.prototype.slice;e.exports={fill:r,ofSize:function(t,e){var n=[];return n.length=t,void 0!==e&&r(n,e),n},remove:function(t,e){var n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)},argumentsToArray:function(t){return i.call(t,0)}}},{}],446:[function(t,e,n){var r=t("events/emitter");e.exports={create:function(t,e){return new function(t,e){var n=r.assign(this),i=e[t];this.state=t,this.change=function(t){return this.state===t||!(!e[t]||!("*"===i||i.indexOf(t)>-1))&&(n.emit("change",this.state,t),i=e[t],this.state=t,!0)}}(t,e)}}},{"events/emitter":206}],447:[function(t,e,n){function r(t,e,n){switch(n=void 0===n?e.length:n){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3]);case 5:return t(e[0],e[1],e[2],e[3],e[4]);case 6:return t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7])}return t.apply(t,e)}var i=t("util/array").argumentsToArray;e.exports={curry:function(){var t=i(arguments),e=t.shift();return function(){return r(e,t.concat(i(arguments)))}},curryR:function(){var t=i(arguments),e=t.shift();return function(){return r(e,i(arguments).concat(t))}},callWithArguments:r,newWithArguments:function(t,e,n){function r(){t.apply(this,e)}switch(n=void 0===n?e.length:n){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7])}return r.prototype=t.prototype,new r}},e.exports.identity=function(t){return t}},{"util/array":445}],448:[function(t,e,n){var r=t("util/function"),i=t("util/array");e.exports={_interface:function(){var t=i.argumentsToArray(arguments),e=t.shift(),n=t.pop()||[];t.forEach(function(t){n=n.concat(t.members)});var r=n.map(function(t){return{name:t,check:function(e){return void 0===e[t]},throw:function(){throw new Error(e+"#"+t+'" must be implemented')}}}),o=function(t){return r.filter(function(e){return e.check(t)})};return o.toString=function(){return e},o.members=n,o},_implements:function(){var t,e=Array.prototype.slice.call(arguments,0),n=e.pop(),i=[];if(n instanceof Function)n=(t=n).prototype;else{t=n.__constructor||function(){};for(var o in t.prototype)n[o]=t.prototype[o]}if(e.forEach(function(t){i=i.concat(t(n))}),t.prototype=n,0===i.length)return t;var s=function(){var e=r.newWithArguments(t,arguments);return i.forEach(function(t){t.check(e)&&t.throw()}),e};return s.toString=function(){return t.toString()},s.isPrototypeOf=function(e){return e instanceof t},s.__constructor=t,s}}},{"util/array":445,"util/function":447}],449:[function(t,e,n){function r(){return new Date}var i=t("loglevel"),o=["trace","debug","info","warn","error"];e.exports={create:function(t){var e={};return o.forEach(function(n){e[n]=function(t,e){var n="|"+t.toUpperCase()+"|"+e+"|";return function(e,o){o?i[t](r()+n+e,o):i[t](r()+n+e)}}(n,t)}),e},setLevel:i.setLevel}},{loglevel:475}],450:[function(t,e,n){e.exports.approximateSquareRoot=function(t){if(t<0)throw new Error("Value must be greater or equal to 0");if(0===t)return 0;for(var e=1,n=t;n>0;n>>=2)e*=2;return e},e.exports.approximateCubeRoot=function(t){if(t<0)throw new Error("Value must be great or equal to 0");if(0===t)return 0;return 1<<(32-function(t){if(0===t)return 32;var e=1;return t>>>16==0&&(e+=16,t<<=16),t>>>24==0&&(e+=8,t<<=8),t>>>28==0&&(e+=4,t<<=4),t>>>30==0&&(e+=2,t<<=2),e-=t>>>31}(t))/3},e.exports.findNextPowerOfTwo=function(t){if(t<0||t>1<<30)throw new Error("Illegal argument: "+t);return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},e.exports.intBitsToFloat=function(t){var e=2147483648&t?-1:1,n=(t>>23&255)-127,r=8388607&t;if(128===n)return e*(r?Number.NaN:Number.POSITIVE_INFINITY);if(-127===n){if(0===r)return 0*e;n=-126,r/=1<<22}else r=(r|1<<23)/(1<<23);return e*r*Math.pow(2,n)}},{}],451:[function(t,e,n){var r=t("./array").argumentsToArray;e.exports=function(t,e,n){n=n||function(t){return t},e=e||{};var i=function(){var i=r(arguments),o=n(i),s=e[o];return s||(s=t.apply(t,i),e[o]=s,s)};return i._uncached=t,i}},{"./array":445}],452:[function(t,e,n){function r(t,e){return{encodingByte:t,messageTypeFlags:e}}var i=11e6,o=128,s={NO_ENCODING:r(0,0),ZLIB:r(18,1)};e.exports={extractMessageEncoding:function(t){return(t&i)===o?s.ZLIB:s.NO_ENCODING},extractMessageType:function(t){return t&~i},EncodingType:s}},{}],453:[function(t,e,n){e.exports={create:function(){return new function(){var t=[];this.length=function(){return t.length},this.add=function(e){t.push(e)},this.drain=function(){return t.splice(0,t.length)},this.isEmpty=function(){return 0===t.length}}}}},{}],454:[function(t,e,n){e.exports=function(t,e){if(e=e||"",""===t)throw new Error("Empty regular expression ["+e+"]");try{var n=new RegExp(t);return function(t){var e=n.exec(t);return e&&e[0]===t}}catch(t){throw new Error("Bad regular expression ["+t.message+", "+e+"]")}}},{}],455:[function(t,e,n){e.exports=function(t,e){if(void 0===t||null===t)throw new Error(e+" is null");return t}},{}],456:[function(t,e,n){e.exports={split:function(t,e){if(""===t)return[];for(var n=[],r=e.length,i=t.lastIndexOf(e);i>-1;)n.push(t.substring(i+r,t.length)),i=(t=t.substring(0,i)).lastIndexOf(e);return n.push(t),n.reverse()}}},{}],457:[function(t,e,n){function r(){var t={};this.establish=function(e){var n=e.indexOf("!");if(-1!==n){if(0===n)return t[e.substring(1)];var r=e.substring(n+1);return e=e.substring(0,n),t[r]=e,e}return e}}r.create=function(){return new r},e.exports=r},{}],458:[function(t,e,n){var r=t("v4-stack/connection");e.exports.create=function(t,e,n,i){return new r(t,e,n,i)}},{"v4-stack/connection":459}],459:[function(t,e,n){(function(n){var r=t("message-queue/recovery-buffer"),i=t("io/buffer-output-stream"),o=t("protocol/response-code"),s=t("../../client/close-reason"),a=t("v4-stack/message"),u=t("events/emitter"),c=t("util/logger").create("Connection"),l=t("util/fsm"),f=n.DIFFUSION_CLOSE_TIMEOUT||1e3,d=n.DIFFUSION_CONNECT_TIMEOUT||1e4,h=n.DIFFUSION_RECOVERY_BUFFER_INDEX_SIZE||8;e.exports=function(t,e,n,p){function v(e){c.debug("Received message from transport",e),a.parse(e,function(e,n){if(e)c.warn("Unable to parse message",e),E.change("closed")&&(T=s.CONNECTION_ERROR,C.close());else{if(n.type===a.types.ABORT_NOTIFICATION)return void C.close();n.topic&&(n.topic=t.establish(n.topic)),A.lastReceivedSequence++,x.emit("data",n)}})}function g(){E.change("disconnected")||E.change("closed")?(clearInterval(S),clearTimeout($),c.trace("Transport closed: ",T),"disconnected"===E.state?x.emit("disconnect",T):x.close(T)):c.debug("Unable to disconnect, current state: ",E.state)}function m(t){c.error("Error from transport",t),E.change("closed")&&(T=s.TRANSPORT_ERROR,C.close())}function y(t){if(t.response===o.RECONNECTED){var e=_-t.sequence+1;if(!k.recover(e,w)){var n=_-k.size()-t.sequence+1;return c.warn("Unable to reconnect due to lost messages ("+n+")"),E.change("disconnected")&&(T=s.LOST_MESSAGES,C.close()),t}k.clear(),_=t.sequence-1}return t.success&&E.change("connected")?(c.trace("Connection response: ",t.response),T=s.TRANSPORT_ERROR,x.emit("connect",t)):(c.error("Connection failed: ",t.response),T=t.response===o.AUTHENTICATION_FAILED?s.ACCESS_DENIED:s.HANDSHAKE_REJECTED,C.close()),clearTimeout($),t}function b(t){T=s.HANDSHAKE_ERROR,clearTimeout($),c.trace("Unable to deserialise handshake response",t)}function w(t){var e=new i;a.writeToBuffer(t,e),_+=1,k.put(t),k.markTime(Date.now()),C.dispatch(e.getBuffer())}var x=u.assign(this),E=l.create("disconnected",{connecting:["connected","disconnected","closed"],connected:["disconnecting","disconnected","closed"],disconnecting:["disconnected"],disconnected:["connecting","closed"],closed:[]}),_=0;this.lastReceivedSequence=0;var S,$,T,k=new r(p,h),C=null,A=this;E.on("change",function(t,e){c.debug("State changed: "+t+" -> "+e)}),this.connect=function(t,r,i){"disconnected"===E.state?E.change("connecting")&&(i=void 0===i?d:i,T=s.CONNECTION_ERROR,(C=e.get(r)).on("data",v),C.on("close",g),C.on("error",m),C.connect(t,y,b),$=setTimeout(function(){c.debug("Timed out connection attempt after "+i),T=s.CONNECTION_TIMEOUT,C.close()},i),S=setInterval(function(){"connected"===E.state&&k.flush(Date.now()-n)},n)):c.warn("Cannot connect, current state: ",E.state)},this.resetSequences=function(){k.clear(),_=0,this.lastReceivedSequence=0},this.getAvailableSequence=function(){return _+1-k.size()},this.send=function(t){return"connected"===E.state&&w(t)},this.close=function(t){T=t,"disconnected"===E.state?g():E.change("disconnecting")&&(w(a.create(a.types.CLOSE_REQUEST)),$=setTimeout(C.close,f))},this.closeIdleConnection=function(){E.change("disconnecting")&&(c.debug("Connection detected as idle"),T=s.IDLE_CONNECTION,C.close())},this.getState=function(){return E.state}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../client/close-reason":100,"events/emitter":206,"io/buffer-output-stream":235,"message-queue/recovery-buffer":237,"protocol/response-code":249,"util/fsm":446,"util/logger":449,"v4-stack/message":462}],460:[function(t,e,n){(function(n){var r=t("io/buffer-output-stream"),i=t("io/buffer-input-stream"),o=t("services/authentication/credentials-serialiser");e.exports={encodeAsString:function(t){var e=new r;return o.write(e,t),e.getBase64()},decodeAsString:function(t){if(t){var e=new i(new n(t,"base64"));return o.read(e)}return null}}}).call(this,t("buffer").Buffer)},{buffer:94,"io/buffer-input-stream":234,"io/buffer-output-stream":235,"services/authentication/credentials-serialiser":267}],461:[function(t,e,n){var r=t("conversation/conversation-id");e.exports={cidFromHeaders:function(t){if(!t||0===t.length)throw new Error("Empty headers, expected at least 1");return r.fromString(t[t.length-1])}}},{"conversation/conversation-id":169}],462:[function(t,e,n){(function(n){function r(t,e,n,r){var i=[],s={id:n.readInt32()};if(e===l.ZLIB)(function(t){return d.promise(function(e,n){f.inflate(t,function(t,r){t?n(t):e(r)})})})(n.readMany(n.count)).then(function(e){var n=new o(t,v.COMPRESSED,s,e,i);r(null,n)},function(t){r(t,null)});else{var a=new o(t,v.NONE,s,n.readMany(n.count),i);r(null,a)}}function i(t){o.call(this,t.type,t.encoding,t,t.buffer,t.headers),a.call(this,t.buffer)}function o(t,e,n,r,i){this.type=t,this.encoding=e;for(var o in n)this[o]=n[o];this.data=r,this.headers=i}var s=t("inherits"),a=t("io/buffer-output-stream"),u=t("io/buffer-input-stream"),c=t("util/message-encoding"),l=t("util/message-encoding").EncodingType,f=t("zlib"),d=t("when"),h={0:[],1:[],2:[],4:[],5:[],28:[],29:[],34:["topic"]},p={SERVICE_REQUEST:0,SERVICE_RESPONSE:1,SERVICE_ERROR:2,TOPIC_VALUE:4,TOPIC_DELTA:5,ABORT_NOTIFICATION:28,CLOSE_REQUEST:29,FETCH_REPLY:34},v={NONE:0,ENCRYPTION_REQUESTED:1,COMPRESSION_REQUESTED:2,BASE64_REQUESTED:3,ENCRYPTED:17,COMPRESSED:18,BASE64:19},g=function(t){var e=[],n="";return h[t.type].forEach(function(n){e.push(t[n])}),t.headers.forEach(function(t){e.push(t)}),0===h[t.type].length?n:(e.length>0&&(n=e.join(""),n+=""),n)};s(i,a),o.prototype.getInputStream=function(){return new u(this.data)},e.exports={types:p,parse:function(t,e){var n=new u(t),i=n.read(),s=c.extractMessageType(i),a=c.extractMessageEncoding(i);if(void 0===h[s]&&e(new Error("Invalid message type: "+s),null),s===p.SERVICE_REQUEST||s===p.SERVICE_RESPONSE||s===p.SERVICE_ERROR)e(null,function(t,e){var n=e.readMany(e.count);return new o(t,v.NONE,{},n,[])}(s,n));else if(s===p.TOPIC_VALUE||s===p.TOPIC_DELTA)r(s,a,n,e);else{var l=n.readUntil(1).toString().split(""),f=n.readMany(n.count),d={};h[s]&&h[s].forEach(function(t){d[t]=l.shift()}),e(null,new o(s,v.NONE,d,f,l))}},create:function(t){var e;if(void 0===t||"number"==typeof t&&void 0===h[t])throw"Invalid message type: "+t;return e=t instanceof Object?t:{type:t},e.encoding=e.encoding||0,e.headers=e.headers||[],e.buffer=e.buffer||new n(0),new i(e)},encoding:v,getHeaderString:g,writeToBuffer:function(t,e){e.write(t.type),e.writeString(g(t)),e.writeMany(t.getBuffer())}}}).call(this,t("buffer").Buffer)},{buffer:94,inherits:97,"io/buffer-input-stream":234,"io/buffer-output-stream":235,"util/message-encoding":452,when:529,zlib:93}],463:[function(t,e,n){function r(t){if(void 0===(t=t||{}).host)t.host=i;else if(t.host.indexOf(":")>-1){var e=t.host.split(":");void 0===t.port&&(t.port=parseInt(e[1])),t.host=e[0]}void 0===t.path?t.path=u:("/"!==t.path[0]&&(t.path="/"+t.path),t.path.substring(t.path.length-u.length)!==u&&("/"===t.path[t.path.length-1]&&(t.path=t.path.substring(0,t.path.length-1)),t.path=t.path+u)),isNaN(parseInt(t.port,10))?t.port=void 0:t.port=parseInt(t.port,10),void 0===t.secure&&(void 0===t.port?t.secure=a:t.secure=t.port===s),void 0===t.port&&(t.port=t.secure?s:o),this.host=t.host,this.port=t.port,this.path=t.path,this.secure=t.secure,void 0===t.reconnect||"boolean"==typeof t.reconnect&&t.reconnect?this.reconnect={timeout:c,strategy:l}:"number"==typeof t.reconnect?this.reconnect={timeout:t.reconnect,strategy:l}:"function"==typeof t.reconnect?this.reconnect={timeout:c,strategy:t.reconnect}:"object"==typeof t.reconnect?this.reconnect={timeout:void 0===t.reconnect.timeout?c:t.reconnect.timeout,strategy:t.reconnect.strategy||l}:this.reconnect={timeout:0,strategy:f},void 0!==t.principal&&(this.principal=t.principal||d,this.credentials=t.credentials||h),"string"==typeof t.transports?this.transports=[t.transports]:"object"==typeof t.transports&&t.transports instanceof Array&&t.transports.length>0?this.transports=t.transports.slice():this.transports=v.slice(),this.transports=this.transports.slice().map(function(t){return t.toUpperCase()});var n;n=t.maxMessageSize&&t.maxMessageSize>m?t.maxMessageSize:g,this.maxMessageSize=n,this.activityMonitor=void 0!==t.activityMonitor?t.activityMonitor:p}var i="localhost",o=80,s=443,a=!0,u="/diffusion";"undefined"!=typeof window&&(window.location.hostname&&(i=window.location.hostname),"http:"===window.location.protocol&&(a=!1,window.location.port&&(o=parseInt(window.location.port))),"https:"===window.location.protocol&&(a=!0,window.location.port&&(s=parseInt(window.location.port))));var c=6e4,l=function(t){setTimeout(t,5e3)},f=function(t,e){e()},d="",h="",p=!0,v=["WEBSOCKET"],g=2147483647,m=1024;r.prototype.with=function(t){var e,n={};for(e in this)n[e]=this[e];for(e in t)n[e]=t[e];return new r(n)},e.exports=r},{}],464:[function(t,e,n){function r(t,e,n){this.type=t,this.prefix=e,this.expression=n}var i=t("topics/topic-path-utils");r.Type={PATH:(r.Prefix={PATH:">",SPLIT_PATH_PATTERN:"?",FULL_PATH_PATTERN:"*",SELECTOR_SET:"#"}).PATH,SPLIT_PATH_PATTERN:r.Prefix.SPLIT_PATH_PATTERN,FULL_PATH_PATTERN:r.Prefix.FULL_PATH_PATTERN,SELECTOR_SET:r.Prefix.SELECTOR_SET},r.prototype.selects=function(t){var e=i.canonicalise(t);return 0===e.indexOf(this.prefix)&&this.doSelects(e)},r.prototype.toString=function(){return this.expression},e.exports=r},{"topics/topic-path-utils":435}],465:[function(t,e,n){var r={parse:t("topics/topic-selector-parser")};e.exports=r},{"topics/topic-selector-parser":436}],466:[function(t,e,n){var r=t("util/interface")._interface;e.exports=r("Session",["sessionID","options","close","isClosed","isConnected","getPrincipal"])},{"util/interface":448}],467:[function(t,e,n){var r=["PUBLISH_VALUES_ONLY","SCHEMA","VALIDATE_VALUES","SLAVE_MASTER_TOPIC","TIDY_ON_UNSUBSCRIBE","TIME_SERIES_EVENT_VALUE_TYPE","TIME_SERIES_RETAINED_RANGE","TIME_SERIES_SUBSCRIPTION_RANGE","DONT_RETAIN_VALUE"];e.exports=function t(e,n){this.type=e,this.properties=n||{},this.withProperty=function(e,n){if("string"!=typeof e||r.indexOf(e.toUpperCase())<0)throw new Error("Invalid key: "+e);if("string"!=typeof n)throw new Error("Invalid value, must be string: "+n);var i={};i[e]=n;for(var o in this.properties)o!==e&&(i[o]=this.properties[o]);return new t(this.type,i)},this.equals=function(t){if(t&&e===t.type&&Object.keys(n).length===Object.keys(t.properties).length){for(var r in n)if(t.properties[r]!==n[r])return!1;return!0}return!1}},e.exports.PUBLISH_VALUES_ONLY="PUBLISH_VALUES_ONLY",e.exports.VALIDATE_VALUES="VALIDATE_VALUES",e.exports.SLAVE_MASTER_TOPIC="SLAVE_MASTER_TOPIC",e.exports.TIDY_ON_UNSUBSCRIBE="TIDY_ON_UNSUBSCRIBE",e.exports.TIME_SERIES_EVENT_VALUE_TYPE="TIME_SERIES_EVENT_VALUE_TYPE",e.exports.TIME_SERIES_RETAINED_RANGE="TIME_SERIES_RETAINED_RANGE",e.exports.TIME_SERIES_SUBSCRIPTION_RANGE="TIME_SERIES_SUBSCRIPTION_RANGE",e.exports.SCHEMA="SCHEMA",e.exports.DONT_RETAIN_VALUE="DONT_RETAIN_VALUE"},{}],468:[function(t,e,n){function r(t,e,n){this.id=t,this.stateful=e,this.functional=n}function i(t,e){this.id=t,this.reason=e}function o(t,e){this.id=t,this.reason=e}function s(t,e){this.id=t,this.reason=e}var a=t("./topic-specification");e.exports.TopicSpecification=a,e.exports.TopicType={STATELESS:new r(1,!1,!1),SINGLE_VALUE:new r(3,!0,!1),RECORD:new r(4,!0,!1),SLAVE:new r(7,!0,!1),ROUTING:new r(12,!1,!0),BINARY:new r(14,!0,!1),JSON:new r(15,!0,!1),STRING:new r(17,!0,!1),INT64:new r(18,!0,!1),DOUBLE:new r(19,!0,!1),TIME_SERIES:new r(16,!0,!1),RECORD_V2:new r(20,!0,!1)},e.exports.UnsubscribeReason={SUBSCRIPTION_REFRESH:new i(void 0,"The server has re-subscribed this session"),STREAM_CHANGE:new i(void 0,"A more specific stream has been registered to the same path"),REQUESTED:new i(0,"The unsubscription was requested by this client"),CONTROL:new i(1,"The server or another client unsubscribed this client"),REMOVED:new i(2,"The topic was removed"),AUTHORIZATION:new i(3,"Not authorized to subscribe to this topic")},e.exports.UpdateFailReason={INCOMPATIBLE_UPDATE:new o(1,"Update type is incompatible with topic type"),UPDATE_FAILED:new o(2,"Update failed - possible content incompatibility"),INVALID_UPDATER:new o(3,"Updater is invalid for updating"),MISSING_TOPIC:new o(4,"Topic does not exist"),INVALID_ADDRESS:new o(5,"Key or index value is invalid for topic data"),DUPLICATES:new o(6,"Duplicates violation"),EXCLUSIVE_UPDATER_CONFLICT:new o(7,"An exclusive update source is already registered for the topic branch"),DELTA_WITHOUT_VALUE:new o(8,"An attempt has been made to apply a delta to a topic that does not yet have a value"),CLUSTER_REPARTITION:new o(9,"When trying to update the topic the cluster was migrating the partition that owns the topic")},e.exports.TopicAddFailReason={EXISTS:new s(1,"The topic already exists with the same details"),EXISTS_MISMATCH:new s(2,"The topic already exists, with different details"),INVALID_PATH:new s(3,"The topic path is invalid"),INVALID_DETAILS:new s(4,"The topic details are invalid"),USER_CODE_ERROR:new s(5,"A user supplied class could not be found or instantiated"),TOPIC_NOT_FOUND:new s(6,"A referenced topic could not be found"),PERMISSIONS_FAILURE:new s(7,"Invalid permissions to add a topic at the specified path"),INITIALISE_ERROR:new s(8,"The topic could not be initialised, supplied value may be of the wrong format"),UNEXPECTED_ERROR:new s(9,"An unexpected error occured while creating the topic"),CLUSTER_REPARTITION:new s(10,"When trying to create the topic the cluster was migrating the partition that owns the topic")}},{"./topic-specification":467}],469:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,a,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),r=(c=n.slice()).length,u=0;u<r;u++)c[u].apply(this,a);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],470:[function(t,e,n){!function(t){if("function"==typeof define&&define.amd)define([],t);else if("object"==typeof e){var n=e.exports=t();n.HashMap=n}else this.HashMap=t()}(function(){function t(t){switch(this.clear(),arguments.length){case 0:break;case 1:this.copy(t);break;default:e(this,arguments)}}function e(t,e){for(var n=0;n<e.length;n+=2)t.set(e[n],e[n+1])}var n=t.prototype={constructor:t,get:function(t){var e=this._data[this.hash(t)];return e&&e[1]},set:function(t,e){var n=this.hash(t);n in this._data||this._count++,this._data[n]=[t,e]},multi:function(){e(this,arguments)},copy:function(t){for(var e in t._data)e in this._data||this._count++,this._data[e]=t._data[e]},has:function(t){return this.hash(t)in this._data},search:function(t){for(var e in this._data)if(this._data[e][1]===t)return this._data[e][0];return null},remove:function(t){var e=this.hash(t);e in this._data&&(this._count--,delete this._data[e])},type:function(t){var e=Object.prototype.toString.call(t).slice(8,-1).toLowerCase();return t||"domwindow"!==e&&"window"!==e?e:t+""},keys:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},count:function(){return this._count},clear:function(){this._data={},this._count=0},clone:function(){return new t(this)},hash:function(e){switch(this.type(e)){case"undefined":case"null":case"boolean":case"number":case"regexp":return e+"";case"date":return""+e.getTime();case"string":return""+e;case"array":for(var n=[],r=0;r<e.length;r++)n[r]=this.hash(e[r]);return""+n.join("");default:return e.hasOwnProperty("_hmuid_")||(e._hmuid_=++t.uid,function(t,e){Object.defineProperty&&Object.defineProperty(t,e,{enumerable:!1})}(e,"_hmuid_")),""+e._hmuid_}},forEach:function(t,e){for(var n in this._data){var r=this._data[n];t.call(e||this,r[1],r[0])}}};return t.uid=0,["set","multi","copy","remove","clear","forEach"].forEach(function(t){var e=n[t];n[t]=function(){return e.apply(this,arguments),this}}),t})},{}],471:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=c}return(h?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+h]=255&s,h+=p,s/=256,c-=8);t[n+h-p]|=128*v}},{}],472:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{dup:97}],473:[function(t,e,n){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],474:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],475:[function(t,e,n){!function(n,r){"use strict";"object"==typeof e&&e.exports&&"function"==typeof t?e.exports=r():"function"==typeof define&&"object"==typeof define.amd?define(r):n.log=r()}(this,function(){"use strict";function t(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function e(t,e){for(var n=0;n<s.length;n++){var r=s[n];this[r]=n<t?i:this.methodFactory(r,t,e)}}function n(n,r,s){return function(e){return typeof console!==o&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):i)}(n)||function(t,n,r){return function(){typeof console!==o&&(e.call(this,n,r),this[t].apply(this,arguments))}}.apply(this,arguments)}function r(t,r,i){function a(){var t;try{t=window.localStorage[l]}catch(t){}if(typeof t===o)try{var e=window.document.cookie,n=e.indexOf(encodeURIComponent(l)+"=");n&&(t=/^([^;]+)/.exec(e.slice(n))[1])}catch(t){}return void 0===c.levels[t]&&(t=void 0),t}var u,c=this,l="loglevel";t&&(l+=":"+t),c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=i||n,c.getLevel=function(){return u},c.setLevel=function(n,r){if("string"==typeof n&&void 0!==c.levels[n.toUpperCase()]&&(n=c.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(u=n,!1!==r&&function(t){var e=(s[t]||"silent").toUpperCase();try{return void(window.localStorage[l]=e)}catch(t){}try{window.document.cookie=encodeURIComponent(l)+"="+e+";"}catch(t){}}(n),e.call(c,n,t),typeof console===o&&n<c.levels.SILENT)return"No console available for logging"},c.setDefaultLevel=function(t){a()||c.setLevel(t,!1)},c.enableAll=function(t){c.setLevel(c.levels.TRACE,t)},c.disableAll=function(t){c.setLevel(c.levels.SILENT,t)};var f=a();null==f&&(f=null==r?"WARN":r),c.setLevel(f,!1)}var i=function(){},o="undefined",s=["trace","debug","info","warn","error"],a=new r,u={};a.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=u[t];return e||(e=u[t]=new r(t,a.getLevel(),a.methodFactory)),e};var c=typeof window!==o?window.log:void 0;return a.noConflict=function(){return typeof window!==o&&window.log===a&&(window.log=c),a},a})},{}],476:[function(t,e,n){!function(r){"use strict";var i=function(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n};i.isLong=function(t){return!0===(t&&t instanceof i)};var o={},s={};i.fromInt=function(t,e){var n,r;return e?0<=(t>>>=0)&&t<256&&(r=s[t])?r:(n=new i(t,(0|t)<0?-1:0,!0),0<=t&&t<256&&(s[t]=n),n):-128<=(t|=0)&&t<128&&(r=o[t])?r:(n=new i(t,t<0?-1:0,!1),-128<=t&&t<128&&(o[t]=n),n)},i.fromNumber=function(t,e){return e=!!e,isNaN(t)||!isFinite(t)?i.ZERO:!e&&t<=-c?i.MIN_VALUE:!e&&t+1>=c?i.MAX_VALUE:e&&t>=u?i.MAX_UNSIGNED_VALUE:t<0?i.fromNumber(-t,e).negate():new i(t%a|0,t/a|0,e)},i.fromBits=function(t,e,n){return new i(t,e,n)},i.fromString=function(t,e,n){if(0===t.length)throw Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i.ZERO;if("number"==typeof e&&(n=e,e=!1),(n=n||10)<2||36<n)throw Error("radix out of range: "+n);var r;if((r=t.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+t);if(0===r)return i.fromString(t.substring(1),e,n).negate();for(var o=i.fromNumber(Math.pow(n,8)),s=i.ZERO,a=0;a<t.length;a+=8){var u=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+u),n);if(u<8){var l=i.fromNumber(Math.pow(n,u));s=s.multiply(l).add(i.fromNumber(c))}else s=(s=s.multiply(o)).add(i.fromNumber(c))}return s.unsigned=e,s},i.fromValue=function(t){return"number"==typeof t?i.fromNumber(t):"string"==typeof t?i.fromString(t):i.isLong(t)?t:new i(t.low,t.high,t.unsigned)};var a=4294967296,u=a*a,c=u/2,l=i.fromInt(1<<24);i.ZERO=i.fromInt(0),i.UZERO=i.fromInt(0,!0),i.ONE=i.fromInt(1),i.UONE=i.fromInt(1,!0),i.NEG_ONE=i.fromInt(-1),i.MAX_VALUE=i.fromBits(-1,2147483647,!1),i.MAX_UNSIGNED_VALUE=i.fromBits(-1,-1,!0),i.MIN_VALUE=i.fromBits(0,-2147483648,!1),i.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},i.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*a+(this.low>>>0):this.high*a+(this.low>>>0)},i.prototype.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix out of range: "+t);if(this.isZero())return"0";var e;if(this.isNegative()){if(this.equals(i.MIN_VALUE)){var n=i.fromNumber(t),r=this.div(n);return e=r.multiply(n).subtract(this),r.toString(t)+e.toInt().toString(t)}return"-"+this.negate().toString(t)}var o=i.fromNumber(Math.pow(t,6),this.unsigned);e=this;for(var s="";;){var a=e.div(o),u=(e.subtract(a.multiply(o)).toInt()>>>0).toString(t);if((e=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},i.prototype.getHighBits=function(){return this.high},i.prototype.getHighBitsUnsigned=function(){return this.high>>>0},i.prototype.getLowBits=function(){return this.low},i.prototype.getLowBitsUnsigned=function(){return this.low>>>0},i.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(i.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},i.prototype.isZero=function(){return 0===this.high&&0===this.low},i.prototype.isNegative=function(){return!this.unsigned&&this.high<0},i.prototype.isPositive=function(){return this.unsigned||this.high>=0},i.prototype.isOdd=function(){return 1==(1&this.low)},i.prototype.isEven=function(){return 0==(1&this.low)},i.prototype.equals=function(t){return i.isLong(t)||(t=i.fromValue(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},i.prototype.notEquals=function(t){return i.isLong(t)||(t=i.fromValue(t)),!this.equals(t)},i.prototype.lessThan=function(t){return i.isLong(t)||(t=i.fromValue(t)),this.compare(t)<0},i.prototype.lessThanOrEqual=function(t){return i.isLong(t)||(t=i.fromValue(t)),this.compare(t)<=0},i.prototype.greaterThan=function(t){return i.isLong(t)||(t=i.fromValue(t)),this.compare(t)>0},i.prototype.greaterThanOrEqual=function(t){return i.isLong(t)||(t=i.fromValue(t)),this.compare(t)>=0},i.prototype.compare=function(t){if(this.equals(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.subtract(t).isNegative()?-1:1},i.prototype.negate=function(){return!this.unsigned&&this.equals(i.MIN_VALUE)?i.MIN_VALUE:this.not().add(i.ONE)},i.prototype.add=function(t){i.isLong(t)||(t=i.fromValue(t));var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,c=0,l=0,f=0,d=0;return d+=o+(65535&t.low),f+=d>>>16,d&=65535,f+=r+u,l+=f>>>16,f&=65535,l+=n+a,c+=l>>>16,l&=65535,c+=e+s,c&=65535,i.fromBits(f<<16|d,c<<16|l,this.unsigned)},i.prototype.subtract=function(t){return i.isLong(t)||(t=i.fromValue(t)),this.add(t.negate())},i.prototype.multiply=function(t){if(this.isZero())return i.ZERO;if(i.isLong(t)||(t=i.fromValue(t)),t.isZero())return i.ZERO;if(this.equals(i.MIN_VALUE))return t.isOdd()?i.MIN_VALUE:i.ZERO;if(t.equals(i.MIN_VALUE))return this.isOdd()?i.MIN_VALUE:i.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(l)&&t.lessThan(l))return i.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,c=65535&t.low,f=0,d=0,h=0,p=0;return p+=o*c,h+=p>>>16,p&=65535,h+=r*c,d+=h>>>16,h&=65535,h+=o*u,d+=h>>>16,h&=65535,d+=n*c,f+=d>>>16,d&=65535,d+=r*u,f+=d>>>16,d&=65535,d+=o*a,f+=d>>>16,d&=65535,f+=e*c+n*u+r*a+o*s,f&=65535,i.fromBits(h<<16|p,f<<16|d,this.unsigned)},i.prototype.div=function(t){if(i.isLong(t)||(t=i.fromValue(t)),t.isZero())throw new Error("division by zero");if(this.isZero())return this.unsigned?i.UZERO:i.ZERO;var e,n,r;if(this.equals(i.MIN_VALUE)){if(t.equals(i.ONE)||t.equals(i.NEG_ONE))return i.MIN_VALUE;if(t.equals(i.MIN_VALUE))return i.ONE;return(e=this.shiftRight(1).div(t).shiftLeft(1)).equals(i.ZERO)?t.isNegative()?i.ONE:i.NEG_ONE:(n=this.subtract(t.multiply(e)),r=e.add(n.div(t)))}if(t.equals(i.MIN_VALUE))return this.unsigned?i.UZERO:i.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(r=i.ZERO,n=this;n.greaterThanOrEqual(t);){e=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(e)/Math.LN2),s=o<=48?1:Math.pow(2,o-48),a=i.fromNumber(e),u=a.multiply(t);u.isNegative()||u.greaterThan(n);)u=(a=i.fromNumber(e-=s,this.unsigned)).multiply(t);a.isZero()&&(a=i.ONE),r=r.add(a),n=n.subtract(u)}return r},i.prototype.modulo=function(t){return i.isLong(t)||(t=i.fromValue(t)),this.subtract(this.div(t).multiply(t))},i.prototype.not=function(){return i.fromBits(~this.low,~this.high,this.unsigned)},i.prototype.and=function(t){return i.isLong(t)||(t=i.fromValue(t)),i.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},i.prototype.or=function(t){return i.isLong(t)||(t=i.fromValue(t)),i.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},i.prototype.xor=function(t){return i.isLong(t)||(t=i.fromValue(t)),i.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},i.prototype.shiftLeft=function(t){return i.isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?i.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):i.fromBits(0,this.low<<t-32,this.unsigned)},i.prototype.shiftRight=function(t){return i.isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?i.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):i.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},i.prototype.shiftRightUnsigned=function(t){if(i.isLong(t)&&(t=t.toInt()),0===(t&=63))return this;var e=this.high;if(t<32){var n=this.low;return i.fromBits(n>>>t|e<<32-t,e>>>t,this.unsigned)}return i.fromBits(32===t?e:e>>>t-32,0,this.unsigned)},i.prototype.toSigned=function(){return this.unsigned?new i(this.low,this.high,!1):this},i.prototype.toUnsigned=function(){return this.unsigned?this:new i(this.low,this.high,!0)},"function"==typeof t&&"object"==typeof e&&e&&"object"==typeof n&&n?e.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):(r.dcodeIO=r.dcodeIO||{}).Long=i}(this)},{}],477:[function(t,e,n){!function(){var r={};r.dev=!1,r.tooltip=r.tooltip||{},r.utils=r.utils||{},r.models=r.models||{},r.charts={},r.logs={},r.dom={},void 0!==e&&void 0!==n&&"undefined"==typeof d3&&(d3=t("d3")),r.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),r.dev&&(r.dispatch.on("render_start",function(t){r.logs.startTime=+new Date}),r.dispatch.on("render_end",function(t){r.logs.endTime=+new Date,r.logs.totalTime=r.logs.endTime-r.logs.startTime,r.log("total",r.logs.totalTime)})),r.log=function(){if(r.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(r.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){Function.prototype.bind.call(console.log,console).apply(console,arguments)}return arguments[arguments.length-1]},r.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},r.render=function(t){t=t||1,r.render.active=!0,r.dispatch.render_start();var e=function(){for(var n,i,o=0;o<t&&(i=r.render.queue[o]);o++)n=i.generate(),typeof i.callback==typeof Function&&i.callback(n);r.render.queue.splice(0,o),r.render.queue.length?setTimeout(e):(r.dispatch.render_end(),r.render.active=!1)};setTimeout(e)},r.render.active=!1,r.render.queue=[],r.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),r.render.queue.push(t),r.render.active||r.render()},void 0!==e&&void 0!==n&&(e.exports=r),"undefined"!=typeof window&&(window.nv=r),r.dom.write=function(t){return void 0!==window.fastdom?fastdom.mutate(t):t()},r.dom.read=function(t){return void 0!==window.fastdom?fastdom.measure(t):t()},r.interactiveGuideline=function(){"use strict";function t(f){f.each(function(f){function d(){var n=d3.event.clientX-this.getBoundingClientRect().left,r=d3.event.clientY-this.getBoundingClientRect().top,i=!0,a=!1;if(l&&(n=d3.event.offsetX,r=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(i=!1),d3.event.target.className.baseVal.match("nv-legend")&&(a=!0)),i&&(n-=e.left,r-=e.top),"mouseout"===d3.event.type||n<0||r<0||n>p||r>v||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||a){if(l&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(c.nvPointerEventsClass)))return;return s.elementMouseout({mouseX:n,mouseY:r}),t.renderGuideLine(null),void c.hidden(!0)}c.hidden(!1);var u=void 0;if("function"==typeof o.rangeBands){var f=d3.bisect(o.range(),n)-1;if(!(o.range()[f]+o.rangeBand()>=n))return s.elementMouseout({mouseX:n,mouseY:r}),t.renderGuideLine(null),void c.hidden(!0);u=o.domain()[d3.bisect(o.range(),n)-1]}else u=o.invert(n);s.elementMousemove({mouseX:n,mouseY:r,pointXValue:u}),"dblclick"===d3.event.type&&s.elementDblclick({mouseX:n,mouseY:r,pointXValue:u}),"click"===d3.event.type&&s.elementClick({mouseX:n,mouseY:r,pointXValue:u}),"mousedown"===d3.event.type&&s.elementMouseDown({mouseX:n,mouseY:r,pointXValue:u}),"mouseup"===d3.event.type&&s.elementMouseUp({mouseX:n,mouseY:r,pointXValue:u})}var h=d3.select(this),p=n||960,v=i||400,g=h.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([f]);g.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),u&&(u.on("touchmove",d).on("mousemove",d,!0).on("mouseout",d,!0).on("mousedown",d,!0).on("mouseup",d,!0).on("dblclick",d).on("click",d),t.guideLine=null,t.renderGuideLine=function(e){a&&(t.guideLine&&t.guideLine.attr("x1")===e||r.dom.write(function(){var t=g.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[r.utils.NaNtoZero(e)]:[],String);t.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",v).attr("y2",0),t.exit().remove()}))})})}var e={left:0,top:0},n=null,i=null,o=d3.scale.linear(),s=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),a=!0,u=null,c=r.models.tooltip(),l=window.ActiveXObject;return c.duration(0).hideDelay(0).hidden(!1),t.dispatch=s,t.tooltip=c,t.margin=function(n){return arguments.length?(e.top=void 0!==n.top?n.top:e.top,e.left=void 0!==n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(e){return arguments.length?(i=e,t):i},t.xScale=function(e){return arguments.length?(o=e,t):o},t.showGuideLine=function(e){return arguments.length?(a=e,t):a},t.svgContainer=function(e){return arguments.length?(u=e,t):u},t},r.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var r;r="function"!=typeof n?function(t){return t.x}:n;var i=d3.bisector(function(t,e){return r(t)-e}).left,o=d3.max([0,i(t,e)-1]),s=r(t[o]);if(void 0===s&&(s=o),s===e)return o;var a=d3.min([o+1,t.length-1]),u=r(t[a]);return void 0===u&&(u=a),Math.abs(u-e)>=Math.abs(s-e)?o:a},r.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach(function(t,o){var s=Math.abs(e-t);null!=t&&s<=r&&s<n&&(r=s,i=o)}),i},r.models.tooltip=function(){"use strict";function t(){if(d&&x(n))return r.dom.write(function(){l&&l.node()||((l=d3.select(document.body).select("#"+e).data([1])).enter().append("div").attr("class","nvtooltip "+(a||"xy-tooltip")).attr("id",e).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed(v,!0).classed(v,!0),l.exit().remove());var t=b(n,l.node());t&&(l.node().innerHTML=t),E()}),t}var e="nvtooltip-"+Math.floor(1e5*Math.random()),n=null,i="w",o=25,s=0,a=null,u=!0,c=200,l=null,f={left:null,top:null},d=!0,h=100,p=!0,v="nv-pointer-events-none",g=function(t,e,n){return t},m=function(t){return t},y=function(t,e){return t},b=function(t,e){if(null===t)return"";var n=d3.select(document.createElement("table"));if(p){n.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(m(t.value))}var r=n.selectAll("tbody").data([t]).enter().append("tbody").selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});r.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),r.append("td").classed("key",!0).classed("total",function(t){return!!t.total}).html(function(t,e){return y(t.key,e)}),r.append("td").classed("value",!0).html(function(t,e){return g(t.value,e,t)}),r.filter(function(t,e){return void 0!==t.percent}).append("td").classed("percent",!0).html(function(t,e){return"("+d3.format("%")(t.percent)+")"}),r.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}});var i=n.node().outerHTML;return void 0!==t.footer&&(i+="<div class='footer'>"+t.footer+"</div>"),i},w=function(){var t={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var e=document.body.getBoundingClientRect();t.left-=e.left,t.top-=e.top}return t},x=function(t){if(t&&t.series){if(r.utils.isArray(t.series))return!0;if(r.utils.isObject(t.series))return t.series=[t.series],!0}return!1},E=function(){r.dom.read(function(){var t=w(),e=function(t){var e,n,r,s=l.node().offsetHeight,a=l.node().offsetWidth,u=document.documentElement.clientWidth,c=document.documentElement.clientHeight;switch(i){case"e":e=-a-o,n=-s/2,t.left+e<0&&(e=o),(r=t.top+n)<0&&(n-=r),(r=t.top+n+s)>c&&(n-=r-c);break;case"w":e=o,n=-s/2,t.left+e+a>u&&(e=-a-o),(r=t.top+n)<0&&(n-=r),(r=t.top+n+s)>c&&(n-=r-c);break;case"n":e=-a/2-5,n=o,t.top+n+s>c&&(n=-s-o),(r=t.left+e)<0&&(e-=r),(r=t.left+e+a)>u&&(e-=r-u);break;case"s":e=-a/2,n=-s-o,t.top+n<0&&(n=o),(r=t.left+e)<0&&(e-=r),(r=t.left+e+a)>u&&(e-=r-u);break;case"center":e=-a/2,n=-s/2;break;default:e=0,n=0}return{left:e,top:n}}(t),n=t.left+e.left,r=t.top+e.top;if(u)l.interrupt().transition().delay(c).duration(0).style("opacity",0);else{var s="translate("+f.left+"px, "+f.top+"px)",a="translate("+Math.round(n)+"px, "+Math.round(r)+"px)",d=d3.interpolateString(s,a),p=l.style("opacity")<.1;l.interrupt().transition().duration(p?0:h).styleTween("transform",function(t){return d},"important").styleTween("-webkit-transform",function(t){return d}).style("-ms-transform",a).style("opacity",1)}f.left=n,f.top=r})};return t.nvPointerEventsClass=v,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{duration:{get:function(){return h},set:function(t){h=t}},gravity:{get:function(){return i},set:function(t){i=t}},distance:{get:function(){return o},set:function(t){o=t}},snapDistance:{get:function(){return s},set:function(t){s=t}},classes:{get:function(){return a},set:function(t){a=t}},enabled:{get:function(){return d},set:function(t){d=t}},hideDelay:{get:function(){return c},set:function(t){c=t}},contentGenerator:{get:function(){return b},set:function(t){b=t}},valueFormatter:{get:function(){return g},set:function(t){g=t}},headerFormatter:{get:function(){return m},set:function(t){m=t}},keyFormatter:{get:function(){return y},set:function(t){y=t}},headerEnabled:{get:function(){return p},set:function(t){p=t}},position:{get:function(){return w},set:function(t){w=t}},chartContainer:{get:function(){return document.body},set:function(t){r.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(t){r.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(t){r.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return u},set:function(e){u!=e&&(u=!!e,t())}},data:{get:function(){return n},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),n=t}},node:{get:function(){return l.node()},set:function(t){}},id:{get:function(){return e},set:function(t){}}}),r.utils.initOptions(t),t},r.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight,t):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight,t):document.body&&document.body.offsetWidth?(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight,t):t},r.utils.isArray=Array.isArray,r.utils.isObject=function(t){return null!==t&&"object"==typeof t},r.utils.isFunction=function(t){return"function"==typeof t},r.utils.isDate=function(t){return"[object Date]"===toString.call(t)},r.utils.isNumber=function(t){return!isNaN(t)&&"number"==typeof t},r.utils.windowResize=function(t){return window.addEventListener?window.addEventListener("resize",t):r.log("ERROR: Failed to bind to window.resize with: ",t),{callback:t,clear:function(){window.removeEventListener("resize",t)}}},r.utils.getColor=function(t){if(void 0===t)return r.utils.defaultColor();if(r.utils.isArray(t)){var e=d3.scale.ordinal().range(t);return function(t,n){var r=void 0===n?t:n;return t.color||e(r)}}return t},r.utils.defaultColor=function(){return r.utils.getColor(d3.scale.category20().range())},r.utils.customTheme=function(t,e,n){e=e||function(t){return t.key};var i=(n=n||d3.scale.category20().range()).length;return function(o,s){var a=e(o);return r.utils.isFunction(t[a])?t[a]():void 0!==t[a]?t[a]:(i||(i=n.length),i-=1,n[i])}},r.utils.pjax=function(t,e){var n=function(n){d3.html(n,function(n){var i=d3.select(e).node();i.parentNode.replaceChild(d3.select(n).select(e).node(),i),r.utils.pjax(t,e)})};d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),n(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&n(d3.event.state)})},r.utils.calcApproxTextWidth=function(t){if(r.utils.isFunction(t.style)&&r.utils.isFunction(t.text)){var e=parseInt(t.style("font-size").replace("px",""),10),n=t.text().length;return r.utils.NaNtoZero(n*e*.5)}return 0},r.utils.NaNtoZero=function(t){return!r.utils.isNumber(t)||isNaN(t)||null===t||t===1/0||t===-1/0?0:t},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},r.utils.renderWatch=function(t,e){if(!(this instanceof r.utils.renderWatch))return new r.utils.renderWatch(t,e);var n=void 0!==e?e:250,i=[],o=this;this.models=function(t){return[].slice.call(arguments,0).forEach(function(t){t.__rendered=!1,function(t){t.dispatch.on("renderEnd",function(e){t.__rendered=!0,o.renderEnd("model")})}(t),i.indexOf(t)<0&&i.push(t)}),this},this.reset=function(t){void 0!==t&&(n=t),i=[]},this.transition=function(t,e,r){if(e=arguments.length>1?[].slice.call(arguments,1):[],r=e.length>1?e.pop():void 0!==n?n:250,t.__rendered=!1,i.indexOf(t)<0&&i.push(t),0===r)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;0===t.length?t.__rendered=!0:t.every(function(t){return!t.length})?t.__rendered=!0:t.__rendered=!1;var s=0;return t.transition().duration(r).each(function(){++s}).each("end",function(n,r){0==--s&&(t.__rendered=!0,o.renderEnd.apply(this,e))})},this.renderEnd=function(){i.every(function(t){return t.__rendered})&&(i.forEach(function(t){t.__rendered=!1}),t.renderEnd.apply(this,arguments))}},r.utils.deepExtend=function(t){(arguments.length>1?[].slice.call(arguments,1):[]).forEach(function(e){for(var n in e){var i=r.utils.isArray(t[n]),o=r.utils.isObject(t[n]),s=r.utils.isObject(e[n]);o&&!i&&s?r.utils.deepExtend(t[n],e[n]):t[n]=e[n]}})},r.utils.state=function(){if(!(this instanceof r.utils.state))return new r.utils.state;var t={},e=function(){},n=function(){return{}},i=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(t){e(t,!0)}),this.getter=function(t){return n=t,this},this.setter=function(t,n){return n||(n=function(){}),e=function(e,r){t(e),r&&n()},this},this.init=function(t){i=i||{},r.utils.deepExtend(i,t)};this.update=function(){i&&(e(i,!1),i=null),function(){var e=n();if(JSON.stringify(e)===JSON.stringify(t))return!1;for(var r in e)void 0===t[r]&&(t[r]={}),t[r]=e[r],!0;return!0}.call(this)&&this.dispatch.change(t)}},r.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){r.utils.isFunction(this[t])&&this[t](e)}.bind(this)),this},r.utils.calcTicksX=function(t,e){for(var n=1,i=0;i<e.length;i+=1){var o=e[i]&&e[i].values?e[i].values.length:0;n=o>n?o:n}return r.log("Requested number of ticks: ",t),r.log("Calculated max values to be: ",n),t=t>n?t=n-1:t,t=t<1?1:t,t=Math.floor(t),r.log("Calculating tick count as: ",t),t},r.utils.calcTicksY=function(t,e){return r.utils.calcTicksX(t,e)},r.utils.initOption=function(t,e){t._calls&&t._calls[e]?t[e]=t._calls[e]:(t[e]=function(n){return arguments.length?(t._overrides[e]=!0,t._options[e]=n,t):t._options[e]},t["_"+e]=function(n){return arguments.length?(t._overrides[e]||(t._options[e]=n),t):t._options[e]})},r.utils.initOptions=function(t){t._overrides=t._overrides||{};var e=Object.getOwnPropertyNames(t._options||{}),n=Object.getOwnPropertyNames(t._calls||{});e=e.concat(n);for(var i in e)r.utils.initOption(t,e[i])},r.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),t._d3options=(t._d3options||[]).filter(function(t,e,n){return n.indexOf(t)===e}),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},r.utils.arrayUnique=function(t){return t.sort().filter(function(e,n){return!n||e!=t[n-1]})},r.utils.symbolMap=d3.map(),r.utils.symbol=function(){function t(t,i){var o=e.call(this,t,i),s=n.call(this,t,i);return-1!==d3.svg.symbolTypes.indexOf(o)?d3.svg.symbol().type(o).size(s)():r.utils.symbolMap.get(o)(s)}var e,n=64;return t.type=function(n){return arguments.length?(e=d3.functor(n),t):e},t.size=function(e){return arguments.length?(n=d3.functor(e),t):n},t},r.utils.inheritOptions=function(t,e){var n=Object.getOwnPropertyNames(e._options||{}),i=Object.getOwnPropertyNames(e._calls||{}),o=e._inherited||[],s=e._d3options||[],a=n.concat(i).concat(o).concat(s);a.unshift(e),a.unshift(t),d3.rebind.apply(this,a),t._inherited=r.utils.arrayUnique(n.concat(i).concat(o).concat(n).concat(t._inherited||[])),t._d3options=r.utils.arrayUnique(s.concat(t._d3options||[]))},r.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},r.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},r.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},r.utils.availableHeight=function(t,e,n){return Math.max(0,r.utils.sanitizeHeight(t,e)-n.top-n.bottom)},r.utils.availableWidth=function(t,e,n){return Math.max(0,r.utils.sanitizeWidth(t,e)-n.left-n.right)},r.utils.noData=function(t,e){var n=t.options(),i=n.margin(),o=n.noData(),s=null==o?["No Data Available."]:[o],a=r.utils.availableHeight(null,e,i),u=r.utils.availableWidth(null,e,i),c=i.left+u/2,l=i.top+a/2;e.selectAll("g").remove();var f=e.selectAll(".nv-noData").data(s);f.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),f.attr("x",c).attr("y",l).text(function(t){return t})},r.utils.wrapTicks=function(t,e){t.each(function(){for(var t,n=d3.select(this),r=n.text().split(/\s+/).reverse(),i=[],o=0,s=n.attr("y"),a=parseFloat(n.attr("dy")),u=n.text(null).append("tspan").attr("x",0).attr("y",s).attr("dy",a+"em");t=r.pop();)i.push(t),u.text(i.join(" ")),u.node().getComputedTextLength()>e&&(i.pop(),u.text(i.join(" ")),i=[t],u=n.append("tspan").attr("x",0).attr("y",s).attr("dy",1.1*++o+a+"em").text(t))})},r.utils.arrayEquals=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!r.arrayEquals(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0},r.utils.pointIsInArc=function(t,e,n){var r=n.innerRadius()(e),i=n.outerRadius()(e),o=n.startAngle()(e),s=n.endAngle()(e),a=t.x*t.x+t.y*t.y,u=Math.atan2(t.x,-t.y);return u=u<0?u+2*Math.PI:u,r*r<=a&&a<=i*i&&o<=u&&u<=s},r.models.axis=function(){"use strict";function t(a){return w.reset(),a.each(function(t){var a=d3.select(this);r.utils.initSVG(a);var m=a.selectAll("g.nv-wrap.nv-axis").data([t]),y=(m.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),m.select("g"));null!==p?n.ticks(p):"top"!=n.orient()&&"bottom"!=n.orient()||n.ticks(Math.abs(i.range()[1]-i.range()[0])/100),y.watchTransition(w,"axis").call(n),b=b||n.scale();var x=n.tickFormat();null==x&&(x=b.tickFormat());var E=y.selectAll("text.nv-axislabel").data([u||null]);E.exit().remove(),void 0!==g&&y.selectAll("g").select("text").style("font-size",g);var _,S,$;switch(n.orient()){case"top":E.enter().append("text").attr("class","nv-axislabel"),$=0,1===i.range().length?$=h?2*i.range()[0]+i.rangeBand():0:2===i.range().length?$=h?i.range()[0]+i.range()[1]+i.rangeBand():i.range()[1]:i.range().length>2&&($=i.range()[i.range().length-1]+(i.range()[1]-i.range()[0])),E.attr("text-anchor","middle").attr("y",0).attr("x",$/2),c&&((S=m.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),S.exit().remove(),S.attr("transform",function(t,e){return"translate("+r.utils.NaNtoZero(i(t))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-n.tickPadding()).attr("text-anchor","middle").text(function(t,n){var r=(e||x)(t);return(""+r).match("NaN")?"":r}),S.watchTransition(w,"min-max top").attr("transform",function(t,e){return"translate("+r.utils.NaNtoZero(i.range()[e])+",0)"}));break;case"bottom":_=v+36;var T=30,k=0,C=y.selectAll("g").select("text"),A="";if(l%360){C.attr("transform",""),C.each(function(t,e){var n=this.getBoundingClientRect(),r=n.width;k=n.height,r>T&&(T=r)}),A="rotate("+l+" 0,"+(k/2+n.tickPadding())+")";var R=Math.abs(Math.sin(l*Math.PI/180));_=(R?R*T:T)+30,C.attr("transform",A).style("text-anchor",l%360>0?"start":"end")}else d?C.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"}):C.attr("transform","translate(0,0)");E.enter().append("text").attr("class","nv-axislabel"),$=0,1===i.range().length?$=h?2*i.range()[0]+i.rangeBand():0:2===i.range().length?$=h?i.range()[0]+i.range()[1]+i.rangeBand():i.range()[1]:i.range().length>2&&($=i.range()[i.range().length-1]+(i.range()[1]-i.range()[0])),E.attr("text-anchor","middle").attr("y",_).attr("x",$/2),c&&((S=m.selectAll("g.nv-axisMaxMin").data([i.domain()[0],i.domain()[i.domain().length-1]])).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),S.exit().remove(),S.attr("transform",function(t,e){return"translate("+r.utils.NaNtoZero(i(t)+(h?i.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",n.tickPadding()).attr("transform",A).style("text-anchor",l?l%360>0?"start":"end":"middle").text(function(t,n){var r=(e||x)(t);return(""+r).match("NaN")?"":r}),S.watchTransition(w,"min-max bottom").attr("transform",function(t,e){return"translate("+r.utils.NaNtoZero(i(t)+(h?i.rangeBand()/2:0))+",0)"}));break;case"right":E.enter().append("text").attr("class","nv-axislabel"),E.style("text-anchor",f?"middle":"begin").attr("transform",f?"rotate(90)":"").attr("y",f?12-Math.max(o.right,s)-(v||0):-10).attr("x",f?d3.max(i.range())/2:n.tickPadding()),c&&((S=m.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),S.exit().remove(),S.attr("transform",function(t,e){return"translate(0,"+r.utils.NaNtoZero(i(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",n.tickPadding()).style("text-anchor","start").text(function(t,n){var r=(e||x)(t);return(""+r).match("NaN")?"":r}),S.watchTransition(w,"min-max right").attr("transform",function(t,e){return"translate(0,"+r.utils.NaNtoZero(i.range()[e])+")"}).select("text").style("opacity",1));break;case"left":E.enter().append("text").attr("class","nv-axislabel"),E.style("text-anchor",f?"middle":"end").attr("transform",f?"rotate(-90)":"").attr("y",f?25-Math.max(o.left,s)-(v||0):-10).attr("x",f?-d3.max(i.range())/2:-n.tickPadding()),c&&((S=m.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),S.exit().remove(),S.attr("transform",function(t,e){return"translate(0,"+r.utils.NaNtoZero(b(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-n.tickPadding()).attr("text-anchor","end").text(function(t,n){var r=(e||x)(t);return(""+r).match("NaN")?"":r}),S.watchTransition(w,"min-max right").attr("transform",function(t,e){return"translate(0,"+r.utils.NaNtoZero(i.range()[e])+")"}).select("text").style("opacity",1))}if(E.text(function(t){return t}),!c||"left"!==n.orient()&&"right"!==n.orient()||(y.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(i(t)<i.range()[1]+10||i(t)>i.range()[0]-10)&&((t>1e-10||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),i.domain()[0]==i.domain()[1]&&0==i.domain()[0]&&m.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),c&&("top"===n.orient()||"bottom"===n.orient())){var M=[];m.selectAll("g.nv-axisMaxMin").each(function(t,e){try{e?M.push(i(t)-this.getBoundingClientRect().width-4):M.push(i(t)+this.getBoundingClientRect().width+4)}catch(n){e?M.push(i(t)-4):M.push(i(t)+4)}}),y.selectAll("g").each(function(t,e){(i(t)<M[0]||i(t)>M[1])&&(t>1e-10||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}y.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t}).classed("zero",!0),b=i.copy()}),w.renderEnd("axis immediate"),t}var e,n=d3.svg.axis(),i=d3.scale.linear(),o={top:0,right:0,bottom:0,left:0},s=75,a=60,u=null,c=!0,l=0,f=!0,d=!1,h=!1,p=null,v=0,g=void 0,m=250,y=d3.dispatch("renderEnd");n.scale(i).orient("bottom").tickFormat(function(t){return t});var b,w=r.utils.renderWatch(y,m);return t.axis=n,t.dispatch=y,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{axisLabelDistance:{get:function(){return v},set:function(t){v=t}},staggerLabels:{get:function(){return d},set:function(t){d=t}},rotateLabels:{get:function(){return l},set:function(t){l=t}},rotateYLabel:{get:function(){return f},set:function(t){f=t}},showMaxMin:{get:function(){return c},set:function(t){c=t}},axisLabel:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return a},set:function(t){a=t}},ticks:{get:function(){return p},set:function(t){p=t}},width:{get:function(){return s},set:function(t){s=t}},fontSize:{get:function(){return g},set:function(t){g=t}},tickFormatMaxMin:{get:function(){return e},set:function(t){e=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return m},set:function(t){m=t,w.reset(m)}},scale:{get:function(){return i},set:function(e){i=e,n.scale(i),h="function"==typeof i.rangeBands,r.utils.inheritOptionsD3(t,i,["domain","range","rangeBand","rangeBands"])}}}),r.utils.initOptions(t),r.utils.inheritOptionsD3(t,n,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),r.utils.inheritOptionsD3(t,i,["domain","range","rangeBand","rangeBands"]),t},r.models.boxPlot=function(){"use strict";function t(f){return R.reset(),f.each(function(t){var f=c-u.left-u.right,M=l-u.top-u.bottom;T=d3.select(this),r.utils.initSVG(T),d.domain(e||t.map(function(t,e){return p(t,e)})).rangeBands(n||[0,f],.1);var I=[];if(!i){var O=[];t.forEach(function(t,e){var n=v(t),r=m(t),i=y(t),o=b(t),s=x(t);s&&s.forEach(function(t,e){O.push(E(t,e,void 0))}),i&&O.push(i),n&&O.push(n),r&&O.push(r),o&&O.push(o)}),I=[d3.min(O),d3.max(O)]}h.domain(i||I),h.range(o||[M,0]),s=s||d,a=a||h.copy().range([h(0),h(0)]);var N=T.selectAll("g.nv-wrap").data([t]);N.enter().append("g").attr("class","nvd3 nv-wrap");N.attr("transform","translate("+u.left+","+u.top+")");var L=N.selectAll(".nv-boxplot").data(function(t){return t}),D=L.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);L.attr("class","nv-boxplot").attr("transform",function(t,e,n){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", 0)"}).classed("hover",function(t){return t.hover}),L.watchTransition(R,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(e,n){return n*C/t.length}).attr("transform",function(t,e){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", 0)"}),L.exit().remove(),D.each(function(t,e){var n=d3.select(this);[y,b].forEach(function(r){if(void 0!==r(t)&&null!==r(t)){var i=r===y?"low":"high";n.append("line").style("stroke",w(t)||$(t,e)).attr("class","nv-boxplot-whisker nv-boxplot-"+i),n.append("line").style("stroke",w(t)||$(t,e)).attr("class","nv-boxplot-tick nv-boxplot-"+i)}})});var P=function(){return null===A?.9*d.rangeBand():Math.min(75,.9*d.rangeBand())},V=function(){return.45*d.rangeBand()-P()/2},q=function(){return.45*d.rangeBand()+P()/2};[y,b].forEach(function(t){var e=t===y?"low":"high",n=t===y?v:m;L.select("line.nv-boxplot-whisker.nv-boxplot-"+e).watchTransition(R,"nv-boxplot: boxplots").attr("x1",.45*d.rangeBand()).attr("y1",function(e,n){return h(t(e))}).attr("x2",.45*d.rangeBand()).attr("y2",function(t,e){return h(n(t))}),L.select("line.nv-boxplot-tick.nv-boxplot-"+e).watchTransition(R,"nv-boxplot: boxplots").attr("x1",V).attr("y1",function(e,n){return h(t(e))}).attr("x2",q).attr("y2",function(e,n){return h(t(e))})}),[y,b].forEach(function(t){var e=t===y?"low":"high";D.selectAll(".nv-boxplot-"+e).on("mouseover",function(e,n,r){d3.select(this).classed("hover",!0),k.elementMouseover({series:{key:t(e),color:w(e)||$(e,r)},e:d3.event})}).on("mouseout",function(e,n,r){d3.select(this).classed("hover",!1),k.elementMouseout({series:{key:t(e),color:w(e)||$(e,r)},e:d3.event})}).on("mousemove",function(t,e){k.elementMousemove({e:d3.event})})}),D.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),k.elementMouseover({key:p(t),value:p(t),series:[{key:"Q3",value:m(t),color:w(t)||$(t,e)},{key:"Q2",value:g(t),color:w(t)||$(t,e)},{key:"Q1",value:v(t),color:w(t)||$(t,e)}],data:t,index:e,e:d3.event})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),k.elementMouseout({key:p(t),value:p(t),series:[{key:"Q3",value:m(t),color:w(t)||$(t,e)},{key:"Q2",value:g(t),color:w(t)||$(t,e)},{key:"Q1",value:v(t),color:w(t)||$(t,e)}],data:t,index:e,e:d3.event})}).on("mousemove",function(t,e){k.elementMousemove({e:d3.event})}),L.select("rect.nv-boxplot-box").watchTransition(R,"nv-boxplot: boxes").attr("y",function(t,e){return h(m(t))}).attr("width",P).attr("x",V).attr("height",function(t,e){return Math.abs(h(m(t))-h(v(t)))||1}).style("fill",function(t,e){return w(t)||$(t,e)}).style("stroke",function(t,e){return w(t)||$(t,e)}),D.append("line").attr("class","nv-boxplot-median"),L.select("line.nv-boxplot-median").watchTransition(R,"nv-boxplot: boxplots line").attr("x1",V).attr("y1",function(t,e){return h(g(t))}).attr("x2",q).attr("y2",function(t,e){return h(g(t))});var F=L.selectAll(".nv-boxplot-outlier").data(function(t){return x(t)||[]});F.enter().append("circle").style("fill",function(t,e,n){return S(t,e,n)||$(t,n)}).style("stroke",function(t,e,n){return S(t,e,n)||$(t,n)}).style("z-index",9e3).on("mouseover",function(t,e,n){d3.select(this).classed("hover",!0),k.elementMouseover({series:{key:_(t,e,n),color:S(t,e,n)||$(t,n)},e:d3.event})}).on("mouseout",function(t,e,n){d3.select(this).classed("hover",!1),k.elementMouseout({series:{key:_(t,e,n),color:S(t,e,n)||$(t,n)},e:d3.event})}).on("mousemove",function(t,e){k.elementMousemove({e:d3.event})}),F.attr("class","nv-boxplot-outlier"),F.watchTransition(R,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*d.rangeBand()).attr("cy",function(t,e,n){return h(E(t,e,n))}).attr("r","3"),F.exit().remove(),s=d.copy(),a=h.copy()}),R.renderEnd("nv-boxplot immediate"),t}var e,n,i,o,s,a,u={top:0,right:0,bottom:0,left:0},c=960,l=500,f=Math.floor(1e4*Math.random()),d=d3.scale.ordinal(),h=d3.scale.linear(),p=function(t){return t.label},v=function(t){return t.values.Q1},g=function(t){return t.values.Q2},m=function(t){return t.values.Q3},y=function(t){return t.values.whisker_low},b=function(t){return t.values.whisker_high},w=function(t){return t.color},x=function(t){return t.values.outliers},E=function(t,e,n){return t},_=function(t,e,n){return t},S=function(t,e,n){},$=r.utils.defaultColor(),T=null,k=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),C=250,A=null,R=r.utils.renderWatch(k,C);return t.dispatch=k,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return l},set:function(t){l=t}},maxBoxWidth:{get:function(){return A},set:function(t){A=t}},x:{get:function(){return p},set:function(t){p=t}},q1:{get:function(){return v},set:function(t){v=t}},q2:{get:function(){return g},set:function(t){g=t}},q3:{get:function(){return m},set:function(t){m=t}},wl:{get:function(){return y},set:function(t){y=t}},wh:{get:function(){return b},set:function(t){b=t}},itemColor:{get:function(){return w},set:function(t){w=t}},outliers:{get:function(){return x},set:function(t){x=t}},outlierValue:{get:function(){return E},set:function(t){E=t}},outlierLabel:{get:function(){return _},set:function(t){_=t}},outlierColor:{get:function(){return S},set:function(t){S=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return n},set:function(t){n=t}},yRange:{get:function(){return o},set:function(t){o=t}},id:{get:function(){return f},set:function(t){f=t}},y:{get:function(){return console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead."),{}},set:function(t){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},color:{get:function(){return $},set:function(t){$=r.utils.getColor(t)}},duration:{get:function(){return C},set:function(t){C=t,R.reset(C)}}}),r.utils.initOptions(t),t},r.models.boxPlotChart=function(){"use strict";function t(l){return b.reset(),b.models(i),f&&b.models(o),d&&b.models(s),l.each(function(l){var v=d3.select(this);r.utils.initSVG(v);var b=(u||parseInt(v.style("width"))||960)-a.left-a.right,w=(c||parseInt(v.style("height"))||400)-a.top-a.bottom;if(t.update=function(){m.beforeUpdate(),v.transition().duration(y).call(t)},t.container=this,!l||!l.length){var x=v.selectAll(".nv-noData").data([g]);return x.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),x.attr("x",a.left+b/2).attr("y",a.top+w/2).text(function(t){return t}),t}v.selectAll(".nv-noData").remove(),e=i.xScale(),n=i.yScale().clamp(!0);var E=v.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([l]),_=E.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),S=_.append("defs"),$=E.select("g");_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),_.append("g").attr("class","nv-barsWrap"),$.attr("transform","translate("+a.left+","+a.top+")"),h&&$.select(".nv-y.nv-axis").attr("transform","translate("+b+",0)"),i.width(b).height(w);if($.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled})).transition().call(i),S.append("clipPath").attr("id","nv-x-label-clip-"+i.id()).append("rect"),$.select("#nv-x-label-clip-"+i.id()+" rect").attr("width",e.rangeBand()*(p?2:1)).attr("height",16).attr("x",-e.rangeBand()/(p?1:2)),f){o.scale(e).ticks(r.utils.calcTicksX(b/100,l)).tickSize(-w,0),$.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),$.select(".nv-x.nv-axis").call(o);var T=$.select(".nv-x.nv-axis").selectAll("g");p&&T.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}d&&(s.scale(n).ticks(Math.floor(w/36)).tickSize(-b,0),$.select(".nv-y.nv-axis").call(s)),$.select(".nv-zeroLine line").attr("x1",0).attr("x2",b).attr("y1",n(0)).attr("y2",n(0))}),b.renderEnd("nv-boxplot chart immediate"),t}var e,n,i=r.models.boxPlot(),o=r.models.axis(),s=r.models.axis(),a={top:15,right:10,bottom:50,left:60},u=null,c=null,l=r.utils.getColor(),f=!0,d=!0,h=!1,p=!1,v=r.models.tooltip(),g="No Data Available.",m=d3.dispatch("beforeUpdate","renderEnd"),y=250;o.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),s.orient(h?"right":"left").tickFormat(d3.format(",.1f")),v.duration(0);var b=r.utils.renderWatch(m,y);return i.dispatch.on("elementMouseover.tooltip",function(t){v.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){v.data(t).hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){v()}),t.dispatch=m,t.boxplot=i,t.xAxis=o,t.yAxis=s,t.tooltip=v,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},staggerLabels:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return f},set:function(t){f=t}},showYAxis:{get:function(){return d},set:function(t){d=t}},tooltipContent:{get:function(){return v},set:function(t){v=t}},noData:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},duration:{get:function(){return y},set:function(t){y=t,b.reset(y),i.duration(y),o.duration(y),s.duration(y)}},color:{get:function(){return l},set:function(t){l=r.utils.getColor(t),i.color(l)}},rightAlignYAxis:{get:function(){return h},set:function(t){h=t,s.orient(t?"right":"left")}}}),r.utils.inheritOptions(t,i),r.utils.initOptions(t),t},r.models.bullet=function(){"use strict";function t(t,e){var n=t.slice();t.sort(function(t,r){var i=n.indexOf(t),o=n.indexOf(r);return d3.descending(e[i],e[o])})}function e(i){return i.each(function(e,i){var y=v-n.left-n.right,S=g-n.top-n.bottom;m=d3.select(this),r.utils.initSVG(m);var $=s.call(this,e,i).slice(),T=a.call(this,e,i).slice(),k=u.call(this,e,i).slice(),C=c.call(this,e,i).slice(),A=l.call(this,e,i).slice(),R=f.call(this,e,i).slice(),M=d.call(this,e,i).slice(),I=h.call(this,e,i).slice();t(A,$),t(R,T),t(M,k),t(I,C),$.sort(d3.descending),T.sort(d3.descending),k.sort(d3.descending),C.sort(d3.descending);var O=d3.scale.linear().domain(d3.extent(d3.merge([p,$]))).range(o?[y,0]:[0,y]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(O.range());this.__chart__=O;d3.min($),d3.max($),$[1];for(var N=m.selectAll("g.nv-wrap.nv-bullet").data([e]),L=N.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),D=N.select("g"),P=(i=0,$.length);i<P;i++){var V="nv-range nv-range"+i;i<=2&&(V=V+" nv-range"+E[i]),L.append("rect").attr("class",V)}L.append("rect").attr("class","nv-measure"),N.attr("transform","translate("+n.left+","+n.top+")");var q=function(t){return Math.abs(O(t)-O(0))},F=function(t){return O(t<0?t:0)};for(i=0,P=$.length;i<P;i++){var U=$[i];D.select("rect.nv-range"+i).datum(U).attr("height",S).transition().duration(_).attr("width",q(U)).attr("x",F(U))}D.select("rect.nv-measure").style("fill",b).attr("height",S/3).attr("y",S/3).on("mouseover",function(){w.elementMouseover({value:C[0],label:I[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){w.elementMousemove({value:C[0],label:I[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){w.elementMouseout({value:C[0],label:I[0]||"Current",color:d3.select(this).style("fill")})}).transition().duration(_).attr("width",C<0?O(0)-O(C[0]):O(C[0])-O(0)).attr("x",F(C));var B=S/6,j=T.map(function(t,e){return{value:t,label:R[e]}});L.selectAll("path.nv-markerTriangle").data(j).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+B+"L"+B+","+-B+" "+-B+","+-B+"Z").on("mouseover",function(t){w.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[O(t.value),S/2]})}).on("mousemove",function(t){w.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){w.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),D.selectAll("path.nv-markerTriangle").data(j).transition().duration(_).attr("transform",function(t){return"translate("+O(t.value)+","+S/2+")"});var H=k.map(function(t,e){return{value:t,label:M[e]}});L.selectAll("line.nv-markerLine").data(H).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",function(t){return O(t.value)}).attr("y1","2").attr("x2",function(t){return O(t.value)}).attr("y2",S-2).on("mouseover",function(t){w.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[O(t.value),S/2]})}).on("mousemove",function(t){w.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){w.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),D.selectAll("line.nv-markerLine").data(H).transition().duration(_).attr("x1",function(t){return O(t.value)}).attr("x2",function(t){return O(t.value)}),N.selectAll(".nv-range").on("mouseover",function(t,e){var n=A[e]||x[e];w.elementMouseover({value:t,label:n,color:d3.select(this).style("fill")})}).on("mousemove",function(){w.elementMousemove({value:C[0],label:I[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){var n=A[e]||x[e];w.elementMouseout({value:t,label:n,color:d3.select(this).style("fill")})})}),e}var n={top:0,right:0,bottom:0,left:0},i="left",o=!1,s=function(t){return t.ranges},a=function(t){return t.markers?t.markers:[]},u=function(t){return t.markerLines?t.markerLines:[0]},c=function(t){return t.measures},l=function(t){return t.rangeLabels?t.rangeLabels:[]},f=function(t){return t.markerLabels?t.markerLabels:[]},d=function(t){return t.markerLineLabels?t.markerLineLabels:[]},h=function(t){return t.measureLabels?t.measureLabels:[]},p=[0],v=380,g=30,m=null,y=null,b=r.utils.getColor(["#1f77b4"]),w=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),x=["Maximum","Mean","Minimum"],E=["Max","Avg","Min"],_=1e3;return e.dispatch=w,e.options=r.utils.optionsFunc.bind(e),e._options=Object.create({},{ranges:{get:function(){return s},set:function(t){s=t}},markers:{get:function(){return a},set:function(t){a=t}},measures:{get:function(){return c},set:function(t){c=t}},forceX:{get:function(){return p},set:function(t){p=t}},width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return g},set:function(t){g=t}},tickFormat:{get:function(){return y},set:function(t){y=t}},duration:{get:function(){return _},set:function(t){_=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},orient:{get:function(){return i},set:function(t){o="right"==(i=t)||"bottom"==i}},color:{get:function(){return b},set:function(t){b=r.utils.getColor(t)}}}),r.utils.initOptions(e),e},r.models.bulletChart=function(){"use strict";function t(n){return n.each(function(i,p){var v=d3.select(this);r.utils.initSVG(v);var g=r.utils.availableWidth(l,v,s),m=f-s.top-s.bottom;if(t.update=function(){t(n)},t.container=this,!i||!a.call(this,i,p))return r.utils.noData(t,v),t;v.selectAll(".nv-noData").remove();var y=a.call(this,i,p).slice().sort(d3.descending),b=u.call(this,i,p).slice().sort(d3.descending),w=c.call(this,i,p).slice().sort(d3.descending),x=v.selectAll("g.nv-wrap.nv-bulletChart").data([i]),E=x.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),_=x.select("g");E.append("g").attr("class","nv-bulletWrap"),E.append("g").attr("class","nv-titles"),x.attr("transform","translate("+s.left+","+s.top+")");var S=d3.scale.linear().domain([0,Math.max(y[0],b[0]||0,w[0])]).range(o?[g,0]:[0,g]),$=this.__chart__||d3.scale.linear().domain([0,1/0]).range(S.range());this.__chart__=S;var T=E.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(f-s.top-s.bottom)/2+")");T.append("text").attr("class","nv-title").text(function(t){return t.title}),T.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),e.width(g).height(m);var k=_.select(".nv-bulletWrap");d3.transition(k).call(e);var C=d||S.tickFormat(g/100),A=_.selectAll("g.nv-tick").data(S.ticks(h||g/50),function(t){return this.textContent||C(t)}),R=A.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+$(t)+",0)"}).style("opacity",1e-6);R.append("line").attr("y1",m).attr("y2",7*m/6),R.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*m/6).text(C);var M=d3.transition(A).transition().duration(e.duration()).attr("transform",function(t){return"translate("+S(t)+",0)"}).style("opacity",1);M.select("line").attr("y1",m).attr("y2",7*m/6),M.select("text").attr("y",7*m/6),d3.transition(A.exit()).transition().duration(e.duration()).attr("transform",function(t){return"translate("+S(t)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),t}var e=r.models.bullet(),n=r.models.tooltip(),i="left",o=!1,s={top:5,right:40,bottom:20,left:120},a=function(t){return t.ranges},u=function(t){return t.markers?t.markers:[]},c=function(t){return t.measures},l=null,f=55,d=null,h=null,p=null,v=d3.dispatch();return n.duration(0).headerEnabled(!1),e.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.label,value:t.value,color:t.color},n.data(t).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(t){n.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(t){n()}),t.bullet=e,t.dispatch=v,t.tooltip=n,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{ranges:{get:function(){return a},set:function(t){a=t}},markers:{get:function(){return u},set:function(t){u=t}},measures:{get:function(){return c},set:function(t){c=t}},width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return f},set:function(t){f=t}},tickFormat:{get:function(){return d},set:function(t){d=t}},ticks:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},orient:{get:function(){return i},set:function(t){o="right"==(i=t)||"bottom"==i}}}),r.utils.inheritOptions(t,e),r.utils.initOptions(t),t},r.models.candlestickBar=function(){"use strict";function t(_){return _.each(function(t){e=d3.select(this);var _=r.utils.availableWidth(u,e,a),S=r.utils.availableHeight(c,e,a);r.utils.initSVG(e);var T=_/t[0].values.length*.45;f.domain(n||d3.extent(t[0].values.map(h).concat(b))),x?f.range(o||[.5*_/t[0].values.length,_*(t[0].values.length-.5)/t[0].values.length]):f.range(o||[5+T/2,_-T/2-5]),d.domain(i||[d3.min(t[0].values.map(y).concat(w)),d3.max(t[0].values.map(m).concat(w))]).range(s||[S,0]),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var k=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([t[0].values]),C=k.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),A=C.append("defs"),R=C.append("g"),M=k.select("g");R.append("g").attr("class","nv-ticks"),k.attr("transform","translate("+a.left+","+a.top+")"),e.on("click",function(t,e){$.chartClick({data:t,index:e,pos:d3.event,id:l})}),A.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect"),k.select("#nv-chart-clip-path-"+l+" rect").attr("width",_).attr("height",S),M.attr("clip-path",E?"url(#nv-chart-clip-path-"+l+")":"");var I=k.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});I.exit().remove();var O=I.enter().append("g");I.attr("class",function(t,e,n){return(v(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e});O.append("line").attr("class","nv-candlestick-lines").attr("transform",function(t,e){return"translate("+f(h(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return d(m(t,e))}).attr("x2",0).attr("y2",function(t,e){return d(y(t,e))}),O.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(t,e){return"translate("+(f(h(t,e))-T/2)+","+(d(p(t,e))-(v(t,e)>g(t,e)?d(g(t,e))-d(v(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",T).attr("height",function(t,e){var n=v(t,e),r=g(t,e);return n>r?d(r)-d(n):d(n)-d(r)});I.select(".nv-candlestick-lines").transition().attr("transform",function(t,e){return"translate("+f(h(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return d(m(t,e))}).attr("x2",0).attr("y2",function(t,e){return d(y(t,e))}),I.select(".nv-candlestick-rects").transition().attr("transform",function(t,e){return"translate("+(f(h(t,e))-T/2)+","+(d(p(t,e))-(v(t,e)>g(t,e)?d(g(t,e))-d(v(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",T).attr("height",function(t,e){var n=v(t,e),r=g(t,e);return n>r?d(r)-d(n):d(n)-d(r)})}),t}var e,n,i,o,s,a={top:0,right:0,bottom:0,left:0},u=null,c=null,l=Math.floor(1e4*Math.random()),f=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},v=function(t){return t.open},g=function(t){return t.close},m=function(t){return t.high},y=function(t){return t.low},b=[],w=[],x=!1,E=!0,_=r.utils.defaultColor(),S=!1,$=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return t.highlightPoint=function(n,r){t.clearHighlights(),e.select(".nv-candlestickBar .nv-tick-0-"+n).classed("hover",r)},t.clearHighlights=function(){e.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},t.dispatch=$,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return s},set:function(t){s=t}},forceX:{get:function(){return b},set:function(t){b=t}},forceY:{get:function(){return w},set:function(t){w=t}},padData:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return E},set:function(t){E=t}},id:{get:function(){return l},set:function(t){l=t}},interactive:{get:function(){return S},set:function(t){S=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return p},set:function(t){p=t}},open:{get:function(){return v()},set:function(t){v=t}},close:{get:function(){return g()},set:function(t){g=t}},high:{get:function(){return m},set:function(t){m=t}},low:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!=t.top?t.top:a.top,a.right=void 0!=t.right?t.right:a.right,a.bottom=void 0!=t.bottom?t.bottom:a.bottom,a.left=void 0!=t.left?t.left:a.left}},color:{get:function(){return _},set:function(t){_=r.utils.getColor(t)}}}),r.utils.initOptions(t),t},r.models.cumulativeLineChart=function(){"use strict";function t(f){return L.reset(),L.models(o),y&&L.models(s),b&&L.models(a),f.each(function(f){function k(){J.data([N]);var e=t.duration();t.duration(0),t.update(),t.duration(e)}var L=d3.select(this);r.utils.initSVG(L),L.classed("nv-chart-"+S,!0);var q=r.utils.availableWidth(v,L,d),F=r.utils.availableHeight(g,L,d);if(t.update=function(){0===R?L.call(t):L.transition().duration(R).call(t)},t.container=this,$.setter(P(f),t.update).getter(D(f)).update(),$.disabled=f.map(function(t){return!!t.disabled}),!T){var U;T={};for(U in $)$[U]instanceof Array?T[U]=$[U].slice(0):T[U]=$[U]}var B=d3.behavior.drag().on("dragstart",function(e,n){d3.select(t.container).style("cursor","ew-resize")}).on("drag",function(t,e){N.x=d3.event.x,N.i=Math.round(O.invert(N.x)),k()}).on("dragend",function(e,n){d3.select(t.container).style("cursor","auto"),$.index=N.i,A.stateChange($)});if(!(f&&f.length&&f.filter(function(t){return t.values.length}).length))return r.utils.noData(t,L),t;L.selectAll(".nv-noData").remove(),n=o.xScale(),i=o.yScale(),O.domain([0,f[0].values.length-1]).range([0,q]).clamp(!0);f=function(t,e){V||(V=o.y());return e.map(function(e,n){if(!e.values)return e;var r=e.values[t];if(null==r)return e;var i=V(r,t);return Math.abs(i)<1e-5&&!M?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(t,e){return t.display={y:(V(t,e)-i)/i},t}),e)})}(N.i,f);void 0===I&&(I=e(f)),_?o.yDomain(null):(o.yDomain(I),o.clipEdge(!0));var j=E?"none":"all",H=L.selectAll("g.nv-wrap.nv-cumulativeLine").data([f]),z=H.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),W=H.select("g");if(z.append("g").attr("class","nv-interactive"),z.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-background"),z.append("g").attr("class","nv-linesWrap").style("pointer-events",j),z.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),z.append("g").attr("class","nv-legendWrap"),z.append("g").attr("class","nv-controlsWrap"),m?(u.width(q),W.select(".nv-legendWrap").datum(f).call(u),h||u.height()===d.top||(d.top=u.height(),F=r.utils.availableHeight(g,L,d)),W.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")):W.select(".nv-legendWrap").selectAll("*").remove(),x){var G=[{key:"Re-scale y-axis",disabled:!_}];c.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),W.select(".nv-controlsWrap").datum(G).attr("transform","translate(0,"+-d.top+")").call(c)}else W.select(".nv-controlsWrap").selectAll("*").remove();H.attr("transform","translate("+d.left+","+d.top+")"),w&&W.select(".nv-y.nv-axis").attr("transform","translate("+q+",0)");var Z=f.filter(function(t){return t.tempDisabled});H.select(".tempDisabled").remove(),Z.length&&H.append("text").attr("class","tempDisabled").attr("x",q/2).attr("y","-.71em").style("text-anchor","end").text(Z.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),E&&(l.width(q).height(F).margin({left:d.left,top:d.top}).svgContainer(L).xScale(n),H.select(".nv-interactive").call(l)),z.select(".nv-background").append("rect"),W.select(".nv-background rect").attr("width",q).attr("height",F),o.y(function(t){return t.display.y}).width(q).height(F).color(f.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!f[e].disabled&&!f[e].tempDisabled}));var Y=W.select(".nv-linesWrap").datum(f.filter(function(t){return!t.disabled&&!t.tempDisabled}));Y.call(o),f.forEach(function(t,e){t.seriesIndex=e});var X=f.filter(function(t){return!t.disabled&&!!C(t)}),K=W.select(".nv-avgLinesWrap").selectAll("line").data(X,function(t){return t.key}),Q=function(t){var e=i(C(t));return e<0?0:e>F?F:e};K.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t,e){return o.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",q).attr("y1",Q).attr("y2",Q),K.style("stroke-opacity",function(t){var e=i(C(t));return e<0||e>F?0:1}).attr("x1",0).attr("x2",q).attr("y1",Q).attr("y2",Q),K.exit().remove();var J=Y.selectAll(".nv-indexLine").data([N]);J.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(B),J.attr("transform",function(t){return"translate("+O(t.i)+",0)"}).attr("height",F),y&&(s.scale(n)._ticks(r.utils.calcTicksX(q/70,f)).tickSize(-F,0),W.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),W.select(".nv-x.nv-axis").call(s)),b&&(a.scale(i)._ticks(r.utils.calcTicksY(F/36,f)).tickSize(-q,0),W.select(".nv-y.nv-axis").call(a)),W.select(".nv-background rect").on("click",function(){N.x=d3.mouse(this)[0],N.i=Math.round(O.invert(N.x)),$.index=N.i,A.stateChange($),k()}),o.dispatch.on("elementClick",function(t){N.i=t.pointIndex,N.x=O(N.i),$.index=N.i,A.stateChange($),k()}),c.dispatch.on("legendClick",function(n,r){n.disabled=!n.disabled,_=!n.disabled,$.rescaleY=_,_||(I=e(f)),A.stateChange($),t.update()}),u.dispatch.on("stateChange",function(e){for(var n in e)$[n]=e[n];A.stateChange($),t.update()}),l.dispatch.on("elementMousemove",function(e){o.clearHighlights();var n,i,u,c=[];if(f.filter(function(t,e){return t.seriesIndex=e,!(t.disabled||t.tempDisabled)}).forEach(function(s,a){i=r.interactiveBisect(s.values,e.pointXValue,t.x()),o.highlightPoint(a,i,!0);var l=s.values[i];void 0!==l&&(void 0===n&&(n=l),void 0===u&&(u=t.xScale()(t.x()(l,i))),c.push({key:s.key,value:t.y()(l,i),color:p(s,s.seriesIndex)}))}),c.length>2){var d=t.yScale().invert(e.mouseY),h=.03*Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),v=r.nearestValueIndex(c.map(function(t){return t.value}),d,h);null!==v&&(c[v].highlight=!0)}var g=s.tickFormat()(t.x()(n,i),i);l.tooltip.valueFormatter(function(t,e){return a.tickFormat()(t)}).data({value:g,series:c})(),l.renderGuideLine(u)}),l.dispatch.on("elementMouseout",function(t){o.clearHighlights()}),A.on("changeState",function(e){void 0!==e.disabled&&(f.forEach(function(t,n){t.disabled=e.disabled[n]}),$.disabled=e.disabled),void 0!==e.index&&(N.i=e.index,N.x=O(N.i),$.index=e.index,J.data([N])),void 0!==e.rescaleY&&(_=e.rescaleY),t.update()})}),L.renderEnd("cumulativeLineChart immediate"),t}function e(t){var e=t.filter(function(t){return!(t.disabled||t.tempDisabled)}).map(function(t,e){return d3.extent(t.values,function(t){return t.display.y})});return[d3.min(e,function(t){return t[0]}),d3.max(e,function(t){return t[1]})]}var n,i,o=r.models.line(),s=r.models.axis(),a=r.models.axis(),u=r.models.legend(),c=r.models.legend(),l=r.interactiveGuideline(),f=r.models.tooltip(),d={top:30,right:30,bottom:50,left:60},h=null,p=r.utils.defaultColor(),v=null,g=null,m=!0,y=!0,b=!0,w=!1,x=!0,E=!1,_=!0,S=o.id(),$=r.utils.state(),T=null,k=null,C=function(t){return t.average},A=d3.dispatch("stateChange","changeState","renderEnd"),R=250,M=!1;$.index=0,$.rescaleY=_,s.orient("bottom").tickPadding(7),a.orient(w?"right":"left"),f.valueFormatter(function(t,e){return a.tickFormat()(t,e)}).headerFormatter(function(t,e){return s.tickFormat()(t,e)}),c.updateState(!1);var I,O=d3.scale.linear(),N={i:0,x:0},L=r.utils.renderWatch(A,R),D=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),index:N.i,rescaleY:_}}},P=function(t){return function(e){void 0!==e.index&&(N.i=e.index),void 0!==e.rescaleY&&(_=e.rescaleY),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};o.dispatch.on("elementMouseover.tooltip",function(e){var n={x:t.x()(e.point),y:t.y()(e.point),color:e.point.color};e.point=n,f.data(e).hidden(!1)}),o.dispatch.on("elementMouseout.tooltip",function(t){f.hidden(!0)});var V=null;return t.dispatch=A,t.lines=o,t.legend=u,t.controls=c,t.xAxis=s,t.yAxis=a,t.interactiveLayer=l,t.state=$,t.tooltip=f,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return g},set:function(t){g=t}},showControls:{get:function(){return x},set:function(t){x=t}},showLegend:{get:function(){return m},set:function(t){m=t}},average:{get:function(){return C},set:function(t){C=t}},defaultState:{get:function(){return T},set:function(t){T=t}},noData:{get:function(){return k},set:function(t){k=t}},showXAxis:{get:function(){return y},set:function(t){y=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},noErrorCheck:{get:function(){return M},set:function(t){M=t}},rescaleY:{get:function(){return _},set:function(e){_=e,t.state.rescaleY=e}},margin:{get:function(){return d},set:function(t){void 0!==t.top&&(d.top=t.top,h=t.top),d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},color:{get:function(){return p},set:function(t){p=r.utils.getColor(t),u.color(p)}},useInteractiveGuideline:{get:function(){return E},set:function(e){E=e,!0===e&&(t.interactive(!1),t.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,a.orient(t?"right":"left")}},duration:{get:function(){return R},set:function(t){R=t,o.duration(R),s.duration(R),a.duration(R),L.reset(R)}}}),r.utils.inheritOptions(t,o),r.utils.initOptions(t),t},r.models.discreteBar=function(){"use strict";function t(d){return S.reset(),d.each(function(t){var d=l-c.left-c.right,_=f-c.top-c.bottom;e=d3.select(this),r.utils.initSVG(e),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var $=n&&i?[]:t.map(function(t){return t.values.map(function(t,e){return{x:v(t,e),y:g(t,e),y0:t.y0}})});h.domain(n||d3.merge($).map(function(t){return t.x})).rangeBands(o||[0,d],.1),p.domain(i||d3.extent(d3.merge($).map(function(t){return t.y}).concat(m))),b?p.range(s||[_-(p.domain()[0]<0?12:0),p.domain()[1]>0?12:0]):p.range(s||[_,0]),a=a||h,u=u||p.copy().range([p(0),p(0)]);var T=e.selectAll("g.nv-wrap.nv-discretebar").data([t]),k=T.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");T.select("g");k.append("g").attr("class","nv-groups"),T.attr("transform","translate("+c.left+","+c.top+")");var C=T.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});C.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),C.exit().watchTransition(S,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),C.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),C.watchTransition(S,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var A=C.selectAll("g.nv-bar").data(function(t){return t.values});A.exit().remove();var R=A.enter().append("g").attr("transform",function(t,e,n){return"translate("+(h(v(t,e))+.05*h.rangeBand())+", "+p(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),x.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),x.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){x.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){x.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(t,e){x.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});R.append("rect").attr("height",0).attr("width",.9*h.rangeBand()/t.length),b?(R.append("text").attr("text-anchor","middle"),A.select("text").text(function(t,e){return w(g(t,e))}).watchTransition(S,"discreteBar: bars text").attr("x",.9*h.rangeBand()/2).attr("y",function(t,e){return g(t,e)<0?p(g(t,e))-p(0)+12:-4})):A.selectAll("text").remove(),A.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||y(t,e)}).style("stroke",function(t,e){return t.color||y(t,e)}).select("rect").attr("class",E).watchTransition(S,"discreteBar: bars rect").attr("width",.9*h.rangeBand()/t.length),A.watchTransition(S,"discreteBar: bars").attr("transform",function(t,e){return"translate("+(h(v(t,e))+.05*h.rangeBand())+", "+(g(t,e)<0?p(0):p(0)-p(g(t,e))<1?p(0)-1:p(g(t,e)))+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(p(g(t,e))-p(0)),1)}),a=h.copy(),u=p.copy()}),S.renderEnd("discreteBar immediate"),t}var e,n,i,o,s,a,u,c={top:0,right:0,bottom:0,left:0},l=960,f=500,d=Math.floor(1e4*Math.random()),h=d3.scale.ordinal(),p=d3.scale.linear(),v=function(t){return t.x},g=function(t){return t.y},m=[0],y=r.utils.defaultColor(),b=!1,w=d3.format(",.2f"),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),E="discreteBar",_=250,S=r.utils.renderWatch(x,_);return t.dispatch=x,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return f},set:function(t){f=t}},forceY:{get:function(){return m},set:function(t){m=t}},showValues:{get:function(){return b},set:function(t){b=t}},x:{get:function(){return v},set:function(t){v=t}},y:{get:function(){return g},set:function(t){g=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return s},set:function(t){s=t}},valueFormat:{get:function(){return w},set:function(t){w=t}},id:{get:function(){return d},set:function(t){d=t}},rectClass:{get:function(){return E},set:function(t){E=t}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return y},set:function(t){y=r.utils.getColor(t)}},duration:{get:function(){return _},set:function(t){_=t,S.reset(_)}}}),r.utils.initOptions(t),t},r.models.discreteBarChart=function(){"use strict";function t(u){return S.reset(),S.models(i),v&&S.models(o),g&&S.models(s),u.each(function(u){var h=d3.select(this);r.utils.initSVG(h);var x=r.utils.availableWidth(f,h,c),S=r.utils.availableHeight(d,h,c);if(t.update=function(){E.beforeUpdate(),h.transition().duration(_).call(t)},t.container=this,!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return r.utils.noData(t,h),t;h.selectAll(".nv-noData").remove(),e=i.xScale(),n=i.yScale().clamp(!0);var $=h.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([u]),T=$.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),k=T.append("defs"),C=$.select("g");T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),T.append("g").attr("class","nv-barsWrap"),T.append("g").attr("class","nv-legendWrap"),C.attr("transform","translate("+c.left+","+c.top+")"),p?(a.width(x),C.select(".nv-legendWrap").datum(u).call(a),l||a.height()===c.top||(c.top=a.height(),S=r.utils.availableHeight(d,h,c)),$.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")):C.select(".nv-legendWrap").selectAll("*").remove(),m&&C.select(".nv-y.nv-axis").attr("transform","translate("+x+",0)"),i.width(x).height(S);if(C.select(".nv-barsWrap").datum(u.filter(function(t){return!t.disabled})).transition().call(i),k.append("clipPath").attr("id","nv-x-label-clip-"+i.id()).append("rect"),C.select("#nv-x-label-clip-"+i.id()+" rect").attr("width",e.rangeBand()*(y?2:1)).attr("height",16).attr("x",-e.rangeBand()/(y?1:2)),v){o.scale(e)._ticks(r.utils.calcTicksX(x/100,u)).tickSize(-S,0),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+(n.range()[0]+(i.showValues()&&n.domain()[0]<0?16:0))+")"),C.select(".nv-x.nv-axis").call(o);var A=C.select(".nv-x.nv-axis").selectAll("g");y&&A.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"}),w&&A.selectAll(".tick text").attr("transform","rotate("+w+" 0,0)").style("text-anchor",w>0?"start":"end"),b&&C.selectAll(".tick text").call(r.utils.wrapTicks,t.xAxis.rangeBand())}g&&(s.scale(n)._ticks(r.utils.calcTicksY(S/36,u)).tickSize(-x,0),C.select(".nv-y.nv-axis").call(s)),C.select(".nv-zeroLine line").attr("x1",0).attr("x2",m?-x:x).attr("y1",n(0)).attr("y2",n(0))}),S.renderEnd("discreteBar chart immediate"),t}var e,n,i=r.models.discreteBar(),o=r.models.axis(),s=r.models.axis(),a=r.models.legend(),u=r.models.tooltip(),c={top:15,right:10,bottom:50,left:60},l=null,f=null,d=null,h=r.utils.getColor(),p=!1,v=!0,g=!0,m=!1,y=!1,b=!1,w=0,x=null,E=d3.dispatch("beforeUpdate","renderEnd"),_=250;o.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),s.orient(m?"right":"left").tickFormat(d3.format(",.1f")),u.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return s.tickFormat()(t,e)}).keyFormatter(function(t,e){return o.tickFormat()(t,e)});var S=r.utils.renderWatch(E,_);return i.dispatch.on("elementMouseover.tooltip",function(e){e.series={key:t.x()(e.data),value:t.y()(e.data),color:e.color},u.data(e).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){u.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){u()}),t.dispatch=E,t.discretebar=i,t.legend=a,t.xAxis=o,t.yAxis=s,t.tooltip=u,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return p},set:function(t){p=t}},staggerLabels:{get:function(){return y},set:function(t){y=t}},rotateLabels:{get:function(){return w},set:function(t){w=t}},wrapLabels:{get:function(){return b},set:function(t){b=!!t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return g},set:function(t){g=t}},noData:{get:function(){return x},set:function(t){x=t}},margin:{get:function(){return c},set:function(t){void 0!==t.top&&(c.top=t.top,l=t.top),c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return _},set:function(t){_=t,S.reset(_),i.duration(_),o.duration(_),s.duration(_)}},color:{get:function(){return h},set:function(t){h=r.utils.getColor(t),i.color(h),a.color(h)}},rightAlignYAxis:{get:function(){return m},set:function(t){m=t,s.orient(t?"right":"left")}}}),r.utils.inheritOptions(t,i),r.utils.initOptions(t),t},r.models.distribution=function(){"use strict";function t(i){return d.reset(),i.each(function(t){"x"===s?(n.left,n.right):(n.top,n.bottom);var i="x"==s?"y":"x",l=d3.select(this);r.utils.initSVG(l),e=e||c;var f=l.selectAll("g.nv-distribution").data([t]),h=(f.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),f.select("g"));f.attr("transform","translate("+n.left+","+n.top+")");var p=h.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});p.enter().append("g"),p.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return u(t,e)});var v=p.selectAll("line.nv-dist"+s).data(function(t){return t.values});v.enter().append("line").attr(s+"1",function(t,n){return e(a(t,n))}).attr(s+"2",function(t,n){return e(a(t,n))}),d.transition(p.exit().selectAll("line.nv-dist"+s),"dist exit").attr(s+"1",function(t,e){return c(a(t,e))}).attr(s+"2",function(t,e){return c(a(t,e))}).style("stroke-opacity",0).remove(),v.attr("class",function(t,e){return"nv-dist"+s+" nv-dist"+s+"-"+e}).attr(i+"1",0).attr(i+"2",o),d.transition(v,"dist").attr(s+"1",function(t,e){return c(a(t,e))}).attr(s+"2",function(t,e){return c(a(t,e))}),e=c.copy()}),d.renderEnd("distribution immediate"),t}var e,n={top:0,right:0,bottom:0,left:0},i=400,o=8,s="x",a=function(t){return t[s]},u=r.utils.defaultColor(),c=d3.scale.linear(),l=250,f=d3.dispatch("renderEnd"),d=r.utils.renderWatch(f,l);return t.options=r.utils.optionsFunc.bind(t),t.dispatch=f,t.margin=function(e){return arguments.length?(n.top=void 0!==e.top?e.top:n.top,n.right=void 0!==e.right?e.right:n.right,n.bottom=void 0!==e.bottom?e.bottom:n.bottom,n.left=void 0!==e.left?e.left:n.left,t):n},t.width=function(e){return arguments.length?(i=e,t):i},t.axis=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(o=e,t):o},t.getData=function(e){return arguments.length?(a=d3.functor(e),t):a},t.scale=function(e){return arguments.length?(c=e,t):c},t.color=function(e){return arguments.length?(u=r.utils.getColor(e),t):u},t.duration=function(e){return arguments.length?(l=e,d.reset(l),t):l},t},r.models.focus=function(t){"use strict";function e(w){return b.reset(),b.models(t),d&&b.models(o),h&&b.models(s),w.each(function(b){function w(t){v=a.empty()?null:a.extent();var e=a.empty()?n.domain():a.extent();m.brush({extent:e,brush:a}),a.empty()||a.extent(v),C.data([a.empty()?n.domain():v]).each(function(t,e){var r=n(t[0])-n.range()[0],i=E-n(t[1]);d3.select(this).select(".left").attr("width",r<0?0:r),d3.select(this).select(".right").attr("x",n(t[1])).attr("width",i<0?0:i)}),t&&m.onBrush(e)}var x=d3.select(this);r.utils.initSVG(x);var E=r.utils.availableWidth(l,x,u),_=f-u.top-u.bottom;e.update=function(){0===g?x.call(e):x.transition().duration(g).call(e)},e.container=this,n=t.xScale(),i=t.yScale();var S=x.selectAll("g.nv-focus").data([b]),$=S.enter().append("g").attr("class","nvd3 nv-focus").append("g"),T=S.select("g");S.attr("transform","translate("+u.left+","+u.top+")"),$.append("g").attr("class","nv-background").append("rect"),$.append("g").attr("class","nv-x nv-axis"),$.append("g").attr("class","nv-y nv-axis"),$.append("g").attr("class","nv-contentWrap"),$.append("g").attr("class","nv-brushBackground"),$.append("g").attr("class","nv-x nv-brush"),p&&T.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),T.select(".nv-background rect").attr("width",E).attr("height",_),t.width(E).height(_).color(b.map(function(t,e){return t.color||c(t,e)}).filter(function(t,e){return!b[e].disabled}));var k=T.select(".nv-contentWrap").datum(b.filter(function(t){return!t.disabled}));d3.transition(k).call(t),a.x(n).on("brush",function(){w(y)}),a.on("brushend",function(){y||m.onBrush(a.empty()?n.domain():a.extent())}),v&&a.extent(v);var C=T.select(".nv-brushBackground").selectAll("g").data([v||a.extent()]),A=C.enter().append("g");A.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",_),A.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",_);var R=T.select(".nv-x.nv-brush").call(a);R.selectAll("rect").attr("height",_),R.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,r=_/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}),w(!0),T.select(".nv-background rect").attr("width",E).attr("height",_),d&&(o.scale(n)._ticks(r.utils.calcTicksX(E/100,b)).tickSize(-_,0),T.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(T.select(".nv-x.nv-axis")).call(o)),h&&(s.scale(i)._ticks(r.utils.calcTicksY(_/36,b)).tickSize(-E,0),d3.transition(T.select(".nv-y.nv-axis")).call(s)),T.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")")}),b.renderEnd("focus immediate"),e}t=t||r.models.line();var n,i,o=r.models.axis(),s=r.models.axis(),a=d3.svg.brush(),u={top:10,right:0,bottom:30,left:0},c=r.utils.defaultColor(),l=null,f=70,d=!0,h=!1,p=!1,v=null,g=250,m=d3.dispatch("brush","onBrush","renderEnd"),y=!0;t.interactive(!1),t.pointActive(function(t){return!1});var b=r.utils.renderWatch(m,g);return e.dispatch=m,e.content=t,e.brush=a,e.xAxis=o,e.yAxis=s,e.options=r.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return f},set:function(t){f=t}},showXAxis:{get:function(){return d},set:function(t){d=t}},showYAxis:{get:function(){return h},set:function(t){h=t}},brushExtent:{get:function(){return v},set:function(t){v=t}},syncBrushing:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return g},set:function(e){g=e,b.reset(g),t.duration(g),o.duration(g),s.duration(g)}},color:{get:function(){return c},set:function(e){c=r.utils.getColor(e),t.color(c)}},interpolate:{get:function(){return t.interpolate()},set:function(e){t.interpolate(e)}},xTickFormat:{get:function(){return o.tickFormat()},set:function(t){o.tickFormat(t)}},yTickFormat:{get:function(){return s.tickFormat()},set:function(t){s.tickFormat(t)}},x:{get:function(){return t.x()},set:function(e){t.x(e)}},y:{get:function(){return t.y()},set:function(e){t.y(e)}},rightAlignYAxis:{get:function(){return p},set:function(t){p=t,s.orient(p?"right":"left")}}}),r.utils.inheritOptions(e,t),r.utils.initOptions(e),e},r.models.forceDirectedGraph=function(){"use strict";function t(s){return E.reset(),s.each(function(s){o=d3.select(this),r.utils.initSVG(o);var c=r.utils.availableWidth(n,o,e),w=r.utils.availableHeight(i,o,e);if(o.attr("width",c).attr("height",w),!(s&&s.links&&s.nodes))return r.utils.noData(t,o),t;o.selectAll(".nv-noData").remove(),o.selectAll("*").remove();var x=new Set;s.nodes.forEach(function(t){Object.keys(t).forEach(function(t){x.add(t)})});var E=d3.layout.force().nodes(s.nodes).links(s.links).size([c,w]).linkStrength(l).friction(f).linkDistance(d).charge(h).gravity(p).theta(v).alpha(g).start(),_=o.selectAll(".link").data(s.links).enter().append("line").attr("class","nv-force-link").style("stroke-width",function(t){return Math.sqrt(t.value)}),S=o.selectAll(".node").data(s.nodes).enter().append("g").attr("class","nv-force-node").call(E.drag);S.append("circle").attr("r",m).style("fill",function(t){return a(t)}).on("mouseover",function(t){o.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.py),o.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.px);var e=a(t);t.series=[],x.forEach(function(n){t.series.push({color:e,key:n,value:t[n]})}),u.data(t).hidden(!1)}).on("mouseout",function(t){u.hidden(!0)}),u.headerFormatter(function(t){return"Node"}),b(_),y(S),E.on("tick",function(){_.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),S.attr("transform",function(t){return"translate("+t.x+", "+t.y+")"})})}),t}var e={top:2,right:0,bottom:2,left:0},n=400,i=32,o=null,s=d3.dispatch("renderEnd"),a=r.utils.getColor(["#000"]),u=r.models.tooltip(),c=null,l=.1,f=.9,d=30,h=-120,p=.1,v=.8,g=.1,m=5,y=function(t){},b=function(t){},w=d3.functor(0),x=d3.functor(0),E=r.utils.renderWatch(s);return t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return i},set:function(t){i=t}},linkStrength:{get:function(){return l},set:function(t){l=t}},friction:{get:function(){return f},set:function(t){f=t}},linkDist:{get:function(){return d},set:function(t){d=t}},charge:{get:function(){return h},set:function(t){h=t}},gravity:{get:function(){return p},set:function(t){p=t}},theta:{get:function(){return v},set:function(t){v=t}},alpha:{get:function(){return g},set:function(t){g=t}},radius:{get:function(){return m},set:function(t){m=t}},x:{get:function(){return w},set:function(t){w=d3.functor(t)}},y:{get:function(){return x},set:function(t){x=d3.functor(t)}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return a},set:function(t){a=r.utils.getColor(t)}},noData:{get:function(){return c},set:function(t){c=t}},nodeExtras:{get:function(){return y},set:function(t){y=t}},linkExtras:{get:function(){return b},set:function(t){b=t}}}),t.dispatch=s,t.tooltip=u,r.utils.initOptions(t),t},r.models.furiousLegend=function(){"use strict";function t(m){function y(t,e){return"furious"!=g?"#000":p?t.disengaged?a(t,e):"#fff":p?void 0:t.disabled?a(t,e):"#fff"}function b(t,e){return p&&"furious"==g?t.disengaged?"#fff":a(t,e):t.disabled?"#fff":a(t,e)}return m.each(function(t){var m=n-e.left-e.right,w=d3.select(this);r.utils.initSVG(w);var x=w.selectAll("g.nv-legend").data([t]),E=(x.enter().append("g").attr("class","nvd3 nv-legend").append("g"),x.select("g"));x.attr("transform","translate("+e.left+","+e.top+")");var _,S=E.selectAll(".nv-series").data(function(t){return"furious"!=g?t:t.filter(function(t){return!!p||!t.disengaged})}),$=S.enter().append("g").attr("class","nv-series");if("classic"==g)$.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),_=S.select("circle");else if("furious"==g){$.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),_=S.select("rect"),$.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");S.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",y(t,e))})}$.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var T=S.select("text.nv-legend-text");S.on("mouseover",function(t,e){v.legendMouseover(t,e)}).on("mouseout",function(t,e){v.legendMouseout(t,e)}).on("click",function(t,e){v.legendClick(t,e);var n=S.data();if(d){if("classic"==g)h?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1}));else if("furious"==g)if(p)t.disengaged=!t.disengaged,t.userDisabled=void 0==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!p){t.disabled=!t.disabled,t.userDisabled=t.disabled;n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1})}v.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})})}}).on("dblclick",function(t,e){if(("furious"!=g||!p)&&(v.legendDblclick(t,e),d)){var n=S.data();n.forEach(function(t){t.disabled=!0,"furious"==g&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==g&&(t.userDisabled=t.disabled),v.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),S.classed("nv-disabled",function(t){return t.userDisabled}),S.exit().remove(),T.attr("fill",y).text(function(t){return s(o(t))});var k;switch(g){case"furious":k=23;break;case"classic":k=20}if(c){var C=[];S.each(function(t,e){var n;if(s(o(t))&&s(o(t)).length>u){var i=s(o(t)).substring(0,u);n=d3.select(this).select("text").text(i+"..."),d3.select(this).append("svg:title").text(s(o(t)))}else n=d3.select(this).select("text");var a;try{if((a=n.node().getComputedTextLength())<=0)throw Error()}catch(t){a=r.utils.calcApproxTextWidth(n)}C.push(a+l)});for(var A=0,R=0,M=[];R<m&&A<C.length;)M[A]=C[A],R+=C[A++];for(0===A&&(A=1);R>m&&A>1;){M=[],A--;for(var I=0;I<C.length;I++)C[I]>(M[I%A]||0)&&(M[I%A]=C[I]);R=M.reduce(function(t,e,n,r){return t+e})}for(var O=[],N=0,L=0;N<A;N++)O[N]=L,L+=M[N];S.attr("transform",function(t,e){return"translate("+O[e%A]+","+(5+Math.floor(e/A)*k)+")"}),f?E.attr("transform","translate("+(n-e.right-R)+","+e.top+")"):E.attr("transform","translate(0,"+e.top+")"),i=e.top+e.bottom+Math.ceil(C.length/A)*k}else{var D,P=5,V=5,q=0;S.attr("transform",function(t,r){var i=d3.select(this).select("text").node().getComputedTextLength()+l;return D=V,n<e.left+e.right+D+i&&(V=D=5,P+=k),(V+=i)>q&&(q=V),"translate("+D+","+P+")"}),E.attr("transform","translate("+(n-e.right-q)+","+e.top+")"),i=e.top+e.bottom+P+15}"furious"==g&&_.attr("width",function(t,e){return T[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),_.style("fill",b).style("stroke",function(t,e){return t.color||a(t,e)})}),t}var e={top:5,right:0,bottom:5,left:0},n=400,i=20,o=function(t){return t.key},s=function(t){return t},a=r.utils.getColor(),u=20,c=!0,l=28,f=!0,d=!0,h=!1,p=!1,v=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),g="classic";return t.dispatch=v,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return i},set:function(t){i=t}},key:{get:function(){return o},set:function(t){o=t}},keyFormatter:{get:function(){return s},set:function(t){s=t}},align:{get:function(){return c},set:function(t){c=t}},rightAlign:{get:function(){return f},set:function(t){f=t}},maxKeyLength:{get:function(){return u},set:function(t){u=t}},padding:{get:function(){return l},set:function(t){l=t}},updateState:{get:function(){return d},set:function(t){d=t}},radioButtonMode:{get:function(){return h},set:function(t){h=t}},expanded:{get:function(){return p},set:function(t){p=t}},vers:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return a},set:function(t){a=r.utils.getColor(t)}}}),r.utils.initOptions(t),t},r.models.historicalBar=function(){"use strict";function t(_){return _.each(function(t){E.reset(),l=d3.select(this);var _=r.utils.availableWidth(a,l,s),S=r.utils.availableHeight(u,l,s);r.utils.initSVG(l),f.domain(e||d3.extent(t[0].values.map(h).concat(v))),m?f.range(i||[.5*_/t[0].values.length,_*(t[0].values.length-.5)/t[0].values.length]):f.range(i||[0,_]),d.domain(n||d3.extent(t[0].values.map(p).concat(g))).range(o||[S,0]),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var $=l.selectAll("g.nv-wrap.nv-historicalBar-"+c).data([t[0].values]),T=$.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+c),k=T.append("defs"),C=T.append("g"),A=$.select("g");C.append("g").attr("class","nv-bars"),$.attr("transform","translate("+s.left+","+s.top+")"),l.on("click",function(t,e){w.chartClick({data:t,index:e,pos:d3.event,id:c})}),k.append("clipPath").attr("id","nv-chart-clip-path-"+c).append("rect"),$.select("#nv-chart-clip-path-"+c+" rect").attr("width",_).attr("height",S),A.attr("clip-path",y?"url(#nv-chart-clip-path-"+c+")":"");var R=$.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return h(t,e)});R.exit().remove(),R.enter().append("rect").attr("x",0).attr("y",function(t,e){return r.utils.NaNtoZero(d(Math.max(0,p(t,e))))}).attr("height",function(t,e){return r.utils.NaNtoZero(Math.abs(d(p(t,e))-d(0)))}).attr("transform",function(e,n){return"translate("+(f(h(e,n))-_/t[0].values.length*.45)+",0)"}).on("mouseover",function(t,e){x&&(d3.select(this).classed("hover",!0),w.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mouseout",function(t,e){x&&(d3.select(this).classed("hover",!1),w.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mousemove",function(t,e){x&&w.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){if(x){w.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}}).on("dblclick",function(t,e){x&&(w.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),R.attr("fill",function(t,e){return b(t,e)}).attr("class",function(t,e,n){return(p(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).watchTransition(E,"bars").attr("transform",function(e,n){return"translate("+(f(h(e,n))-_/t[0].values.length*.45)+",0)"}).attr("width",_/t[0].values.length*.9),R.watchTransition(E,"bars").attr("y",function(t,e){var n=p(t,e)<0?d(0):d(0)-d(p(t,e))<1?d(0)-1:d(p(t,e));return r.utils.NaNtoZero(n)}).attr("height",function(t,e){return r.utils.NaNtoZero(Math.max(Math.abs(d(p(t,e))-d(0)),1))})}),E.renderEnd("historicalBar immediate"),t}var e,n,i,o,s={top:0,right:0,bottom:0,left:0},a=null,u=null,c=Math.floor(1e4*Math.random()),l=null,f=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},v=[],g=[0],m=!1,y=!0,b=r.utils.defaultColor(),w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),x=!0,E=r.utils.renderWatch(w,0);return t.highlightPoint=function(t,e){l.select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},t.clearHighlights=function(){l.select(".nv-bars .nv-bar.hover").classed("hover",!1)},t.dispatch=w,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return u},set:function(t){u=t}},forceX:{get:function(){return v},set:function(t){v=t}},forceY:{get:function(){return g},set:function(t){g=t}},padData:{get:function(){return m},set:function(t){m=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return p},set:function(t){p=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},clipEdge:{get:function(){return y},set:function(t){y=t}},id:{get:function(){return c},set:function(t){c=t}},interactive:{get:function(){return x},set:function(t){x=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},color:{get:function(){return b},set:function(t){b=r.utils.getColor(t)}}}),r.utils.initOptions(t),t},r.models.historicalBarChart=function(t){"use strict";function e(t){return t.each(function(l){T.reset(),T.models(o),m&&T.models(s),y&&T.models(a);var _=d3.select(this);r.utils.initSVG(_);var k=r.utils.availableWidth(p,_,f),C=r.utils.availableHeight(v,_,f);if(e.update=function(){_.transition().duration($).call(e)},e.container=this,x.disabled=l.map(function(t){return!!t.disabled}),!E){var A;E={};for(A in x)x[A]instanceof Array?E[A]=x[A].slice(0):E[A]=x[A]}if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return r.utils.noData(e,_),e;_.selectAll(".nv-noData").remove(),n=o.xScale(),i=o.yScale();var R=_.selectAll("g.nv-wrap.nv-historicalBarChart").data([l]),M=R.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),I=R.select("g");M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis"),M.append("g").attr("class","nv-barsWrap"),M.append("g").attr("class","nv-legendWrap"),M.append("g").attr("class","nv-interactive"),g?(u.width(k),I.select(".nv-legendWrap").datum(l).call(u),d||u.height()===f.top||(f.top=u.height(),C=r.utils.availableHeight(v,_,f)),R.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")):I.select(".nv-legendWrap").selectAll("*").remove(),R.attr("transform","translate("+f.left+","+f.top+")"),b&&I.select(".nv-y.nv-axis").attr("transform","translate("+k+",0)"),w&&(c.width(k).height(C).margin({left:f.left,top:f.top}).svgContainer(_).xScale(n),R.select(".nv-interactive").call(c)),o.width(k).height(C).color(l.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!l[e].disabled}));I.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled})).transition().call(o),m&&(s.scale(n)._ticks(r.utils.calcTicksX(k/100,l)).tickSize(-C,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),I.select(".nv-x.nv-axis").transition().call(s)),y&&(a.scale(i)._ticks(r.utils.calcTicksY(C/36,l)).tickSize(-k,0),I.select(".nv-y.nv-axis").transition().call(a)),c.dispatch.on("elementMousemove",function(t){o.clearHighlights();var n,i,u,f=[];l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(s,a){i=r.interactiveBisect(s.values,t.pointXValue,e.x()),o.highlightPoint(i,!0);var c=s.values[i];void 0!==c&&(void 0===n&&(n=c),void 0===u&&(u=e.xScale()(e.x()(c,i))),f.push({key:s.key,value:e.y()(c,i),color:h(s,s.seriesIndex),data:s.values[i]}))});var d=s.tickFormat()(e.x()(n,i));c.tooltip.valueFormatter(function(t,e){return a.tickFormat()(t)}).data({value:d,index:i,series:f})(),c.renderGuideLine(u)}),c.dispatch.on("elementMouseout",function(t){S.tooltipHide(),o.clearHighlights()}),u.dispatch.on("legendClick",function(n,r){n.disabled=!n.disabled,l.filter(function(t){return!t.disabled}).length||l.map(function(t){return t.disabled=!1,R.selectAll(".nv-series").classed("disabled",!1),t}),x.disabled=l.map(function(t){return!!t.disabled}),S.stateChange(x),t.transition().call(e)}),u.dispatch.on("legendDblclick",function(t){l.forEach(function(t){t.disabled=!0}),t.disabled=!1,x.disabled=l.map(function(t){return!!t.disabled}),S.stateChange(x),e.update()}),S.on("changeState",function(t){void 0!==t.disabled&&(l.forEach(function(e,n){e.disabled=t.disabled[n]}),x.disabled=t.disabled),e.update()})}),T.renderEnd("historicalBarChart immediate"),e}var n,i,o=t||r.models.historicalBar(),s=r.models.axis(),a=r.models.axis(),u=r.models.legend(),c=r.interactiveGuideline(),l=r.models.tooltip(),f={top:30,right:90,bottom:50,left:90},d=null,h=r.utils.defaultColor(),p=null,v=null,g=!1,m=!0,y=!0,b=!1,w=!1,x={},E=null,_=null,S=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),$=250;s.orient("bottom").tickPadding(7),a.orient(b?"right":"left"),l.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return a.tickFormat()(t,e)}).headerFormatter(function(t,e){return s.tickFormat()(t,e)});var T=r.utils.renderWatch(S,0);return o.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:e.x()(t.data),value:e.y()(t.data),color:t.color},l.data(t).hidden(!1)}),o.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)}),o.dispatch.on("elementMousemove.tooltip",function(t){l()}),e.dispatch=S,e.bars=o,e.legend=u,e.xAxis=s,e.yAxis=a,e.interactiveLayer=c,e.tooltip=l,e.options=r.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return v},set:function(t){v=t}},showLegend:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return m},set:function(t){m=t}},showYAxis:{get:function(){return y},set:function(t){y=t}},defaultState:{get:function(){return E},set:function(t){E=t}},noData:{get:function(){return _},set:function(t){_=t}},margin:{get:function(){return f},set:function(t){void 0!==t.top&&(f.top=t.top,d=t.top),f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}},color:{get:function(){return h},set:function(t){h=r.utils.getColor(t),u.color(h),o.color(h)}},duration:{get:function(){return $},set:function(t){$=t,T.reset($),a.duration($),s.duration($)}},rightAlignYAxis:{get:function(){return b},set:function(t){b=t,a.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return w},set:function(t){w=t,!0===t&&e.interactive(!1)}}}),r.utils.inheritOptions(e,o),r.utils.initOptions(e),e},r.models.ohlcBarChart=function(){var t=r.models.historicalBarChart(r.models.ohlcBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(e){var n=e.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+t.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+t.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+t.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+t.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),t},r.models.candlestickBarChart=function(){var t=r.models.historicalBarChart(r.models.candlestickBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(e){var n=e.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+t.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+t.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+t.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+t.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),t},r.models.legend=function(){"use strict";function t(y){function b(t,e){return"furious"!=m?"#000":v?t.disengaged?"#000":"#fff":v?void 0:(t.color||(t.color=a(t,e)),t.disabled?t.color:"#fff")}function w(t,e){return v&&"furious"==m&&t.disengaged?"#eee":t.color||a(t,e)}function x(t,e){return v&&"furious"==m?1:t.disabled?0:1}return y.each(function(t){var a=n-e.left-e.right,y=d3.select(this);r.utils.initSVG(y);var E=y.selectAll("g.nv-legend").data([t]),_=E.enter().append("g").attr("class","nvd3 nv-legend").append("g"),S=E.select("g");f?E.attr("transform","translate("+-e.right+","+e.top+")"):E.attr("transform","translate("+e.left+","+e.top+")");var $,T,k=S.selectAll(".nv-series").data(function(t){return"furious"!=m?t:t.filter(function(t){return!!v||!t.disengaged})}),C=k.enter().append("g").attr("class","nv-series");switch(m){case"furious":T=23;break;case"classic":T=20}if("classic"==m)C.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),$=k.select(".nv-legend-symbol");else if("furious"==m){C.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),$=k.select(".nv-legend-symbol"),C.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");k.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",b(t,e))})}C.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var A=k.select("text.nv-legend-text");k.on("mouseover",function(t,e){g.legendMouseover(t,e)}).on("mouseout",function(t,e){g.legendMouseout(t,e)}).on("click",function(t,e){g.legendClick(t,e);var n=k.data();if(d){if("classic"==m)p?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1}));else if("furious"==m)if(v)t.disengaged=!t.disengaged,t.userDisabled=void 0==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!v){t.disabled=!t.disabled,t.userDisabled=t.disabled;n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1})}g.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})})}}).on("dblclick",function(t,e){if(h){if("furious"==m&&v)return;if(g.legendDblclick(t,e),d){var n=k.data();n.forEach(function(t){t.disabled=!0,"furious"==m&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==m&&(t.userDisabled=t.disabled),g.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}}),k.classed("nv-disabled",function(t){return t.userDisabled}),k.exit().remove(),A.attr("fill",b).text(function(t){return s(o(t))});var R=0;if(c){var M=[];k.each(function(t,e){var n;if(s(o(t))&&s(o(t)).length>u){var i=s(o(t)).substring(0,u);n=d3.select(this).select("text").text(i+"..."),d3.select(this).append("svg:title").text(s(o(t)))}else n=d3.select(this).select("text");var a;try{if((a=n.node().getComputedTextLength())<=0)throw Error()}catch(t){a=r.utils.calcApproxTextWidth(n)}M.push(a+l)});var I=0,O=[];for(R=0;R<a&&I<M.length;)O[I]=M[I],R+=M[I++];for(0===I&&(I=1);R>a&&I>1;){O=[],I--;for(var N=0;N<M.length;N++)M[N]>(O[N%I]||0)&&(O[N%I]=M[N]);R=O.reduce(function(t,e,n,r){return t+e})}for(var L=[],D=0,P=0;D<I;D++)L[D]=P,P+=O[D];k.attr("transform",function(t,e){return"translate("+L[e%I]+","+(5+Math.floor(e/I)*T)+")"}),f?S.attr("transform","translate("+(n-e.right-R)+","+e.top+")"):S.attr("transform","translate(0,"+e.top+")"),i=e.top+e.bottom+Math.ceil(M.length/I)*T}else{var V,q=5,F=5,U=0;k.attr("transform",function(t,r){var i=d3.select(this).select("text").node().getComputedTextLength()+l;return V=F,n<e.left+e.right+V+i&&(F=V=5,q+=T),(F+=i)>U&&(U=F),R<V+U&&(R=V+U),"translate("+V+","+q+")"}),S.attr("transform","translate("+(n-e.right-U)+","+e.top+")"),i=e.top+e.bottom+q+15}if("furious"==m){$.attr("width",function(t,e){return A[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),_.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0);S.select(".nv-legend-bg").transition().duration(300).attr("x",-T).attr("width",R+T-12).attr("height",i+10).attr("y",-e.top-10).attr("opacity",v?1:0)}$.style("fill",w).style("fill-opacity",x).style("stroke",w)}),t}var e={top:5,right:0,bottom:5,left:0},n=400,i=20,o=function(t){return t.key},s=function(t){return t},a=r.utils.getColor(),u=20,c=!0,l=32,f=!0,d=!0,h=!0,p=!1,v=!1,g=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),m="classic";return t.dispatch=g,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return i},set:function(t){i=t}},key:{get:function(){return o},set:function(t){o=t}},keyFormatter:{get:function(){return s},set:function(t){s=t}},align:{get:function(){return c},set:function(t){c=t}},maxKeyLength:{get:function(){return u},set:function(t){u=t}},rightAlign:{get:function(){return f},set:function(t){f=t}},padding:{get:function(){return l},set:function(t){l=t}},updateState:{get:function(){return d},set:function(t){d=t}},enableDoubleClick:{get:function(){return h},set:function(t){h=t}},radioButtonMode:{get:function(){return p},set:function(t){p=t}},expanded:{get:function(){return v},set:function(t){v=t}},vers:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return a},set:function(t){a=r.utils.getColor(t)}}}),r.utils.initOptions(t),t},r.models.line=function(){"use strict";function t(m){return x.reset(),x.models(i),m.each(function(t){u=d3.select(this);var m=r.utils.availableWidth(s,u,o),y=r.utils.availableHeight(a,u,o);r.utils.initSVG(u),e=i.xScale(),n=i.yScale(),b=b||e,w=w||n;var E=u.selectAll("g.nv-wrap.nv-line").data([t]),_=E.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),S=_.append("defs"),$=_.append("g"),T=E.select("g");$.append("g").attr("class","nv-groups"),$.append("g").attr("class","nv-scatterWrap"),E.attr("transform","translate("+o.left+","+o.top+")"),i.width(m).height(y);var k=E.select(".nv-scatterWrap");k.call(i),S.append("clipPath").attr("id","nv-edge-clip-"+i.id()).append("rect"),E.select("#nv-edge-clip-"+i.id()+" rect").attr("width",m).attr("height",y>0?y:0),T.attr("clip-path",v?"url(#nv-edge-clip-"+i.id()+")":""),k.attr("clip-path",v?"url(#nv-edge-clip-"+i.id()+")":"");var C=E.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});C.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(t){return t.strokeWidth||c}).style("fill-opacity",1e-6),C.exit().remove(),C.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return l(t,e)}).style("stroke",function(t,e){return l(t,e)}),C.watchTransition(x,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(t){return t.fillOpacity||.5});var A=C.selectAll("path.nv-area").data(function(t){return p(t)?[t]:[]});A.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(g).defined(h).x(function(t,e){return r.utils.NaNtoZero(b(f(t,e)))}).y0(function(t,e){return r.utils.NaNtoZero(w(d(t,e)))}).y1(function(t,e){return w(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])}).apply(this,[t.values])}),C.exit().selectAll("path.nv-area").remove(),A.watchTransition(x,"line: areaPaths").attr("d",function(t){return d3.svg.area().interpolate(g).defined(h).x(function(t,n){return r.utils.NaNtoZero(e(f(t,n)))}).y0(function(t,e){return r.utils.NaNtoZero(n(d(t,e)))}).y1(function(t,e){return n(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])}).apply(this,[t.values])});var R=C.selectAll("path.nv-line").data(function(t){return[t.values]});R.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(g).defined(h).x(function(t,e){return r.utils.NaNtoZero(b(f(t,e)))}).y(function(t,e){return r.utils.NaNtoZero(w(d(t,e)))})),R.watchTransition(x,"line: linePaths").attr("d",d3.svg.line().interpolate(g).defined(h).x(function(t,n){return r.utils.NaNtoZero(e(f(t,n)))}).y(function(t,e){return r.utils.NaNtoZero(n(d(t,e)))})),b=e.copy(),w=n.copy()}),x.renderEnd("line immediate"),t}var e,n,i=r.models.scatter(),o={top:0,right:0,bottom:0,left:0},s=960,a=500,u=null,c=1.5,l=r.utils.defaultColor(),f=function(t){return t.x},d=function(t){return t.y},h=function(t,e){return!isNaN(d(t,e))&&null!==d(t,e)},p=function(t){return t.area},v=!1,g="linear",m=250,y=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");i.pointSize(16).pointDomain([16,256]);var b,w,x=r.utils.renderWatch(y,m);return t.dispatch=y,t.scatter=i,i.dispatch.on("elementClick",function(){y.elementClick.apply(this,arguments)}),i.dispatch.on("elementMouseover",function(){y.elementMouseover.apply(this,arguments)}),i.dispatch.on("elementMouseout",function(){y.elementMouseout.apply(this,arguments)}),t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return a},set:function(t){a=t}},defined:{get:function(){return h},set:function(t){h=t}},interpolate:{get:function(){return g},set:function(t){g=t}},clipEdge:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return m},set:function(t){m=t,x.reset(m),i.duration(m)}},isArea:{get:function(){return p},set:function(t){p=d3.functor(t)}},x:{get:function(){return f},set:function(t){f=t,i.x(t)}},y:{get:function(){return d},set:function(t){d=t,i.y(t)}},color:{get:function(){return l},set:function(t){l=r.utils.getColor(t),i.color(l)}}}),r.utils.inheritOptions(t,i),r.utils.initOptions(t),t},r.models.lineChart=function(){"use strict";function t(c){return C.reset(),C.models(i),y&&C.models(o),b&&C.models(s),c.each(function(c){function $(){y&&V.select(".nv-focus .nv-x.nv-axis").transition().duration(k).call(o)}function C(){b&&V.select(".nv-focus .nv-y.nv-axis").transition().duration(k).call(s)}function M(t){V.select(".nv-focus .nv-linesWrap").datum(c.filter(function(t){return!t.disabled}).map(function(e,n){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter(function(e,n){return i.x()(e,n)>=t[0]&&i.x()(e,n)<=t[1]}),disableTooltip:e.disableTooltip}})).transition().duration(k).call(i),$(),C()}var I=d3.select(this);r.utils.initSVG(I);var O=r.utils.availableWidth(p,I,f),N=r.utils.availableHeight(v,I,f)-(E?l.height():0);if(t.update=function(){0===k?I.call(t):I.transition().duration(k).call(t)},t.container=this,_.setter(R(c),t.update).getter(A(c)).update(),_.disabled=c.map(function(t){return!!t.disabled}),!S){var L;S={};for(L in _)_[L]instanceof Array?S[L]=_[L].slice(0):S[L]=_[L]}if(!(c&&c.length&&c.filter(function(t){return t.values.length}).length))return r.utils.noData(t,I),t;I.selectAll(".nv-noData").remove(),l.dispatch.on("onBrush",function(t){M(t)}),e=i.xScale(),n=i.yScale();var D=I.selectAll("g.nv-wrap.nv-lineChart").data([c]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),V=D.select("g");P.append("g").attr("class","nv-legendWrap");var q=P.append("g").attr("class","nv-focus");q.append("g").attr("class","nv-background").append("rect"),q.append("g").attr("class","nv-x nv-axis"),q.append("g").attr("class","nv-y nv-axis"),q.append("g").attr("class","nv-linesWrap"),q.append("g").attr("class","nv-interactive");P.append("g").attr("class","nv-focusWrap");g?(a.width(O),V.select(".nv-legendWrap").datum(c).call(a),"bottom"===m?(f.bottom=o.height()+a.height(),N=r.utils.availableHeight(v,I,f),V.select(".nv-legendWrap").attr("transform","translate(0,"+(N+o.height())+")")):"top"===m&&(d||a.height()===f.top||(f.top=a.height(),N=r.utils.availableHeight(v,I,f)-(E?l.height():0)),D.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")"))):V.select(".nv-legendWrap").selectAll("*").remove(),D.attr("transform","translate("+f.left+","+f.top+")"),w&&V.select(".nv-y.nv-axis").attr("transform","translate("+O+",0)"),x&&(u.width(O).height(N).margin({left:f.left,top:f.top}).svgContainer(I).xScale(e),D.select(".nv-interactive").call(u)),V.select(".nv-focus .nv-background rect").attr("width",O).attr("height",N),i.width(O).height(N).color(c.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!c[e].disabled}));var F=V.select(".nv-linesWrap").datum(c.filter(function(t){return!t.disabled}));if(y&&o.scale(e)._ticks(r.utils.calcTicksX(O/100,c)).tickSize(-N,0),b&&s.scale(n)._ticks(r.utils.calcTicksY(N/36,c)).tickSize(-O,0),V.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+N+")"),E||null!==l.brush.extent()){l.width(O),V.select(".nv-focusWrap").style("display",E?"initial":"none").attr("transform","translate(0,"+(N+f.bottom+l.margin().top)+")").call(l);var U=l.brush.empty()?l.xDomain():l.brush.extent();null!==U&&M(U)}else F.call(i),$(),C();a.dispatch.on("stateChange",function(e){for(var n in e)_[n]=e[n];T.stateChange(_),t.update()}),u.dispatch.on("elementMousemove",function(n){i.clearHighlights();var o,a,f,d=[];if(c.filter(function(t,e){return t.seriesIndex=e,!t.disabled&&!t.disableTooltip}).forEach(function(s,u){var c=null!==l.brush.extent()?l.brush.empty()?l.xScale().domain():l.brush.extent():e.domain(),p=s.values.filter(function(t,e){return c[0]<=c[1]?i.x()(t,e)>=c[0]&&i.x()(t,e)<=c[1]:i.x()(t,e)>=c[1]&&i.x()(t,e)<=c[0]}),v=p[a=r.interactiveBisect(p,n.pointXValue,i.x())],g=t.y()(v,a);null!==g&&i.highlightPoint(u,a,!0),void 0!==v&&(void 0===o&&(o=v),void 0===f&&(f=t.xScale()(t.x()(v,a))),d.push({key:s.key,value:g,color:h(s,s.seriesIndex),data:v}))}),d.length>2){var p=t.yScale().invert(n.mouseY),v=.03*Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=r.nearestValueIndex(d.map(function(t){return t.value}),p,v);null!==g&&(d[g].highlight=!0)}u.tooltip.valueFormatter(u.tooltip.valueFormatter()||function(t,e){return null==t?"N/A":s.tickFormat()(t)}).data({value:t.x()(o,a),index:a,series:d})(),u.renderGuideLine(f)}),u.dispatch.on("elementClick",function(e){var n,o=[];c.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i){var s=r.interactiveBisect(i.values,e.pointXValue,t.x()),a=i.values[s];if(void 0!==a){void 0===n&&(n=t.xScale()(t.x()(a,s)));var u=t.yScale()(t.y()(a,s));o.push({point:a,pointIndex:s,pos:[n,u],seriesIndex:i.seriesIndex,series:i})}}),i.dispatch.elementClick(o)}),u.dispatch.on("elementMouseout",function(t){i.clearHighlights()}),T.on("changeState",function(e){void 0!==e.disabled&&c.length===e.disabled.length&&(c.forEach(function(t,n){t.disabled=e.disabled[n]}),_.disabled=e.disabled),t.update()})}),C.renderEnd("lineChart immediate"),t}var e,n,i=r.models.line(),o=r.models.axis(),s=r.models.axis(),a=r.models.legend(),u=r.interactiveGuideline(),c=r.models.tooltip(),l=r.models.focus(r.models.line()),f={top:30,right:20,bottom:50,left:60},d=null,h=r.utils.defaultColor(),p=null,v=null,g=!0,m="top",y=!0,b=!0,w=!1,x=!1,E=!1,_=r.utils.state(),S=null,$=null,T=d3.dispatch("stateChange","changeState","renderEnd"),k=250;o.orient("bottom").tickPadding(7),s.orient(w?"right":"left"),i.clipEdge(!0).duration(0),c.valueFormatter(function(t,e){return s.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),u.tooltip.valueFormatter(function(t,e){return s.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)});var C=r.utils.renderWatch(T,k),A=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},R=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return i.dispatch.on("elementMouseover.tooltip",function(t){t.series.disableTooltip||c.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){c.hidden(!0)}),t.dispatch=T,t.lines=i,t.legend=a,t.focus=l,t.xAxis=o,t.x2Axis=l.xAxis,t.yAxis=s,t.y2Axis=l.yAxis,t.interactiveLayer=u,t.tooltip=c,t.state=_,t.dispatch=T,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return v},set:function(t){v=t}},showLegend:{get:function(){return g},set:function(t){g=t}},legendPosition:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return y},set:function(t){y=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},defaultState:{get:function(){return S},set:function(t){S=t}},noData:{get:function(){return $},set:function(t){$=t}},focusEnable:{get:function(){return E},set:function(t){E=t}},focusHeight:{get:function(){return l.height()},set:function(t){l.height(t)}},focusShowAxisX:{get:function(){return l.showXAxis()},set:function(t){l.showXAxis(t)}},focusShowAxisY:{get:function(){return l.showYAxis()},set:function(t){l.showYAxis(t)}},brushExtent:{get:function(){return l.brushExtent()},set:function(t){l.brushExtent(t)}},focusMargin:{get:function(){return l.margin},set:function(t){void 0!==t.top&&(f.top=t.top,d=t.top),l.margin.right=void 0!==t.right?t.right:l.margin.right,l.margin.bottom=void 0!==t.bottom?t.bottom:l.margin.bottom,l.margin.left=void 0!==t.left?t.left:l.margin.left}},margin:{get:function(){return f},set:function(t){f.top=void 0!==t.top?t.top:f.top,f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}},duration:{get:function(){return k},set:function(t){k=t,C.reset(k),i.duration(k),l.duration(k),o.duration(k),s.duration(k)}},color:{get:function(){return h},set:function(t){h=r.utils.getColor(t),a.color(h),i.color(h),l.color(h)}},interpolate:{get:function(){return i.interpolate()},set:function(t){i.interpolate(t),l.interpolate(t)}},xTickFormat:{get:function(){return o.tickFormat()},set:function(t){o.tickFormat(t),l.xTickFormat(t)}},yTickFormat:{get:function(){return s.tickFormat()},set:function(t){s.tickFormat(t),l.yTickFormat(t)}},x:{get:function(){return i.x()},set:function(t){i.x(t),l.x(t)}},y:{get:function(){return i.y()},set:function(t){i.y(t),l.y(t)}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,s.orient(w?"right":"left")}},useInteractiveGuideline:{get:function(){return x},set:function(t){(x=t)&&(i.interactive(!1),i.useVoronoi(!1))}}}),r.utils.inheritOptions(t,i),r.utils.initOptions(t),t},r.models.lineWithFocusChart=function(){return r.models.lineChart().margin({bottom:30}).focusEnable(!0)},r.models.linePlusBarChart=function(){"use strict";function t(x){return x.each(function(x){function D(){L=w.empty()?null:w.extent(),e=w.empty()?i.domain():w.extent(),P.brush({extent:e,brush:w}),w.empty()||w.extent(L),ft.data([w.empty()?i.domain():L]).each(function(t,e){var n=i(t[0])-i.range()[0],r=i.range()[1]-i(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",i(t[1])).attr("width",r<0?0:r)}),f.width(Z).height(Y).color(x.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!x[e].disabled&&x[e].bar})),c.width(Z).height(Y).color(x.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!x[e].disabled&&!x[e].bar}));var t=it.select(".nv-focus .nv-barsWrap").datum(Q.length?Q.map(function(t,n){return{key:t.key,values:t.values.filter(function(t,n){return f.x()(t,n)>=e[0]&&f.x()(t,n)<=e[1]})}}):[{values:[]}]),a=it.select(".nv-focus .nv-linesWrap").datum(W(J)?[{values:[]}]:J.filter(function(t){return!t.disabled}).map(function(t,n){return{area:t.area,fillOpacity:t.fillOpacity,strokeWidth:t.strokeWidth,key:t.key,values:t.values.filter(function(t,n){return c.x()(t,n)>=e[0]&&c.x()(t,n)<=e[1]})}}));n=Q.length&&!j?f.xScale():c.xScale(),h.scale(n)._ticks(r.utils.calcTicksX(Z/100,x)).tickSize(-Y,0),h.domain([Math.ceil(e[0]),Math.floor(e[1])]),it.select(".nv-x.nv-axis").transition().duration(V).call(h),t.transition().duration(V).call(f),a.transition().duration(V).call(c),it.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),v.scale(o)._ticks(r.utils.calcTicksY(Y/36,x)).tickSize(-Z,0),g.scale(s)._ticks(r.utils.calcTicksY(Y/36,x)),j?g.tickSize(J.length?0:-Z,0):g.tickSize(Q.length?0:-Z,0);var u=Q.length?1:0,l=J.length&&!W(J)?1:0,d=j?l:u,p=j?u:l;it.select(".nv-focus .nv-y1.nv-axis").style("opacity",d),it.select(".nv-focus .nv-y2.nv-axis").style("opacity",p).attr("transform","translate("+n.range()[1]+",0)"),it.select(".nv-focus .nv-y1.nv-axis").transition().duration(V).call(v),it.select(".nv-focus .nv-y2.nv-axis").transition().duration(V).call(g)}var G=d3.select(this);r.utils.initSVG(G);var Z=r.utils.availableWidth($,G,E),Y=r.utils.availableHeight(T,G,E)-(M?N:0),X=N-S.top-S.bottom;if(t.update=function(){G.transition().duration(V).call(t)},t.container=this,q.setter(z(x),t.update).getter(H(x)).update(),q.disabled=x.map(function(t){return!!t.disabled}),!F){var K;F={};for(K in q)q[K]instanceof Array?F[K]=q[K].slice(0):F[K]=q[K]}if(!(x&&x.length&&x.filter(function(t){return t.values.length}).length))return r.utils.noData(t,G),t;G.selectAll(".nv-noData").remove();var Q=x.filter(function(t){return!t.disabled&&t.bar}),J=x.filter(function(t){return!t.bar});n=Q.length&&!j?f.xScale():c.xScale(),i=p.scale(),o=j?c.yScale():f.yScale(),s=j?f.yScale():c.yScale(),a=j?l.yScale():d.yScale(),u=j?d.yScale():l.yScale();var tt=x.filter(function(t){return!t.disabled&&(j?!t.bar:t.bar)}).map(function(t){return t.values.map(function(t,e){return{x:k(t,e),y:C(t,e)}})}),et=x.filter(function(t){return!t.disabled&&(j?t.bar:!t.bar)}).map(function(t){return t.values.map(function(t,e){return{x:k(t,e),y:C(t,e)}})});n.range([0,Z]),i.domain(d3.extent(d3.merge(tt.concat(et)),function(t){return t.x})).range([0,Z]);var nt=G.selectAll("g.nv-wrap.nv-linePlusBar").data([x]),rt=nt.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),it=nt.select("g");rt.append("g").attr("class","nv-legendWrap");var ot=rt.append("g").attr("class","nv-focus");ot.append("g").attr("class","nv-x nv-axis"),ot.append("g").attr("class","nv-y1 nv-axis"),ot.append("g").attr("class","nv-y2 nv-axis"),ot.append("g").attr("class","nv-barsWrap"),ot.append("g").attr("class","nv-linesWrap");var st=rt.append("g").attr("class","nv-context");if(st.append("g").attr("class","nv-x nv-axis"),st.append("g").attr("class","nv-y1 nv-axis"),st.append("g").attr("class","nv-y2 nv-axis"),st.append("g").attr("class","nv-barsWrap"),st.append("g").attr("class","nv-linesWrap"),st.append("g").attr("class","nv-brushBackground"),st.append("g").attr("class","nv-x nv-brush"),R){var at=b.align()?Z/2:Z,ut=b.align()?at:0;b.width(at),it.select(".nv-legendWrap").datum(x.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=j?t.originalKey+(t.bar?B:U):t.originalKey+(t.bar?U:B),t})).call(b),_||b.height()===E.top||(E.top=b.height(),Y=r.utils.availableHeight(T,G,E)-N),it.select(".nv-legendWrap").attr("transform","translate("+ut+","+-E.top+")")}else it.select(".nv-legendWrap").selectAll("*").remove();nt.attr("transform","translate("+E.left+","+E.top+")"),it.select(".nv-context").style("display",M?"initial":"none"),d.width(Z).height(X).color(x.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!x[e].disabled&&x[e].bar})),l.width(Z).height(X).color(x.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!x[e].disabled&&!x[e].bar}));var ct=it.select(".nv-context .nv-barsWrap").datum(Q.length?Q:[{values:[]}]),lt=it.select(".nv-context .nv-linesWrap").datum(W(J)?[{values:[]}]:J.filter(function(t){return!t.disabled}));it.select(".nv-context").attr("transform","translate(0,"+(Y+E.bottom+S.top)+")"),ct.transition().call(d),lt.transition().call(l),O&&(p._ticks(r.utils.calcTicksX(Z/100,x)).tickSize(-X,0),it.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),it.select(".nv-context .nv-x.nv-axis").transition().call(p)),I&&(m.scale(a)._ticks(X/36).tickSize(-Z,0),y.scale(u)._ticks(X/36).tickSize(Q.length?0:-Z,0),it.select(".nv-context .nv-y3.nv-axis").style("opacity",Q.length?1:0).attr("transform","translate(0,"+i.range()[0]+")"),it.select(".nv-context .nv-y2.nv-axis").style("opacity",J.length?1:0).attr("transform","translate("+i.range()[1]+",0)"),it.select(".nv-context .nv-y1.nv-axis").transition().call(m),it.select(".nv-context .nv-y2.nv-axis").transition().call(y)),w.x(i).on("brush",D),L&&w.extent(L);var ft=it.select(".nv-brushBackground").selectAll("g").data([L||w.extent()]),dt=ft.enter().append("g");dt.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",X),dt.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",X);var ht=it.select(".nv-x.nv-brush").call(w);ht.selectAll("rect").attr("height",X),ht.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,r=X/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}),b.dispatch.on("stateChange",function(e){for(var n in e)q[n]=e[n];P.stateChange(q),t.update()}),P.on("changeState",function(e){void 0!==e.disabled&&(x.forEach(function(t,n){t.disabled=e.disabled[n]}),q.disabled=e.disabled),t.update()}),D()}),t}var e,n,i,o,s,a,u,c=r.models.line(),l=r.models.line(),f=r.models.historicalBar(),d=r.models.historicalBar(),h=r.models.axis(),p=r.models.axis(),v=r.models.axis(),g=r.models.axis(),m=r.models.axis(),y=r.models.axis(),b=r.models.legend(),w=d3.svg.brush(),x=r.models.tooltip(),E={top:30,right:30,bottom:30,left:60},_=null,S={top:0,right:30,bottom:20,left:60},$=null,T=null,k=function(t){return t.x},C=function(t){return t.y},A=r.utils.defaultColor(),R=!0,M=!0,I=!1,O=!0,N=50,L=null,D=null,P=d3.dispatch("brush","stateChange","changeState"),V=0,q=r.utils.state(),F=null,U=" (left axis)",B=" (right axis)",j=!1;c.clipEdge(!0),l.interactive(!1),l.pointActive(function(t){return!1}),h.orient("bottom").tickPadding(5),v.orient("left"),g.orient("right"),p.orient("bottom").tickPadding(5),m.orient("left"),y.orient("right"),x.headerEnabled(!0).headerFormatter(function(t,e){return h.tickFormat()(t,e)});var H=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},z=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},W=function(t){return t.every(function(t){return t.disabled})};return c.dispatch.on("elementMouseover.tooltip",function(t){x.duration(100).valueFormatter(function(t,e){return(j?{main:v,focus:m}:{main:g,focus:y}).main.tickFormat()(t,e)}).data(t).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(t){x.hidden(!0)}),f.dispatch.on("elementMouseover.tooltip",function(e){e.value=t.x()(e.data),e.series={value:t.y()(e.data),color:e.color},x.duration(0).valueFormatter(function(t,e){return(j?{main:g,focus:y}:{main:v,focus:m}).main.tickFormat()(t,e)}).data(e).hidden(!1)}),f.dispatch.on("elementMouseout.tooltip",function(t){x.hidden(!0)}),f.dispatch.on("elementMousemove.tooltip",function(t){x()}),t.dispatch=P,t.legend=b,t.lines=c,t.lines2=l,t.bars=f,t.bars2=d,t.xAxis=h,t.x2Axis=p,t.y1Axis=v,t.y2Axis=g,t.y3Axis=m,t.y4Axis=y,t.tooltip=x,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return $},set:function(t){$=t}},height:{get:function(){return T},set:function(t){T=t}},showLegend:{get:function(){return R},set:function(t){R=t}},brushExtent:{get:function(){return L},set:function(t){L=t}},noData:{get:function(){return D},set:function(t){D=t}},focusEnable:{get:function(){return M},set:function(t){M=t}},focusHeight:{get:function(){return N},set:function(t){N=t}},focusShowAxisX:{get:function(){return O},set:function(t){O=t}},focusShowAxisY:{get:function(){return I},set:function(t){I=t}},legendLeftAxisHint:{get:function(){return U},set:function(t){U=t}},legendRightAxisHint:{get:function(){return B},set:function(t){B=t}},margin:{get:function(){return E},set:function(t){void 0!==t.top&&(E.top=t.top,_=t.top),E.right=void 0!==t.right?t.right:E.right,E.bottom=void 0!==t.bottom?t.bottom:E.bottom,E.left=void 0!==t.left?t.left:E.left}},focusMargin:{get:function(){return S},set:function(t){S.top=void 0!==t.top?t.top:S.top,S.right=void 0!==t.right?t.right:S.right,S.bottom=void 0!==t.bottom?t.bottom:S.bottom,S.left=void 0!==t.left?t.left:S.left}},duration:{get:function(){return V},set:function(t){V=t}},color:{get:function(){return A},set:function(t){A=r.utils.getColor(t),b.color(A)}},x:{get:function(){return k},set:function(t){k=t,c.x(t),l.x(t),f.x(t),d.x(t)}},y:{get:function(){return C},set:function(t){C=t,c.y(t),l.y(t),f.y(t),d.y(t)}},switchYAxisOrder:{get:function(){return j},set:function(t){if(j!==t){var e=v;v=g,g=e;var n=m;m=y,y=n}j=t,v.orient("left"),g.orient("right"),m.orient("left"),y.orient("right")}}}),r.utils.inheritOptions(t,c),r.utils.initOptions(t),t},r.models.multiBar=function(){"use strict";function t(M){return A.reset(),M.each(function(t){var M=l-c.left-c.right,I=f-c.top-c.bottom;v=d3.select(this),r.utils.initSVG(v);var O=0;if(_&&t.length&&(_=[{values:t[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),w){var N=d3.layout.stack().offset(x).values(function(t){return t.values}).y(m)(!t.length&&_?_:t);N.forEach(function(e,n){e.nonStackable?(t[n].nonStackableSeries=O++,N[n]=t[n]):n>0&&N[n-1].nonStackable&&N[n].values.map(function(t,e){t.y0-=N[n-1].values[e].y,t.y1=t.y0+t.y})}),t=N}t.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),w&&t.length>0&&t[0].values.map(function(e,n){var r=0,i=0;t.map(function(e,o){if(!t[o].nonStackable){var s=e.values[n];s.size=Math.abs(s.y),s.y<0?(s.y1=i,i-=s.size):(s.y1=s.size+r,r+=s.size)}})});var L=n&&i?[]:t.map(function(t,e){return t.values.map(function(t,n){return{x:g(t,n),y:m(t,n),y0:t.y0,y1:t.y1,idx:e}})});d.domain(n||d3.merge(L).map(function(t){return t.x})).rangeBands(o||[0,M],T),h.domain(i||d3.extent(d3.merge(L).map(function(e){var n=e.y;return w&&!t[e.idx].nonStackable&&(n=e.y>0?e.y1:e.y1+e.y),n}).concat(y))).range(s||[I,0]),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1])),a=a||d,u=u||h;var D=v.selectAll("g.nv-wrap.nv-multibar").data([t]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),V=P.append("defs"),q=P.append("g"),F=D.select("g");q.append("g").attr("class","nv-groups"),D.attr("transform","translate("+c.left+","+c.top+")"),V.append("clipPath").attr("id","nv-edge-clip-"+p).append("rect"),D.select("#nv-edge-clip-"+p+" rect").attr("width",M).attr("height",I),F.attr("clip-path",b?"url(#nv-edge-clip-"+p+")":"");var U=D.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});U.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var B=A.transition(U.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,$)).attr("y",function(e,n,r){var i=u(0)||0;return w&&t[e.series]&&!t[e.series].nonStackable&&(i=u(e.y0)),i}).attr("height",0).remove();B.delay&&B.delay(function(t,e){return e*($/(R+1))-e}),U.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return E(t,e)}).style("stroke",function(t,e){return E(t,e)}),U.style("stroke-opacity",1).style("fill-opacity",k);var j=U.selectAll("rect.nv-bar").data(function(e){return _&&!t.length?_.values:e.values});j.exit().remove();j.enter().append("rect").attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(e,n,r){return w&&!t[r].nonStackable?0:r*d.rangeBand()/t.length}).attr("y",function(e,n,r){return u(w&&!t[r].nonStackable?e.y0:0)||0}).attr("height",0).attr("width",function(e,n,r){return d.rangeBand()/(w&&!t[r].nonStackable?1:t.length)}).attr("transform",function(t,e){return"translate("+d(g(t,e))+",0)"});j.style("fill",function(t,e,n){return E(t,n,e)}).style("stroke",function(t,e,n){return E(t,n,e)}).on("mouseover",function(e,n,r){d3.select(this).classed("hover",!0),C.elementMouseover({data:e,index:n,series:t[r],color:d3.select(this).style("fill")})}).on("mouseout",function(e,n,r){d3.select(this).classed("hover",!1),C.elementMouseout({data:e,index:n,series:t[r],color:d3.select(this).style("fill")})}).on("mousemove",function(e,n,r){C.elementMousemove({data:e,index:n,series:t[r],color:d3.select(this).style("fill")})}).on("click",function(e,n,r){C.elementClick({data:e,index:n,series:t[r],color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(e,n,r){C.elementDblClick({data:e,index:n,series:t[r],color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),j.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(t,e){return"translate("+d(g(t,e))+",0)"}),S&&(e||(e=t.map(function(){return!0})),j.style("fill",function(t,n,r){return d3.rgb(S(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()}).style("stroke",function(t,n,r){return d3.rgb(S(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()}));var H=j.watchTransition(A,"multibar",Math.min(250,$)).delay(function(e,n){return n*$/t[0].values.length});w?H.attr("y",function(e,n,r){return t[r].nonStackable?m(e,n)<0?h(0):h(0)-h(m(e,n))<-1?h(0)-1:h(m(e,n))||0:h(e.y1)}).attr("height",function(e,n,r){return t[r].nonStackable?Math.max(Math.abs(h(m(e,n))-h(0)),0)||0:Math.max(Math.abs(h(e.y+e.y0)-h(e.y0)),0)}).attr("x",function(e,n,r){var i=0;return t[r].nonStackable&&(i=e.series*d.rangeBand()/t.length,t.length!==O&&(i=t[r].nonStackableSeries*d.rangeBand()/(2*O))),i}).attr("width",function(e,n,r){if(t[r].nonStackable){var i=d.rangeBand()/O;return t.length!==O&&(i=d.rangeBand()/(2*O)),i}return d.rangeBand()}):H.attr("x",function(e,n){return e.series*d.rangeBand()/t.length}).attr("width",d.rangeBand()/t.length).attr("y",function(t,e){return m(t,e)<0?h(0):h(0)-h(m(t,e))<1?h(0)-1:h(m(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(h(m(t,e))-h(0)),1)||0}),a=d.copy(),u=h.copy(),t[0]&&t[0].values&&(R=t[0].values.length)}),A.renderEnd("multibar immediate"),t}var e,n,i,o,s,a,u,c={top:0,right:0,bottom:0,left:0},l=960,f=500,d=d3.scale.ordinal(),h=d3.scale.linear(),p=Math.floor(1e4*Math.random()),v=null,g=function(t){return t.x},m=function(t){return t.y},y=[0],b=!0,w=!1,x="zero",E=r.utils.defaultColor(),_=!1,S=null,$=500,T=.1,k=.75,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),A=r.utils.renderWatch(C,$),R=0;return t.dispatch=C,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return f},set:function(t){f=t}},x:{get:function(){return g},set:function(t){g=t}},y:{get:function(){return m},set:function(t){m=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return s},set:function(t){s=t}},forceY:{get:function(){return y},set:function(t){y=t}},stacked:{get:function(){return w},set:function(t){w=t}},stackOffset:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return b},set:function(t){b=t}},disabled:{get:function(){return e},set:function(t){e=t}},id:{get:function(){return p},set:function(t){p=t}},hideable:{get:function(){return _},set:function(t){_=t}},groupSpacing:{get:function(){return T},set:function(t){T=t}},fillOpacity:{get:function(){return k},set:function(t){k=t}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return $},set:function(t){$=t,A.reset($)}},color:{get:function(){return E},set:function(t){E=r.utils.getColor(t)}},barColor:{get:function(){return S},set:function(t){S=t?r.utils.getColor(t):null}}}),r.utils.initOptions(t),t},r.models.multiBarChart=function(){"use strict";function t(A){return N.reset(),N.models(i),w&&N.models(o),x&&N.models(s),A.each(function(A){var N=d3.select(this);r.utils.initSVG(N);var V=r.utils.availableWidth(h,N,f),q=r.utils.availableHeight(p,N,f);if(t.update=function(){0===I?N.call(t):N.transition().duration(I).call(t)},t.container=this,k.setter(P(A),t.update).getter(D(A)).update(),k.disabled=A.map(function(t){return!!t.disabled}),!C){var F;C={};for(F in k)k[F]instanceof Array?C[F]=k[F].slice(0):C[F]=k[F]}if(!(A&&A.length&&A.filter(function(t){return t.values.length}).length))return r.utils.noData(t,N),t;N.selectAll(".nv-noData").remove(),e=i.xScale(),n=i.yScale();var U=N.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([A]),B=U.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),j=U.select("g");if(B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-barsWrap"),B.append("g").attr("class","nv-legendWrap"),B.append("g").attr("class","nv-controlsWrap"),B.append("g").attr("class","nv-interactive"),y?"bottom"===b?(u.width(V-f.right),j.select(".nv-legendWrap").datum(A).call(u),f.bottom=o.height()+u.height(),q=r.utils.availableHeight(p,N,f),j.select(".nv-legendWrap").attr("transform","translate(0,"+(q+o.height())+")")):(u.width(V-M()),j.select(".nv-legendWrap").datum(A).call(u),d||u.height()===f.top||(f.top=u.height(),q=r.utils.availableHeight(p,N,f)),j.select(".nv-legendWrap").attr("transform","translate("+M()+","+-f.top+")")):j.select(".nv-legendWrap").selectAll("*").remove(),g){var H=[{key:m.grouped||"Grouped",disabled:i.stacked()},{key:m.stacked||"Stacked",disabled:!i.stacked()}];c.width(M()).color(["#444","#444","#444"]),j.select(".nv-controlsWrap").datum(H).attr("transform","translate(0,"+-f.top+")").call(c)}else j.select(".nv-controlsWrap").selectAll("*").remove();U.attr("transform","translate("+f.left+","+f.top+")"),E&&j.select(".nv-y.nv-axis").attr("transform","translate("+V+",0)"),i.disabled(A.map(function(t){return t.disabled})).width(V).height(q).color(A.map(function(t,e){return t.color||v(t,e)}).filter(function(t,e){return!A[e].disabled}));if(j.select(".nv-barsWrap").datum(A.filter(function(t){return!t.disabled})).call(i),w){o.scale(e)._ticks(r.utils.calcTicksX(V/100,A)).tickSize(-q,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),j.select(".nv-x.nv-axis").call(o);var z=j.select(".nv-x.nv-axis > g").selectAll("g");if(z.selectAll("line, text").style("opacity",1),S){var W=function(t,e){return"translate("+t+","+e+")"};z.selectAll("text").attr("transform",function(t,e,n){return W(0,n%2==0?5:17)});var G=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;j.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return W(0,0===e||G%2!=0?17:5)})}$&&j.selectAll(".tick text").call(r.utils.wrapTicks,t.xAxis.rangeBand()),_&&z.filter(function(t,e){return e%Math.ceil(A[0].values.length/(V/100))!=0}).selectAll("text, line").style("opacity",0),T&&z.selectAll(".tick text").attr("transform","rotate("+T+" 0,0)").style("text-anchor",T>0?"start":"end"),j.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}x&&(s.scale(n)._ticks(r.utils.calcTicksY(q/36,A)).tickSize(-V,0),j.select(".nv-y.nv-axis").call(s)),O&&(a.width(V).height(q).margin({left:f.left,top:f.top}).svgContainer(N).xScale(e),U.select(".nv-interactive").call(a)),u.dispatch.on("stateChange",function(e){for(var n in e)k[n]=e[n];R.stateChange(k),t.update()}),c.dispatch.on("legendClick",function(e,n){if(e.disabled){switch(H=H.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":case m.grouped:i.stacked(!1);break;case"Stacked":case m.stacked:i.stacked(!0)}k.stacked=i.stacked(),R.stateChange(k),t.update()}}),R.on("changeState",function(e){void 0!==e.disabled&&(A.forEach(function(t,n){t.disabled=e.disabled[n]}),k.disabled=e.disabled),void 0!==e.stacked&&(i.stacked(e.stacked),k.stacked=e.stacked,L=e.stacked),t.update()}),O?(a.dispatch.on("elementMousemove",function(n){if(void 0!=n.pointXValue){var r,i,o,s,u=[];A.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(a,c){i=e.domain().indexOf(n.pointXValue);var l=a.values[i];void 0!==l&&(s=l.x,void 0===r&&(r=l),void 0===o&&(o=n.mouseX),u.push({key:a.key,value:t.y()(l,i),color:v(a,a.seriesIndex),data:a.values[i]}))}),a.tooltip.data({value:s,index:i,series:u})(),a.renderGuideLine(o)}}),a.dispatch.on("elementMouseout",function(t){a.tooltip.hidden(!0)})):(i.dispatch.on("elementMouseover.tooltip",function(e){e.value=t.x()(e.data),e.series={key:e.data.key,value:t.y()(e.data),color:e.color},l.data(e).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){l()}))}),N.renderEnd("multibarchart immediate"),t}var e,n,i=r.models.multiBar(),o=r.models.axis(),s=r.models.axis(),a=r.interactiveGuideline(),u=r.models.legend(),c=r.models.legend(),l=r.models.tooltip(),f={top:30,right:20,bottom:50,left:60},d=null,h=null,p=null,v=r.utils.defaultColor(),g=!0,m={},y=!0,b=null,w=!0,x=!0,E=!1,_=!0,S=!1,$=!1,T=0,k=r.utils.state(),C=null,A=null,R=d3.dispatch("stateChange","changeState","renderEnd"),M=function(){return g?180:0},I=250,O=!1;k.stacked=!1,i.stacked(!1),o.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(t){return t}),s.orient(E?"right":"left").tickFormat(d3.format(",.1f")),l.duration(0).valueFormatter(function(t,e){return s.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),a.tooltip.valueFormatter(function(t,e){return null==t?"N/A":s.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),a.tooltip.valueFormatter(function(t,e){return null==t?"N/A":s.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),a.tooltip.duration(0).valueFormatter(function(t,e){return s.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),c.updateState(!1);var N=r.utils.renderWatch(R),L=!1,D=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:L}}},P=function(t){return function(e){void 0!==e.stacked&&(L=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return t.dispatch=R,t.multibar=i,t.legend=u,t.controls=c,t.xAxis=o,t.yAxis=s,t.state=k,t.tooltip=l,t.interactiveLayer=a,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return y},set:function(t){y=t}},legendPosition:{get:function(){return b},set:function(t){b=t}},showControls:{get:function(){return g},set:function(t){g=t}},controlLabels:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return w},set:function(t){w=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return C},set:function(t){C=t}},noData:{get:function(){return A},set:function(t){A=t}},reduceXTicks:{get:function(){return _},set:function(t){_=t}},rotateLabels:{get:function(){return T},set:function(t){T=t}},staggerLabels:{get:function(){return S},set:function(t){S=t}},wrapLabels:{get:function(){return $},set:function(t){$=!!t}},margin:{get:function(){return f},set:function(t){void 0!==t.top&&(f.top=t.top,d=t.top),f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}},duration:{get:function(){return I},set:function(t){I=t,i.duration(I),o.duration(I),s.duration(I),N.reset(I)}},color:{get:function(){return v},set:function(t){v=r.utils.getColor(t),u.color(v)}},rightAlignYAxis:{get:function(){return E},set:function(t){E=t,s.orient(E?"right":"left")}},useInteractiveGuideline:{get:function(){return O},set:function(t){O=t}},barColor:{get:function(){return i.barColor},set:function(t){i.barColor(t),u.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),r.utils.inheritOptions(t,i),r.utils.initOptions(t),t},r.models.multiBarHorizontal=function(){"use strict";function t(d){return M.reset(),d.each(function(t){var d=l-c.left-c.right,A=f-c.top-c.bottom;h=d3.select(this),r.utils.initSVG(h),E&&(t=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(m)(t)),t.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),E&&t[0].values.map(function(e,n){var r=0,i=0;t.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=i-e.size,i-=e.size):(e.y1=r,r+=e.size)})});var I=n&&i?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),y0:t.y0,y1:t.y1}})});p.domain(n||d3.merge(I).map(function(t){return t.x})).rangeBands(o||[0,A],T),v.domain(i||d3.extent(d3.merge(I).map(function(t){return E?t.y>0?t.y1+t.y:t.y1:t.y}).concat(b))),_&&!E?v.range(s||[v.domain()[0]<0?$:0,d-(v.domain()[1]>0?$:0)]):v.range(s||[0,d]),a=a||p,u=u||d3.scale.linear().domain(v.domain()).range([v(0),v(0)]);var O=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([t]),N=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),L=(N.append("defs"),N.append("g"));O.select("g");L.append("g").attr("class","nv-groups"),O.attr("transform","translate("+c.left+","+c.top+")");var D=O.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});D.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),D.exit().watchTransition(M,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),D.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return w(t,e)}).style("stroke",function(t,e){return w(t,e)}),D.watchTransition(M,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",k);var P=D.selectAll("g.nv-bar").data(function(t){return t.values});P.exit().remove();var V=P.enter().append("g").attr("transform",function(e,n,r){return"translate("+u(E?e.y0:0)+","+(E?0:r*p.rangeBand()/t.length+p(g(e,n)))+")"});V.append("rect").attr("width",0).attr("height",p.rangeBand()/(E?1:t.length)),P.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),R.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),R.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){R.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){R.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){R.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(t,e){R.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),y(t[0],0)&&(V.append("polyline"),P.select("polyline").attr("fill","none").attr("points",function(e,n){var r=y(e,n),i=.8*p.rangeBand()/(2*(E?1:t.length));return[[(r=(r=r.length?r:[-Math.abs(r),Math.abs(r)]).map(function(t){return v(t+(m(e,n)<0?0:m(e,n)))-v(0)}))[0],-i],[r[0],i],[r[0],0],[r[1],0],[r[1],-i],[r[1],i]].map(function(t){return t.join(",")}).join(" ")}).attr("transform",function(e,n){return"translate(0, "+p.rangeBand()/(2*(E?1:t.length))+")"})),V.append("text"),_&&!E?(P.select("text").attr("text-anchor",function(t,e){return m(t,e)<0?"end":"start"}).attr("y",p.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,e){var n=C(m(t,e)),r=y(t,e);return void 0===r?n:r.length?n+"+"+C(Math.abs(r[1]))+"-"+C(Math.abs(r[0])):n+""+C(Math.abs(r))}),P.watchTransition(M,"multibarhorizontal: bars").select("text").attr("x",function(t,e){return m(t,e)<0?-4:v(m(t,e))-v(0)+4})):P.selectAll("text").text(""),S&&!E?(V.append("text").classed("nv-bar-label",!0),P.select("text.nv-bar-label").attr("text-anchor",function(t,e){return m(t,e)<0?"start":"end"}).attr("y",p.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,e){return g(t,e)}),P.watchTransition(M,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(t,e){return m(t,e)<0?v(0)-v(m(t,e))+4:-4})):P.selectAll("text.nv-bar-label").text(""),P.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}),x&&(e||(e=t.map(function(){return!0})),P.style("fill",function(t,n,r){return d3.rgb(x(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()}).style("stroke",function(t,n,r){return d3.rgb(x(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()})),E?P.watchTransition(M,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+v(t.y1)+","+p(g(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(v(m(t,e)+t.y0)-v(t.y0))||0}).attr("height",p.rangeBand()):P.watchTransition(M,"multibarhorizontal: bars").attr("transform",function(e,n){return"translate("+(m(e,n)<0?v(m(e,n)):v(0))+","+(e.series*p.rangeBand()/t.length+p(g(e,n)))+")"}).select("rect").attr("height",p.rangeBand()/t.length).attr("width",function(t,e){return Math.max(Math.abs(v(m(t,e))-v(0)),1)||0}),a=p.copy(),u=v.copy()}),M.renderEnd("multibarHorizontal immediate"),t}var e,n,i,o,s,a,u,c={top:0,right:0,bottom:0,left:0},l=960,f=500,d=Math.floor(1e4*Math.random()),h=null,p=d3.scale.ordinal(),v=d3.scale.linear(),g=function(t){return t.x},m=function(t){return t.y},y=function(t){return t.yErr},b=[0],w=r.utils.defaultColor(),x=null,E=!1,_=!1,S=!1,$=60,T=.1,k=.75,C=d3.format(",.2f"),A=250,R=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),M=r.utils.renderWatch(R,A);return t.dispatch=R,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return f},set:function(t){f=t}},x:{get:function(){return g},set:function(t){g=t}},y:{get:function(){return m},set:function(t){m=t}},yErr:{get:function(){return y},set:function(t){y=t}},xScale:{get:function(){return p},set:function(t){p=t}},yScale:{get:function(){return v},set:function(t){v=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return s},set:function(t){s=t}},forceY:{get:function(){return b},set:function(t){b=t}},stacked:{get:function(){return E},set:function(t){E=t}},showValues:{get:function(){return _},set:function(t){_=t}},disabled:{get:function(){return e},set:function(t){e=t}},id:{get:function(){return d},set:function(t){d=t}},valueFormat:{get:function(){return C},set:function(t){C=t}},valuePadding:{get:function(){return $},set:function(t){$=t}},groupSpacing:{get:function(){return T},set:function(t){T=t}},fillOpacity:{get:function(){return k},set:function(t){k=t}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return A},set:function(t){A=t,M.reset(A)}},color:{get:function(){return w},set:function(t){w=r.utils.getColor(t)}},barColor:{get:function(){return x},set:function(t){x=t?r.utils.getColor(t):null}}}),r.utils.initOptions(t),t},r.models.multiBarHorizontalChart=function(){"use strict";function t(c){return M.reset(),M.models(i),w&&M.models(o),x&&M.models(s),c.each(function(c){var $=d3.select(this);r.utils.initSVG($);var M=r.utils.availableWidth(d,$,l),I=r.utils.availableHeight(h,$,l);if(t.update=function(){$.transition().duration(C).call(t)},t.container=this,E=i.stacked(),_.setter(R(c),t.update).getter(A(c)).update(),_.disabled=c.map(function(t){return!!t.disabled}),!S){var O;S={};for(O in _)_[O]instanceof Array?S[O]=_[O].slice(0):S[O]=_[O]}if(!(c&&c.length&&c.filter(function(t){return t.values.length}).length))return r.utils.noData(t,$),t;$.selectAll(".nv-noData").remove(),e=i.xScale(),n=i.yScale().clamp(!0);var N=$.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([c]),L=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),D=N.select("g");if(L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),L.append("g").attr("class","nv-barsWrap"),L.append("g").attr("class","nv-legendWrap"),L.append("g").attr("class","nv-controlsWrap"),y?(a.width(M-k()),D.select(".nv-legendWrap").datum(c).call(a),"bottom"===b?(l.bottom=o.height()+a.height(),I=r.utils.availableHeight(h,$,l),D.select(".nv-legendWrap").attr("transform","translate("+k()+","+(I+o.height())+")")):"top"===b&&(f||a.height()===l.top||(l.top=a.height(),I=r.utils.availableHeight(h,$,l)),D.select(".nv-legendWrap").attr("transform","translate("+k()+","+-l.top+")"))):D.select(".nv-legendWrap").selectAll("*").remove(),v){var P=[{key:m.grouped||"Grouped",disabled:i.stacked()},{key:m.stacked||"Stacked",disabled:!i.stacked()}];u.width(k()).color(["#444","#444","#444"]),"bottom"===g?(l.bottom=o.height()+a.height(),I=r.utils.availableHeight(h,$,l),D.select(".nv-controlsWrap").datum(P).attr("transform","translate(0,"+(I+o.height())+")").call(u)):"top"===g&&D.select(".nv-controlsWrap").datum(P).attr("transform","translate(0,"+-l.top+")").call(u)}else D.select(".nv-controlsWrap").selectAll("*").remove();N.attr("transform","translate("+l.left+","+l.top+")"),i.disabled(c.map(function(t){return t.disabled})).width(M).height(I).color(c.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!c[e].disabled}));if(D.select(".nv-barsWrap").datum(c.filter(function(t){return!t.disabled})).transition().call(i),w){o.scale(e)._ticks(r.utils.calcTicksY(I/24,c)).tickSize(-M,0),D.select(".nv-x.nv-axis").call(o);D.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text")}x&&(s.scale(n)._ticks(r.utils.calcTicksX(M/100,c)).tickSize(-I,0),D.select(".nv-y.nv-axis").attr("transform","translate(0,"+I+")"),D.select(".nv-y.nv-axis").call(s)),D.select(".nv-zeroLine line").attr("x1",n(0)).attr("x2",n(0)).attr("y1",0).attr("y2",-I),a.dispatch.on("stateChange",function(e){for(var n in e)_[n]=e[n];T.stateChange(_),t.update()}),u.dispatch.on("legendClick",function(e,n){if(e.disabled){switch(P=P.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":case m.grouped:i.stacked(!1);break;case"Stacked":case m.stacked:i.stacked(!0)}_.stacked=i.stacked(),T.stateChange(_),E=i.stacked(),t.update()}}),T.on("changeState",function(e){void 0!==e.disabled&&(c.forEach(function(t,n){t.disabled=e.disabled[n]}),_.disabled=e.disabled),void 0!==e.stacked&&(i.stacked(e.stacked),_.stacked=e.stacked,E=e.stacked),t.update()})}),M.renderEnd("multibar horizontal chart immediate"),t}var e,n,i=r.models.multiBarHorizontal(),o=r.models.axis(),s=r.models.axis(),a=r.models.legend().height(30),u=r.models.legend().height(30),c=r.models.tooltip(),l={top:30,right:20,bottom:50,left:60},f=null,d=null,h=null,p=r.utils.defaultColor(),v=!0,g="top",m={},y=!0,b="top",w=!0,x=!0,E=!1,_=r.utils.state(),S=null,$=null,T=d3.dispatch("stateChange","changeState","renderEnd"),k=function(){return v?180:0},C=250;_.stacked=!1,i.stacked(E),o.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(t){return t}),s.orient("bottom").tickFormat(d3.format(",.1f")),c.duration(0).valueFormatter(function(t,e){return s.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),u.updateState(!1);var A=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:E}}},R=function(t){return function(e){void 0!==e.stacked&&(E=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},M=r.utils.renderWatch(T,C);return i.dispatch.on("elementMouseover.tooltip",function(e){e.value=t.x()(e.data),e.series={key:e.data.key,value:t.y()(e.data),color:e.color},c.data(e).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){c.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){c()}),t.dispatch=T,t.multibar=i,t.legend=a,t.controls=u,t.xAxis=o,t.yAxis=s,t.state=_,t.tooltip=c,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return y},set:function(t){y=t}},legendPosition:{get:function(){return b},set:function(t){b=t}},controlsPosition:{get:function(){return g},set:function(t){g=t}},showControls:{get:function(){return v},set:function(t){v=t}},controlLabels:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return w},set:function(t){w=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return S},set:function(t){S=t}},noData:{get:function(){return $},set:function(t){$=t}},margin:{get:function(){return l},set:function(t){void 0!==t.top&&(l.top=t.top,f=t.top),l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return C},set:function(t){C=t,M.reset(C),i.duration(C),o.duration(C),s.duration(C)}},color:{get:function(){return p},set:function(t){p=r.utils.getColor(t),a.color(p)}},barColor:{get:function(){return i.barColor},set:function(t){i.barColor(t),a.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),r.utils.inheritOptions(t,i),r.utils.initOptions(t),t},r.models.multiChart=function(){"use strict";function t(l){return l.each(function(l){function p(t){var e=2===t.series.yAxis?I:M;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},N.duration(0).headerFormatter(function(t,e){return R.tickFormat()(t,e)}).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}function y(t){var e=2===t.series.yAxis?I:M;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},N.duration(100).headerFormatter(function(t,e){return R.tickFormat()(t,e)}).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}function L(t){var e=2===t.series.yAxis?I:M;t.point.x=C.x()(t.point),t.point.y=C.y()(t.point),N.duration(0).headerFormatter(function(t,e){return R.tickFormat()(t,e)}).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}function P(t){var e=2===t.series.yAxis?I:M;t.value=T.x()(t.data),t.series={value:T.y()(t.data),color:t.color,key:t.data.key},N.duration(0).headerFormatter(function(t,e){return R.tickFormat()(t,e)}).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}function V(){for(var t=0,e=D.length;t<e;t++){var n=D[t];try{n.clearHighlights()}catch(t){}}}var q=d3.select(this);r.utils.initSVG(q),t.update=function(){q.transition().call(t)},t.container=this;var F=r.utils.availableWidth(a,q,i),U=r.utils.availableHeight(u,q,i),B=l.filter(function(t){return"line"==t.type&&1==t.yAxis}),j=l.filter(function(t){return"line"==t.type&&2==t.yAxis}),H=l.filter(function(t){return"scatter"==t.type&&1==t.yAxis}),z=l.filter(function(t){return"scatter"==t.type&&2==t.yAxis}),W=l.filter(function(t){return"bar"==t.type&&1==t.yAxis}),G=l.filter(function(t){return"bar"==t.type&&2==t.yAxis}),Z=l.filter(function(t){return"area"==t.type&&1==t.yAxis}),Y=l.filter(function(t){return"area"==t.type&&2==t.yAxis});if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return r.utils.noData(t,q),t;q.selectAll(".nv-noData").remove();var X=l.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:f(t),y:d(t)}})}),K=l.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:f(t),y:d(t)}})});b.domain(d3.extent(d3.merge(X.concat(K)),function(t){return t.x})).range([0,F]);var Q=q.selectAll("g.wrap.multiChart").data([l]),J=Q.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");J.append("g").attr("class","nv-x nv-axis"),J.append("g").attr("class","nv-y1 nv-axis"),J.append("g").attr("class","nv-y2 nv-axis"),J.append("g").attr("class","stack1Wrap"),J.append("g").attr("class","stack2Wrap"),J.append("g").attr("class","bars1Wrap"),J.append("g").attr("class","bars2Wrap"),J.append("g").attr("class","scatters1Wrap"),J.append("g").attr("class","scatters2Wrap"),J.append("g").attr("class","lines1Wrap"),J.append("g").attr("class","lines2Wrap"),J.append("g").attr("class","legendWrap"),J.append("g").attr("class","nv-interactive");var tt=Q.select("g"),et=l.map(function(t,e){return l[e].color||s(t,e)});if(c){var nt=O.align()?F/2:F,rt=O.align()?nt:0;O.width(nt),O.color(et),tt.select(".legendWrap").datum(l.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":m),t})).call(O),o||O.height()===i.top||(i.top=O.height(),U=r.utils.availableHeight(u,q,i)),tt.select(".legendWrap").attr("transform","translate("+rt+","+-i.top+")")}else tt.select(".legendWrap").selectAll("*").remove();E.width(F).height(U).interpolate(h).color(et.filter(function(t,e){return!l[e].disabled&&1==l[e].yAxis&&"line"==l[e].type})),_.width(F).height(U).interpolate(h).color(et.filter(function(t,e){return!l[e].disabled&&2==l[e].yAxis&&"line"==l[e].type})),S.width(F).height(U).color(et.filter(function(t,e){return!l[e].disabled&&1==l[e].yAxis&&"scatter"==l[e].type})),$.width(F).height(U).color(et.filter(function(t,e){return!l[e].disabled&&2==l[e].yAxis&&"scatter"==l[e].type})),T.width(F).height(U).color(et.filter(function(t,e){return!l[e].disabled&&1==l[e].yAxis&&"bar"==l[e].type})),k.width(F).height(U).color(et.filter(function(t,e){return!l[e].disabled&&2==l[e].yAxis&&"bar"==l[e].type})),C.width(F).height(U).interpolate(h).color(et.filter(function(t,e){return!l[e].disabled&&1==l[e].yAxis&&"area"==l[e].type})),A.width(F).height(U).interpolate(h).color(et.filter(function(t,e){return!l[e].disabled&&2==l[e].yAxis&&"area"==l[e].type})),tt.attr("transform","translate("+i.left+","+i.top+")");var it=tt.select(".lines1Wrap").datum(B.filter(function(t){return!t.disabled})),ot=tt.select(".scatters1Wrap").datum(H.filter(function(t){return!t.disabled})),st=tt.select(".bars1Wrap").datum(W.filter(function(t){return!t.disabled})),at=tt.select(".stack1Wrap").datum(Z.filter(function(t){return!t.disabled})),ut=tt.select(".lines2Wrap").datum(j.filter(function(t){return!t.disabled})),ct=tt.select(".scatters2Wrap").datum(z.filter(function(t){return!t.disabled})),lt=tt.select(".bars2Wrap").datum(G.filter(function(t){return!t.disabled})),ft=tt.select(".stack2Wrap").datum(Y.filter(function(t){return!t.disabled})),dt=[];if(T.stacked()&&W.length){(dt=W.filter(function(t){return!t.disabled}).map(function(t){return t.values})).length>0&&(dt=dt.reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}))}W.length&&dt.push({x:0,y:0});var ht=[];if(k.stacked()&&G.length){(ht=G.filter(function(t){return!t.disabled}).map(function(t){return t.values})).length>0&&(ht=ht.reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}))}G.length&&ht.push({x:0,y:0}),w.domain(e||d3.extent(d3.merge(X).concat(dt),function(t){return t.y})).range([0,U]),x.domain(n||d3.extent(d3.merge(K).concat(ht),function(t){return t.y})).range([0,U]),E.yDomain(w.domain()),S.yDomain(w.domain()),T.yDomain(w.domain()),C.yDomain(w.domain()),_.yDomain(x.domain()),$.yDomain(x.domain()),k.yDomain(x.domain()),A.yDomain(x.domain()),Z.length&&d3.transition(at).call(C),Y.length&&d3.transition(ft).call(A),W.length&&d3.transition(st).call(T),G.length&&d3.transition(lt).call(k),B.length&&d3.transition(it).call(E),j.length&&d3.transition(ut).call(_),H.length&&d3.transition(ot).call(S),z.length&&d3.transition(ct).call($),R._ticks(r.utils.calcTicksX(F/100,l)).tickSize(-U,0),tt.select(".nv-x.nv-axis").attr("transform","translate(0,"+U+")"),d3.transition(tt.select(".nv-x.nv-axis")).call(R),M._ticks(r.utils.calcTicksY(U/36,l)).tickSize(-F,0),d3.transition(tt.select(".nv-y1.nv-axis")).call(M),I._ticks(r.utils.calcTicksY(U/36,l)).tickSize(-F,0),d3.transition(tt.select(".nv-y2.nv-axis")).call(I),tt.select(".nv-y1.nv-axis").classed("nv-disabled",!X.length).attr("transform","translate("+b.range()[0]+",0)"),tt.select(".nv-y2.nv-axis").classed("nv-disabled",!K.length).attr("transform","translate("+b.range()[1]+",0)"),O.dispatch.on("stateChange",function(e){t.update()}),g&&(v.width(F).height(U).margin({left:i.left,top:i.top}).svgContainer(q).xScale(b),Q.select(".nv-interactive").call(v)),g?(v.dispatch.on("elementMousemove",function(e){V();var n,i,o,a=[];l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(u,c){var l=b.domain(),f=u.values.filter(function(e,n){return t.x()(e,n)>=l[0]&&t.x()(e,n)<=l[1]}),d=f[i=r.interactiveBisect(f,e.pointXValue,t.x())],h=t.y()(d,i);null!==h&&function(t,e,n){for(var r=0,i=D.length;r<i;r++){var o=D[r];try{o.highlightPoint(t,e,n)}catch(t){}}}(c,i,!0),void 0!==d&&(void 0===n&&(n=d),void 0===o&&(o=b(t.x()(d,i))),a.push({key:u.key,value:h,color:s(u,u.seriesIndex),data:d,yAxis:2==u.yAxis?I:M}))});v.tooltip.headerFormatter(function(t,e){return R.tickFormat()(t,e)}).valueFormatter(v.tooltip.valueFormatter()||function(t,e){var n=a[e].yAxis;return null==t?"N/A":n.tickFormat()(t)}).data({value:t.x()(n,i),index:i,series:a})(),v.renderGuideLine(o)}),v.dispatch.on("elementMouseout",function(t){V()})):(E.dispatch.on("elementMouseover.tooltip",p),_.dispatch.on("elementMouseover.tooltip",p),E.dispatch.on("elementMouseout.tooltip",function(t){N.hidden(!0)}),_.dispatch.on("elementMouseout.tooltip",function(t){N.hidden(!0)}),S.dispatch.on("elementMouseover.tooltip",y),$.dispatch.on("elementMouseover.tooltip",y),S.dispatch.on("elementMouseout.tooltip",function(t){N.hidden(!0)}),$.dispatch.on("elementMouseout.tooltip",function(t){N.hidden(!0)}),C.dispatch.on("elementMouseover.tooltip",L),A.dispatch.on("elementMouseover.tooltip",L),C.dispatch.on("elementMouseout.tooltip",function(t){N.hidden(!0)}),A.dispatch.on("elementMouseout.tooltip",function(t){N.hidden(!0)}),T.dispatch.on("elementMouseover.tooltip",P),k.dispatch.on("elementMouseover.tooltip",P),T.dispatch.on("elementMouseout.tooltip",function(t){N.hidden(!0)}),k.dispatch.on("elementMouseout.tooltip",function(t){N.hidden(!0)}),T.dispatch.on("elementMousemove.tooltip",function(t){N()}),k.dispatch.on("elementMousemove.tooltip",function(t){N()}))}),t}var e,n,i={top:30,right:20,bottom:50,left:60},o=null,s=r.utils.defaultColor(),a=null,u=null,c=!0,l=null,f=function(t){return t.x},d=function(t){return t.y},h="linear",p=!0,v=r.interactiveGuideline(),g=!1,m=" (right axis)",y=250,b=d3.scale.linear(),w=d3.scale.linear(),x=d3.scale.linear(),E=r.models.line().yScale(w).duration(y),_=r.models.line().yScale(x).duration(y),S=r.models.scatter().yScale(w).duration(y),$=r.models.scatter().yScale(x).duration(y),T=r.models.multiBar().stacked(!1).yScale(w).duration(y),k=r.models.multiBar().stacked(!1).yScale(x).duration(y),C=r.models.stackedArea().yScale(w).duration(y),A=r.models.stackedArea().yScale(x).duration(y),R=r.models.axis().scale(b).orient("bottom").tickPadding(5).duration(y),M=r.models.axis().scale(w).orient("left").duration(y),I=r.models.axis().scale(x).orient("right").duration(y),O=r.models.legend().height(30),N=r.models.tooltip(),L=d3.dispatch(),D=[E,_,S,$,T,k,C,A];return t.dispatch=L,t.legend=O,t.lines1=E,t.lines2=_,t.scatters1=S,t.scatters2=$,t.bars1=T,t.bars2=k,t.stack1=C,t.stack2=A,t.xAxis=R,t.yAxis1=M,t.yAxis2=I,t.tooltip=N,t.interactiveLayer=v,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return u},set:function(t){u=t}},showLegend:{get:function(){return c},set:function(t){c=t}},yDomain1:{get:function(){return e},set:function(t){e=t}},yDomain2:{get:function(){return n},set:function(t){n=t}},noData:{get:function(){return l},set:function(t){l=t}},interpolate:{get:function(){return h},set:function(t){h=t}},legendRightAxisHint:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return i},set:function(t){void 0!==t.top&&(i.top=t.top,o=t.top),i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},color:{get:function(){return s},set:function(t){s=r.utils.getColor(t)}},x:{get:function(){return f},set:function(t){f=t,E.x(t),_.x(t),S.x(t),$.x(t),T.x(t),k.x(t),C.x(t),A.x(t)}},y:{get:function(){return d},set:function(t){d=t,E.y(t),_.y(t),S.y(t),$.y(t),C.y(t),A.y(t),T.y(t),k.y(t)}},useVoronoi:{get:function(){return p},set:function(t){p=t,E.useVoronoi(t),_.useVoronoi(t),C.useVoronoi(t),A.useVoronoi(t)}},useInteractiveGuideline:{get:function(){return g},set:function(t){(g=t)&&(E.interactive(!1),E.useVoronoi(!1),_.interactive(!1),_.useVoronoi(!1),C.interactive(!1),C.useVoronoi(!1),A.interactive(!1),A.useVoronoi(!1),S.interactive(!1),$.interactive(!1))}},duration:{get:function(){return y},set:function(t){y=t,[E,_,C,A,S,$,R,M,I].forEach(function(t){t.duration(y)})}}}),r.utils.initOptions(t),t},r.models.ohlcBar=function(){"use strict";function t(S){return S.each(function(t){l=d3.select(this);var S=r.utils.availableWidth(a,l,s),T=r.utils.availableHeight(u,l,s);r.utils.initSVG(l);var k=S/t[0].values.length*.9;f.domain(e||d3.extent(t[0].values.map(h).concat(b))),x?f.range(i||[.5*S/t[0].values.length,S*(t[0].values.length-.5)/t[0].values.length]):f.range(i||[5+k/2,S-k/2-5]),d.domain(n||[d3.min(t[0].values.map(y).concat(w)),d3.max(t[0].values.map(m).concat(w))]).range(o||[T,0]),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var C=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([t[0].values]),A=C.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),R=A.append("defs"),M=A.append("g"),I=C.select("g");M.append("g").attr("class","nv-ticks"),C.attr("transform","translate("+s.left+","+s.top+")"),l.on("click",function(t,e){$.chartClick({data:t,index:e,pos:d3.event,id:c})}),R.append("clipPath").attr("id","nv-chart-clip-path-"+c).append("rect"),C.select("#nv-chart-clip-path-"+c+" rect").attr("width",S).attr("height",T),I.attr("clip-path",E?"url(#nv-chart-clip-path-"+c+")":"");var O=C.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});O.exit().remove(),O.enter().append("path").attr("class",function(t,e,n){return(v(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(t,e){return"m0,0l0,"+(d(v(t,e))-d(m(t,e)))+"l"+-k/2+",0l"+k/2+",0l0,"+(d(y(t,e))-d(v(t,e)))+"l0,"+(d(g(t,e))-d(y(t,e)))+"l"+k/2+",0l"+-k/2+",0z"}).attr("transform",function(t,e){return"translate("+f(h(t,e))+","+d(m(t,e))+")"}).attr("fill",function(t,e){return _[0]}).attr("stroke",function(t,e){return _[0]}).attr("x",0).attr("y",function(t,e){return d(Math.max(0,p(t,e)))}).attr("height",function(t,e){return Math.abs(d(p(t,e))-d(0))}),O.attr("class",function(t,e,n){return(v(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(O).attr("transform",function(t,e){return"translate("+f(h(t,e))+","+d(m(t,e))+")"}).attr("d",function(e,n){var r=S/t[0].values.length*.9;return"m0,0l0,"+(d(v(e,n))-d(m(e,n)))+"l"+-r/2+",0l"+r/2+",0l0,"+(d(y(e,n))-d(v(e,n)))+"l0,"+(d(g(e,n))-d(y(e,n)))+"l"+r/2+",0l"+-r/2+",0z"})}),t}var e,n,i,o,s={top:0,right:0,bottom:0,left:0},a=null,u=null,c=Math.floor(1e4*Math.random()),l=null,f=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},v=function(t){return t.open},g=function(t){return t.close},m=function(t){return t.high},y=function(t){return t.low},b=[],w=[],x=!1,E=!0,_=r.utils.defaultColor(),S=!1,$=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return t.highlightPoint=function(e,n){t.clearHighlights(),l.select(".nv-ohlcBar .nv-tick-0-"+e).classed("hover",n)},t.clearHighlights=function(){l.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},t.dispatch=$,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return u},set:function(t){u=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceX:{get:function(){return b},set:function(t){b=t}},forceY:{get:function(){return w},set:function(t){w=t}},padData:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return E},set:function(t){E=t}},id:{get:function(){return c},set:function(t){c=t}},interactive:{get:function(){return S},set:function(t){S=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return p},set:function(t){p=t}},open:{get:function(){return v()},set:function(t){v=t}},close:{get:function(){return g()},set:function(t){g=t}},high:{get:function(){return m},set:function(t){m=t}},low:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!=t.top?t.top:s.top,s.right=void 0!=t.right?t.right:s.right,s.bottom=void 0!=t.bottom?t.bottom:s.bottom,s.left=void 0!=t.left?t.left:s.left}},color:{get:function(){return _},set:function(t){_=r.utils.getColor(t)}}}),r.utils.initOptions(t),t},r.models.parallelCoordinates=function(){"use strict";function t(k){return T.reset(),k.each(function(t){function T(t){return _(p.map(function(e){if(isNaN(t.values[e.key])||isNaN(parseFloat(t.values[e.key]))||P){var n=f[e.key].domain(),r=f[e.key].range(),i=n[0]-(n[1]-n[0])/9;if(x.indexOf(e.key)<0){var o=d3.scale.linear().domain([i,n[1]]).range([c-12,r[1]]);f[e.key].brush.y(o),x.push(e.key)}if(isNaN(t.values[e.key])||isNaN(parseFloat(t.values[e.key])))return[l(e.key),f[e.key](i)]}return void 0!==B&&(x.length>0||P?(B.style("display","inline"),j.style("display","inline")):(B.style("display","none"),j.style("display","none"))),[l(e.key),f[e.key](t.values[e.key])]}))}function k(t){y.forEach(function(e){var n=f[e.dimension].brush.y().domain();e.hasOnlyNaN&&(e.extent[1]=(f[e.dimension].domain()[1]-n[0])*(e.extent[1]-e.extent[0])/(D[e.dimension]-e.extent[0])+n[0]),e.hasNaN&&(e.extent[0]=n[0]),t&&f[e.dimension].brush.extent(e.extent)}),i.select(".nv-brushBackground").each(function(t){d3.select(this).call(f[t.key].brush)}).selectAll("rect").attr("x",-8).attr("width",16),M()}function C(){!1===g&&(g=!0,k(!0))}function A(){Z=v.filter(function(t){return!f[t].brush.empty()}),Y=Z.map(function(t){return f[t].brush.extent()}),y=[],Z.forEach(function(t,e){y[e]={dimension:t,extent:Y[e],hasNaN:!1,hasOnlyNaN:!1}}),b=[],e.style("display",function(t){var e=Z.every(function(e,n){return!(!isNaN(t.values[e])&&!isNaN(parseFloat(t.values[e]))||Y[n][0]!=f[e].brush.y().domain()[0])||Y[n][0]<=t.values[e]&&t.values[e]<=Y[n][1]&&!isNaN(parseFloat(t.values[e]))});return e&&b.push(t),e?null:"none"}),M(),$.brush({filters:y,active:b})}function R(){var t=Z.length>0;y.forEach(function(t){t.extent[0]===f[t.dimension].brush.y().domain()[0]&&x.indexOf(t.dimension)>=0&&(t.hasNaN=!0),t.extent[1]<f[t.dimension].domain()[0]&&(t.hasOnlyNaN=!0)}),$.brushEnd(b,t)}function M(){i.select(".nv-axis").each(function(t,e){var n=y.filter(function(e){return e.dimension==t.key});V[t.key]=f[t.key].domain(),0!=n.length&&g&&(V[t.key]=[],n[0].extent[1]>f[t.key].domain()[0]&&(V[t.key]=[n[0].extent[1]]),n[0].extent[0]>=f[t.key].domain()[0]&&V[t.key].push(n[0].extent[0])),d3.select(this).call(S.scale(f[t.key]).tickFormat(t.format).tickValues(V[t.key]))})}function I(t){var e=w[t];return null==e?l(t):e}var O=d3.select(this);if(u=r.utils.availableWidth(s,O,o),c=r.utils.availableHeight(a,O,o),r.utils.initSVG(O),void 0===t[0].values){var N=[];t.forEach(function(t){var e={};Object.keys(t).forEach(function(n){"name"!==n&&(e[n]=t[n])}),N.push({key:t.name,values:e})}),t=N}var L=t.map(function(t){return t.values});0===b.length&&(b=t),v=h.sort(function(t,e){return t.currentPosition-e.currentPosition}).map(function(t){return t.key}),p=h.filter(function(t){return!t.disabled}),l.rangePoints([0,u],1).domain(p.map(function(t){return t.key}));var D={},P=!1,V=[];v.forEach(function(t){var e=d3.extent(L,function(e){return+e[t]}),n=e[0],r=e[1],i=!1;(isNaN(n)||isNaN(r))&&(i=!0,n=0,r=0),n===r&&(n-=1,r+=1);var o=y.filter(function(e){return e.dimension==t});0!==o.length&&(i?(n=f[t].domain()[0],r=f[t].domain()[1]):!o[0].hasOnlyNaN&&g?(n=n>o[0].extent[0]?o[0].extent[0]:n,r=r<o[0].extent[1]?o[0].extent[1]:r):o[0].hasNaN&&(r=r<o[0].extent[1]?o[0].extent[1]:r,D[t]=f[t].domain()[1],P=!0)),f[t]=d3.scale.linear().domain([n,r]).range([.9*(c-12),0]),x=[],f[t].brush=d3.svg.brush().y(f[t]).on("brushstart",C).on("brush",A).on("brushend",R)});var q=O.selectAll("g.nv-wrap.nv-parallelCoordinates").data([t]),F=q.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),U=q.select("g");F.append("g").attr("class","nv-parallelCoordinates background"),F.append("g").attr("class","nv-parallelCoordinates foreground"),F.append("g").attr("class","nv-parallelCoordinates missingValuesline"),q.attr("transform","translate("+o.left+","+o.top+")"),_.interpolate("cardinal").tension(E),S.orient("left");var B,j,H=d3.behavior.drag().on("dragstart",function(t){w[t.key]=this.parentNode.__origin__=l(t.key),n.attr("visibility","hidden")}).on("drag",function(t){w[t.key]=Math.min(u,Math.max(0,this.parentNode.__origin__+=d3.event.x)),e.attr("d",T),p.sort(function(t,e){return I(t.key)-I(e.key)}),p.forEach(function(t,e){return t.currentPosition=e}),l.domain(p.map(function(t){return t.key})),i.attr("transform",function(t){return"translate("+I(t.key)+")"})}).on("dragend",function(t,r){delete this.parentNode.__origin__,delete w[t.key],d3.select(this.parentNode).attr("transform","translate("+l(t.key)+")"),e.attr("d",T),n.attr("d",T).attr("visibility",null),$.dimensionsOrder(p)}),z=l.range()[1]-l.range()[0];if(z=isNaN(z)?l.range()[0]:z,!isNaN(z)){var W=[0+z/2,c-12,u-z/2,c-12];(B=q.select(".missingValuesline").selectAll("line").data([W])).enter().append("line"),B.exit().remove(),B.attr("x1",function(t){return t[0]}).attr("y1",function(t){return t[1]}).attr("x2",function(t){return t[2]}).attr("y2",function(t){return t[3]}),(j=q.select(".missingValuesline").selectAll("text").data([d])).append("text").data([d]),j.enter().append("text"),j.exit().remove(),j.attr("y",c).attr("x",u-92-z/2).text(function(t){return t})}(n=q.select(".background").selectAll("path").data(t)).enter().append("path"),n.exit().remove(),n.attr("d",T),(e=q.select(".foreground").selectAll("path").data(t)).enter().append("path"),e.exit().remove(),e.attr("d",T).style("stroke-width",function(t,e){return isNaN(t.strokeWidth)&&(t.strokeWidth=1),t.strokeWidth}).attr("stroke",function(t,e){return t.color||m(t,e)}),e.on("mouseover",function(t,e){d3.select(this).classed("hover",!0).style("stroke-width",t.strokeWidth+2+"px").style("stroke-opacity",1),$.elementMouseover({label:t.name,color:t.color||m(t,e),values:t.values,dimensions:p})}),e.on("mouseout",function(t,e){d3.select(this).classed("hover",!1).style("stroke-width",t.strokeWidth+"px").style("stroke-opacity",.7),$.elementMouseout({label:t.name,index:e})}),e.on("mousemove",function(t,e){$.elementMousemove()}),e.on("click",function(t){$.elementClick({id:t.id})});var G=(i=U.selectAll(".dimension").data(p)).enter().append("g").attr("class","nv-parallelCoordinates dimension");i.attr("transform",function(t){return"translate("+l(t.key)+",0)"}),G.append("g").attr("class","nv-axis"),G.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(t,e){$.elementMouseover({label:t.tooltip||t.key,color:t.color})}).on("mouseout",function(t,e){$.elementMouseout({label:t.tooltip})}).on("mousemove",function(t,e){$.elementMousemove()}).call(H),G.append("g").attr("class","nv-brushBackground"),i.exit().remove(),i.select(".nv-label").text(function(t){return t.key}),k(g);var Z=v.filter(function(t){return!f[t].brush.empty()}),Y=Z.map(function(t){return f[t].brush.extent()}),X=b.slice(0);b=[],e.style("display",function(t){var e=Z.every(function(e,n){return!(!isNaN(t.values[e])&&!isNaN(parseFloat(t.values[e]))||Y[n][0]!=f[e].brush.y().domain()[0])||Y[n][0]<=t.values[e]&&t.values[e]<=Y[n][1]&&!isNaN(parseFloat(t.values[e]))});return e&&b.push(t),e?null:"none"}),(y.length>0||!r.utils.arrayEquals(b,X))&&$.activeChanged(b)}),t}var e,n,i,o={top:30,right:0,bottom:10,left:0},s=null,a=null,u=null,c=null,l=d3.scale.ordinal(),f={},d="undefined values",h=[],p=[],v=[],g=!0,m=r.utils.defaultColor(),y=[],b=[],w=[],x=[],E=1,_=d3.svg.line(),S=d3.svg.axis(),$=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),T=r.utils.renderWatch($);return t.dispatch=$,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return a},set:function(t){a=t}},dimensionData:{get:function(){return h},set:function(t){h=t}},displayBrush:{get:function(){return g},set:function(t){g=t}},filters:{get:function(){return y},set:function(t){y=t}},active:{get:function(){return b},set:function(t){b=t}},lineTension:{get:function(){return E},set:function(t){E=t}},undefinedValuesLabel:{get:function(){return d},set:function(t){d=t}},dimensions:{get:function(){return h.map(function(t){return t.key})},set:function(t){r.deprecated("dimensions","use dimensionData instead"),0===h.length?t.forEach(function(t){h.push({key:t})}):t.forEach(function(t,e){h[e].key=t})}},dimensionNames:{get:function(){return h.map(function(t){return t.key})},set:function(t){r.deprecated("dimensionNames","use dimensionData instead"),v=[],0===h.length?t.forEach(function(t){h.push({key:t})}):t.forEach(function(t,e){h[e].key=t})}},dimensionFormats:{get:function(){return h.map(function(t){return t.format})},set:function(t){r.deprecated("dimensionFormats","use dimensionData instead"),0===h.length?t.forEach(function(t){h.push({format:t})}):t.forEach(function(t,e){h[e].format=t})}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return m},set:function(t){m=r.utils.getColor(t)}}}),r.utils.initOptions(t),t},r.models.parallelCoordinatesChart=function(){"use strict";function t(i){return y.reset(),y.models(e),i.each(function(i){var l=d3.select(this);r.utils.initSVG(l);var v=r.utils.availableWidth(a,l,o),g=r.utils.availableHeight(u,l,o);if(t.update=function(){l.call(t)},t.container=this,f.setter(w(d),t.update).getter(b(d)).update(),f.disabled=d.map(function(t){return!!t.disabled}),(d=d.map(function(t){return t.disabled=!!t.disabled,t})).forEach(function(t,e){t.originalPosition=isNaN(t.originalPosition)?e:t.originalPosition,t.currentPosition=isNaN(t.currentPosition)?e:t.currentPosition}),!p){var y;p={};for(y in f)f[y]instanceof Array?p[y]=f[y].slice(0):p[y]=f[y]}if(!i||!i.length)return r.utils.noData(t,l),t;l.selectAll(".nv-noData").remove();var x=l.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([i]),E=x.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),_=x.select("g");E.append("g").attr("class","nv-parallelCoordinatesWrap"),E.append("g").attr("class","nv-legendWrap"),_.select("rect").attr("width",v).attr("height",g>0?g:0),c?(n.width(v).color(function(t){return"rgb(188,190,192)"}),_.select(".nv-legendWrap").datum(d.sort(function(t,e){return t.originalPosition-e.originalPosition})).call(n),s||n.height()===o.top||(o.top=n.height(),g=r.utils.availableHeight(u,l,o)),x.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-o.top+")")):_.select(".nv-legendWrap").selectAll("*").remove(),x.attr("transform","translate("+o.left+","+o.top+")"),e.width(v).height(g).dimensionData(d).displayBrush(h);_.select(".nv-parallelCoordinatesWrap ").datum(i).transition().call(e),e.dispatch.on("brushEnd",function(t,e){e?(h=!0,m.brushEnd(t)):h=!1}),n.dispatch.on("stateChange",function(e){for(var n in e)f[n]=e[n];m.stateChange(f),t.update()}),e.dispatch.on("dimensionsOrder",function(t){d.sort(function(t,e){return t.currentPosition-e.currentPosition});var e=!1;d.forEach(function(t,n){t.currentPosition=n,t.currentPosition!==t.originalPosition&&(e=!0)}),m.dimensionsOrder(d,e)}),m.on("changeState",function(e){void 0!==e.disabled&&(d.forEach(function(t,n){t.disabled=e.disabled[n]}),f.disabled=e.disabled),t.update()})}),y.renderEnd("parraleleCoordinateChart immediate"),t}var e=r.models.parallelCoordinates(),n=r.models.legend(),i=r.models.tooltip(),o=(r.models.tooltip(),{top:0,right:0,bottom:0,left:0}),s=null,a=null,u=null,c=!0,l=r.utils.defaultColor(),f=r.utils.state(),d=[],h=!0,p=null,v=null,g="undefined",m=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),y=r.utils.renderWatch(m),b=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},w=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return i.contentGenerator(function(t){var e='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td><strong>'+t.key+"</strong></td></tr></thead>";return 0!==t.series.length&&(e+='<tbody><tr><td height ="10px"></td></tr>',t.series.forEach(function(t){e=e+'<tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td class="key">'+t.key+'</td><td class="value">'+t.value+"</td></tr>"}),e+="</tbody>"),e+="</table>"}),e.dispatch.on("elementMouseover.tooltip",function(t){var e={key:t.label,color:t.color,series:[]};t.values&&(Object.keys(t.values).forEach(function(n){var r=t.dimensions.filter(function(t){return t.key===n})[0];if(r){var i;i=isNaN(t.values[n])||isNaN(parseFloat(t.values[n]))?g:r.format(t.values[n]),e.series.push({idx:r.currentPosition,key:n,value:i,color:r.color})}}),e.series.sort(function(t,e){return t.idx-e.idx})),i.data(e).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(t){i.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(){i()}),t.dispatch=m,t.parallelCoordinates=e,t.legend=n,t.tooltip=i,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return u},set:function(t){u=t}},showLegend:{get:function(){return c},set:function(t){c=t}},defaultState:{get:function(){return p},set:function(t){p=t}},dimensionData:{get:function(){return d},set:function(t){d=t}},displayBrush:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return v},set:function(t){v=t}},nanValue:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return o},set:function(t){void 0!==t.top&&(o.top=t.top,s=t.top),o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return l},set:function(t){l=r.utils.getColor(t),n.color(l),e.color(l)}}}),r.utils.inheritOptions(t,e),r.utils.initOptions(t),t},r.models.pie=function(){"use strict";function t(I){return M.reset(),I.each(function(t){var I=n-e.left-e.right,O=i-e.top-e.bottom,N=Math.min(I,O)/2,L=[],D=[];if(u=d3.select(this),0===k.length)for(var P=N-N/10,V=$*N,q=0;q<t[0].length;q++)L.push(P),D.push(V);else y?(L=k.map(function(t){return(t.outer-t.outer/10)*N}),D=k.map(function(t){return(t.inner-t.inner/10)*N}),$=d3.min(k.map(function(t){return t.inner-t.inner/10}))):(L=k.map(function(t){return t.outer*N}),D=k.map(function(t){return t.inner*N}),$=d3.min(k.map(function(t){return t.inner})));r.utils.initSVG(u);var F=u.selectAll(".nv-wrap.nv-pie").data(t),U=F.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a).append("g"),B=F.select("g"),j=U.append("g").attr("class","nv-pie");U.append("g").attr("class","nv-pieLabels"),F.attr("transform","translate("+e.left+","+e.top+")"),B.select(".nv-pie").attr("transform","translate("+I/2+","+O/2+")"),B.select(".nv-pieLabels").attr("transform","translate("+I/2+","+O/2+")"),u.on("click",function(t,e){C.chartClick({data:t,index:e,pos:d3.event,id:a})}),A=[],R=[];for(q=0;q<t[0].length;q++){var H=d3.svg.arc().outerRadius(L[q]),z=d3.svg.arc().outerRadius(L[q]+5);!1!==x&&(H.startAngle(x),z.startAngle(x)),!1!==_&&(H.endAngle(_),z.endAngle(_)),g&&(H.innerRadius(D[q]),z.innerRadius(D[q])),H.cornerRadius&&S&&(H.cornerRadius(S),z.cornerRadius(S)),A.push(H),R.push(z)}var W=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:s(t)});W.padAngle&&E&&W.padAngle(E),g&&m&&(j.append("text").attr("class","nv-pie-title"),F.select(".nv-pie-title").style("text-anchor","middle").text(function(t){return m}).style("font-size",Math.min(I,O)*$*2/(m.length+2)+"px").attr("dy","0.35em").attr("transform",function(t,e){return"translate(0, "+b+")"}));var G=F.select(".nv-pie").selectAll(".nv-slice").data(W),Z=F.select(".nv-pieLabels").selectAll(".nv-label").data(W);G.exit().remove(),Z.exit().remove();var Y=G.enter().append("g");Y.attr("class","nv-slice"),Y.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),y&&d3.select(this).select("path").transition().duration(70).attr("d",R[e]),C.elementMouseover({data:t.data,index:e,color:d3.select(this).style("fill"),percent:(t.endAngle-t.startAngle)/(2*Math.PI)})}),Y.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),y&&d3.select(this).select("path").transition().duration(50).attr("d",A[e]),C.elementMouseout({data:t.data,index:e})}),Y.on("mousemove",function(t,e){C.elementMousemove({data:t.data,index:e})}),Y.on("click",function(t,e){C.elementClick({data:t.data,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this})}),Y.on("dblclick",function(t,e){C.elementDblClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),G.attr("fill",function(t,e){return c(t.data,e)}),G.attr("stroke",function(t,e){return c(t.data,e)});Y.append("path").each(function(t){this._current=t});if(G.select("path").transition().duration(T).attr("d",function(t,e){return A[e](t)}).attrTween("d",function(t,e){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,g||(t.innerRadius=0);var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return A[e](n(t))}}),f){var X=[];for(q=0;q<t[0].length;q++)X.push(A[q]),d?g&&(X[q]=d3.svg.arc().outerRadius(A[q].outerRadius()),!1!==x&&X[q].startAngle(x),!1!==_&&X[q].endAngle(_)):g||X[q].innerRadius(0);Z.enter().append("g").classed("nv-label",!0).each(function(t,e){var n=d3.select(this);n.attr("transform",function(t,e){if(w){t.outerRadius=L[e]+10,t.innerRadius=L[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+X[e].centroid(t)+") rotate("+n+")"}return t.outerRadius=N+10,t.innerRadius=N+15,"translate("+X[e].centroid(t)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",w?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var K={},Q=function(t){return 140*Math.floor(t[0]/140)+","+14*Math.floor(t[1]/14)},J=function(t){return(t.endAngle-t.startAngle)/(2*Math.PI)};Z.watchTransition(M,"pie labels").attr("transform",function(t,e){if(w){t.outerRadius=L[e]+10,t.innerRadius=L[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+X[e].centroid(t)+") rotate("+n+")"}t.outerRadius=N+10,t.innerRadius=N+15;var r=X[e].centroid(t),i=J(t);if(t.value&&i>=p){var o=Q(r);K[o]&&(r[1]-=14),K[Q(r)]=!0}return"translate("+r+")"}),Z.select(".nv-label text").style("text-anchor",function(t,e){return w?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(t,e){var n=J(t),r="";if(!t.value||n<p)return"";if("function"==typeof h)r=h(t,e,{key:o(t.data),value:s(t.data),percent:l(n)});else switch(h){case"key":r=o(t.data);break;case"value":r=l(s(t.data));break;case"percent":r=d3.format("%")(n)}return r}),v&&Z.each(function(t,e){if(this.getBBox){var n=this.getBBox(),i=X[e].centroid(t),o={x:i[0]+n.x,y:i[1]+n.y},s={x:o.x+n.width,y:o.y},a={x:o.x,y:o.y+n.height},u={x:o.x+n.width,y:o.y+n.height};t.visible=r.utils.pointIsInArc(o,t,H)&&r.utils.pointIsInArc(s,t,H)&&r.utils.pointIsInArc(a,t,H)&&r.utils.pointIsInArc(u,t,H)}}).style("display",function(t){return t.visible?null:"none"})}}),M.renderEnd("pie immediate"),t}var e={top:0,right:0,bottom:0,left:0},n=500,i=500,o=function(t){return t.x},s=function(t){return t.y},a=Math.floor(1e4*Math.random()),u=null,c=r.utils.defaultColor(),l=d3.format(",.2f"),f=!0,d=!1,h="key",p=.02,v=!1,g=!1,m=!1,y=!0,b=0,w=!1,x=!1,E=!1,_=!1,S=0,$=.5,T=250,k=[],C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),A=[],R=[],M=r.utils.renderWatch(C);return t.dispatch=C,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{arcsRadius:{get:function(){return k},set:function(t){k=t}},width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return i},set:function(t){i=t}},showLabels:{get:function(){return f},set:function(t){f=t}},title:{get:function(){return m},set:function(t){m=t}},titleOffset:{get:function(){return b},set:function(t){b=t}},labelThreshold:{get:function(){return p},set:function(t){p=t}},hideOverlapLabels:{get:function(){return v},set:function(t){v=t}},valueFormat:{get:function(){return l},set:function(t){l=t}},x:{get:function(){return o},set:function(t){o=t}},id:{get:function(){return a},set:function(t){a=t}},endAngle:{get:function(){return _},set:function(t){_=t}},startAngle:{get:function(){return x},set:function(t){x=t}},padAngle:{get:function(){return E},set:function(t){E=t}},cornerRadius:{get:function(){return S},set:function(t){S=t}},donutRatio:{get:function(){return $},set:function(t){$=t}},labelsOutside:{get:function(){return d},set:function(t){d=t}},labelSunbeamLayout:{get:function(){return w},set:function(t){w=t}},donut:{get:function(){return g},set:function(t){g=t}},growOnHover:{get:function(){return y},set:function(t){y=t}},pieLabelsOutside:{get:function(){return d},set:function(t){d=t,r.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return d},set:function(t){d=t,r.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return l},set:function(t){l=t,r.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},duration:{get:function(){return T},set:function(t){T=t,M.reset(T)}},y:{get:function(){return s},set:function(t){s=d3.functor(t)}},color:{get:function(){return c},set:function(t){c=r.utils.getColor(t)}},labelType:{get:function(){return h},set:function(t){h=t||"key"}}}),r.utils.initOptions(t),t},r.models.pieChart=function(){"use strict";function t(i){return y.reset(),y.models(e),i.each(function(i){var c=d3.select(this);r.utils.initSVG(c);var d=r.utils.availableWidth(a,c,o),v=r.utils.availableHeight(u,c,o);if(t.update=function(){c.transition().call(t)},t.container=this,h.setter(w(i),t.update).getter(b(i)).update(),h.disabled=i.map(function(t){return!!t.disabled}),!p){var g;p={};for(g in h)h[g]instanceof Array?p[g]=h[g].slice(0):p[g]=h[g]}if(!i||!i.length)return r.utils.noData(t,c),t;c.selectAll(".nv-noData").remove();var y=c.selectAll("g.nv-wrap.nv-pieChart").data([i]),x=y.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),E=y.select("g");if(x.append("g").attr("class","nv-pieWrap"),x.append("g").attr("class","nv-legendWrap"),l)if("top"===f)n.width(d).key(e.x()),y.select(".nv-legendWrap").datum(i).call(n),s||n.height()===o.top||(o.top=n.height(),v=r.utils.availableHeight(u,c,o)),y.select(".nv-legendWrap").attr("transform","translate(0,"+-o.top+")");else if("right"===f){var _=r.models.legend().width();d/2<_&&(_=d/2),n.height(v).key(e.x()),n.width(_),d-=n.width(),y.select(".nv-legendWrap").datum(i).call(n).attr("transform","translate("+d+",0)")}else"bottom"===f&&(n.width(d).key(e.x()),y.select(".nv-legendWrap").datum(i).call(n),o.bottom=n.height(),v=r.utils.availableHeight(u,c,o),y.select(".nv-legendWrap").attr("transform","translate(0,"+v+")"));else E.select(".nv-legendWrap").selectAll("*").remove();y.attr("transform","translate("+o.left+","+o.top+")"),e.width(d).height(v);var S=E.select(".nv-pieWrap").datum([i]);d3.transition(S).call(e),n.dispatch.on("stateChange",function(e){for(var n in e)h[n]=e[n];m.stateChange(h),t.update()}),m.on("changeState",function(e){void 0!==e.disabled&&(i.forEach(function(t,n){t.disabled=e.disabled[n]}),h.disabled=e.disabled),t.update()})}),y.renderEnd("pieChart immediate"),t}var e=r.models.pie(),n=r.models.legend(),i=r.models.tooltip(),o={top:30,right:20,bottom:20,left:20},s=null,a=null,u=null,c=!1,l=!0,f="top",d=r.utils.defaultColor(),h=r.utils.state(),p=null,v=null,g=250,m=d3.dispatch("stateChange","changeState","renderEnd");i.duration(0).headerEnabled(!1).valueFormatter(function(t,n){return e.valueFormat()(t,n)});var y=r.utils.renderWatch(m),b=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},w=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return e.dispatch.on("elementMouseover.tooltip",function(e){e.series={key:t.x()(e.data),value:t.y()(e.data),color:e.color,percent:e.percent},c||(delete e.percent,delete e.series.percent),i.data(e).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(t){i.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(t){i()}),t.legend=n,t.dispatch=m,t.pie=e,t.tooltip=i,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return u},set:function(t){u=t}},noData:{get:function(){return v},set:function(t){v=t}},showTooltipPercent:{get:function(){return c},set:function(t){c=t}},showLegend:{get:function(){return l},set:function(t){l=t}},legendPosition:{get:function(){return f},set:function(t){f=t}},defaultState:{get:function(){return p},set:function(t){p=t}},color:{get:function(){return d},set:function(t){d=t,n.color(d),e.color(d)}},duration:{get:function(){return g},set:function(t){g=t,y.reset(g),e.duration(g)}},margin:{get:function(){return o},set:function(t){void 0!==t.top&&(o.top=t.top,s=t.top),o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}}}),r.utils.inheritOptions(t,e),r.utils.initOptions(t),t},r.models.sankey=function(){"use strict";function t(){for(var t,e=u,n=0;e.length&&n<u.length;)t=[],e.forEach(function(e){e.x=n,e.dx=o,e.sourceLinks.forEach(function(e){t.indexOf(e.target)<0&&t.push(e.target)})}),e=t,++n;l&&function(t){u.forEach(function(e){e.sourceLinks.length||(e.x=t-1)})}(n),function(t){u.forEach(function(e){e.x*=t})}((a[0]-o)/(n-1))}function e(){function t(t,e){return t.source.y-e.source.y}function e(t,e){return t.target.y-e.target.y}u.forEach(function(n){n.sourceLinks.sort(e),n.targetLinks.sort(t)}),u.forEach(function(t){var e=0,n=0;t.sourceLinks.forEach(function(t){t.sy=e,e+=t.dy}),t.targetLinks.forEach(function(t){t.ty=n,n+=t.dy})})}function n(t){return t.value}var i={},o=24,s=8,a=[1,1],u=[],c=[],l=!0,f=function(r){u.forEach(function(t){t.sourceLinks=[],t.targetLinks=[]}),c.forEach(function(t){var e=t.source,n=t.target;"number"==typeof e&&(e=t.source=u[t.source]),"number"==typeof n&&(n=t.target=u[t.target]),e.sourceLinks.push(t),n.targetLinks.push(t)}),u.forEach(function(t){t.value=Math.max(d3.sum(t.sourceLinks,n),d3.sum(t.targetLinks,n))}),t(),function(t){function r(){o.forEach(function(t){var e,n,r,o=0,u=t.length;for(t.sort(i),r=0;r<u;++r)(n=o-(e=t[r]).y)>0&&(e.y+=n),o=e.y+e.dy+s;if((n=o-s-a[1])>0)for(o=e.y-=n,r=u-2;r>=0;--r)(n=(e=t[r]).y+e.dy+s-o)>0&&(e.y-=n),o=e.y})}function i(t,e){return t.y-e.y}var o=d3.nest().key(function(t){return t.x}).sortKeys(d3.ascending).entries(u).map(function(t){return t.values});!function(){var t=d3.min(o,function(t){return(a[1]-(t.length-1)*s)/d3.sum(t,n)});o.forEach(function(e){e.forEach(function(e,n){e.y=n,e.dy=e.value*t})}),c.forEach(function(e){e.dy=e.value*t})}(),r(),e();for(var l=1;t>0;--t)!function(t){function e(t){return(t.target.y+t.ty+t.dy/2)*t.value}o.slice().reverse().forEach(function(r){r.forEach(function(r){if(r.sourceLinks.length){var i=d3.sum(r.sourceLinks,e)/d3.sum(r.sourceLinks,n);r.y+=(i-h(r))*t}})})}(l*=.99),r(),e(),function(t){function e(t){return(t.source.y+t.sy+t.dy/2)*t.value}o.forEach(function(r,i){r.forEach(function(r){if(r.targetLinks.length){var i=d3.sum(r.targetLinks,e)/d3.sum(r.targetLinks,n);r.y+=(i-h(r))*t}})})}(l),r(),e()}(r)},d=function(){function t(t){var n=t.source.x+t.source.dx,r=t.target.x,i=d3.interpolateNumber(n,r),o=i(e),s=i(1-e),a=t.source.y+t.sy+t.dy/2,u=t.target.y+t.ty+t.dy/2;return"M"+n+","+a+"C"+o+","+a+" "+s+","+u+" "+r+","+u}var e=.5;return t.curvature=function(n){return arguments.length?(e=+n,t):e},t},h=function(t){return t.y+t.dy/2};return i.options=r.utils.optionsFunc.bind(i),i._options=Object.create({},{nodeWidth:{get:function(){return o},set:function(t){o=+t}},nodePadding:{get:function(){return s},set:function(t){s=t}},nodes:{get:function(){return u},set:function(t){u=t}},links:{get:function(){return c},set:function(t){c=t}},size:{get:function(){return a},set:function(t){a=t}},sinksRight:{get:function(){return l},set:function(t){l=t}},layout:{get:function(){f(32)},set:function(t){f(t)}},relayout:{get:function(){e()},set:function(t){}},center:{get:function(){return h()},set:function(t){"function"==typeof t&&(h=t)}},link:{get:function(){return d()},set:function(t){return"function"==typeof t&&(d=t),d()}}}),r.utils.initOptions(i),i},r.models.sankeyChart=function(){"use strict";function t(e){return e.each(function(t){var r={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},{source:3,target:5,value:186}]},u=!1,l=!1;if(("object"==typeof t.nodes&&t.nodes.length)>=0&&("object"==typeof t.links&&t.links.length)>=0&&(u=!0),t.nodes&&t.nodes.length>0&&t.links&&t.links.length>0&&(l=!0),!u)return console.error("NVD3 Sankey chart error:","invalid data format for",t),console.info("Valid data format is: ",r,JSON.stringify(r)),m(e,"Error loading chart, data is invalid"),!1;if(!l)return m(e,"No data available"),!1;var f=e.append("svg").attr("width",i).attr("height",o).append("g").attr("class","nvd3 nv-wrap nv-sankeyChart");n.nodeWidth(s).nodePadding(a).size([i,o]);var d=n.link();n.nodes(t.nodes).links(t.links).layout(32).center(c);var y=f.append("g").selectAll(".link").data(t.links).enter().append("path").attr("class","link").attr("d",d).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,e){return e.dy-t.dy});y.append("title").text(h);var b=f.append("g").selectAll(".node").data(t.nodes).enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).call(d3.behavior.drag().origin(function(t){return t}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",function(t){d3.select(this).attr("transform","translate("+t.x+","+(t.y=Math.max(0,Math.min(o-t.dy,d3.event.y)))+")"),n.relayout(),y.attr("d",d)}));b.append("rect").attr("height",function(t){return t.dy}).attr("width",n.nodeWidth()).style("fill",p).style("stroke",v).append("title").text(g),b.append("text").attr("x",-6).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(t){return t.name}).filter(function(t){return t.x<i/2}).attr("x",6+n.nodeWidth()).attr("text-anchor","start")}),t}var e={top:5,right:0,bottom:5,left:0},n=r.models.sankey(),i=600,o=400,s=36,a=40,u="units",c=void 0,l=d3.format(",.0f"),f=function(t){return l(t)+" "+u},d=d3.scale.category20(),h=function(t){return t.source.name+"  "+t.target.name+"\n"+f(t.value)},p=function(t){return t.color=d(t.name.replace(/ .*/,""))},v=function(t){return d3.rgb(t.color).darker(2)},g=function(t){return t.name+"\n"+f(t.value)},m=function(t,e){t.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(e)};return t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{units:{get:function(){return u},set:function(t){u=t}},width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return o},set:function(t){o=t}},format:{get:function(){return f},set:function(t){f=t}},linkTitle:{get:function(){return h},set:function(t){h=t}},nodeWidth:{get:function(){return s},set:function(t){s=t}},nodePadding:{get:function(){return a},set:function(t){a=t}},center:{get:function(){return c},set:function(t){c=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},nodeStyle:{get:function(){return{}},set:function(t){p=void 0!==t.fillColor?t.fillColor:p,v=void 0!==t.strokeColor?t.strokeColor:v,g=void 0!==t.title?t.title:g}}}),r.utils.initOptions(t),t},r.models.scatter=function(){"use strict";function t(t){var e;e=t[0].series+":"+t[1],delete Q[e]}function e(t){var e,n,r,i=function(t){var e;return e=t[0].series+":"+t[1],Q[e]=Q[e]||{}}(t),o=!1;for(e=1;e<arguments.length;e+=2)n=arguments[e],r=arguments[e+1](t[0],t[1]),i[n]===r&&i.hasOwnProperty(n)||(i[n]=r,o=!0);return o}function n(W){return X.reset(),W.each(function(W){function Q(){if(Y=!1,!A)return!1;if(!0===z){at.select(".nv-point-paths").selectAll("path").remove();var t=d3.merge(W.map(function(t,e){return t.values.map(function(t,n){var i=E(t,n),o=_(t,n);return[r.utils.NaNtoZero(b(i))+1e-4*Math.random(),r.utils.NaNtoZero(w(o))+1e-4*Math.random(),e,n,t]}).filter(function(t,e){return R(t[4],e)})}));if(0==t.length)return!1;t.length<3&&(t.push([b.range()[0]-20,w.range()[0]-20,null,null]),t.push([b.range()[1]+20,w.range()[1]+20,null,null]),t.push([b.range()[0]-20,w.range()[0]+20,null,null]),t.push([b.range()[1]+20,w.range()[1]-20,null,null]));var e=d3.geom.polygon([[-10,-10],[-10,p+10],[h+10,p+10],[h+10,-10]]);t=t.sort(function(t,e){return t[0]-e[0]||t[1]-e[1]});for(var n=0;n<t.length-1;)Math.abs(t[n][0]-t[n+1][0])<1e-4&&Math.abs(t[n][1]-t[n+1][1])<1e-4?t.splice(n+1,1):n++;var i=d3.geom.voronoi(t).map(function(n,r){return{data:e.clip(n),series:t[r][2],point:t[r][3]}}),o=at.select(".nv-point-paths").selectAll("path").data(i),s=o.enter().append("svg:path").attr("d",function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"}).attr("id",function(t,e){return"nv-path-"+e}).attr("clip-path",function(t,e){return"url(#nv-clip-"+m+"-"+e+")"});if(L&&s.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),N){at.select(".nv-point-clips").selectAll("*").remove();at.select(".nv-point-clips").selectAll("clipPath").data(t).enter().append("svg:clipPath").attr("id",function(t,e){return"nv-clip-"+m+"-"+e}).append("svg:circle").attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",D)}var a=function(t,e,n){if(Y)return 0;var r=W[e.series];if(void 0!==r){var i=r.values[e.point];i.color=v(r,e.series),i.x=E(i),i.y=_(i);var o=y.node().getBoundingClientRect(),s=window.pageYOffset||document.documentElement.scrollTop,a=window.pageXOffset||document.documentElement.scrollLeft;n({point:i,series:r,pos:{left:b(E(i,e.point))+o.left+a+d.left+10,top:w(_(i,e.point))+o.top+s+d.top+10},relativePos:[b(E(i,e.point))+d.left,w(_(i,e.point))+d.top],seriesIndex:e.series,pointIndex:e.point,event:d3.event,element:t})}};o.on("click",function(t){a(this,t,H.elementClick)}).on("dblclick",function(t){a(this,t,H.elementDblClick)}).on("mouseover",function(t){a(this,t,H.elementMouseover)}).on("mouseout",function(t,e){a(this,t,H.elementMouseout)})}else at.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(t,e){if(Y||!W[t.series])return 0;var n=W[t.series],r=n.values[e];H.elementClick({point:r,series:n,pos:[b(E(r,e))+d.left,w(_(r,e))+d.top],relativePos:[b(E(r,e))+d.left,w(_(r,e))+d.top],seriesIndex:t.series,pointIndex:e,event:d3.event,element:this})}).on("dblclick",function(t,e){if(Y||!W[t.series])return 0;var n=W[t.series],r=n.values[e];H.elementDblClick({point:r,series:n,pos:[b(E(r,e))+d.left,w(_(r,e))+d.top],relativePos:[b(E(r,e))+d.left,w(_(r,e))+d.top],seriesIndex:t.series,pointIndex:e})}).on("mouseover",function(t,e){if(Y||!W[t.series])return 0;var n=W[t.series],r=n.values[e];H.elementMouseover({point:r,series:n,pos:[b(E(r,e))+d.left,w(_(r,e))+d.top],relativePos:[b(E(r,e))+d.left,w(_(r,e))+d.top],seriesIndex:t.series,pointIndex:e,color:v(t,e)})}).on("mouseout",function(t,e){if(Y||!W[t.series])return 0;var n=W[t.series],r=n.values[e];H.elementMouseout({point:r,series:n,pos:[b(E(r,e))+d.left,w(_(r,e))+d.top],relativePos:[b(E(r,e))+d.left,w(_(r,e))+d.top],seriesIndex:t.series,pointIndex:e,color:v(t,e)})})}y=d3.select(this);var J=r.utils.availableWidth(h,y,d),tt=r.utils.availableHeight(p,y,d);r.utils.initSVG(y),W.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var et="function"==typeof n.yScale().base,nt=P&&V&&U?[]:d3.merge(W.map(function(t){return t.values.map(function(t,e){return{x:E(t,e),y:_(t,e),size:S(t,e)}})}));if(b.domain(P||d3.extent(nt.map(function(t){return t.x}).concat(T))),M&&W[0]?b.range(q||[(J*I+J)/(2*W[0].values.length),J-J*(1+I)/(2*W[0].values.length)]):b.range(q||[0,J]),et){var rt=d3.min(nt.map(function(t){if(0!==t.y)return t.y}));w.clamp(!0).domain(V||d3.extent(nt.map(function(t){return 0!==t.y?t.y:.1*rt}).concat(k))).range(F||[tt,0])}else w.domain(V||d3.extent(nt.map(function(t){return t.y}).concat(k))).range(F||[tt,0]);x.domain(U||d3.extent(nt.map(function(t){return t.size}).concat(C))).range(B||K),j=b.domain()[0]===b.domain()[1]||w.domain()[0]===w.domain()[1],b.domain()[0]===b.domain()[1]&&(b.domain()[0]?b.domain([b.domain()[0]-.01*b.domain()[0],b.domain()[1]+.01*b.domain()[1]]):b.domain([-1,1])),w.domain()[0]===w.domain()[1]&&(w.domain()[0]?w.domain([w.domain()[0]-.01*w.domain()[0],w.domain()[1]+.01*w.domain()[1]]):w.domain([-1,1])),isNaN(b.domain()[0])&&b.domain([-1,1]),isNaN(w.domain()[0])&&w.domain([-1,1]),i=i||b,o=o||w,s=s||x;var it=b(1)!==i(1)||w(1)!==o(1)||x(1)!==s(1);c=c||h,l=l||p;var ot=c!==h||l!==p,st=(a=a||[])[0]!==b.domain()[0]||a[1]!==b.domain()[1];a=b.domain(),u=u||[],st=st||u[0]!==w.domain()[0]||u[1]!==w.domain()[1],u=w.domain();var at=y.selectAll("g.nv-wrap.nv-scatter").data([W]),ut=at.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+m),ct=ut.append("defs"),lt=ut.append("g"),ft=at.select("g");at.classed("nv-single-point",j),lt.append("g").attr("class","nv-groups"),lt.append("g").attr("class","nv-point-paths"),ut.append("g").attr("class","nv-point-clips"),at.attr("transform","translate("+d.left+","+d.top+")"),ct.append("clipPath").attr("id","nv-edge-clip-"+m).append("rect").attr("transform","translate( -10, -10)"),at.select("#nv-edge-clip-"+m+" rect").attr("width",J+20).attr("height",tt>0?tt+20:0),ft.attr("clip-path",O?"url(#nv-edge-clip-"+m+")":""),Y=!0;var dt=at.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});dt.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),dt.exit().remove(),dt.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("nv-noninteractive",!A).classed("hover",function(t){return t.hover}),dt.watchTransition(X,"scatter: groups").style("fill",function(t,e){return v(t,e)}).style("stroke",function(t,e){return t.pointBorderColor||g||v(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5);var ht=dt.selectAll("path.nv-point").data(function(t){return t.values.map(function(t,e){return[t,e]}).filter(function(t,e){return R(t[0],e)})});if(ht.enter().append("path").attr("class",function(t){return"nv-point nv-point-"+t[1]}).style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(t){return"translate("+r.utils.NaNtoZero(i(E(t[0],t[1])))+","+r.utils.NaNtoZero(o(_(t[0],t[1])))+")"}).attr("d",r.utils.symbol().type(function(t){return $(t[0])}).size(function(t){return x(S(t[0],t[1]))})),ht.exit().each(t).remove(),dt.exit().selectAll("path.nv-point").watchTransition(X,"scatter exit").attr("transform",function(t){return"translate("+r.utils.NaNtoZero(b(E(t[0],t[1])))+","+r.utils.NaNtoZero(w(_(t[0],t[1])))+")"}).remove(),ht.filter(function(t){return e(t,"x",E,"y",_)||it||ot||st}).watchTransition(X,"scatter points").attr("transform",function(t){return"translate("+r.utils.NaNtoZero(b(E(t[0],t[1])))+","+r.utils.NaNtoZero(w(_(t[0],t[1])))+")"}),ht.filter(function(t){return e(t,"shape",$,"size",S)||it||ot||st}).watchTransition(X,"scatter points").attr("d",r.utils.symbol().type(function(t){return $(t[0])}).size(function(t){return x(S(t[0],t[1]))})),Z){var pt=dt.selectAll(".nv-label").data(function(t){return t.values.map(function(t,e){return[t,e]}).filter(function(t,e){return R(t[0],e)})});pt.enter().append("text").style("fill",function(t,e){return t.color}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(t){return"translate("+(r.utils.NaNtoZero(i(E(t[0],t[1])))+Math.sqrt(x(S(t[0],t[1]))/Math.PI)+2)+","+r.utils.NaNtoZero(o(_(t[0],t[1])))+")"}).text(function(t,e){return t[0].label}),pt.exit().remove(),dt.exit().selectAll("path.nv-label").watchTransition(X,"scatter exit").attr("transform",function(t){return"translate("+(r.utils.NaNtoZero(b(E(t[0],t[1])))+Math.sqrt(x(S(t[0],t[1]))/Math.PI)+2)+","+r.utils.NaNtoZero(w(_(t[0],t[1])))+")"}).remove(),pt.each(function(t){d3.select(this).classed("nv-label",!0).classed("nv-label-"+t[1],!1).classed("hover",!1)}),pt.watchTransition(X,"scatter labels").attr("transform",function(t){return"translate("+(r.utils.NaNtoZero(b(E(t[0],t[1])))+Math.sqrt(x(S(t[0],t[1]))/Math.PI)+2)+","+r.utils.NaNtoZero(w(_(t[0],t[1])))+")"})}G?(clearTimeout(f),f=setTimeout(Q,G)):Q(),i=b.copy(),o=w.copy(),s=x.copy(),c=h,l=p}),X.renderEnd("scatter immediate"),n}var i,o,s,a,u,c,l,f,d={top:0,right:0,bottom:0,left:0},h=null,p=null,v=r.utils.defaultColor(),g=null,m=Math.floor(1e5*Math.random()),y=null,b=d3.scale.linear(),w=d3.scale.linear(),x=d3.scale.linear(),E=function(t){return t.x},_=function(t){return t.y},S=function(t){return t.size||1},$=function(t){return t.shape||"circle"},T=[],k=[],C=[],A=!0,R=function(t){return!t.notActive},M=!1,I=.1,O=!1,N=!0,L=!1,D=function(){return 25},P=null,V=null,q=null,F=null,U=null,B=null,j=!1,H=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),z=!0,W=250,G=300,Z=!1,Y=!1,X=r.utils.renderWatch(H,W),K=[16,256],Q={};return n.dispatch=H,n.options=r.utils.optionsFunc.bind(n),n._calls=new function(){this.clearHighlights=function(){return r.dom.write(function(){y.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(t,e,n){r.dom.write(function(){y.select(".nv-groups").selectAll(".nv-series-"+t).selectAll(".nv-point-"+e).classed("hover",n)})}},H.on("elementMouseover.point",function(t){A&&n._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),H.on("elementMouseout.point",function(t){A&&n._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),n._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return p},set:function(t){p=t}},xScale:{get:function(){return b},set:function(t){b=t}},yScale:{get:function(){return w},set:function(t){w=t}},pointScale:{get:function(){return x},set:function(t){x=t}},xDomain:{get:function(){return P},set:function(t){P=t}},yDomain:{get:function(){return V},set:function(t){V=t}},pointDomain:{get:function(){return U},set:function(t){U=t}},xRange:{get:function(){return q},set:function(t){q=t}},yRange:{get:function(){return F},set:function(t){F=t}},pointRange:{get:function(){return B},set:function(t){B=t}},forceX:{get:function(){return T},set:function(t){T=t}},forceY:{get:function(){return k},set:function(t){k=t}},forcePoint:{get:function(){return C},set:function(t){C=t}},interactive:{get:function(){return A},set:function(t){A=t}},pointActive:{get:function(){return R},set:function(t){R=t}},padDataOuter:{get:function(){return I},set:function(t){I=t}},padData:{get:function(){return M},set:function(t){M=t}},clipEdge:{get:function(){return O},set:function(t){O=t}},clipVoronoi:{get:function(){return N},set:function(t){N=t}},clipRadius:{get:function(){return D},set:function(t){D=t}},showVoronoi:{get:function(){return L},set:function(t){L=t}},id:{get:function(){return m},set:function(t){m=t}},interactiveUpdateDelay:{get:function(){return G},set:function(t){G=t}},showLabels:{get:function(){return Z},set:function(t){Z=t}},pointBorderColor:{get:function(){return g},set:function(t){g=t}},x:{get:function(){return E},set:function(t){E=d3.functor(t)}},y:{get:function(){return _},set:function(t){_=d3.functor(t)}},pointSize:{get:function(){return S},set:function(t){S=d3.functor(t)}},pointShape:{get:function(){return $},set:function(t){$=d3.functor(t)}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},duration:{get:function(){return W},set:function(t){W=t,X.reset(W)}},color:{get:function(){return v},set:function(t){v=r.utils.getColor(t)}},useVoronoi:{get:function(){return z},set:function(t){!1===(z=t)&&(N=!1)}}}),r.utils.initOptions(n),n},r.models.scatterChart=function(){"use strict";function t(T){return A.reset(),A.models(e),w&&A.models(n),x&&A.models(i),m&&A.models(s),y&&A.models(a),T.each(function(T){h=d3.select(this),r.utils.initSVG(h);var I=r.utils.availableWidth(f,h,c),O=r.utils.availableHeight(d,h,c);if(t.update=function(){0===k?h.call(t):h.transition().duration(k).call(t)},t.container=this,_.setter(M(T),t.update).getter(R(T)).update(),_.disabled=T.map(function(t){return!!t.disabled}),!S){var N;S={};for(N in _)_[N]instanceof Array?S[N]=_[N].slice(0):S[N]=_[N]}if(!(T&&T.length&&T.filter(function(t){return t.values.length}).length))return r.utils.noData(t,h),A.renderEnd("scatter immediate"),t;h.selectAll(".nv-noData").remove(),v=e.xScale(),g=e.yScale();var L=h.selectAll("g.nv-wrap.nv-scatterChart").data([T]),D=L.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()).append("g"),P=L.select("g");if(D.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis"),D.append("g").attr("class","nv-scatterWrap"),D.append("g").attr("class","nv-regressionLinesWrap"),D.append("g").attr("class","nv-distWrap"),D.append("g").attr("class","nv-legendWrap"),E&&P.select(".nv-y.nv-axis").attr("transform","translate("+I+",0)"),b){var V=I;o.width(V),L.select(".nv-legendWrap").datum(T).call(o),l||o.height()===c.top||(c.top=o.height(),O=r.utils.availableHeight(d,h,c)),L.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")}else P.select(".nv-legendWrap").selectAll("*").remove();L.attr("transform","translate("+c.left+","+c.top+")"),e.width(I).height(O).color(T.map(function(t,e){return t.color=t.color||p(t,e),t.color}).filter(function(t,e){return!T[e].disabled})).showLabels(C),L.select(".nv-scatterWrap").datum(T.filter(function(t){return!t.disabled})).call(e),L.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");var q=L.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});q.enter().append("g").attr("class","nv-regLines");var F=q.selectAll(".nv-regLine").data(function(t){return[t]});F.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),F.filter(function(t){return t.intercept&&t.slope}).watchTransition(A,"scatterPlusLineChart: regline").attr("x1",v.range()[0]).attr("x2",v.range()[1]).attr("y1",function(t,e){return g(v.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t,e){return g(v.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return p(t,n)}).style("stroke-opacity",function(t,e){return t.disabled||void 0===t.slope||void 0===t.intercept?0:1}),w&&(n.scale(v)._ticks(r.utils.calcTicksX(I/100,T)).tickSize(-O,0),P.select(".nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")").call(n)),x&&(i.scale(g)._ticks(r.utils.calcTicksY(O/36,T)).tickSize(-I,0),P.select(".nv-y.nv-axis").call(i)),m&&(s.getData(e.x()).scale(v).width(I).color(T.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!T[e].disabled})),D.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),P.select(".nv-distributionX").attr("transform","translate(0,"+g.range()[0]+")").datum(T.filter(function(t){return!t.disabled})).call(s)),y&&(a.getData(e.y()).scale(g).width(O).color(T.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!T[e].disabled})),D.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),P.select(".nv-distributionY").attr("transform","translate("+(E?I:-a.size())+",0)").datum(T.filter(function(t){return!t.disabled})).call(a)),o.dispatch.on("stateChange",function(e){for(var n in e)_[n]=e[n];$.stateChange(_),t.update()}),$.on("changeState",function(e){void 0!==e.disabled&&(T.forEach(function(t,n){t.disabled=e.disabled[n]}),_.disabled=e.disabled),t.update()}),e.dispatch.on("elementMouseout.tooltip",function(t){u.hidden(!0),h.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),h.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",a.size())}),e.dispatch.on("elementMouseover.tooltip",function(t){h.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.relativePos[1]-O),h.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.relativePos[0]+s.size()),u.data(t).hidden(!1)}),v.copy(),g.copy()}),A.renderEnd("scatter with line immediate"),t}var e=r.models.scatter(),n=r.models.axis(),i=r.models.axis(),o=r.models.legend(),s=r.models.distribution(),a=r.models.distribution(),u=r.models.tooltip(),c={top:30,right:20,bottom:50,left:75},l=null,f=null,d=null,h=null,p=r.utils.defaultColor(),v=e.xScale(),g=e.yScale(),m=!1,y=!1,b=!0,w=!0,x=!0,E=!1,_=r.utils.state(),S=null,$=d3.dispatch("stateChange","changeState","renderEnd"),T=null,k=250,C=!1;e.xScale(v).yScale(g),n.orient("bottom").tickPadding(10),i.orient(E?"right":"left").tickPadding(10),s.axis("x"),a.axis("y"),u.headerFormatter(function(t,e){return n.tickFormat()(t,e)}).valueFormatter(function(t,e){return i.tickFormat()(t,e)});var A=r.utils.renderWatch($,k),R=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},M=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return t.dispatch=$,t.scatter=e,t.legend=o,t.xAxis=n,t.yAxis=i,t.distX=s,t.distY=a,t.tooltip=u,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return d},set:function(t){d=t}},container:{get:function(){return h},set:function(t){h=t}},showDistX:{get:function(){return m},set:function(t){m=t}},showDistY:{get:function(){return y},set:function(t){y=t}},showLegend:{get:function(){return b},set:function(t){b=t}},showXAxis:{get:function(){return w},set:function(t){w=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return S},set:function(t){S=t}},noData:{get:function(){return T},set:function(t){T=t}},duration:{get:function(){return k},set:function(t){k=t}},showLabels:{get:function(){return C},set:function(t){C=t}},margin:{get:function(){return c},set:function(t){void 0!==t.top&&(c.top=t.top,l=t.top),c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},rightAlignYAxis:{get:function(){return E},set:function(t){E=t,i.orient(t?"right":"left")}},color:{get:function(){return p},set:function(t){p=r.utils.getColor(t),o.color(p),s.color(p),a.color(p)}}}),r.utils.inheritOptions(t,e),r.utils.initOptions(t),t},r.models.sparkline=function(){"use strict";function t(l){return b.reset(),l.each(function(t){var l=a-s.left-s.right,y=u-s.top-s.bottom;c=d3.select(this),r.utils.initSVG(c),f.domain(e||d3.extent(t,h)).range(i||[0,l]),d.domain(n||d3.extent(t,p)).range(o||[y,0]);var b=c.selectAll("g.nv-wrap.nv-sparkline").data([t]);b.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),b.select("g");b.attr("transform","translate("+s.left+","+s.top+")");var w=b.selectAll("path").data(function(t){return[t]});w.enter().append("path"),w.exit().remove(),w.style("stroke",function(t,e){return t.color||v(t,e)}).attr("d",d3.svg.line().x(function(t,e){return f(h(t,e))}).y(function(t,e){return d(p(t,e))}));var x=b.selectAll("circle.nv-point").data(function(t){function e(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var n=t.map(function(t,e){return p(t,e)}),r=e(n.lastIndexOf(d.domain()[1])),i=e(n.indexOf(d.domain()[0])),o=e(n.length-1);return[g?i:null,g?r:null,m?o:null].filter(function(t){return null!=t})});x.enter().append("circle"),x.exit().remove(),x.attr("cx",function(t,e){return f(h(t,t.pointIndex))}).attr("cy",function(t,e){return d(p(t,t.pointIndex))}).attr("r",2).attr("class",function(t,e){return h(t,t.pointIndex)==f.domain()[1]?"nv-point nv-currentValue":p(t,t.pointIndex)==d.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),b.renderEnd("sparkline immediate"),t}var e,n,i,o,s={top:2,right:0,bottom:2,left:0},a=400,u=32,c=null,l=!0,f=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},v=r.utils.getColor(["#000"]),g=!0,m=!0,y=d3.dispatch("renderEnd"),b=r.utils.renderWatch(y);return t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return u},set:function(t){u=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},animate:{get:function(){return l},set:function(t){l=t}},showMinMaxPoints:{get:function(){return g},set:function(t){g=t}},showCurrentPoint:{get:function(){return m},set:function(t){m=t}},x:{get:function(){return h},set:function(t){h=d3.functor(t)}},y:{get:function(){return p},set:function(t){p=d3.functor(t)}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},color:{get:function(){return v},set:function(t){v=r.utils.getColor(t)}}}),t.dispatch=y,r.utils.initOptions(t),t},r.models.sparklinePlus=function(){"use strict";function t(v){return m.reset(),m.models(i),v.each(function(v){function g(){if(!c){var t=_.selectAll(".nv-hoverValue").data(u),n=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+e(i.x()(v[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),u.length&&(n.append("line").attr("x1",0).attr("y1",-o.top).attr("x2",0).attr("y2",b),n.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-o.top).attr("text-anchor","end").attr("dy",".9em"),_.select(".nv-hoverValue .nv-xValue").text(l(i.x()(v[u[0]],u[0]))),n.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-o.top).attr("text-anchor","start").attr("dy",".9em"),_.select(".nv-hoverValue .nv-yValue").text(f(i.y()(v[u[0]],u[0]))))}}var m=d3.select(this);r.utils.initSVG(m);var y=r.utils.availableWidth(s,m,o),b=r.utils.availableHeight(a,m,o);if(t.update=function(){m.call(t)},t.container=this,!v||!v.length)return r.utils.noData(t,m),t;m.selectAll(".nv-noData").remove();var w=i.y()(v[v.length-1],v.length-1);e=i.xScale(),n=i.yScale();var x=m.selectAll("g.nv-wrap.nv-sparklineplus").data([v]),E=x.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),_=x.select("g");E.append("g").attr("class","nv-sparklineWrap"),E.append("g").attr("class","nv-valueWrap"),E.append("g").attr("class","nv-hoverArea"),x.attr("transform","translate("+o.left+","+o.top+")");var S=_.select(".nv-sparklineWrap");if(i.width(y).height(b),S.call(i),d){var $=_.select(".nv-valueWrap").selectAll(".nv-currentValue").data([w]);$.enter().append("text").attr("class","nv-currentValue").attr("dx",p?-8:8).attr("dy",".9em").style("text-anchor",p?"end":"start"),$.attr("x",y+(p?o.right:0)).attr("y",h?function(t){return n(t)}:0).style("fill",i.color()(v[v.length-1],v.length-1)).text(f(w))}E.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!c){var t=d3.mouse(this)[0]-o.left;u=[function(t,e){for(var n=Math.abs(i.x()(t[0],0)-e),r=0,o=0;o<t.length;o++)Math.abs(i.x()(t[o],o)-e)<n&&(n=Math.abs(i.x()(t[o],o)-e),r=o);return r}(v,Math.round(e.invert(t)))],g()}}).on("click",function(){c=!c}).on("mouseout",function(){u=[],g()}),_.select(".nv-hoverArea rect").attr("transform",function(t){return"translate("+-o.left+","+-o.top+")"}).attr("width",y+o.left+o.right).attr("height",b+o.top)}),m.renderEnd("sparklinePlus immediate"),t}var e,n,i=r.models.sparkline(),o={top:15,right:100,bottom:10,left:50},s=null,a=null,u=[],c=!1,l=d3.format(",r"),f=d3.format(",.2f"),d=!0,h=!0,p=!1,v=null,g=d3.dispatch("renderEnd"),m=r.utils.renderWatch(g);return t.dispatch=g,t.sparkline=i,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return a},set:function(t){a=t}},xTickFormat:{get:function(){return l},set:function(t){l=t}},yTickFormat:{get:function(){return f},set:function(t){f=t}},showLastValue:{get:function(){return d},set:function(t){d=t}},alignValue:{get:function(){return h},set:function(t){h=t}},rightAlignValue:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}}}),r.utils.inheritOptions(t,i),r.utils.initOptions(t),t},r.models.stackedArea=function(){"use strict";function t(h){return x.reset(),x.models(y),h.each(function(h){var b=o-i.left-i.right,E=s-i.top-i.bottom;c=d3.select(this),r.utils.initSVG(c),e=y.xScale(),n=y.yScale();var _=h;h.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var S=h.filter(function(t){return!t.disabled});h=d3.layout.stack().order(v).offset(p).values(function(t){return t.values}).x(l).y(f).out(function(t,e,n){t.display={y:n,y0:e}})(S);var $=c.selectAll("g.nv-wrap.nv-stackedarea").data([h]),T=$.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),k=T.append("defs"),C=T.append("g"),A=$.select("g");C.append("g").attr("class","nv-areaWrap"),C.append("g").attr("class","nv-scatterWrap"),$.attr("transform","translate("+i.left+","+i.top+")"),0==y.forceY().length&&y.forceY().push(0),y.width(b).height(E).x(l).y(function(t){if(void 0!==t.display)return t.display.y+t.display.y0}).color(h.map(function(t,e){return t.color=t.color||a(t,t.seriesIndex),t.color}));A.select(".nv-scatterWrap").datum(h).call(y),k.append("clipPath").attr("id","nv-edge-clip-"+u).append("rect"),$.select("#nv-edge-clip-"+u+" rect").attr("width",b).attr("height",E),A.attr("clip-path",m?"url(#nv-edge-clip-"+u+")":"");var R=d3.svg.area().defined(d).x(function(t,n){return e(l(t,n))}).y0(function(t){return n(t.display.y0)}).y1(function(t){return n(t.display.y+t.display.y0)}).interpolate(g),M=d3.svg.area().defined(d).x(function(t,n){return e(l(t,n))}).y0(function(t){return n(t.display.y0)}).y1(function(t){return n(t.display.y0)}),I=A.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});I.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t,e){return M(t.values,t.seriesIndex)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),w.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),w.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t,e){d3.select(this).classed("hover",!1),w.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),I.exit().remove(),I.style("fill",function(t,e){return t.color||a(t,t.seriesIndex)}).style("stroke",function(t,e){return t.color||a(t,t.seriesIndex)}),I.watchTransition(x,"stackedArea path").attr("d",function(t,e){return R(t.values,e)}),y.dispatch.on("elementMouseover.area",function(t){A.select(".nv-chart-"+u+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),y.dispatch.on("elementMouseout.area",function(t){A.select(".nv-chart-"+u+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),t.d3_stackedOffset_stackPercent=function(t){var e,n,r,i=t.length,o=t[0].length,s=[];for(n=0;n<o;++n){for(e=0,r=0;e<_.length;e++)r+=f(_[e].values[n]);if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=0}for(n=0;n<o;++n)s[n]=0;return s}}),x.renderEnd("stackedArea immediate"),t}var e,n,i={top:0,right:0,bottom:0,left:0},o=960,s=500,a=r.utils.defaultColor(),u=Math.floor(1e5*Math.random()),c=null,l=function(t){return t.x},f=function(t){return t.y},d=function(t,e){return!isNaN(f(t,e))&&null!==f(t,e)},h="stack",p="zero",v="default",g="linear",m=!1,y=r.models.scatter(),b=250,w=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");y.pointSize(2.2).pointDomain([2.2,2.2]);var x=r.utils.renderWatch(w,b);return t.dispatch=w,t.scatter=y,y.dispatch.on("elementClick",function(){w.elementClick.apply(this,arguments)}),y.dispatch.on("elementMouseover",function(){w.elementMouseover.apply(this,arguments)}),y.dispatch.on("elementMouseout",function(){w.elementMouseout.apply(this,arguments)}),t.interpolate=function(e){return arguments.length?(g=e,t):g},t.duration=function(e){return arguments.length?(b=e,x.reset(b),y.duration(b),t):b},t.dispatch=w,t.scatter=y,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return s},set:function(t){s=t}},defined:{get:function(){return d},set:function(t){d=t}},clipEdge:{get:function(){return m},set:function(t){m=t}},offset:{get:function(){return p},set:function(t){p=t}},order:{get:function(){return v},set:function(t){v=t}},interpolate:{get:function(){return g},set:function(t){g=t}},x:{get:function(){return l},set:function(t){l=d3.functor(t)}},y:{get:function(){return f},set:function(t){f=d3.functor(t)}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},color:{get:function(){return a},set:function(t){a=r.utils.getColor(t)}},style:{get:function(){return h},set:function(e){switch(h=e){case"stack":t.offset("zero"),t.order("default");break;case"stream":t.offset("wiggle"),t.order("inside-out");break;case"stream-center":t.offset("silhouette"),t.order("inside-out");break;case"expand":t.offset("expand"),t.order("default");break;case"stack_percent":t.offset(t.d3_stackedOffset_stackPercent),t.order("default")}}},duration:{get:function(){return b},set:function(t){b=t,x.reset(b),y.duration(b)}}}),r.utils.inheritOptions(t,y),r.utils.initOptions(t),t},r.models.stackedAreaChart=function(){"use strict";function t(l){return P.reset(),P.models(i),w&&P.models(o),x&&P.models(s),l.each(function(l){function A(){w&&Z.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+H+")").transition().duration(N).call(o)}function P(){if(x){if("expand"===i.style()||"stack_percent"===i.style()){var t=s.tickFormat();L&&t===F||(L=t),s.tickFormat(F)}else L&&(s.tickFormat(L),L=null);Z.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(s)}}function U(t){Z.select(".nv-focus .nv-stackedWrap").datum(l.filter(function(t){return!t.disabled}).map(function(e,n){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter(function(e,n){return i.x()(e,n)>=t[0]&&i.x()(e,n)<=t[1]}),disableTooltip:e.disableTooltip}})).transition().duration(N).call(i),A(),P()}var B=d3.select(this);r.utils.initSVG(B);var j=r.utils.availableWidth(p,B,d),H=r.utils.availableHeight(v,B,d)-(_?f.height():0);if(t.update=function(){B.transition().duration(N).call(t)},t.container=this,k.setter(q(l),t.update).getter(V(l)).update(),k.disabled=l.map(function(t){return!!t.disabled}),!C){var z;C={};for(z in k)k[z]instanceof Array?C[z]=k[z].slice(0):C[z]=k[z]}if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return r.utils.noData(t,B),t;B.selectAll(".nv-noData").remove(),e=i.xScale(),n=i.yScale();var W=B.selectAll("g.nv-wrap.nv-stackedAreaChart").data([l]),G=W.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),Z=W.select("g");G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap");var Y=G.append("g").attr("class","nv-focus");Y.append("g").attr("class","nv-background").append("rect"),Y.append("g").attr("class","nv-x nv-axis"),Y.append("g").attr("class","nv-y nv-axis"),Y.append("g").attr("class","nv-stackedWrap"),Y.append("g").attr("class","nv-interactive");G.append("g").attr("class","nv-focusWrap");if(y){var X=m&&"top"===b?j-M:j;if(a.width(X),Z.select(".nv-legendWrap").datum(l).call(a),"bottom"===b){var K=10+(w?12:0);d.bottom=Math.max(a.height()+K,d.bottom);var Q=(H=r.utils.availableHeight(v,B,d)-(_?f.height():0))+K;Z.select(".nv-legendWrap").attr("transform","translate(0,"+Q+")")}else"top"===b&&(h||d.top==a.height()||(d.top=a.height(),H=r.utils.availableHeight(v,B,d)-(_?f.height():0)),Z.select(".nv-legendWrap").attr("transform","translate("+(j-X)+","+-d.top+")"))}else Z.select(".nv-legendWrap").selectAll("*").remove();if(m){var J=[{key:O.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=i.style(),style:"stack"},{key:O.stream||"Stream",metaKey:"Stream",disabled:"stream"!=i.style(),style:"stream"},{key:O.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=i.style(),style:"expand"},{key:O.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=i.style(),style:"stack_percent"}];M=I.length/3*260,J=J.filter(function(t){return-1!==I.indexOf(t.metaKey)}),u.width(M).color(["#444","#444","#444"]),Z.select(".nv-controlsWrap").datum(J).call(u);var tt=Math.max(u.height(),y&&"top"===b?a.height():0);d.top!=tt&&(d.top=tt,H=r.utils.availableHeight(v,B,d)-(_?f.height():0)),Z.select(".nv-controlsWrap").attr("transform","translate(0,"+-d.top+")")}else Z.select(".nv-controlsWrap").selectAll("*").remove();W.attr("transform","translate("+d.left+","+d.top+")"),E&&Z.select(".nv-y.nv-axis").attr("transform","translate("+j+",0)"),S&&(c.width(j).height(H).margin({left:d.left,top:d.top}).svgContainer(B).xScale(e),W.select(".nv-interactive").call(c)),Z.select(".nv-focus .nv-background rect").attr("width",j).attr("height",H),i.width(j).height(H).color(l.map(function(t,e){return t.color||g(t,e)}).filter(function(t,e){return!l[e].disabled}));var et=Z.select(".nv-focus .nv-stackedWrap").datum(l.filter(function(t){return!t.disabled}));if(w&&o.scale(e)._ticks(r.utils.calcTicksX(j/100,l)).tickSize(-H,0),x){var nt;nt="wiggle"===i.offset()?0:r.utils.calcTicksY(H/36,l),s.scale(n)._ticks(nt).tickSize(-j,0)}if(_){f.width(j),Z.select(".nv-focusWrap").attr("transform","translate(0,"+(H+d.bottom+f.margin().top)+")").datum(l.filter(function(t){return!t.disabled})).call(f);var rt=f.brush.empty()?f.xDomain():f.brush.extent();null!==rt&&U(rt)}else et.transition().call(i),A(),P();i.dispatch.on("areaClick.toggle",function(e){1===l.filter(function(t){return!t.disabled}).length?l.forEach(function(t){t.disabled=!1}):l.forEach(function(t,n){t.disabled=n!=e.seriesIndex}),k.disabled=l.map(function(t){return!!t.disabled}),R.stateChange(k),t.update()}),a.dispatch.on("stateChange",function(e){for(var n in e)k[n]=e[n];R.stateChange(k),t.update()}),u.dispatch.on("legendClick",function(e,n){e.disabled&&(J=J.map(function(t){return t.disabled=!0,t}),e.disabled=!1,i.style(e.style),k.style=i.style(),R.stateChange(k),t.update())}),c.dispatch.on("elementMousemove",function(e){i.clearHighlights();var n,o,s,a=[],u=0,f=!0,d=!1;if(l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(c,h){o=r.interactiveBisect(c.values,e.pointXValue,t.x());var p=c.values[o],v=t.y()(p,o);if(null!=v&&v>0&&(i.highlightPoint(h,o,!0),d=!0),h!==l.length-1||d||i.highlightPoint(h,o,!0),void 0!==p){void 0===n&&(n=p),void 0===s&&(s=t.xScale()(t.x()(p,o)));var m="expand"==i.style()?p.display.y:t.y()(p,o);a.push({key:c.key,value:m,color:g(c,c.seriesIndex),point:p}),$&&"expand"!=i.style()&&null!=m&&(u+=m,f=!1)}}),a.reverse(),a.length>2){var h=t.yScale().invert(e.mouseY),p=null;a.forEach(function(t,e){h=Math.abs(h);var n=Math.abs(t.point.display.y0),r=Math.abs(t.point.display.y);h>=n&&h<=r+n&&(p=e)}),null!=p&&(a[p].highlight=!0)}$&&"expand"!=i.style()&&a.length>=2&&!f&&a.push({key:T,value:u,total:!0});var v=t.x()(n,o),m=c.tooltip.valueFormatter();"expand"===i.style()||"stack_percent"===i.style()?(D||(D=m),m=d3.format(".1%")):D&&(m=D,D=null),c.tooltip.valueFormatter(m).data({value:v,series:a})(),c.renderGuideLine(s)}),c.dispatch.on("elementMouseout",function(t){i.clearHighlights()}),f.dispatch.on("onBrush",function(t){U(t)}),R.on("changeState",function(e){void 0!==e.disabled&&l.length===e.disabled.length&&(l.forEach(function(t,n){t.disabled=e.disabled[n]}),k.disabled=e.disabled),void 0!==e.style&&(i.style(e.style),e.style),t.update()})}),P.renderEnd("stacked Area chart immediate"),t}var e,n,i=r.models.stackedArea(),o=r.models.axis(),s=r.models.axis(),a=r.models.legend(),u=r.models.legend(),c=r.interactiveGuideline(),l=r.models.tooltip(),f=r.models.focus(r.models.stackedArea()),d={top:10,right:25,bottom:50,left:60},h=null,p=null,v=null,g=r.utils.defaultColor(),m=!0,y=!0,b="top",w=!0,x=!0,E=!1,_=!1,S=!1,$=!0,T="TOTAL",k=r.utils.state(),C=null,A=null,R=d3.dispatch("stateChange","changeState","renderEnd"),M=250,I=["Stacked","Stream","Expanded"],O={},N=250;k.style=i.style(),o.orient("bottom").tickPadding(7),s.orient(E?"right":"left"),l.headerFormatter(function(t,e){return o.tickFormat()(t,e)}).valueFormatter(function(t,e){return s.tickFormat()(t,e)}),c.tooltip.headerFormatter(function(t,e){return o.tickFormat()(t,e)}).valueFormatter(function(t,e){return null==t?"N/A":s.tickFormat()(t,e)});var L=null,D=null;u.updateState(!1);var P=r.utils.renderWatch(R),V=(i.style(),function(t){return function(){return{active:t.map(function(t){return!t.disabled}),style:i.style()}}}),q=function(t){return function(e){void 0!==e.style&&e.style,void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},F=d3.format("%");return i.dispatch.on("elementMouseover.tooltip",function(t){t.point.x=i.x()(t.point),t.point.y=i.y()(t.point),l.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)}),t.dispatch=R,t.stacked=i,t.legend=a,t.controls=u,t.xAxis=o,t.x2Axis=f.xAxis,t.yAxis=s,t.y2Axis=f.yAxis,t.interactiveLayer=c,t.tooltip=l,t.focus=f,t.dispatch=R,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return v},set:function(t){v=t}},showLegend:{get:function(){return y},set:function(t){y=t}},legendPosition:{get:function(){return b},set:function(t){b=t}},showXAxis:{get:function(){return w},set:function(t){w=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return C},set:function(t){C=t}},noData:{get:function(){return A},set:function(t){A=t}},showControls:{get:function(){return m},set:function(t){m=t}},controlLabels:{get:function(){return O},set:function(t){O=t}},controlOptions:{get:function(){return I},set:function(t){I=t}},showTotalInTooltip:{get:function(){return $},set:function(t){$=t}},totalLabel:{get:function(){return T},set:function(t){T=t}},focusEnable:{get:function(){return _},set:function(t){_=t}},focusHeight:{get:function(){return f.height()},set:function(t){f.height(t)}},brushExtent:{get:function(){return f.brushExtent()},set:function(t){f.brushExtent(t)}},margin:{get:function(){return d},set:function(t){void 0!==t.top&&(d.top=t.top,h=t.top),d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},focusMargin:{get:function(){return f.margin},set:function(t){f.margin.top=void 0!==t.top?t.top:f.margin.top,f.margin.right=void 0!==t.right?t.right:f.margin.right,f.margin.bottom=void 0!==t.bottom?t.bottom:f.margin.bottom,f.margin.left=void 0!==t.left?t.left:f.margin.left}},duration:{get:function(){return N},set:function(t){N=t,P.reset(N),i.duration(N),o.duration(N),s.duration(N)}},color:{get:function(){return g},set:function(t){g=r.utils.getColor(t),a.color(g),i.color(g),f.color(g)}},x:{get:function(){return i.x()},set:function(t){i.x(t),f.x(t)}},y:{get:function(){return i.y()},set:function(t){i.y(t),f.y(t)}},rightAlignYAxis:{get:function(){return E},set:function(t){E=t,s.orient(E?"right":"left")}},useInteractiveGuideline:{get:function(){return S},set:function(e){S=!!e,t.interactive(!e),t.useVoronoi(!e),i.scatter.interactive(!e)}}}),r.utils.inheritOptions(t,i),r.utils.initOptions(t),t},r.models.stackedAreaWithFocusChart=function(){return r.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)},r.models.sunburst=function(){"use strict";function t(t){return e(t)>90?180:0}function e(t){return(Math.max(0,Math.min(2*Math.PI,A(t.x)))+Math.max(0,Math.min(2*Math.PI,A(t.x+t.dx))))/2*(180/Math.PI)-90}function n(t){var e=Math.max(0,Math.min(2*Math.PI,A(t.x)));return Math.max(0,Math.min(2*Math.PI,A(t.x+t.dx)))-e>_}function i(t,e){var n=d3.interpolate(A.domain(),[c.x,c.x+c.dx]),r=d3.interpolate(R.domain(),[c.y,1]),i=d3.interpolate(R.range(),[c.y?20:0,d]);return 0===e?function(){return O(t)}:function(e){return A.domain(n(e)),R.domain(r(e)).range(i(e)),O(t)}}function o(t){var e=d3.interpolate({x:t.x0,dx:t.dx0,y:t.y0,dy:t.dy0},t);return function(n){var r=e(n);return t.x0=r.x,t.dx0=r.dx,t.y0=r.y,t.dy0=r.dy,O(r)}}function s(t){t.forEach(function(t){var e=$(t),n=I[e];n?(t.dx0=n.dx,t.x0=n.x,t.dy0=n.dy,t.y0=n.y):(t.dx0=t.dx,t.x0=t.x,t.dy0=t.dy,t.y0=t.y),function(t){var e=$(t);I[e]||(I[e]={});var n=I[e];n.dx=t.dx,n.x=t.x,n.dy=t.dy,n.y=t.y}(t)})}function a(r){var o=b.selectAll("text"),s=b.selectAll("path");o.transition().attr("opacity",0),c=r,s.transition().duration(k).attrTween("d",i).each("end",function(i){if(i.x>=r.x&&i.x<r.x+r.dx&&i.depth>=r.depth){d3.select(this.parentNode).select("text").transition().duration(k).text(function(t){return E(t)}).attr("opacity",function(t){return n(t)?1:0}).attr("transform",function(){var n=this.getBBox().width;if(0===i.depth)return"translate("+n/2*-1+",0)";if(i.depth===r.depth)return"translate("+(R(i.y)+5)+",0)";var o=e(i),s=t(i);return 0===s?"rotate("+o+")translate("+(R(i.y)+5)+",0)":"rotate("+o+")translate("+(R(i.y)+n+5)+",0)rotate("+s+")"})}})}function u(i){return N.reset(),i.each(function(i){b=d3.select(this),l=r.utils.availableWidth(p,b,h),f=r.utils.availableHeight(v,b,h),d=Math.min(l,f)/2,R.range([0,d]);var u=b.select("g.nvd3.nv-wrap.nv-sunburst");u[0][0]?u.attr("transform","translate("+(l/2+h.left+h.right)+","+(f/2+h.top+h.bottom)+")"):u=b.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+y).attr("transform","translate("+(l/2+h.left+h.right)+","+(f/2+h.top+h.bottom)+")"),b.on("click",function(t,e){C.chartClick({data:t,index:e,pos:d3.event,id:y})}),M.value(m[g]||m.count);var c=M.nodes(i[0]).reverse();s(c);var _=u.selectAll(".arc-container").data(c,$);_.enter().append("g").attr("class","arc-container").append("path").attr("d",O).style("fill",function(t){return t.color?t.color:w(T?(t.children?t:t.parent).name:t.name)}).style("stroke","#FFF").on("click",function(t,e){a(t),C.elementClick({data:t,index:e})}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0).style("opacity",.8),C.elementMouseover({data:t,color:d3.select(this).style("fill"),percent:function(t){var e=Math.max(0,Math.min(2*Math.PI,A(t.x)));return(Math.max(0,Math.min(2*Math.PI,A(t.x+t.dx)))-e)/(2*Math.PI)}(t)})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1).style("opacity",1),C.elementMouseout({data:t})}).on("mousemove",function(t,e){C.elementMousemove({data:t})}),_.each(function(t){d3.select(this).select("path").transition().duration(k).attrTween("d",o)}),x&&(_.selectAll("text").remove(),_.append("text").text(function(t){return E(t)}).transition().duration(k).attr("opacity",function(t){return n(t)?1:0}).attr("transform",function(n){var r=this.getBBox().width;if(0===n.depth)return"rotate(0)translate("+r/2*-1+",0)";var i=e(n),o=t(n);return 0===o?"rotate("+i+")translate("+(R(n.y)+5)+",0)":"rotate("+i+")translate("+(R(n.y)+r+5)+",0)rotate("+o+")"})),a(c[c.length-1]),_.exit().transition().duration(k).attr("opacity",0).each("end",function(t){var e=$(t);I[e]=void 0}).remove()}),N.renderEnd("sunburst immediate"),u}var c,l,f,d,h={top:0,right:0,bottom:0,left:0},p=600,v=600,g="count",m={count:function(t){return 1},value:function(t){return t.value||t.size},size:function(t){return t.value||t.size}},y=Math.floor(1e4*Math.random()),b=null,w=r.utils.defaultColor(),x=!1,E=function(t){return"count"===g?t.name+" #"+t.value:t.name+" "+(t.value||t.size)},_=.02,S=function(t,e){return t.name>e.name},$=function(t,e){return void 0!==t.parent?t.name+"-"+t.parent.name+"-"+e:t.name},T=!0,k=500,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),A=d3.scale.linear().range([0,2*Math.PI]),R=d3.scale.sqrt(),M=d3.layout.partition().sort(S),I={},O=d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,A(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,A(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,R(t.y))}).outerRadius(function(t){return Math.max(0,R(t.y+t.dy))}),N=r.utils.renderWatch(C);return u.dispatch=C,u.options=r.utils.optionsFunc.bind(u),u._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return v},set:function(t){v=t}},mode:{get:function(){return g},set:function(t){g=t}},id:{get:function(){return y},set:function(t){y=t}},duration:{get:function(){return k},set:function(t){k=t}},groupColorByParent:{get:function(){return T},set:function(t){T=!!t}},showLabels:{get:function(){return x},set:function(t){x=!!t}},labelFormat:{get:function(){return E},set:function(t){E=t}},labelThreshold:{get:function(){return _},set:function(t){_=t}},sort:{get:function(){return S},set:function(t){S=t}},key:{get:function(){return $},set:function(t){$=t}},margin:{get:function(){return h},set:function(t){h.top=void 0!=t.top?t.top:h.top,h.right=void 0!=t.right?t.right:h.right,h.bottom=void 0!=t.bottom?t.bottom:h.bottom,h.left=void 0!=t.left?t.left:h.left}},color:{get:function(){return w},set:function(t){w=r.utils.getColor(t)}}}),r.utils.initOptions(u),u},r.models.sunburstChart=function(){"use strict";function t(n){return h.reset(),h.models(e),n.each(function(n){var a=d3.select(this);r.utils.initSVG(a);var u=r.utils.availableWidth(o,a,i),c=r.utils.availableHeight(s,a,i);if(t.update=function(){0===f?a.call(t):a.transition().duration(f).call(t)},t.container=a,!n||!n.length)return r.utils.noData(t,a),t;a.selectAll(".nv-noData").remove(),e.width(u).height(c).margin(i),a.call(e)}),h.renderEnd("sunburstChart immediate"),t}var e=r.models.sunburst(),n=r.models.tooltip(),i={top:30,right:20,bottom:20,left:20},o=null,s=null,a=r.utils.defaultColor(),u=!1,c=(Math.round(1e5*Math.random()),null),l=null,f=250,d=d3.dispatch("stateChange","changeState","renderEnd"),h=r.utils.renderWatch(d);return n.duration(0).headerEnabled(!1).valueFormatter(function(t){return t}),e.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.data.name,value:t.data.value||t.data.size,color:t.color,percent:t.percent},u||(delete t.percent,delete t.series.percent),n.data(t).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(t){n.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(t){n()}),t.dispatch=d,t.sunburst=e,t.tooltip=n,t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{noData:{get:function(){return l},set:function(t){l=t}},defaultState:{get:function(){return c},set:function(t){c=t}},showTooltipPercent:{get:function(){return u},set:function(t){u=t}},color:{get:function(){return a},set:function(t){a=t,e.color(a)}},duration:{get:function(){return f},set:function(t){f=t,h.reset(f),e.duration(f)}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left,e.margin(i)}}}),r.utils.inheritOptions(t,e),r.utils.initOptions(t),t},r.version="1.8.6"}()},{d3:96}],478:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,s;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(s=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],s.set(o,i),i+=o.length;return s}},s={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(i)},{}],479:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(i=i+e[r++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}},{}],480:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],481:[function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,i){var o=r,s=i+n;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},{}],482:[function(t,e,n){"use strict";function r(t,e){return t.msg=S[e],e}function i(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(w.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function a(t,e){x._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function u(t,e){t.pending_buf[t.pending++]=e}function c(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function l(t,e,n,r){var i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,w.arraySet(e,t.input,t.next_in,i,n),1===t.state.wrap?t.adler=E(t.adler,e,i,n):2===t.state.wrap&&(t.adler=_(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)}function f(t,e){var n,r,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-J?t.strstart-(t.w_size-J):0,c=t.window,l=t.w_mask,f=t.prev,d=t.strstart+Q,h=c[o+s-1],p=c[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(n=e,c[n+s]===p&&c[n+s-1]===h&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<d);if(r=Q-(d-o),o=d-Q,r>s){if(t.match_start=e,s=r,r>=a)break;h=c[o+s-1],p=c[o+s]}}}while((e=f[e&l])>u&&0!=--i);return s<=t.lookahead?s:t.lookahead}function d(t){var e,n,r,i,o,s=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-J)){w.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=s?r-s:0}while(--n);e=n=s;do{r=t.prev[--e],t.prev[e]=r>=s?r-s:0}while(--n);i+=s}if(0===t.strm.avail_in)break;if(n=l(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=K)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+K-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<K)););}while(t.lookahead<J&&0!==t.strm.avail_in)}function h(t,e){for(var n,r;;){if(t.lookahead<J){if(d(t),t.lookahead<J&&e===$)return ut;if(0===t.lookahead)break}if(n=0,t.lookahead>=K&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+K-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-J&&(t.match_length=f(t,n)),t.match_length>=K)if(r=x._tr_tally(t,t.strstart-t.match_start,t.match_length-K),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=K){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+K-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=x._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(a(t,!1),0===t.strm.avail_out))return ut}return t.insert=t.strstart<K-1?t.strstart:K-1,e===C?(a(t,!0),0===t.strm.avail_out?lt:ft):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?ut:ct}function p(t,e){for(var n,r,i;;){if(t.lookahead<J){if(d(t),t.lookahead<J&&e===$)return ut;if(0===t.lookahead)break}if(n=0,t.lookahead>=K&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+K-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=K-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-J&&(t.match_length=f(t,n),t.match_length<=5&&(t.strategy===D||t.match_length===K&&t.strstart-t.match_start>4096)&&(t.match_length=K-1)),t.prev_length>=K&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-K,r=x._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-K),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+K-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=K-1,t.strstart++,r&&(a(t,!1),0===t.strm.avail_out))return ut}else if(t.match_available){if((r=x._tr_tally(t,0,t.window[t.strstart-1]))&&a(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return ut}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=x._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<K-1?t.strstart:K-1,e===C?(a(t,!0),0===t.strm.avail_out?lt:ft):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?ut:ct}function v(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function g(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=U,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?et:st,t.adler=2===e.wrap?0:1,e.last_flush=$,x._tr_init(e),R):r(t,I)}function m(t){var e=g(t);return e===R&&function(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=b[t.level].max_lazy,t.good_match=b[t.level].good_length,t.nice_match=b[t.level].nice_length,t.max_chain_length=b[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=K-1,t.match_available=0,t.ins_h=0}(t.state),e}function y(t,e,n,i,s,a){if(!t)return I;var u=1;if(e===L&&(e=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16),s<1||s>j||n!==B||i<8||i>15||e<0||e>9||a<0||a>q)return r(t,I);8===i&&(i=9);var c=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new w.Buf16(2*Y),this.dyn_dtree=new w.Buf16(2*(2*G+1)),this.bl_tree=new w.Buf16(2*(2*Z+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new w.Buf16(X+1),this.heap=new w.Buf16(2*W+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new w.Buf16(2*W+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=c,c.strm=t,c.wrap=u,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+K-1)/K),c.window=new w.Buf8(2*c.w_size),c.head=new w.Buf16(c.hash_size),c.prev=new w.Buf16(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new w.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=a,c.method=n,m(t)}var b,w=t("../utils/common"),x=t("./trees"),E=t("./adler32"),_=t("./crc32"),S=t("./messages"),$=0,T=1,k=3,C=4,A=5,R=0,M=1,I=-2,O=-3,N=-5,L=-1,D=1,P=2,V=3,q=4,F=0,U=2,B=8,j=9,H=15,z=8,W=286,G=30,Z=19,Y=2*W+1,X=15,K=3,Q=258,J=Q+K+1,tt=32,et=42,nt=69,rt=73,it=91,ot=103,st=113,at=666,ut=1,ct=2,lt=3,ft=4,dt=3;b=[new v(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(d(t),0===t.lookahead&&e===$)return ut;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,a(t,!1),0===t.strm.avail_out))return ut;if(t.strstart-t.block_start>=t.w_size-J&&(a(t,!1),0===t.strm.avail_out))return ut}return t.insert=0,e===C?(a(t,!0),0===t.strm.avail_out?lt:ft):(t.strstart>t.block_start&&(a(t,!1),t.strm.avail_out),ut)}),new v(4,4,8,4,h),new v(4,5,16,8,h),new v(4,6,32,32,h),new v(4,4,16,16,p),new v(8,16,32,32,p),new v(8,16,128,128,p),new v(8,32,128,256,p),new v(32,128,258,1024,p),new v(32,258,258,4096,p)],n.deflateInit=function(t,e){return y(t,e,B,H,z,F)},n.deflateInit2=y,n.deflateReset=m,n.deflateResetKeep=g,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?I:(t.state.gzhead=e,R):I},n.deflate=function(t,e){var n,l,f,h;if(!t||!t.state||e>A||e<0)return t?r(t,I):I;if(l=t.state,!t.output||!t.input&&0!==t.avail_in||l.status===at&&e!==C)return r(t,0===t.avail_out?N:I);if(l.strm=t,n=l.last_flush,l.last_flush=e,l.status===et)if(2===l.wrap)t.adler=0,u(l,31),u(l,139),u(l,8),l.gzhead?(u(l,(l.gzhead.text?1:0)+(l.gzhead.hcrc?2:0)+(l.gzhead.extra?4:0)+(l.gzhead.name?8:0)+(l.gzhead.comment?16:0)),u(l,255&l.gzhead.time),u(l,l.gzhead.time>>8&255),u(l,l.gzhead.time>>16&255),u(l,l.gzhead.time>>24&255),u(l,9===l.level?2:l.strategy>=P||l.level<2?4:0),u(l,255&l.gzhead.os),l.gzhead.extra&&l.gzhead.extra.length&&(u(l,255&l.gzhead.extra.length),u(l,l.gzhead.extra.length>>8&255)),l.gzhead.hcrc&&(t.adler=_(t.adler,l.pending_buf,l.pending,0)),l.gzindex=0,l.status=nt):(u(l,0),u(l,0),u(l,0),u(l,0),u(l,0),u(l,9===l.level?2:l.strategy>=P||l.level<2?4:0),u(l,dt),l.status=st);else{var p=B+(l.w_bits-8<<4)<<8;p|=(l.strategy>=P||l.level<2?0:l.level<6?1:6===l.level?2:3)<<6,0!==l.strstart&&(p|=tt),p+=31-p%31,l.status=st,c(l,p),0!==l.strstart&&(c(l,t.adler>>>16),c(l,65535&t.adler)),t.adler=1}if(l.status===nt)if(l.gzhead.extra){for(f=l.pending;l.gzindex<(65535&l.gzhead.extra.length)&&(l.pending!==l.pending_buf_size||(l.gzhead.hcrc&&l.pending>f&&(t.adler=_(t.adler,l.pending_buf,l.pending-f,f)),s(t),f=l.pending,l.pending!==l.pending_buf_size));)u(l,255&l.gzhead.extra[l.gzindex]),l.gzindex++;l.gzhead.hcrc&&l.pending>f&&(t.adler=_(t.adler,l.pending_buf,l.pending-f,f)),l.gzindex===l.gzhead.extra.length&&(l.gzindex=0,l.status=rt)}else l.status=rt;if(l.status===rt)if(l.gzhead.name){f=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>f&&(t.adler=_(t.adler,l.pending_buf,l.pending-f,f)),s(t),f=l.pending,l.pending===l.pending_buf_size)){h=1;break}h=l.gzindex<l.gzhead.name.length?255&l.gzhead.name.charCodeAt(l.gzindex++):0,u(l,h)}while(0!==h);l.gzhead.hcrc&&l.pending>f&&(t.adler=_(t.adler,l.pending_buf,l.pending-f,f)),0===h&&(l.gzindex=0,l.status=it)}else l.status=it;if(l.status===it)if(l.gzhead.comment){f=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>f&&(t.adler=_(t.adler,l.pending_buf,l.pending-f,f)),s(t),f=l.pending,l.pending===l.pending_buf_size)){h=1;break}h=l.gzindex<l.gzhead.comment.length?255&l.gzhead.comment.charCodeAt(l.gzindex++):0,u(l,h)}while(0!==h);l.gzhead.hcrc&&l.pending>f&&(t.adler=_(t.adler,l.pending_buf,l.pending-f,f)),0===h&&(l.status=ot)}else l.status=ot;if(l.status===ot&&(l.gzhead.hcrc?(l.pending+2>l.pending_buf_size&&s(t),l.pending+2<=l.pending_buf_size&&(u(l,255&t.adler),u(l,t.adler>>8&255),t.adler=0,l.status=st)):l.status=st),0!==l.pending){if(s(t),0===t.avail_out)return l.last_flush=-1,R}else if(0===t.avail_in&&i(e)<=i(n)&&e!==C)return r(t,N);if(l.status===at&&0!==t.avail_in)return r(t,N);if(0!==t.avail_in||0!==l.lookahead||e!==$&&l.status!==at){var v=l.strategy===P?function(t,e){for(var n;;){if(0===t.lookahead&&(d(t),0===t.lookahead)){if(e===$)return ut;break}if(t.match_length=0,n=x._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(a(t,!1),0===t.strm.avail_out))return ut}return t.insert=0,e===C?(a(t,!0),0===t.strm.avail_out?lt:ft):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?ut:ct}(l,e):l.strategy===V?function(t,e){for(var n,r,i,o,s=t.window;;){if(t.lookahead<=Q){if(d(t),t.lookahead<=Q&&e===$)return ut;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=K&&t.strstart>0&&(i=t.strstart-1,(r=s[i])===s[++i]&&r===s[++i]&&r===s[++i])){o=t.strstart+Q;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);t.match_length=Q-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=K?(n=x._tr_tally(t,1,t.match_length-K),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=x._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(a(t,!1),0===t.strm.avail_out))return ut}return t.insert=0,e===C?(a(t,!0),0===t.strm.avail_out?lt:ft):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?ut:ct}(l,e):b[l.level].func(l,e);if(v!==lt&&v!==ft||(l.status=at),v===ut||v===lt)return 0===t.avail_out&&(l.last_flush=-1),R;if(v===ct&&(e===T?x._tr_align(l):e!==A&&(x._tr_stored_block(l,0,0,!1),e===k&&(o(l.head),0===l.lookahead&&(l.strstart=0,l.block_start=0,l.insert=0))),s(t),0===t.avail_out))return l.last_flush=-1,R}return e!==C?R:l.wrap<=0?M:(2===l.wrap?(u(l,255&t.adler),u(l,t.adler>>8&255),u(l,t.adler>>16&255),u(l,t.adler>>24&255),u(l,255&t.total_in),u(l,t.total_in>>8&255),u(l,t.total_in>>16&255),u(l,t.total_in>>24&255)):(c(l,t.adler>>>16),c(l,65535&t.adler)),s(t),l.wrap>0&&(l.wrap=-l.wrap),0!==l.pending?R:M)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==et&&e!==nt&&e!==rt&&e!==it&&e!==ot&&e!==st&&e!==at?r(t,I):(t.state=null,e===st?r(t,O):R):I},n.deflateSetDictionary=function(t,e){var n,r,i,s,a,u,c,l,f=e.length;if(!t||!t.state)return I;if(n=t.state,2===(s=n.wrap)||1===s&&n.status!==et||n.lookahead)return I;for(1===s&&(t.adler=E(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new w.Buf8(n.w_size),w.arraySet(l,e,f-n.w_size,n.w_size,0),e=l,f=n.w_size),a=t.avail_in,u=t.next_in,c=t.input,t.avail_in=f,t.next_in=0,t.input=e,d(n);n.lookahead>=K;){r=n.strstart,i=n.lookahead-(K-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+K-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=K-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=K-1,n.match_available=0,t.next_in=u,t.input=c,t.avail_in=a,n.wrap=s,R},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":478,"./adler32":479,"./crc32":481,"./messages":486,"./trees":487}],483:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r,i,o,s,a,u,c,l,f,d,h,p,v,g,m,y,b,w,x,E,_,S,$,T;n=t.state,r=t.next_in,$=t.input,i=r+(t.avail_in-5),o=t.next_out,T=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,f=n.wnext,d=n.window,h=n.hold,p=n.bits,v=n.lencode,g=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{p<15&&(h+=$[r++]<<p,p+=8,h+=$[r++]<<p,p+=8),b=v[h&m];e:for(;;){if(w=b>>>24,h>>>=w,p-=w,0===(w=b>>>16&255))T[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=v[(65535&b)+(h&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}x=65535&b,(w&=15)&&(p<w&&(h+=$[r++]<<p,p+=8),x+=h&(1<<w)-1,h>>>=w,p-=w),p<15&&(h+=$[r++]<<p,p+=8,h+=$[r++]<<p,p+=8),b=g[h&y];n:for(;;){if(w=b>>>24,h>>>=w,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=g[(65535&b)+(h&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(E=65535&b,w&=15,p<w&&(h+=$[r++]<<p,(p+=8)<w&&(h+=$[r++]<<p,p+=8)),(E+=h&(1<<w)-1)>u){t.msg="invalid distance too far back",n.mode=30;break t}if(h>>>=w,p-=w,w=o-s,E>w){if((w=E-w)>l&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(_=0,S=d,0===f){if(_+=c-w,w<x){x-=w;do{T[o++]=d[_++]}while(--w);_=o-E,S=T}}else if(f<w){if(_+=c+f-w,(w-=f)<x){x-=w;do{T[o++]=d[_++]}while(--w);if(_=0,f<x){x-=w=f;do{T[o++]=d[_++]}while(--w);_=o-E,S=T}}}else if(_+=f-w,w<x){x-=w;do{T[o++]=d[_++]}while(--w);_=o-E,S=T}for(;x>2;)T[o++]=S[_++],T[o++]=S[_++],T[o++]=S[_++],x-=3;x&&(T[o++]=S[_++],x>1&&(T[o++]=S[_++]))}else{_=o-E;do{T[o++]=T[_++],T[o++]=T[_++],T[o++]=T[_++],x-=3}while(x>2);x&&(T[o++]=T[_++],x>1&&(T[o++]=T[_++]))}break}}break}}while(r<i&&o<a);r-=x=p>>3,h&=(1<<(p-=x<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=h,n.bits=p}},{}],484:[function(t,e,n){"use strict";function r(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=M,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new d.Buf32(ct),e.distcode=e.distdyn=new d.Buf32(lt),e.sane=1,e.back=-1,_):T}function o(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,i(t)):T}function s(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?T:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,o(t))):T}function a(t,e){var n,r;return t?(r=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=r,r.window=null,(n=s(t,e))!==_&&(t.state=null),n):T}function u(t){if(dt){var e;for(l=new d.Buf32(512),f=new d.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(g(y,t.lens,0,288,l,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;g(b,t.lens,0,32,f,0,t.work,{bits:5}),dt=!1}t.lencode=l,t.lenbits=9,t.distcode=f,t.distbits=5}function c(t,e,n,r){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new d.Buf8(o.wsize)),r>=o.wsize?(d.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),d.arraySet(o.window,e,n-r,i,o.wnext),(r-=i)?(d.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}var l,f,d=t("../utils/common"),h=t("./adler32"),p=t("./crc32"),v=t("./inffast"),g=t("./inftrees"),m=0,y=1,b=2,w=4,x=5,E=6,_=0,S=1,$=2,T=-2,k=-3,C=-4,A=-5,R=8,M=1,I=2,O=3,N=4,L=5,D=6,P=7,V=8,q=9,F=10,U=11,B=12,j=13,H=14,z=15,W=16,G=17,Z=18,Y=19,X=20,K=21,Q=22,J=23,tt=24,et=25,nt=26,rt=27,it=28,ot=29,st=30,at=31,ut=32,ct=852,lt=592,ft=15,dt=!0;n.inflateReset=o,n.inflateReset2=s,n.inflateResetKeep=i,n.inflateInit=function(t){return a(t,ft)},n.inflateInit2=a,n.inflate=function(t,e){var n,i,o,s,a,l,f,ct,lt,ft,dt,ht,pt,vt,gt,mt,yt,bt,wt,xt,Et,_t,St,$t,Tt=0,kt=new d.Buf8(4),Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return T;(n=t.state).mode===B&&(n.mode=j),a=t.next_out,o=t.output,f=t.avail_out,s=t.next_in,i=t.input,l=t.avail_in,ct=n.hold,lt=n.bits,ft=l,dt=f,_t=_;t:for(;;)switch(n.mode){case M:if(0===n.wrap){n.mode=j;break}for(;lt<16;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}if(2&n.wrap&&35615===ct){n.check=0,kt[0]=255&ct,kt[1]=ct>>>8&255,n.check=p(n.check,kt,2,0),ct=0,lt=0,n.mode=I;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&ct)<<8)+(ct>>8))%31){t.msg="incorrect header check",n.mode=st;break}if((15&ct)!==R){t.msg="unknown compression method",n.mode=st;break}if(ct>>>=4,lt-=4,Et=8+(15&ct),0===n.wbits)n.wbits=Et;else if(Et>n.wbits){t.msg="invalid window size",n.mode=st;break}n.dmax=1<<Et,t.adler=n.check=1,n.mode=512&ct?F:B,ct=0,lt=0;break;case I:for(;lt<16;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}if(n.flags=ct,(255&n.flags)!==R){t.msg="unknown compression method",n.mode=st;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=st;break}n.head&&(n.head.text=ct>>8&1),512&n.flags&&(kt[0]=255&ct,kt[1]=ct>>>8&255,n.check=p(n.check,kt,2,0)),ct=0,lt=0,n.mode=O;case O:for(;lt<32;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}n.head&&(n.head.time=ct),512&n.flags&&(kt[0]=255&ct,kt[1]=ct>>>8&255,kt[2]=ct>>>16&255,kt[3]=ct>>>24&255,n.check=p(n.check,kt,4,0)),ct=0,lt=0,n.mode=N;case N:for(;lt<16;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}n.head&&(n.head.xflags=255&ct,n.head.os=ct>>8),512&n.flags&&(kt[0]=255&ct,kt[1]=ct>>>8&255,n.check=p(n.check,kt,2,0)),ct=0,lt=0,n.mode=L;case L:if(1024&n.flags){for(;lt<16;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}n.length=ct,n.head&&(n.head.extra_len=ct),512&n.flags&&(kt[0]=255&ct,kt[1]=ct>>>8&255,n.check=p(n.check,kt,2,0)),ct=0,lt=0}else n.head&&(n.head.extra=null);n.mode=D;case D:if(1024&n.flags&&((ht=n.length)>l&&(ht=l),ht&&(n.head&&(Et=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),d.arraySet(n.head.extra,i,s,ht,Et)),512&n.flags&&(n.check=p(n.check,i,ht,s)),l-=ht,s+=ht,n.length-=ht),n.length))break t;n.length=0,n.mode=P;case P:if(2048&n.flags){if(0===l)break t;ht=0;do{Et=i[s+ht++],n.head&&Et&&n.length<65536&&(n.head.name+=String.fromCharCode(Et))}while(Et&&ht<l);if(512&n.flags&&(n.check=p(n.check,i,ht,s)),l-=ht,s+=ht,Et)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=V;case V:if(4096&n.flags){if(0===l)break t;ht=0;do{Et=i[s+ht++],n.head&&Et&&n.length<65536&&(n.head.comment+=String.fromCharCode(Et))}while(Et&&ht<l);if(512&n.flags&&(n.check=p(n.check,i,ht,s)),l-=ht,s+=ht,Et)break t}else n.head&&(n.head.comment=null);n.mode=q;case q:if(512&n.flags){for(;lt<16;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}if(ct!==(65535&n.check)){t.msg="header crc mismatch",n.mode=st;break}ct=0,lt=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=B;break;case F:for(;lt<32;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}t.adler=n.check=r(ct),ct=0,lt=0,n.mode=U;case U:if(0===n.havedict)return t.next_out=a,t.avail_out=f,t.next_in=s,t.avail_in=l,n.hold=ct,n.bits=lt,$;t.adler=n.check=1,n.mode=B;case B:if(e===x||e===E)break t;case j:if(n.last){ct>>>=7&lt,lt-=7&lt,n.mode=rt;break}for(;lt<3;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}switch(n.last=1&ct,ct>>>=1,lt-=1,3&ct){case 0:n.mode=H;break;case 1:if(u(n),n.mode=X,e===E){ct>>>=2,lt-=2;break t}break;case 2:n.mode=G;break;case 3:t.msg="invalid block type",n.mode=st}ct>>>=2,lt-=2;break;case H:for(ct>>>=7&lt,lt-=7&lt;lt<32;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}if((65535&ct)!=(ct>>>16^65535)){t.msg="invalid stored block lengths",n.mode=st;break}if(n.length=65535&ct,ct=0,lt=0,n.mode=z,e===E)break t;case z:n.mode=W;case W:if(ht=n.length){if(ht>l&&(ht=l),ht>f&&(ht=f),0===ht)break t;d.arraySet(o,i,s,ht,a),l-=ht,s+=ht,f-=ht,a+=ht,n.length-=ht;break}n.mode=B;break;case G:for(;lt<14;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}if(n.nlen=257+(31&ct),ct>>>=5,lt-=5,n.ndist=1+(31&ct),ct>>>=5,lt-=5,n.ncode=4+(15&ct),ct>>>=4,lt-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=st;break}n.have=0,n.mode=Z;case Z:for(;n.have<n.ncode;){for(;lt<3;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}n.lens[Ct[n.have++]]=7&ct,ct>>>=3,lt-=3}for(;n.have<19;)n.lens[Ct[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,St={bits:n.lenbits},_t=g(m,n.lens,0,19,n.lencode,0,n.work,St),n.lenbits=St.bits,_t){t.msg="invalid code lengths set",n.mode=st;break}n.have=0,n.mode=Y;case Y:for(;n.have<n.nlen+n.ndist;){for(;Tt=n.lencode[ct&(1<<n.lenbits)-1],gt=Tt>>>24,mt=Tt>>>16&255,yt=65535&Tt,!(gt<=lt);){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}if(yt<16)ct>>>=gt,lt-=gt,n.lens[n.have++]=yt;else{if(16===yt){for($t=gt+2;lt<$t;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}if(ct>>>=gt,lt-=gt,0===n.have){t.msg="invalid bit length repeat",n.mode=st;break}Et=n.lens[n.have-1],ht=3+(3&ct),ct>>>=2,lt-=2}else if(17===yt){for($t=gt+3;lt<$t;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}lt-=gt,Et=0,ht=3+(7&(ct>>>=gt)),ct>>>=3,lt-=3}else{for($t=gt+7;lt<$t;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}lt-=gt,Et=0,ht=11+(127&(ct>>>=gt)),ct>>>=7,lt-=7}if(n.have+ht>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=st;break}for(;ht--;)n.lens[n.have++]=Et}}if(n.mode===st)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=st;break}if(n.lenbits=9,St={bits:n.lenbits},_t=g(y,n.lens,0,n.nlen,n.lencode,0,n.work,St),n.lenbits=St.bits,_t){t.msg="invalid literal/lengths set",n.mode=st;break}if(n.distbits=6,n.distcode=n.distdyn,St={bits:n.distbits},_t=g(b,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,St),n.distbits=St.bits,_t){t.msg="invalid distances set",n.mode=st;break}if(n.mode=X,e===E)break t;case X:n.mode=K;case K:if(l>=6&&f>=258){t.next_out=a,t.avail_out=f,t.next_in=s,t.avail_in=l,n.hold=ct,n.bits=lt,v(t,dt),a=t.next_out,o=t.output,f=t.avail_out,s=t.next_in,i=t.input,l=t.avail_in,ct=n.hold,lt=n.bits,n.mode===B&&(n.back=-1);break}for(n.back=0;Tt=n.lencode[ct&(1<<n.lenbits)-1],gt=Tt>>>24,mt=Tt>>>16&255,yt=65535&Tt,!(gt<=lt);){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}if(mt&&0==(240&mt)){for(bt=gt,wt=mt,xt=yt;Tt=n.lencode[xt+((ct&(1<<bt+wt)-1)>>bt)],gt=Tt>>>24,mt=Tt>>>16&255,yt=65535&Tt,!(bt+gt<=lt);){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}ct>>>=bt,lt-=bt,n.back+=bt}if(ct>>>=gt,lt-=gt,n.back+=gt,n.length=yt,0===mt){n.mode=nt;break}if(32&mt){n.back=-1,n.mode=B;break}if(64&mt){t.msg="invalid literal/length code",n.mode=st;break}n.extra=15&mt,n.mode=Q;case Q:if(n.extra){for($t=n.extra;lt<$t;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}n.length+=ct&(1<<n.extra)-1,ct>>>=n.extra,lt-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=J;case J:for(;Tt=n.distcode[ct&(1<<n.distbits)-1],gt=Tt>>>24,mt=Tt>>>16&255,yt=65535&Tt,!(gt<=lt);){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}if(0==(240&mt)){for(bt=gt,wt=mt,xt=yt;Tt=n.distcode[xt+((ct&(1<<bt+wt)-1)>>bt)],gt=Tt>>>24,mt=Tt>>>16&255,yt=65535&Tt,!(bt+gt<=lt);){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}ct>>>=bt,lt-=bt,n.back+=bt}if(ct>>>=gt,lt-=gt,n.back+=gt,64&mt){t.msg="invalid distance code",n.mode=st;break}n.offset=yt,n.extra=15&mt,n.mode=tt;case tt:if(n.extra){for($t=n.extra;lt<$t;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}n.offset+=ct&(1<<n.extra)-1,ct>>>=n.extra,lt-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=st;break}n.mode=et;case et:if(0===f)break t;if(ht=dt-f,n.offset>ht){if((ht=n.offset-ht)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=st;break}ht>n.wnext?(ht-=n.wnext,pt=n.wsize-ht):pt=n.wnext-ht,ht>n.length&&(ht=n.length),vt=n.window}else vt=o,pt=a-n.offset,ht=n.length;ht>f&&(ht=f),f-=ht,n.length-=ht;do{o[a++]=vt[pt++]}while(--ht);0===n.length&&(n.mode=K);break;case nt:if(0===f)break t;o[a++]=n.length,f--,n.mode=K;break;case rt:if(n.wrap){for(;lt<32;){if(0===l)break t;l--,ct|=i[s++]<<lt,lt+=8}if(dt-=f,t.total_out+=dt,n.total+=dt,dt&&(t.adler=n.check=n.flags?p(n.check,o,dt,a-dt):h(n.check,o,dt,a-dt)),dt=f,(n.flags?ct:r(ct))!==n.check){t.msg="incorrect data check",n.mode=st;break}ct=0,lt=0}n.mode=it;case it:if(n.wrap&&n.flags){for(;lt<32;){if(0===l)break t;l--,ct+=i[s++]<<lt,lt+=8}if(ct!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=st;break}ct=0,lt=0}n.mode=ot;case ot:_t=S;break t;case st:_t=k;break t;case at:return C;case ut:default:return T}return t.next_out=a,t.avail_out=f,t.next_in=s,t.avail_in=l,n.hold=ct,n.bits=lt,(n.wsize||dt!==t.avail_out&&n.mode<st&&(n.mode<rt||e!==w))&&c(t,t.output,t.next_out,dt-t.avail_out)?(n.mode=at,C):(ft-=t.avail_in,dt-=t.avail_out,t.total_in+=ft,t.total_out+=dt,n.total+=dt,n.wrap&&dt&&(t.adler=n.check=n.flags?p(n.check,o,dt,t.next_out-dt):h(n.check,o,dt,t.next_out-dt)),t.data_type=n.bits+(n.last?64:0)+(n.mode===B?128:0)+(n.mode===X||n.mode===z?256:0),(0===ft&&0===dt||e===w)&&_t===_&&(_t=A),_t)},n.inflateEnd=function(t){if(!t||!t.state)return T;var e=t.state;return e.window&&(e.window=null),t.state=null,_},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?T:(n.head=e,e.done=!1,_):T},n.inflateSetDictionary=function(t,e){var n,r,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&n.mode!==U?T:n.mode===U&&(r=1,(r=h(r,e,i,0))!==n.check)?k:c(t,e,i,i)?(n.mode=at,C):(n.havedict=1,_):T},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":478,"./adler32":479,"./crc32":481,"./inffast":483,"./inftrees":485}],485:[function(t,e,n){"use strict";var r=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,u,c,l,f,d){var h,p,v,g,m,y,b,w,x,E=d.bits,_=0,S=0,$=0,T=0,k=0,C=0,A=0,R=0,M=0,I=0,O=null,N=0,L=new r.Buf16(16),D=new r.Buf16(16),P=null,V=0;for(_=0;_<=15;_++)L[_]=0;for(S=0;S<u;S++)L[e[n+S]]++;for(k=E,T=15;T>=1&&0===L[T];T--);if(k>T&&(k=T),0===T)return c[l++]=20971520,c[l++]=20971520,d.bits=1,0;for($=1;$<T&&0===L[$];$++);for(k<$&&(k=$),R=1,_=1;_<=15;_++)if(R<<=1,(R-=L[_])<0)return-1;if(R>0&&(0===t||1!==T))return-1;for(D[1]=0,_=1;_<15;_++)D[_+1]=D[_]+L[_];for(S=0;S<u;S++)0!==e[n+S]&&(f[D[e[n+S]]++]=S);if(0===t?(O=P=f,y=19):1===t?(O=i,N-=257,P=o,V-=257,y=256):(O=s,P=a,y=-1),I=0,S=0,_=$,m=l,C=k,A=0,v=-1,M=1<<k,g=M-1,1===t&&M>852||2===t&&M>592)return 1;for(;;){b=_-A,f[S]<y?(w=0,x=f[S]):f[S]>y?(w=P[V+f[S]],x=O[N+f[S]]):(w=96,x=0),h=1<<_-A,$=p=1<<C;do{c[m+(I>>A)+(p-=h)]=b<<24|w<<16|x|0}while(0!==p);for(h=1<<_-1;I&h;)h>>=1;if(0!==h?(I&=h-1,I+=h):I=0,S++,0==--L[_]){if(_===T)break;_=e[n+f[S]]}if(_>k&&(I&g)!==v){for(0===A&&(A=k),m+=$,R=1<<(C=_-A);C+A<T&&!((R-=L[C+A])<=0);)C++,R<<=1;if(M+=1<<C,1===t&&M>852||2===t&&M>592)return 1;c[v=I&g]=k<<24|C<<16|m-l|0}}return 0!==I&&(c[m+I]=_-A<<24|64<<16|0),d.bits=k,0}},{"../utils/common":478}],486:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],487:[function(t,e,n){"use strict";function r(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function s(t){return t<256?Z[t]:Z[256+(t>>>7)]}function a(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function u(t,e,n){t.bi_valid>D-n?(t.bi_buf|=e<<t.bi_valid&65535,a(t,t.bi_buf),t.bi_buf=e>>D-t.bi_valid,t.bi_valid+=n-D):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function c(t,e,n){u(t,n[2*e],n[2*e+1])}function l(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function f(t,e,n){var r,i,o=new Array(L+1),s=0;for(r=1;r<=L;r++)o[r]=s=s+n[r-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=l(o[a]++,a))}}function d(t){var e;for(e=0;e<M;e++)t.dyn_ltree[2*e]=0;for(e=0;e<I;e++)t.dyn_dtree[2*e]=0;for(e=0;e<O;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*V]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function h(t){t.bi_valid>8?a(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function p(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function v(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&p(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!p(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function g(t,e,n){var r,i,o,a,l=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===r?c(t,i,e):(c(t,(o=Y[i])+R+1,e),0!==(a=B[o])&&u(t,i-=X[o],a),c(t,o=s(--r),n),0!==(a=j[o])&&u(t,r-=K[o],a))}while(l<t.last_lit);c(t,V,e)}function m(t,e){var n,r,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=N,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)v(t,o,n);i=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],v(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,v(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,s,a,u=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,p=e.stat_desc.max_length,v=0;for(o=0;o<=L;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<N;n++)(o=u[2*u[2*(r=t.heap[n])+1]+1]+1)>p&&(o=p,v++),u[2*r+1]=o,r>c||(t.bl_count[o]++,s=0,r>=h&&(s=d[r-h]),a=u[2*r],t.opt_len+=a*(o+s),f&&(t.static_len+=a*(l[2*r+1]+s)));if(0!==v){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,v-=2}while(v>0);for(o=p;0!==o;o--)for(r=t.bl_count[o];0!==r;)(i=t.heap[--n])>c||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(t,e),f(o,c,t.bl_count)}function y(t,e,n){var r,i,o=-1,s=e[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=e[2*(r+1)+1],++a<u&&i===s||(a<c?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*q]++):a<=10?t.bl_tree[2*F]++:t.bl_tree[2*U]++,a=0,o=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4))}function b(t,e,n){var r,i,o=-1,s=e[1],a=0,l=7,f=4;for(0===s&&(l=138,f=3),r=0;r<=n;r++)if(i=s,s=e[2*(r+1)+1],!(++a<l&&i===s)){if(a<f)do{c(t,i,t.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(c(t,i,t.bl_tree),a--),c(t,q,t.bl_tree),u(t,a-3,2)):a<=10?(c(t,F,t.bl_tree),u(t,a-3,3)):(c(t,U,t.bl_tree),u(t,a-11,7));a=0,o=i,0===s?(l=138,f=3):i===s?(l=6,f=3):(l=7,f=4)}}function w(t,e,n,r){u(t,(T<<1)+(r?1:0),3),function(t,e,n,r){h(t),r&&(a(t,n),a(t,~n)),x.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}var x=t("../utils/common"),E=4,_=0,S=1,$=2,T=0,k=1,C=2,A=29,R=256,M=R+1+A,I=30,O=19,N=2*M+1,L=15,D=16,P=7,V=256,q=16,F=17,U=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(M+2));r(W);var G=new Array(2*I);r(G);var Z=new Array(512);r(Z);var Y=new Array(256);r(Y);var X=new Array(A);r(X);var K=new Array(I);r(K);var Q,J,tt,et=!1;n._tr_init=function(t){et||(function(){var t,e,n,r,o,s=new Array(L+1);for(n=0,r=0;r<A-1;r++)for(X[r]=n,t=0;t<1<<B[r];t++)Y[n++]=r;for(Y[n-1]=r,o=0,r=0;r<16;r++)for(K[r]=o,t=0;t<1<<j[r];t++)Z[o++]=r;for(o>>=7;r<I;r++)for(K[r]=o<<7,t=0;t<1<<j[r]-7;t++)Z[256+o++]=r;for(e=0;e<=L;e++)s[e]=0;for(t=0;t<=143;)W[2*t+1]=8,t++,s[8]++;for(;t<=255;)W[2*t+1]=9,t++,s[9]++;for(;t<=279;)W[2*t+1]=7,t++,s[7]++;for(;t<=287;)W[2*t+1]=8,t++,s[8]++;for(f(W,M+1,s),t=0;t<I;t++)G[2*t+1]=5,G[2*t]=l(t,5);Q=new i(W,B,R+1,M,L),J=new i(G,j,0,I,L),tt=new i(new Array(0),H,0,O,P)}(),et=!0),t.l_desc=new o(t.dyn_ltree,Q),t.d_desc=new o(t.dyn_dtree,J),t.bl_desc=new o(t.bl_tree,tt),t.bi_buf=0,t.bi_valid=0,d(t)},n._tr_stored_block=w,n._tr_flush_block=function(t,e,n,r){var i,o,s=0;t.level>0?(t.strm.data_type===$&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return _;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return S;for(e=32;e<R;e++)if(0!==t.dyn_ltree[2*e])return S;return _}(t)),m(t,t.l_desc),m(t,t.d_desc),s=function(t){var e;for(y(t,t.dyn_ltree,t.l_desc.max_code),y(t,t.dyn_dtree,t.d_desc.max_code),m(t,t.bl_desc),e=O-1;e>=3&&0===t.bl_tree[2*z[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?w(t,e,n,r):t.strategy===E||o===i?(u(t,(k<<1)+(r?1:0),3),g(t,W,G)):(u(t,(C<<1)+(r?1:0),3),function(t,e,n,r){var i;for(u(t,e-257,5),u(t,n-1,5),u(t,r-4,4),i=0;i<r;i++)u(t,t.bl_tree[2*z[i]+1],3);b(t,t.dyn_ltree,e-1),b(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),g(t,t.dyn_ltree,t.dyn_dtree)),d(t),r&&h(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(Y[n]+R+1)]++,t.dyn_dtree[2*s(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){u(t,k<<1,3),c(t,V,W),function(t){16===t.bi_valid?(a(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":478}],488:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],489:[function(t,e,n){(function(t){"use strict";!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick(function(){e.apply(null,o)})}}:e.exports=t.nextTick}).call(this,t("_process"))},{_process:490}],490:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function s(){v&&h&&(v=!1,h.length?p=h.concat(p):g=-1,p.length&&a())}function a(){if(!v){var t=o(s);v=!0;for(var e=p.length;e;){for(h=p,p=[];++g<e;)h&&h[g].run();g=-1,e=p.length}h=null,v=!1,function(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var h,p=[],v=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||v||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],491:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":492}],492:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);c.call(this,t),l.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(t){t.end()}var s=t("process-nextick-args"),a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=r;var u=t("core-util-is");u.inherits=t("inherits");var c=t("./_stream_readable"),l=t("./_stream_writable");u.inherits(r,c);for(var f=a(l.prototype),d=0;d<f.length;d++){var h=f[d];r.prototype[h]||(r.prototype[h]=l.prototype[h])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),r.prototype._destroy=function(t,e){this.push(null),this.end(),s(e,t)}},{"./_stream_readable":494,"./_stream_writable":496,"core-util-is":95,inherits:472,"process-nextick-args":489}],493:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);i.call(this,t)}e.exports=r;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":495,"core-util-is":95,inherits:472}],494:[function(t,e,n){(function(n,r){"use strict";function i(e,n){x=x||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,n instanceof x&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new M,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(R||(R=t("string_decoder/").StringDecoder),this.decoder=new R(e.encoding),this.encoding=e.encoding)}function o(e){if(x=x||t("./_stream_duplex"),!(this instanceof o))return new o(e);this._readableState=new i(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),S.call(this)}function s(t,e,n,r,i){var o=t._readableState;if(null===e)o.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,c(t)}(t,o);else{var s;i||(s=function(t,e){var n;(function(t){return $.isBuffer(t)||t instanceof T})(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(o,e)),s?t.emit("error",s):o.objectMode||e&&e.length>0?("string"==typeof e||o.objectMode||Object.getPrototypeOf(e)===$.prototype||(e=function(t){return $.from(t)}(e)),r?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):a(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(e=o.decoder.write(e),o.objectMode||0!==e.length?a(t,o,e,!1):f(t,o)):a(t,o,e,!1))):r||(o.reading=!1)}return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(o)}function a(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&c(t)),f(t,e)}function u(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=N?t=N:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function c(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(A("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?w(l,t):l(t))}function l(t){A("emit readable"),t.emit("readable"),v(t)}function f(t,e){e.readingMore||(e.readingMore=!0,w(d,t,e))}function d(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(A("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function h(t){A("readable nexttick read 0"),t.read(0)}function p(t,e){e.reading||(A("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),v(t),e.flowing&&!e.reading&&t.read(0)}function v(t){var e=t._readableState;for(A("flow",e.flowing);e.flowing&&null!==t.read(););}function g(t,e){if(0===e.length)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=$.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n}function m(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,w(y,e,t))}function y(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function b(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var w=t("process-nextick-args");e.exports=o;var x,E=t("isarray");o.ReadableState=i;t("events").EventEmitter;var _=function(t,e){return t.listeners(e).length},S=t("./internal/streams/stream"),$=t("safe-buffer").Buffer,T=r.Uint8Array||function(){},k=t("core-util-is");k.inherits=t("inherits");var C=t("util"),A=void 0;A=C&&C.debuglog?C.debuglog("stream"):function(){};var R,M=t("./internal/streams/BufferList"),I=t("./internal/streams/destroy");k.inherits(o,S);var O=["error","close","destroy","pause","resume"];Object.defineProperty(o.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),o.prototype.destroy=I.destroy,o.prototype._undestroy=I.undestroy,o.prototype._destroy=function(t,e){this.push(null),e(t)},o.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=$.from(t,e),e=""),n=!0),s(this,t,e,!1,n)},o.prototype.unshift=function(t){return s(this,t,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(e){return R||(R=t("string_decoder/").StringDecoder),this._readableState.decoder=new R(e),this._readableState.encoding=e,this};var N=8388608;o.prototype.read=function(t){A("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return A("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?m(this):c(this),null;if(0===(t=u(t,e))&&e.ended)return 0===e.length&&m(this),null;var r=e.needReadable;A("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&A("length less than watermark",r=!0),e.ended||e.reading?A("reading or ended",r=!1):r&&(A("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=u(n,e)));var i;return null===(i=t>0?g(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&m(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(t,e){function r(e,n){A("onunpipe"),e===l&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,A("cleanup"),t.removeListener("close",a),t.removeListener("finish",u),t.removeListener("drain",h),t.removeListener("error",s),t.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",c),l.removeListener("data",o),p=!0,!f.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function i(){A("onend"),t.end()}function o(e){A("ondata"),g=!1;!1!==t.write(e)||g||((1===f.pipesCount&&f.pipes===t||f.pipesCount>1&&-1!==b(f.pipes,t))&&!p&&(A("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,g=!0),l.pause())}function s(e){A("onerror",e),c(),t.removeListener("error",s),0===_(t,"error")&&t.emit("error",e)}function a(){t.removeListener("finish",u),c()}function u(){A("onfinish"),t.removeListener("close",a),c()}function c(){A("unpipe"),l.unpipe(t)}var l=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,A("pipe count=%d opts=%j",f.pipesCount,e);var d=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?i:c;f.endEmitted?w(d):l.once("end",d),t.on("unpipe",r);var h=function(t){return function(){var e=t._readableState;A("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&_(t,"data")&&(e.flowing=!0,v(t))}}(l);t.on("drain",h);var p=!1,g=!1;return l.on("data",o),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?E(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",s),t.once("close",a),t.once("finish",u),t.emit("pipe",l),f.flowing||(A("pipe resume"),l.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=b(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},o.prototype.on=function(t,e){var n=S.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&c(this):w(h,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(A("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,w(p,t,e))}(this,t)),this},o.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(A("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(A("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){r.push(i)||(n=!0,t.pause())}});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<O.length;o++)t.on(O[o],r.emit.bind(r,O[o]));return r._read=function(e){A("wrapped _read",e),n&&(n=!1,t.resume())},r},o._fromList=g}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":492,"./internal/streams/BufferList":497,"./internal/streams/destroy":498,"./internal/streams/stream":499,_process:490,"core-util-is":95,events:469,inherits:472,isarray:474,"process-nextick-args":489,"safe-buffer":504,"string_decoder/":506,util:91}],495:[function(t,e,n){"use strict";function r(t){this.afterTransform=function(e,n){return function(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n);i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(t){if(!(this instanceof i))return new i(t);s.call(this,t),this._transformState=new r(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,n){o(e,t,n)}):o(e)})}function o(t,e,n){if(e)return t.emit("error",e);null!==n&&void 0!==n&&t.push(n);var r=t._writableState,i=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}e.exports=i;var s=t("./_stream_duplex"),a=t("core-util-is");a.inherits=t("inherits"),a.inherits(i,s),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},i.prototype._destroy=function(t,e){var n=this;s.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},{"./_stream_duplex":492,"core-util-is":95,inherits:472}],496:[function(t,e,n){(function(n,r){"use strict";function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}function o(){}function s(e,n){g=g||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,n instanceof g&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(v(i,r),v(p,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),p(t,e))}(t,n,r,e,i);else{var o=d(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||f(t,n),r?m(l,t,n,o,i):l(t,n,o,i)}}(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function a(e){if(g=g||t("./_stream_duplex"),!(S.call(a,this)||this instanceof g))return new a(e);this._writableState=new s(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),w.call(this)}function u(t,e,n,r,i,o){if(!n){var s=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=x.from(e,n)),e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else c(t,e,!1,a,r,i,o);return u}function c(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function l(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),p(t,e)}function f(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=new Array(r),s=e.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)o[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;o.allBuffers=u,c(t,e,!0,e.length,o,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new i(e)}else{for(;n;){var l=n.chunk,f=n.encoding,d=n.callback;if(c(t,e,!1,e.objectMode?1:l.length,l,f,d),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function d(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function h(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),p(t,e)})}function p(t,e){var n=d(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,v(h,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}var v=t("process-nextick-args");e.exports=a;var g,m=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:v;a.WritableState=s;var y=t("core-util-is");y.inherits=t("inherits");var b={deprecate:t("util-deprecate")},w=t("./internal/streams/stream"),x=t("safe-buffer").Buffer,E=r.Uint8Array||function(){},_=t("./internal/streams/destroy");y.inherits(a,w),s.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(s.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}();var S;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(S=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(t){return!!S.call(this,t)||t&&t._writableState instanceof s}})):S=function(t){return t instanceof this},a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},a.prototype.write=function(t,e,n){var r=this._writableState,i=!1,s=function(t){return x.isBuffer(t)||t instanceof E}(t)&&!r.objectMode;return s&&!x.isBuffer(t)&&(t=function(t){return x.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=o),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),v(e,n)}(this,n):(s||function(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),v(r,o),i=!1),i}(this,r,t,n))&&(r.pendingcb++,i=u(this,r,s,t,e,n)),i},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||f(this,t))},a.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},a.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},a.prototype._writev=null,a.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,p(t,e),n&&(e.finished?v(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),a.prototype.destroy=_.destroy,a.prototype._undestroy=_.undestroy,a.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":492,"./internal/streams/destroy":498,"./internal/streams/stream":499,_process:490,"core-util-is":95,inherits:472,"process-nextick-args":489,"safe-buffer":504,"util-deprecate":508}],497:[function(t,e,n){"use strict";function r(t,e,n){t.copy(e,n)}var i=t("safe-buffer").Buffer;e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e=i.allocUnsafe(t>>>0),n=this.head,o=0;n;)r(n.data,e,o),o+=n.data.length,n=n.next;return e},t}()},{"safe-buffer":504}],498:[function(t,e,n){"use strict";function r(t,e){t.emit("error",e)}var i=t("process-nextick-args");e.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;o||s?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||i(r,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(i(r,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":489}],499:[function(t,e,n){e.exports=t("events").EventEmitter},{events:469}],500:[function(t,e,n){e.exports=t("./readable").PassThrough},{"./readable":501}],501:[function(t,e,n){(n=e.exports=t("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":492,"./lib/_stream_passthrough.js":493,"./lib/_stream_readable.js":494,"./lib/_stream_transform.js":495,"./lib/_stream_writable.js":496}],502:[function(t,e,n){e.exports=t("./readable").Transform},{"./readable":501}],503:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":496}],504:[function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,n){return s(t,e,n)}var o=t("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=o:(r(o,n),n.Buffer=i),r(s,i),i.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,n)},i.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=s(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},{buffer:94}],505:[function(t,e,n){function r(){i.call(this)}e.exports=r;var i=t("events").EventEmitter;t("inherits")(r,i),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,t.end())}function s(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",n),t.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),t.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",n),t.on("drain",r),t._isStdio||e&&!1===e.end||(c.on("end",o),c.on("close",s));var l=!1;return c.on("error",a),t.on("error",a),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},{events:469,inherits:472,"readable-stream/duplex.js":491,"readable-stream/passthrough.js":500,"readable-stream/readable.js":501,"readable-stream/transform.js":502,"readable-stream/writable.js":503}],506:[function(t,e,n){"use strict";function r(t){this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(d.isEncoding===h||!h(t)))throw new Error("Unknown encoding: "+t);return e||t}(t);var e;switch(this.encoding){case"utf16le":this.text=s,this.end=a,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=u,this.end=c,e=3;break;default:return this.write=l,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(e)}function i(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function o(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"".repeat(n);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"".repeat(n+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"".repeat(n+2)}}(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function s(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function a(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function u(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function l(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}var d=t("safe-buffer").Buffer,h=d.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=r,r.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},r.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"".repeat(this.lastTotal-this.lastNeed):e},r.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var o=i(e[r]);return o>=0?(o>0&&(t.lastNeed=o-1),o):--r<n?0:(o=i(e[r]))>=0?(o>0&&(t.lastNeed=o-2),o):--r<n?0:(o=i(e[r]))>=0?(o>0&&(2===o?o=0:t.lastNeed=o-3),o):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},r.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":504}],507:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.spp=t.spp||{})}(this,function(t){"use strict";function e(t,e,i,u,c,l,d,h){this.a={x:t,y:e},this.b={x:i,y:u},this.c={x:c,y:l},this.d={x:d,y:h},null!==d&&void 0!==d&&null!==h&&void 0!==h?(this.getArcLength=f,this.getPoint=s,this.getDerivative=r):(this.getArcLength=a,this.getPoint=o,this.getDerivative=n),this.init()}function n(t,e,n){return{x:2*(1-n)*(t[1]-t[0])+2*n*(t[2]-t[1]),y:2*(1-n)*(e[1]-e[0])+2*n*(e[2]-e[1])}}function r(t,e,n){return o([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],n)}function i(t,e,n,r,i){for(var o=1,s=t/e,a=(t-n(r,i,s))/e;o>.001;){var u=n(r,i,s+a),c=n(r,i,s-a),l=Math.abs(t-u)/e,f=Math.abs(t-c)/e;l<o?(o=l,s+=a):f<o?(o=f,s-=a):a/=2}return s}function o(t,e,n){return{x:(1-n)*(1-n)*t[0]+2*(1-n)*n*t[1]+n*n*t[2],y:(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2]}}function s(t,e,n){return{x:(1-n)*(1-n)*(1-n)*t[0]+3*(1-n)*(1-n)*n*t[1]+3*(1-n)*n*n*t[2]+n*n*n*t[3],y:(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3]}}function a(t,e,n){void 0===n&&(n=1);var r=t[0]-2*t[1]+t[2],i=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],s=2*e[1]-2*e[0],a=4*(r*r+i*i),u=4*(r*o+i*s),c=o*o+s*s;if(0===a)return n*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));var l=u/(2*a),f=n+l,d=c/a-l*l;return Math.sqrt(a)/2*(f*Math.sqrt(f*f+d)-l*Math.sqrt(l*l+d)+d*Math.log(Math.abs((f+Math.sqrt(f*f+d))/(l+Math.sqrt(l*l+d)))))}function u(t,e){return _[t][e]}function c(t,e,n){var r,i,o,s=n.length-1;if(0===s)return 0;if(0===t){for(i=0,o=0;o<=s;o++)i+=u(s,o)*Math.pow(1-e,s-o)*Math.pow(e,o)*n[o];return i}for(r=new Array(s),o=0;o<s;o++)r[o]=s*(n[o+1]-n[o]);return c(t-1,e,r)}function l(t,e,n){var r=c(1,n,t),i=c(1,n,e),o=r*r+i*i;return Math.sqrt(o)}function f(t,e,n){var r,i,o,s;void 0===n&&(n=1);for(r=n/2,i=0,o=0;o<20;o++)s=r*x[20][o]+r,i+=E[20][o]*l(t,e,s);return r*i}function d(t,e,n,r){var i=t*n+e*r;return i>1&&(i=1),i<-1&&(i=-1),(t*r-e*n<0?-1:1)*Math.acos(i)}function h(t,e){var n=4/3*Math.tan(e/4),r=Math.cos(t),i=Math.sin(t),o=Math.cos(t+e),s=Math.sin(t+e);return[r,i,r-i*n,i+r*n,o+s*n,s-o*n,o,s]}function p(t,e,n,r,i,o,s,a,u){var c=0,l=[],f=[];$(t,e,n,r,i,o,s,a,u).forEach(function(t){var e=new w(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),n=e.getTotalLength();c+=n,l.push(n),f.push(e)}),this.length=c,this.partialLengths=l,this.curves=f}function v(t,e,n,r){this.x0=t,this.x1=e,this.y0=n,this.y1=r}var g={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},m=/([astvzqmhlc])([^astvzqmhlc]*)/gi,y=function(t){var e=[];return t.replace(m,function(t,n,r){var i=n.toLowerCase();for(r=function(t){var e=t.match(b);return e?e.map(Number):[]}(r),"m"===i&&r.length>2&&(e.push([n].concat(r.splice(0,2))),i="l",n="m"===n?"l":"L");r.length>=0;){if(r.length===g[i])return r.unshift(n),e.push(r);if(r.length<g[i])throw new Error("malformed path data");e.push([n].concat(r.splice(0,g[i])))}}),e},b=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,w=function(t,n,r,i,o,s,a,u){return new e(t,n,r,i,o,s,a,u)};e.prototype={constructor:e,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){var e=i(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e)},getTangentAtLength:function(t){var e=i(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),r=Math.sqrt(n.x*n.x+n.y*n.y);return r>0?{x:n.x/r,y:n.y/r}:{x:0,y:0}},getPropertiesAtLength:function(t){var e,n=i(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),r=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],n),o=Math.sqrt(r.x*r.x+r.y*r.y);e=o>0?{x:r.x/o,y:r.y/o}:{x:0,y:0};var s=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],n);return{x:s.x,y:s.y,tangentX:e.x,tangentY:e.y}}};var x=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],E=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],_=[[1],[1,1],[1,2,1],[1,3,3,1]],S=2*Math.PI,$=function(t,e,n,r,i,o,s,a,u){var c=Math.sin(i*S/360),l=Math.cos(i*S/360),f=l*(t-a)/2+c*(e-u)/2,p=-c*(t-a)/2+l*(e-u)/2;if(0===f&&0===p)return[];if(0===n||0===r)return[];n=Math.abs(n),r=Math.abs(r);var v=f*f/(n*n)+p*p/(r*r);v>1&&(n*=Math.sqrt(v),r*=Math.sqrt(v));var g=function(t,e,n,r,i,o,s,a,u,c){var l=c*(t-n)/2+u*(e-r)/2,f=-u*(t-n)/2+c*(e-r)/2,h=s*s,p=a*a,v=l*l,g=f*f,m=h*p-h*g-p*v;m<0&&(m=0),m/=h*g+p*v;var y=(m=Math.sqrt(m)*(i===o?-1:1))*s/a*f,b=m*-a/s*l,w=c*y-u*b+(t+n)/2,x=u*y+c*b+(e+r)/2,E=(l-y)/s,_=(f-b)/a,$=(-l-y)/s,T=(-f-b)/a,k=d(1,0,E,_),C=d(E,_,$,T);return 0===o&&C>0&&(C-=S),1===o&&C<0&&(C+=S),[w,x,k,C]}(t,e,a,u,o,s,n,r,c,l),m=[],y=g[2],b=g[3],w=Math.max(Math.ceil(Math.abs(b)/(S/4)),1);b/=w;for(var x=0;x<w;x++)m.push(h(y,b)),y+=b;return m.map(function(t){for(var e=0;e<t.length;e+=2){var i=t[e+0],o=t[e+1],s=l*(i*=n)-c*(o*=r),a=c*i+l*o;t[e+0]=s+g[0],t[e+1]=a+g[1]}return t})},T=function(t,e,n,r,i,o,s,a,u){return new p(t,e,n,r,i,o,s,a,u)};p.prototype={constructor:p,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var n=0,r=0;r<e;r++)n+=this.partialLengths[r];return this.curves[e].getPointAtLength(t-n)},getTangentAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var n=0,r=0;r<e;r++)n+=this.partialLengths[r];return this.curves[e].getTangentAtLength(t-n)},getPropertiesAtLength:function(t){var e=this.getTangentAtLength(t),n=this.getPointAtLength(t);return{x:n.x,y:n.y,tangentX:e.x,tangentY:e.y}}};var k=function(t,e,n,r){return new v(t,e,n,r)};v.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},v.prototype.getPointAtLength=function(t){var e=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),n=(this.x1-this.x0)*e,r=(this.y1-this.y0)*e;return{x:this.x0+n,y:this.y0+r}},v.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},v.prototype.getPropertiesAtLength=function(t){var e=this.getPointAtLength(t),n=this.getTangentAtLength();return{x:e.x,y:e.y,tangentX:n.x,tangentY:n.y}};t.svgPathProperties=function(t){function e(t){if(!t)return null;for(var o,s,a=y(t),u=[0,0],c=[0,0],l=0;l<a.length;l++)"M"===a[l][0]?(s=[(u=[a[l][1],a[l][2]])[0],u[1]],i.push(null)):"m"===a[l][0]?(s=[(u=[a[l][1]+u[0],a[l][2]+u[1]])[0],u[1]],i.push(null)):"L"===a[l][0]?(n+=Math.sqrt(Math.pow(u[0]-a[l][1],2)+Math.pow(u[1]-a[l][2],2)),i.push(new k(u[0],a[l][1],u[1],a[l][2])),u=[a[l][1],a[l][2]]):"l"===a[l][0]?(n+=Math.sqrt(Math.pow(a[l][1],2)+Math.pow(a[l][2],2)),i.push(new k(u[0],a[l][1]+u[0],u[1],a[l][2]+u[1])),u=[a[l][1]+u[0],a[l][2]+u[1]]):"H"===a[l][0]?(n+=Math.abs(u[0]-a[l][1]),i.push(new k(u[0],a[l][1],u[1],u[1])),u[0]=a[l][1]):"h"===a[l][0]?(n+=Math.abs(a[l][1]),i.push(new k(u[0],u[0]+a[l][1],u[1],u[1])),u[0]=a[l][1]+u[0]):"V"===a[l][0]?(n+=Math.abs(u[1]-a[l][1]),i.push(new k(u[0],u[0],u[1],a[l][1])),u[1]=a[l][1]):"v"===a[l][0]?(n+=Math.abs(a[l][1]),i.push(new k(u[0],u[0],u[1],u[1]+a[l][1])),u[1]=a[l][1]+u[1]):"z"===a[l][0]||"Z"===a[l][0]?(n+=Math.sqrt(Math.pow(s[0]-u[0],2)+Math.pow(s[1]-u[1],2)),i.push(new k(u[0],s[0],u[1],s[1])),u=[s[0],s[1]]):"C"===a[l][0]?(o=new w(u[0],u[1],a[l][1],a[l][2],a[l][3],a[l][4],a[l][5],a[l][6]),n+=o.getTotalLength(),u=[a[l][5],a[l][6]],i.push(o)):"c"===a[l][0]?(o=new w(u[0],u[1],u[0]+a[l][1],u[1]+a[l][2],u[0]+a[l][3],u[1]+a[l][4],u[0]+a[l][5],u[1]+a[l][6]),n+=o.getTotalLength(),u=[a[l][5]+u[0],a[l][6]+u[1]],i.push(o)):"S"===a[l][0]?(o=l>0&&["C","c","S","s"].indexOf(a[l-1][0])>-1?new w(u[0],u[1],2*u[0]-a[l-1][a[l-1].length-4],2*u[1]-a[l-1][a[l-1].length-3],a[l][1],a[l][2],a[l][3],a[l][4]):new w(u[0],u[1],u[0],u[1],a[l][1],a[l][2],a[l][3],a[l][4]),n+=o.getTotalLength(),u=[a[l][3],a[l][4]],i.push(o)):"s"===a[l][0]?(o=l>0&&["C","c","S","s"].indexOf(a[l-1][0])>-1?new w(u[0],u[1],u[0]+o.d.x-o.c.x,u[1]+o.d.y-o.c.y,u[0]+a[l][1],u[1]+a[l][2],u[0]+a[l][3],u[1]+a[l][4]):new w(u[0],u[1],u[0],u[1],u[0]+a[l][1],u[1]+a[l][2],u[0]+a[l][3],u[1]+a[l][4]),n+=o.getTotalLength(),u=[a[l][3]+u[0],a[l][4]+u[1]],i.push(o)):"Q"===a[l][0]?(o=u[0]==a[l][1]&&u[1]==a[l][2]?new k(a[l][1],a[l][3],a[l][2],a[l][4]):new w(u[0],u[1],a[l][1],a[l][2],a[l][3],a[l][4]),n+=o.getTotalLength(),i.push(o),u=[a[l][3],a[l][4]],c=[a[l][1],a[l][2]]):"q"===a[l][0]?(o=0!=a[l][1]||0!=a[l][2]?new w(u[0],u[1],u[0]+a[l][1],u[1]+a[l][2],u[0]+a[l][3],u[1]+a[l][4]):new k(u[0]+a[l][1],u[0]+a[l][3],u[1]+a[l][2],u[1]+a[l][4]),n+=o.getTotalLength(),c=[u[0]+a[l][1],u[1]+a[l][2]],u=[a[l][3]+u[0],a[l][4]+u[1]],i.push(o)):"T"===a[l][0]?(o=l>0&&["Q","q","T","t"].indexOf(a[l-1][0])>-1?new w(u[0],u[1],2*u[0]-c[0],2*u[1]-c[1],a[l][1],a[l][2]):new k(u[0],a[l][1],u[1],a[l][2]),i.push(o),n+=o.getTotalLength(),c=[2*u[0]-c[0],2*u[1]-c[1]],u=[a[l][1],a[l][2]]):"t"===a[l][0]?(o=l>0&&["Q","q","T","t"].indexOf(a[l-1][0])>-1?new w(u[0],u[1],2*u[0]-c[0],2*u[1]-c[1],u[0]+a[l][1],u[1]+a[l][2]):new k(u[0],u[0]+a[l][1],u[1],u[1]+a[l][2]),n+=o.getTotalLength(),c=[2*u[0]-c[0],2*u[1]-c[1]],u=[a[l][1]+u[0],a[l][2]+u[0]],i.push(o)):"A"===a[l][0]?(o=new T(u[0],u[1],a[l][1],a[l][2],a[l][3],a[l][4],a[l][5],a[l][6],a[l][7]),n+=o.getTotalLength(),u=[a[l][6],a[l][7]],i.push(o)):"a"===a[l][0]&&(o=new T(u[0],u[1],a[l][1],a[l][2],a[l][3],a[l][4],a[l][5],u[0]+a[l][6],u[1]+a[l][7]),n+=o.getTotalLength(),u=[u[0]+a[l][6],u[1]+a[l][7]],i.push(o)),r.push(n);return e}var n=0,r=[],i=[];e.getTotalLength=function(){return n},e.getPointAtLength=function(t){var e=o(t);return i[e.i].getPointAtLength(e.fraction)},e.getTangentAtLength=function(t){var e=o(t);return i[e.i].getTangentAtLength(e.fraction)},e.getPropertiesAtLength=function(t){var e=o(t);return i[e.i].getPropertiesAtLength(e.fraction)},e.getParts=function(){for(var t=[],e=0;e<i.length;e++)if(null!=i[e]){var n={};n.start=i[e].getPointAtLength(0),n.end=i[e].getPointAtLength(r[e]-r[e-1]),n.length=r[e]-r[e-1],function(t){n.getPointAtLength=function(e){return t.getPointAtLength(e)},n.getTangentAtLength=function(e){return t.getTangentAtLength(e)},n.getPropertiesAtLength=function(e){return t.getPropertiesAtLength(e)}}(i[e]),t.push(n)}return t};var o=function(t){t<0?t=0:t>n&&(t=n);for(var e=r.length-1;r[e]>=t&&r[e]>0;)e--;return e++,{fraction:t-r[e-1],i:e}};return e(t)},t.parse=y,t.Bezier=w,Object.defineProperty(t,"__esModule",{value:!0})})},{}],508:[function(t,e,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(t){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],509:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{dup:97}],510:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],511:[function(t,e,n){(function(e,r){function i(t,e){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(e)?r.showHidden=e:e&&n._extend(r,e),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),a(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function s(t,e){return t}function a(t,e,r){if(t.customInspect&&e&&w(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return p(i)||(i=a(t,i,r)),i}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(p(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(h(e))return t.stylize(""+e,"number");if(f(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(t,e);if(o)return o;var s=Object.keys(e),m=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),b(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(e);if(0===s.length){if(w(e)){var x=e.name?": "+e.name:"";return t.stylize("[Function"+x+"]","special")}if(g(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(y(e))return t.stylize(Date.prototype.toString.call(e),"date");if(b(e))return u(e)}var E="",S=!1,$=["{","}"];if(l(e)&&(S=!0,$=["[","]"]),w(e)){E=" [Function"+(e.name?": "+e.name:"")+"]"}if(g(e)&&(E=" "+RegExp.prototype.toString.call(e)),y(e)&&(E=" "+Date.prototype.toUTCString.call(e)),b(e)&&(E=" "+u(e)),0===s.length&&(!S||0==e.length))return $[0]+E+$[1];if(r<0)return g(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var T;return T=S?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)_(e,String(s))?o.push(c(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(c(t,e,n,r,i,!0))}),o}(t,e,r,m,s):s.map(function(n){return c(t,e,r,m,n,S)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(T,E,$)}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,n,r,i,o){var s,u,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),_(r,i)||(s="["+i+"]"),u||(t.seen.indexOf(c.value)<0?(u=d(n)?a(t,c.value,null):a(t,c.value,n-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n")):u=t.stylize("[Circular]","special")),v(s)){if(o&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function l(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function d(t){return null===t}function h(t){return"number"==typeof t}function p(t){return"string"==typeof t}function v(t){return void 0===t}function g(t){return m(t)&&"[object RegExp]"===x(t)}function m(t){return"object"==typeof t&&null!==t}function y(t){return m(t)&&"[object Date]"===x(t)}function b(t){return m(t)&&("[object Error]"===x(t)||t instanceof Error)}function w(t){return"function"==typeof t}function x(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}function _(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var S=/%[sdj%]/g;n.format=function(t){if(!p(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(S,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),a=r[n];n<o;a=r[++n])d(a)||!m(a)?s+=" "+a:s+=" "+i(a);return s},n.deprecate=function(t,i){if(v(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(!0===e.noDeprecation)return t;var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return t.apply(this,arguments)}};var $,T={};n.debuglog=function(t){if(v($)&&($=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!T[t])if(new RegExp("\\b"+t+"\\b","i").test($)){var r=e.pid;T[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else T[t]=function(){};return T[t]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=l,n.isBoolean=f,n.isNull=d,n.isNullOrUndefined=function(t){return null==t},n.isNumber=h,n.isString=p,n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=v,n.isRegExp=g,n.isObject=m,n.isDate=y,n.isError=b,n.isFunction=w,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t("./support/isBuffer");var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",function(){var t=new Date,e=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":");return[t.getDate(),k[t.getMonth()],e].join(" ")}(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!m(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":510,_process:490,inherits:509}],512:[function(t,e,n){!function(n){"use strict";(typeof define==="function"&&define.amd?define:function(n){e.exports=n(t)})(function(t){return t("./makePromise")({scheduler:new(t("./Scheduler"))(t("./env").asap)})})}()},{"./Scheduler":513,"./env":525,"./makePromise":527}],513:[function(t,e,n){!function(t){"use strict";(typeof define==="function"&&define.amd?define:function(t){e.exports=t()})(function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t})}()},{}],514:[function(t,e,n){!function(t){"use strict";(typeof define==="function"&&define.amd?define:function(t){e.exports=t()})(function(){function t(e){Error.call(this),this.message=e,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t})}()},{}],515:[function(t,e,n){!function(t){"use strict";(typeof define==="function"&&define.amd?define:function(t){e.exports=t()})(function(){function t(t,n){function r(e,r){if(e.i<0)return n(e.f,e.thisArg,e.params,r);t._handler(e.args[e.i]).fold(i,e,void 0,r)}function i(t,e,n){t.params[t.i]=e,t.i-=1,r(t,n)}return arguments.length<2&&(n=e),function(e,i,o){var s=t._defer(),a=o.length;return r({f:e,thisArg:i,args:o,params:new Array(a),i:a-1,call:n},s._handler),s}}function e(t,e,n,r){try{r.resolve(t.apply(e,n))}catch(t){r.reject(t)}}return t.tryCatchResolve=e,t})}()},{}],516:[function(t,e,n){!function(n){"use strict";(typeof define==="function"&&define.amd?define:function(n){e.exports=n(t)})(function(t){var e=t("../state"),n=t("../apply");return function(t){function r(n){var r=t._handler(n);return 0===r.state()?s(n).then(e.fulfilled,e.rejected):(r._unreport(),e.inspect(r))}function i(t){return function(e,n,r){return o(t,void 0,[e,n,r])}}var o=n(t),s=t.resolve,a=t.all,u=Array.prototype.reduce,c=Array.prototype.reduceRight,l=Array.prototype.slice;return t.any=function(e){for(var n,r,i=t._defer(),o=i._handler,s=e.length>>>0,a=s,u=[],c=0;c<s;++c)if(void 0!==(r=e[c])||c in e){if((n=t._handler(r)).state()>0){o.become(n),t._visitRemaining(e,c,n);break}n.visit(o,function(t){u=null,this.resolve(t)},function(t){this.resolved||(u.push(t),0==--a&&this.reject(u))})}else--a;return 0===a&&o.reject(new RangeError("any(): array must not be empty")),i},t.some=function(e,n){var r,i,o,s=t._defer(),a=s._handler,u=[],c=[],l=e.length>>>0,f=0;for(o=0;o<l;++o)(void 0!==(i=e[o])||o in e)&&++f;for(n=Math.max(n,0),r=f-n+1,n>(f=Math.min(n,f))?a.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+f)):0===f&&a.resolve(u),o=0;o<l;++o)(void 0!==(i=e[o])||o in e)&&t._handler(i).visit(a,function(t){this.resolved||(u.push(t),0==--f&&(c=null,this.resolve(u)))},function(t){this.resolved||(c.push(t),0==--r&&(u=null,this.reject(c)))},a.notify);return s},t.settle=function(t){return a(t.map(r))},t.map=function(e,n){return t._traverse(n,e)},t.filter=function(e,n){var r=l.call(e);return t._traverse(n,r).then(function(e){return function(e,n){for(var r=n.length,i=new Array(r),o=0,s=0;o<r;++o)n[o]&&(i[s++]=t._handler(e[o]).value);return i.length=s,i}(r,e)})},t.reduce=function(t,e){return arguments.length>2?u.call(t,i(e),arguments[2]):u.call(t,i(e))},t.reduceRight=function(t,e){return arguments.length>2?c.call(t,i(e),arguments[2]):c.call(t,i(e))},t.prototype.spread=function(t){return this.then(a).then(function(e){return t.apply(this,e)})},t}})}()},{"../apply":515,"../state":528}],517:[function(t,e,n){!function(t){"use strict";(typeof define==="function"&&define.amd?define:function(t){e.exports=t()})(function(){function t(){throw new TypeError("catch predicate must be a function")}function e(t,e){return function(t){return t===Error||null!=t&&t.prototype instanceof Error}(e)?t instanceof e:e(t)}function n(t){return t}return function(r){function i(t,e,n,r){var i=t.call(e);return function(t){return("object"==typeof t||"function"==typeof t)&&null!==t}(i)?function(t,e,n){return o(t).then(function(){return e(n)})}(i,n,r):n(r)}var o=r.resolve,s=r.reject,a=r.prototype.catch;return r.prototype.done=function(t,e){this._handler.visit(this._handler.receiver,t,e)},r.prototype.catch=r.prototype.otherwise=function(n){return arguments.length<2?a.call(this,n):"function"!=typeof n?this.ensure(t):a.call(this,function(t,n){return function(r){return e(r,n)?t.call(this,r):s(r)}}(arguments[1],n))},r.prototype.finally=r.prototype.ensure=function(t){return"function"!=typeof t?this:this.then(function(e){return i(t,this,n,e)},function(e){return i(t,this,s,e)})},r.prototype.else=r.prototype.orElse=function(t){return this.then(void 0,function(){return t})},r.prototype.yield=function(t){return this.then(function(){return t})},r.prototype.tap=function(t){return this.then(t).yield(this)},r}})}()},{}],518:[function(t,e,n){!function(t){"use strict";(typeof define==="function"&&define.amd?define:function(t){e.exports=t()})(function(){return function(t){return t.prototype.fold=function(e,n){var r=this._beget();return this._handler.fold(function(n,r,i){t._handler(n).fold(function(t,n,r){r.resolve(e.call(this,n,t))},r,this,i)},n,r._handler.receiver,r._handler),r},t}})}()},{}],519:[function(t,e,n){!function(n){"use strict";(typeof define==="function"&&define.amd?define:function(n){e.exports=n(t)})(function(t){var e=t("../state").inspect;return function(t){return t.prototype.inspect=function(){return e(t._handler(this))},t}})}()},{"../state":528}],520:[function(t,e,n){!function(t){"use strict";(typeof define==="function"&&define.amd?define:function(t){e.exports=t()})(function(){return function(t){function e(t,r,i,o){function s(o,s){return n(i(o)).then(function(){return e(t,r,i,s)})}return n(o).then(function(e){return n(r(e)).then(function(r){return r?e:n(t(e)).spread(s)})})}var n=t.resolve;return t.iterate=function(t,n,r,i){return e(function(e){return[e,t(e)]},n,r,i)},t.unfold=e,t}})}()},{}],521:[function(t,e,n){!function(t){"use strict";(typeof define==="function"&&define.amd?define:function(t){e.exports=t()})(function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}})}()},{}],522:[function(t,e,n){!function(n){"use strict";(typeof define==="function"&&define.amd?define:function(n){e.exports=n(t)})(function(t){function e(t,e,r,i){return n.setTimer(function(){t(r,i,e)},e)}var n=t("../env"),r=t("../TimeoutError");return function(t){function i(t,n,r){e(o,t,n,r)}function o(t,e){e.resolve(t)}function s(t,e,n){var i=void 0===t?new r("timed out after "+n+"ms"):t;e.reject(i)}return t.prototype.delay=function(t){var e=this._beget();return this._handler.fold(i,t,void 0,e._handler),e},t.prototype.timeout=function(t,r){var i=this._beget(),o=i._handler,a=e(s,t,r,i._handler);return this._handler.visit(o,function(t){n.clearTimer(a),this.resolve(t)},function(t){n.clearTimer(a),this.reject(t)},o.notify),i},t}})}()},{"../TimeoutError":514,"../env":525}],523:[function(t,e,n){!function(n){"use strict";(typeof define==="function"&&define.amd?define:function(n){e.exports=n(t)})(function(t){function e(t){throw t}function n(){}var r=t("../env").setTimer,i=t("../format");return function(t){function o(t){t.handled||(h.push(t),l("Potentially unhandled rejection ["+t.id+"] "+i.formatError(t.value)))}function s(t){var e=h.indexOf(t);e>=0&&(h.splice(e,1),f("Handled previous rejection ["+t.id+"] "+i.formatObject(t.value)))}function a(t,e){d.push(t,e),null===p&&(p=r(u,0))}function u(){for(p=null;d.length>0;)d.shift()(d.shift())}var c,l=n,f=n;"undefined"!=typeof console&&(c=console,l=void 0!==c.error?function(t){c.error(t)}:function(t){c.log(t)},f=void 0!==c.info?function(t){c.info(t)}:function(t){c.log(t)}),t.onPotentiallyUnhandledRejection=function(t){a(o,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){a(s,t)},t.onFatalRejection=function(t){a(e,t.value)};var d=[],h=[],p=null;return t}})}()},{"../env":525,"../format":526}],524:[function(t,e,n){!function(t){"use strict";(typeof define==="function"&&define.amd?define:function(t){e.exports=t()})(function(){return function(t){return t.prototype.with=t.prototype.withThis=function(t){var e=this._beget(),n=e._handler;return n.receiver=t,this._handler.chain(n,t),e},t}})}()},{}],525:[function(t,e,n){(function(n){!function(r){"use strict";(typeof define==="function"&&define.amd?define:function(n){e.exports=n(t)})(function(t){var e,r="undefined"!=typeof setTimeout&&setTimeout,i=function(t,e){return setTimeout(t,e)},o=function(t){return clearTimeout(t)},s=function(t){return r(t,0)};if(void 0!==n&&"[object process]"===Object.prototype.toString.call(n))s=function(t){return n.nextTick(t)};else if(e="function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver)s=function(t){var e,n=document.createTextNode("");new t(function(){var t=e;e=void 0,t()}).observe(n,{characterData:!0});var r=0;return function(t){e=t,n.data=r^=1}}(e);else if(!r){var a=t("vertx");i=function(t,e){return a.setTimer(e,t)},o=a.cancelTimer,s=a.runOnLoop||a.runOnContext}return{setTimer:i,clearTimer:o,asap:s}})}()}).call(this,t("_process"))},{_process:490}],526:[function(t,e,n){!function(t){"use strict";(typeof define==="function"&&define.amd?define:function(t){e.exports=t()})(function(){function t(t){var n=String(t);return"[object Object]"===n&&"undefined"!=typeof JSON&&(n=e(t,n)),n}function e(t,e){try{return JSON.stringify(t)}catch(t){return e}}return{formatError:function(e){var n="object"==typeof e&&null!==e&&e.stack?e.stack:t(e);return e instanceof Error?n:n+" (WARNING: non-Error used)"},formatObject:t,tryStringify:e}})}()},{}],527:[function(t,e,n){(function(t){!function(n){"use strict";(typeof define==="function"&&define.amd?define:function(t){e.exports=t()})(function(){return function(e){function n(t,e){this._handler=t===f?e:function(t){function e(t){n.reject(t)}var n=new h;try{t(function(t){n.resolve(t)},e,function(t){n.notify(t)})}catch(t){e(t)}return n}(t)}function r(t){return S(t)?t:new n(f,new p(c(t)))}function i(t){return new n(f,new p(new m(t)))}function o(){return P}function s(t,e,r){function i(t,e,n){l[t]=e,0==--c&&n.become(new g(l))}for(var o,s="function"==typeof e?function(n,o,s){s.resolved||a(r,i,n,t(e,o,n),s)}:i,u=new h,c=r.length>>>0,l=new Array(c),d=0;d<r.length&&!u.resolved;++d)void 0!==(o=r[d])||d in r?a(r,s,d,o,u):--c;return 0===c&&u.become(new g(l)),new n(f,u)}function a(t,e,n,r,i){if($(r)){var o=function(t){return S(t)?t._handler.join():l(t)}(r),s=o.state();0===s?o.fold(e,n,void 0,i):s>0?e(n,o.value,i):(i.become(o),u(t,n+1,o))}else e(n,r,i)}function u(t,e,n){for(var r=e;r<t.length;++r)!function(t,e){if(t===e)return;var n=t.state();0===n?t.visit(t,void 0,t._unreport):n<0&&t._unreport()}(c(t[r]),n)}function c(t){return S(t)?t._handler.join():$(t)?l(t):new g(t)}function l(t){try{var e=t.then;return"function"==typeof e?new v(e,t):new g(t)}catch(t){return new m(t)}}function f(){}function d(){}function h(t,e){n.createContext(this,e),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function p(t){this.handler=t}function v(t,e){h.call(this),I.enqueue(new E(t,e,this))}function g(t){n.createContext(this),this.value=t}function m(t){n.createContext(this),this.id=++D,this.value=t,this.handled=!1,this.reported=!1,this._report()}function y(t,e){this.rejection=t,this.context=e}function b(t){this.rejection=t}function w(t,e){this.continuation=t,this.handler=e}function x(t,e){this.handler=e,this.value=t}function E(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function _(t,e,n,r){this.f=t,this.z=e,this.c=n,this.to=r,this.resolver=L,this.receiver=this}function S(t){return t instanceof n}function $(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function T(t,e,r,i){if("function"!=typeof t)return i.become(e);n.enterContext(e),function(t,e,n,r){try{r.become(c(t.call(n,e)))}catch(t){r.become(new m(t))}}(t,e.value,r,i),n.exitContext()}function k(t,e,r,i,o){if("function"!=typeof t)return o.become(r);n.enterContext(r),function(t,e,n,r,i){try{t.call(r,e,n,i)}catch(t){i.become(new m(t))}}(t,e,r.value,i,o),n.exitContext()}function C(t,e,n){try{return t(e,n)}catch(t){return i(t)}}function A(t,e){e.prototype=N(t.prototype),e.prototype.constructor=e}function R(t,e){return e}function M(){}var I=e.scheduler,O=void 0!==t&&null!==t&&"function"==typeof t.emit?function(e,n){return"unhandledRejection"===e?t.emit(e,n.value,n):t.emit(e,n)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(t,e,n){var r=!1;try{r=new n("unhandledRejection")instanceof n}catch(t){}return r?function(t,r){var i=new n(t,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!e.dispatchEvent(i)}:t}(M,self,CustomEvent):M,N=Object.create||function(t){function e(){}return e.prototype=t,new e};n.resolve=r,n.reject=i,n.never=o,n._defer=function(){return new n(f,new h)},n._handler=c,n.prototype.then=function(t,e,n){var r=this._handler,i=r.join().state();if("function"!=typeof t&&i>0||"function"!=typeof e&&i<0)return new this.constructor(f,r);var o=this._beget(),s=o._handler;return r.chain(s,r.receiver,t,e,n),o},n.prototype.catch=function(t){return this.then(void 0,t)},n.prototype._beget=function(){return function(t,e){return new e(f,new h(t.receiver,t.join().context))}(this._handler,this.constructor)},n.all=function(t){return s(R,null,t)},n.race=function(t){return"object"!=typeof t||null===t?i(new TypeError("non-iterable passed to race()")):0===t.length?o():1===t.length?r(t[0]):function(t){var e,r,i,o=new h;for(e=0;e<t.length;++e)if(void 0!==(r=t[e])||e in t){if(0!==(i=c(r)).state()){o.become(i),u(t,e+1,i);break}i.visit(o,o.resolve,o.reject)}return new n(f,o)}(t)},n._traverse=function(t,e){return s(C,t,e)},n._visitRemaining=u,f.prototype.when=f.prototype.become=f.prototype.notify=f.prototype.fail=f.prototype._unreport=f.prototype._report=M,f.prototype._state=0,f.prototype.state=function(){return this._state},f.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},f.prototype.chain=function(t,e,n,r,i){this.when({resolver:t,receiver:e,fulfilled:n,rejected:r,progress:i})},f.prototype.visit=function(t,e,n,r){this.chain(L,t,e,n,r)},f.prototype.fold=function(t,e,n,r){this.when(new _(t,e,n,r))},A(f,d),d.prototype.become=function(t){t.fail()};var L=new d;A(f,h),h.prototype._state=0,h.prototype.resolve=function(t){this.become(c(t))},h.prototype.reject=function(t){this.resolved||this.become(new m(t))},h.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if((t=t.handler)===this)return this.handler=new m(new TypeError("Promise cycle"));return t},h.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},h.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&I.enqueue(this),void 0!==this.context&&t._report(this.context))},h.prototype.when=function(t){this.resolved?I.enqueue(new w(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},h.prototype.notify=function(t){this.resolved||I.enqueue(new x(t,this))},h.prototype.fail=function(t){var e=void 0===t?this.context:t;this.resolved&&this.handler.join().fail(e)},h.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},h.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},A(f,p),p.prototype.when=function(t){I.enqueue(new w(t,this))},p.prototype._report=function(t){this.join()._report(t)},p.prototype._unreport=function(){this.join()._unreport()},A(h,v),A(f,g),g.prototype._state=1,g.prototype.fold=function(t,e,n,r){k(t,e,this,n,r)},g.prototype.when=function(t){T(t.fulfilled,this,t.receiver,t.resolver)};var D=0;A(f,m),m.prototype._state=-1,m.prototype.fold=function(t,e,n,r){r.become(this)},m.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),T(t.rejected,this,t.receiver,t.resolver)},m.prototype._report=function(t){I.afterQueue(new y(this,t))},m.prototype._unreport=function(){this.handled||(this.handled=!0,I.afterQueue(new b(this)))},m.prototype.fail=function(t){this.reported=!0,O("unhandledRejection",this),n.onFatalRejection(this,void 0===t?this.context:t)},y.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,O("unhandledRejection",this.rejection)||n.onPotentiallyUnhandledRejection(this.rejection,this.context))},b.prototype.run=function(){this.rejection.reported&&(O("rejectionHandled",this.rejection)||n.onPotentiallyUnhandledRejectionHandled(this.rejection))},n.createContext=n.enterContext=n.exitContext=n.onPotentiallyUnhandledRejection=n.onPotentiallyUnhandledRejectionHandled=n.onFatalRejection=M;var P=new n(f,new f);return w.prototype.run=function(){this.handler.join().when(this.continuation)},x.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,r=0;r<t.length;++r)!function(t,e,r,i,o){if("function"!=typeof t)return o.notify(e);n.enterContext(r),function(t,e,n,r){try{r.notify(t.call(n,e))}catch(t){r.notify(t)}}(t,e,i,o),n.exitContext()}((e=t[r]).progress,this.value,this.handler,e.receiver,e.resolver)},E.prototype.run=function(){var t=this.resolver;!function(t,e,n,r,i){try{t.call(e,n,r,i)}catch(t){r(t)}}(this._then,this.thenable,function(e){t.resolve(e)},function(e){t.reject(e)},function(e){t.notify(e)})},_.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},_.prototype.rejected=function(t){this.to.reject(t)},_.prototype.progress=function(t){this.to.notify(t)},n}})}()}).call(this,t("_process"))},{_process:490}],528:[function(t,e,n){!function(t){"use strict";(typeof define==="function"&&define.amd?define:function(t){e.exports=t()})(function(){function t(){return{state:"pending"}}function e(t){return{state:"rejected",reason:t}}function n(t){return{state:"fulfilled",value:t}}return{pending:t,fulfilled:n,rejected:e,inspect:function(t){var r=t.state();return 0===r?{state:"pending"}:r>0?n(t.value):e(t.value)}}})}()},{}],529:[function(t,e,n){!function(n){"use strict";(typeof define==="function"&&define.amd?define:function(n){e.exports=n(t)})(function(t){function e(t,e,n,r){var i=p.resolve(t);return arguments.length<2?i:i.then(e,n,r)}function n(t){return function(){for(var e=0,n=arguments.length,r=new Array(n);e<n;++e)r[e]=arguments[e];return v(t,this,r)}}function r(t){for(var e=0,n=arguments.length-1,r=new Array(n);e<n;++e)r[e]=arguments[e+1];return v(t,this,r)}var i=t("./lib/decorators/timed"),o=t("./lib/decorators/array"),s=t("./lib/decorators/flow"),a=t("./lib/decorators/fold"),u=t("./lib/decorators/inspect"),c=t("./lib/decorators/iterate"),l=t("./lib/decorators/progress"),f=t("./lib/decorators/with"),d=t("./lib/decorators/unhandledRejection"),h=t("./lib/TimeoutError"),p=[o,s,a,c,l,u,f,i,d].reduce(function(t,e){return e(t)},t("./lib/Promise")),v=t("./lib/apply")(p);return e.promise=function(t){return new p(t)},e.resolve=p.resolve,e.reject=p.reject,e.lift=n,e.try=r,e.attempt=r,e.iterate=p.iterate,e.unfold=p.unfold,e.join=function(){return p.all(arguments)},e.all=function(t){return e(t,p.all)},e.settle=function(t){return e(t,p.settle)},e.any=n(p.any),e.some=n(p.some),e.race=n(p.race),e.map=function(t,n){return e(t,function(t){return p.map(t,n)})},e.filter=function(t,n){return e(t,function(t){return p.filter(t,n)})},e.reduce=n(p.reduce),e.reduceRight=n(p.reduceRight),e.isPromiseLike=function(t){return t&&"function"==typeof t.then},e.Promise=p,e.defer=function(){return new function(){function t(t){r._handler.resolve(t)}function e(t){r._handler.reject(t)}function n(t){r._handler.notify(t)}var r=p._defer();this.promise=r,this.resolve=t,this.reject=e,this.notify=n,this.resolver={resolve:t,reject:e,notify:n}}},e.TimeoutError=h,e})}()},{"./lib/Promise":512,"./lib/TimeoutError":514,"./lib/apply":515,"./lib/decorators/array":516,"./lib/decorators/flow":517,"./lib/decorators/fold":518,"./lib/decorators/inspect":519,"./lib/decorators/iterate":520,"./lib/decorators/progress":521,"./lib/decorators/timed":522,"./lib/decorators/unhandledRejection":523,"./lib/decorators/with":524}]},{},[1]);